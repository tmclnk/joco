{"id":"angular-a792315f","diff":" .../marked/extensions/docs-card/docs-card.mts      | 24 +++++++++++-----------\n .../pipeline/shared/marked/renderer.mts            |  2 ++\n .../shared/marked/test/heading/heading.spec.mts    | 17 +++++++++++++--\n .../shared/marked/test/renderer-context.mts        |  1 +\n .../shared/marked/transformations/heading.mts      |  4 +++-\n .../shared/marked/transformations/link.mts         | 14 ++-----------\n 6 files changed, 35 insertions(+), 27 deletions(-)\n\ndiff --git a/adev/shared-docs/pipeline/shared/marked/extensions/docs-card/docs-card.mts b/adev/shared-docs/pipeline/shared/marked/extensions/docs-card/docs-card.mts\nindex 457936a0..f21fa846 100644\n--- a/adev/shared-docs/pipeline/shared/marked/extensions/docs-card/docs-card.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/extensions/docs-card/docs-card.mts\n@@ -6,9 +6,9 @@\n  * found in the LICENSE file at https://angular.dev/license\n  */\n \n-import {Tokens, Token, RendererThis, TokenizerThis} from \u0027marked\u0027;\n-import {loadWorkspaceRelativeFile, anchorTarget} from \u0027../../helpers.mjs\u0027;\n-import {setInsideLink} from \u0027../../transformations/link.mjs\u0027;\n+import {RendererThis, Token, TokenizerThis, Tokens} from \u0027marked\u0027;\n+import {anchorTarget, loadWorkspaceRelativeFile} from \u0027../../helpers.mjs\u0027;\n+import {AdevDocsRenderer} from \u0027../../renderer.mjs\u0027;\n \n interface DocsCardToken extends Tokens.Generic {\n   type: \u0027docs-card\u0027;\n@@ -67,11 +67,13 @@ export const docsCardExtension \u003d {\n     return undefined;\n   },\n   renderer(this: RendererThis, token: DocsCardToken) {\n-    return token.imgSrc ? getCardWithSvgIllustration(this, token) : getStandardCard(this, token);\n+    return token.imgSrc\n+      ? getCardWithSvgIllustration(this, token)\n+      : getStandardCard(this.parser.renderer as AdevDocsRenderer, token);\n   },\n };\n \n-function getStandardCard(renderer: RendererThis, token: DocsCardToken) {\n+function getStandardCard(renderer: AdevDocsRenderer, token: DocsCardToken) {\n   if (token.iconImgSrc \u0026\u0026 token.href) {\n     // We can assume that all icons are svg files since they are custom.\n     // We need to read svg content, instead of renering svg with `img`,\n@@ -110,13 +112,11 @@ function getStandardCard(renderer: RendererThis, token: DocsCardToken) {\n   `;\n }\n \n-function parseWithoutCreatingLinks(renderer: RendererThis, token: DocsCardToken) {\n-  setInsideLink(true);\n-  try {\n-    return renderer.parser.parse(token.tokens);\n-  } finally {\n-    setInsideLink(false);\n-  }\n+function parseWithoutCreatingLinks(renderer: AdevDocsRenderer, token: DocsCardToken) {\n+  renderer.context.disableAutoLinking \u003d true;\n+  const parsed \u003d renderer.parser.parse(token.tokens);\n+  renderer.context.disableAutoLinking \u003d false;\n+  return parsed;\n }\n \n function getCardWithSvgIllustration(renderer: RendererThis, token: DocsCardToken) {\ndiff --git a/adev/shared-docs/pipeline/shared/marked/renderer.mts b/adev/shared-docs/pipeline/shared/marked/renderer.mts\nindex dc884fae..fe07d2a8 100644\n--- a/adev/shared-docs/pipeline/shared/marked/renderer.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/renderer.mts\n@@ -31,6 +31,8 @@ export interface RendererContext {\n   apiEntries?: Record\u003cstring, {moduleName: string; aliases?: string[]}\u003e;\n   highlighter: HighlighterGeneric\u003cany, any\u003e;\n   headerIds: Map\u003cstring, number\u003e;\n+  /** In the case we want to disable auto-linking because anchor blocks might be incompatible where some code blocks are being rendered */\n+  disableAutoLinking: boolean;\n }\n \n /**\ndiff --git a/adev/shared-docs/pipeline/shared/marked/test/heading/heading.spec.mts b/adev/shared-docs/pipeline/shared/marked/test/heading/heading.spec.mts\nindex 16faedf0..dd3bb563 100644\n--- a/adev/shared-docs/pipeline/shared/marked/test/heading/heading.spec.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/test/heading/heading.spec.mts\n@@ -6,10 +6,10 @@\n  * found in the LICENSE file at https://angular.dev/license\n  */\n \n-import {parseMarkdown} from \u0027../../parse.mjs\u0027;\n-import {resolve} from \u0027node:path\u0027;\n import {readFile} from \u0027fs/promises\u0027;\n import {JSDOM} from \u0027jsdom\u0027;\n+import {resolve} from \u0027node:path\u0027;\n+import {parseMarkdown} from \u0027../../parse.mjs\u0027;\n import {rendererContext} from \u0027../renderer-context.mjs\u0027;\n \n describe(\u0027markdown to html\u0027, () \u003d\u003e {\n@@ -118,4 +118,17 @@ describe(\u0027markdown to html\u0027, () \u003d\u003e {\n \n     expect(h2.firstElementChild!.innerHTML).toBe(\u0027Query for the \u003ccode\u003e\u0026lt;h1\u0026gt;\u003c/code\u003e\u0027);\n   });\n+\n+  it(\u0027shoud now link symbols in headings\u0027, () \u003d\u003e {\n+    const markdownDocument \u003d JSDOM.fragment(\n+      parseMarkdown(\u0027## Hello **NEW** `Router` \u0027, rendererContext),\n+    );\n+    const h2 \u003d markdownDocument.querySelector(\u0027h2\u0027)!;\n+\n+    // The anchor element should be to only child, no nested anchor\n+    expect(h2.children.length).toBe(1);\n+\n+    // We ensure that we still style the heading content\n+    expect(markdownDocument.querySelector(\u0027strong\u0027)).toBeDefined();\n+  });\n });\ndiff --git a/adev/shared-docs/pipeline/shared/marked/test/renderer-context.mts b/adev/shared-docs/pipeline/shared/marked/test/renderer-context.mts\nindex dfaf5ce1..d202cb00 100644\n--- a/adev/shared-docs/pipeline/shared/marked/test/renderer-context.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/test/renderer-context.mts\n@@ -25,6 +25,7 @@ export const rendererContext: RendererContext \u003d {\n     Router: {moduleName: \u0027angular/router\u0027},\n   },\n   headerIds: new Map\u003cstring, number\u003e(),\n+  disableAutoLinking: false,\n };\n \n export async function setHighlighter() {\ndiff --git a/adev/shared-docs/pipeline/shared/marked/transformations/heading.mts b/adev/shared-docs/pipeline/shared/marked/transformations/heading.mts\nindex 3bd651ee..f5ed377e 100644\n--- a/adev/shared-docs/pipeline/shared/marked/transformations/heading.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/transformations/heading.mts\n@@ -13,7 +13,9 @@ export function headingRender(\n   this: AdevDocsRenderer,\n   {depth, tokens, text: headingText, raw}: Tokens.Heading,\n ): string {\n-  const parsedText \u003d this?.parser.parseInline(tokens);\n+  this.context.disableAutoLinking \u003d true;\n+  const parsedText \u003d this?.parser.parseInline(tokens, this);\n+  this.context.disableAutoLinking \u003d false;\n   if (depth \u003d\u003d\u003d 1) {\n     return `\n     \u003cheader class\u003d\"docs-header\"\u003e\ndiff --git a/adev/shared-docs/pipeline/shared/marked/transformations/link.mts b/adev/shared-docs/pipeline/shared/marked/transformations/link.mts\nindex 50263558..d01b65ab 100644\n--- a/adev/shared-docs/pipeline/shared/marked/transformations/link.mts\n+++ b/adev/shared-docs/pipeline/shared/marked/transformations/link.mts\n@@ -6,20 +6,10 @@\n  * found in the LICENSE file at https://angular.dev/license\n  */\n \n+import {Tokens} from \u0027marked\u0027;\n import {anchorTarget} from \u0027../helpers.mjs\u0027;\n-import {Renderer, Tokens} from \u0027marked\u0027;\n import {AdevDocsRenderer} from \u0027../renderer.mjs\u0027;\n \n-/**\n- * Tracks whether the current renderer is inside a link.\n- *\n- * This is necessary because nested links are invalid HTML and can cause rendering issues.\n- */\n-let insideLink \u003d false;\n-export function setInsideLink(value: boolean) {\n-  insideLink \u003d value;\n-}\n-\n export function linkRender(this: AdevDocsRenderer, {href, title, tokens}: Tokens.Link) {\n   // We have render-time check that we don\u0027t create absolute links (which are rendered as external links)\n   // in our guides\n@@ -40,7 +30,7 @@ export function linkRender(this: AdevDocsRenderer, {href, title, tokens}: Tokens\n     );\n   }\n \n-  if (insideLink) {\n+  if (this.context.disableAutoLinking) {\n     return this.parser.parseInline(tokens);\n   }\n ","expectedMessage":"docs(docs-infra): prevent heading from linking symbols","repository":"angular","commitHash":"a792315f095961ad82de8e6b9b77868f8850ac1a","metadata":{}}
{"id":"angular-fa4bcf12","diff":" .github/actions/saucelabs-legacy/action.yml        |  4 +-\n .github/workflows/adev-preview-build.yml           |  8 ++--\n .github/workflows/adev-preview-deploy.yml          |  2 +-\n .../workflows/assistant-to-the-branch-manager.yml  |  2 +-\n .github/workflows/benchmark-compare.yml            |  2 +-\n .github/workflows/ci.yml                           | 50 +++++++++++-----------\n .github/workflows/dev-infra.yml                    |  4 +-\n .github/workflows/google-internal-tests.yml        |  2 +-\n .github/workflows/manual.yml                       |  8 ++--\n .github/workflows/merge-ready-status.yml           |  2 +-\n .github/workflows/perf.yml                         |  6 +--\n .github/workflows/pr.yml                           | 40 ++++++++---------\n MODULE.bazel                                       |  2 +-\n package.json                                       |  2 +-\n pnpm-lock.yaml                                     | 12 +++---\n 15 files changed, 73 insertions(+), 73 deletions(-)\n\ndiff --git a/.github/actions/saucelabs-legacy/action.yml b/.github/actions/saucelabs-legacy/action.yml\nindex 32557209..a1598247 100644\n--- a/.github/actions/saucelabs-legacy/action.yml\n+++ b/.github/actions/saucelabs-legacy/action.yml\n@@ -5,9 +5,9 @@ runs:\n   using: \u0027composite\u0027\n   steps:\n     - name: Setup Bazel\n-      uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n     - name: Setup Saucelabs Variables\n-      uses: angular/dev-infra/github-actions/saucelabs@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      uses: angular/dev-infra/github-actions/saucelabs@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n     - name: Starting Saucelabs tunnel service\n       shell: bash\n       run: ./tools/saucelabs/sauce-service.sh run \u0026\ndiff --git a/.github/workflows/adev-preview-build.yml b/.github/workflows/adev-preview-build.yml\nindex 6efbe3aa..08825399 100644\n--- a/.github/workflows/adev-preview-build.yml\n+++ b/.github/workflows/adev-preview-build.yml\n@@ -21,17 +21,17 @@ jobs:\n       (github.event.action \u003d\u003d \u0027synchronize\u0027 \u0026\u0026 contains(github.event.pull_request.labels.*.name, \u0027adev: preview\u0027))\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Build adev\n         # `snapshot-build` config is used to stamp the exact version with sha in the footer.\n         run: pnpm bazel build //adev:build.production --config\u003dsnapshot-build\n-      - uses: angular/dev-infra/github-actions/previews/pack-and-upload-artifact@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/previews/pack-and-upload-artifact@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           workflow-artifact-name: \u0027adev-preview\u0027\n           pull-number: \u0027${{github.event.pull_request.number}}\u0027\ndiff --git a/.github/workflows/adev-preview-deploy.yml b/.github/workflows/adev-preview-deploy.yml\nindex c176c669..1051040b 100644\n--- a/.github/workflows/adev-preview-deploy.yml\n+++ b/.github/workflows/adev-preview-deploy.yml\n@@ -40,7 +40,7 @@ jobs:\n           npx -y firebase-tools@latest target:clear --config adev/firebase.json --project ${{env.PREVIEW_PROJECT}} hosting angular-docs\n           npx -y firebase-tools@latest target:apply --config adev/firebase.json --project ${{env.PREVIEW_PROJECT}} hosting angular-docs ${{env.PREVIEW_SITE}}\n \n-      - uses: angular/dev-infra/github-actions/previews/upload-artifacts-to-firebase@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/previews/upload-artifacts-to-firebase@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           github-token: \u0027${{secrets.GITHUB_TOKEN}}\u0027\n           workflow-artifact-name: \u0027adev-preview\u0027\ndiff --git a/.github/workflows/assistant-to-the-branch-manager.yml b/.github/workflows/assistant-to-the-branch-manager.yml\nindex 95b5789f..f7625289 100644\n--- a/.github/workflows/assistant-to-the-branch-manager.yml\n+++ b/.github/workflows/assistant-to-the-branch-manager.yml\n@@ -17,6 +17,6 @@ jobs:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n         with:\n           persist-credentials: false\n-      - uses: angular/dev-infra/github-actions/branch-manager@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/branch-manager@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/benchmark-compare.yml b/.github/workflows/benchmark-compare.yml\nindex b198a1e7..fd7acbb2 100644\n--- a/.github/workflows/benchmark-compare.yml\n+++ b/.github/workflows/benchmark-compare.yml\n@@ -38,7 +38,7 @@ jobs:\n \n       - run: pnpm install --frozen-lockfile\n \n-      - uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           bazelrc: ./.bazelrc.user\n \ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex d1be1578..ceb74460 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -21,7 +21,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Check code lint\n@@ -39,13 +39,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           disable-package-manager-cache: true\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -67,11 +67,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -83,11 +83,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -100,11 +100,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -119,11 +119,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -136,11 +136,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - run: echo \"https://${{secrets.SNAPSHOT_BUILDS_GITHUB_TOKEN}}:@github.com\" \u003e ${HOME}/.git_credentials\n@@ -152,11 +152,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -206,11 +206,11 @@ jobs:\n     runs-on: ubuntu-latest-8core\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Build adev\ndiff --git a/.github/workflows/dev-infra.yml b/.github/workflows/dev-infra.yml\nindex 3c0a8223..9f72796f 100644\n--- a/.github/workflows/dev-infra.yml\n+++ b/.github/workflows/dev-infra.yml\n@@ -13,13 +13,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/pull-request-labeling@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/pull-request-labeling@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\n   post_approval_changes:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/post-approval-changes@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/post-approval-changes@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/google-internal-tests.yml b/.github/workflows/google-internal-tests.yml\nindex f997dafe..df65351e 100644\n--- a/.github/workflows/google-internal-tests.yml\n+++ b/.github/workflows/google-internal-tests.yml\n@@ -14,7 +14,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/google-internal-tests@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/google-internal-tests@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           run-tests-guide-url: http://go/angular-g3sync-start\n           github-token: ${{ secrets.GITHUB_TOKEN }}\ndiff --git a/.github/workflows/manual.yml b/.github/workflows/manual.yml\nindex a317ec4a..b6b2a7a5 100644\n--- a/.github/workflows/manual.yml\n+++ b/.github/workflows/manual.yml\n@@ -13,15 +13,15 @@ jobs:\n       JOBS: 2\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Saucelabs Variables\n-        uses: angular/dev-infra/github-actions/saucelabs@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/saucelabs@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Set up Sauce Tunnel Daemon\n         run: pnpm bazel run //tools/saucelabs-daemon/background-service -- $JOBS \u0026\n         env:\ndiff --git a/.github/workflows/merge-ready-status.yml b/.github/workflows/merge-ready-status.yml\nindex 59d3ad0f..3416b1bc 100644\n--- a/.github/workflows/merge-ready-status.yml\n+++ b/.github/workflows/merge-ready-status.yml\n@@ -9,6 +9,6 @@ jobs:\n   status:\n     runs-on: ubuntu-latest\n     steps:\n-      - uses: angular/dev-infra/github-actions/unified-status-check@1ce250a660eca5f613794a32cbae6d0f7a449918\n+      - uses: angular/dev-infra/github-actions/unified-status-check@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/perf.yml b/.github/workflows/perf.yml\nindex f9de7d34..4d68c30e 100644\n--- a/.github/workflows/perf.yml\n+++ b/.github/workflows/perf.yml\n@@ -21,7 +21,7 @@ jobs:\n       workflows: ${{ steps.workflows.outputs.workflows }}\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - id: workflows\n@@ -36,9 +36,9 @@ jobs:\n         workflow: ${{ fromJSON(needs.list.outputs.workflows) }}\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       # We utilize the google-github-actions/auth action to allow us to get an active credential using workflow\ndiff --git a/.github/workflows/pr.yml b/.github/workflows/pr.yml\nindex 7ab3a3d4..c93e49d5 100644\n--- a/.github/workflows/pr.yml\n+++ b/.github/workflows/pr.yml\n@@ -19,7 +19,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Check code lint\n@@ -37,7 +37,7 @@ jobs:\n       - name: Check code format\n         run: pnpm ng-dev format changed --check ${{ github.event.pull_request.base.sha }}\n       - name: Check Package Licenses\n-        uses: angular/dev-infra/github-actions/linting/licenses@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/linting/licenses@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           allow-dependencies-licenses: \u0027pkg:npm/google-protobuf@\u0027\n \n@@ -45,13 +45,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n         with:\n           disable-package-manager-cache: true\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run unit tests\n@@ -71,11 +71,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run CI tests for framework\n@@ -95,11 +95,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run integration CI tests for framework\n@@ -110,11 +110,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run tests\n@@ -127,11 +127,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run tests\n@@ -142,11 +142,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/setup@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@1ce250a660eca5f613794a32cbae6d0f7a449918\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@b816685b6260ab760f1a24fc6f79db9bd1cb4921\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - run: |\ndiff --git a/MODULE.bazel b/MODULE.bazel\nindex c94ea372..a4c34158 100644\n--- a/MODULE.bazel\n+++ b/MODULE.bazel\n@@ -25,7 +25,7 @@ git_override(\n bazel_dep(name \u003d \"devinfra\")\n git_override(\n     module_name \u003d \"devinfra\",\n-    commit \u003d \"1ce250a660eca5f613794a32cbae6d0f7a449918\",\n+    commit \u003d \"b816685b6260ab760f1a24fc6f79db9bd1cb4921\",\n     remote \u003d \"https://github.com/angular/dev-infra.git\",\n )\n \ndiff --git a/package.json b/package.json\nindex d818037f..46afd9b3 100644\n--- a/package.json\n+++ b/package.json\n@@ -161,7 +161,7 @@\n   \"devDependencies\": {\n     \"@actions/core\": \"^2.0.0\",\n     \"@actions/github\": \"^7.0.0\",\n-    \"@angular/ng-dev\": \"https://github.com/angular/dev-infra-private-ng-dev-builds.git#7f29a07e259169c1eb3f1659b75faa164f017972\",\n+    \"@angular/ng-dev\": \"https://github.com/angular/dev-infra-private-ng-dev-builds.git#0b9654158d79ed9bf68866d619ea3a12700ed385\",\n     \"@babel/plugin-proposal-async-generator-functions\": \"7.20.7\",\n     \"@babel/plugin-transform-async-generator-functions\": \"^7.27.1\",\n     \"@bazel/bazelisk\": \"^1.7.5\",\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex 9c41ad36..cf4ef7e3 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -336,8 +336,8 @@ importers:\n         specifier: ^7.0.0\n         version: 7.0.0\n       \u0027@angular/ng-dev\u0027:\n-        specifier: https://github.com/angular/dev-infra-private-ng-dev-builds.git#7f29a07e259169c1eb3f1659b75faa164f017972\n-        version: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/7f29a07e259169c1eb3f1659b75faa164f017972(@modelcontextprotocol/sdk@1.25.2)\n+        specifier: https://github.com/angular/dev-infra-private-ng-dev-builds.git#0b9654158d79ed9bf68866d619ea3a12700ed385\n+        version: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/0b9654158d79ed9bf68866d619ea3a12700ed385(@modelcontextprotocol/sdk@1.25.2)\n       \u0027@babel/plugin-proposal-async-generator-functions\u0027:\n         specifier: 7.20.7\n         version: 7.20.7(@babel/core@7.28.5)\n@@ -1678,9 +1678,9 @@ packages:\n       \u0027@angular/platform-browser\u0027: ^21.0.0-0 || ^21.1.0-0 || ^21.2.0-0 || ^21.3.0-0 || ^22.0.0-0\n       rxjs: ^6.5.3 || ^7.4.0\n \n-  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/7f29a07e259169c1eb3f1659b75faa164f017972\u0027:\n-    resolution: {tarball: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/7f29a07e259169c1eb3f1659b75faa164f017972}\n-    version: 0.0.0-1ce250a660eca5f613794a32cbae6d0f7a449918\n+  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/0b9654158d79ed9bf68866d619ea3a12700ed385\u0027:\n+    resolution: {tarball: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/0b9654158d79ed9bf68866d619ea3a12700ed385}\n+    version: 0.0.0-b816685b6260ab760f1a24fc6f79db9bd1cb4921\n     hasBin: true\n \n   \u0027@angular/ssr@21.1.0-rc.0\u0027:\n@@ -13285,7 +13285,7 @@ snapshots:\n       rxjs: 7.8.2\n       tslib: 2.8.1\n \n-  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/7f29a07e259169c1eb3f1659b75faa164f017972(@modelcontextprotocol/sdk@1.25.2)\u0027:\n+  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/0b9654158d79ed9bf68866d619ea3a12700ed385(@modelcontextprotocol/sdk@1.25.2)\u0027:\n     dependencies:\n       \u0027@actions/core\u0027: 2.0.1\n       \u0027@google-cloud/spanner\u0027: 8.0.0(supports-color@10.2.2)","expectedMessage":"build: update cross-repo angular dependencies","repository":"angular","commitHash":"fa4bcf12cdadebb677f01fe9429b0350ec748d4a","metadata":{}}
{"id":"angular-01592689","diff":" CHANGELOG.md | 247 ++++++++---------------------------------------------------\n 1 file changed, 34 insertions(+), 213 deletions(-)\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 596420e2..9c27ce65 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -1,19 +1,8 @@\n-\u003ca name\u003d\"21.0.9\"\u003e\u003c/a\u003e\n-# 21.0.9 (2026-01-14)\n-### forms\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [82d556a8fb](https://github.com/angular/angular/commit/82d556a8fb38cd2024e3d098c55254305ba12b6b) | fix | Ensure the control instruction comes after the other bindings |\n-| [0055f3cc79](https://github.com/angular/angular/commit/0055f3cc79f387b8dec6ce5e1a33fad5486f9341) | fix | Rename signal form [field] to [formField] |\n-### migrations\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [e4bfa5c9e7](https://github.com/angular/angular/commit/e4bfa5c9e7feec48d3c4e9425a21a2ccf6532bdb) | fix | prevent duplicate imports in common-to-standalone migration |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n-\u003ca name\u003d\"21.1.0-rc.0\"\u003e\u003c/a\u003e\n-# 21.1.0-rc.0 (2026-01-08)\n+\u003ca name\u003d\"21.1.0\"\u003e\u003c/a\u003e\n+# 21.1.0 (2026-01-14)\n+## Deprecations\n+### upgrade\n+- `VERSION` from `@angular/upgrade` is deprecated. Please use the entry from `@angular/upgrade/static` instead.\n ### common\n | Commit | Type | Description |\n | -- | -- | -- |\n@@ -23,17 +12,7 @@\n | Commit | Type | Description |\n | -- | -- | -- |\n | [640693da8e](https://github.com/angular/angular/commit/640693da8e667c015662246152236585d9b24e7f) | feat | Add support for multiple swich cases matching |\n-| [10da2f9029](https://github.com/angular/angular/commit/10da2f9029720e7a647d57921548b39cf11f55dd) | fix | better types for a few expression AST nodes |\n-| [3a56c1367f](https://github.com/angular/angular/commit/3a56c1367f336a7da0ed8dd00c299c8be8da848c) | fix | produce accurate span for typeof and void expressions |\n-| [76fa180005](https://github.com/angular/angular/commit/76fa180005a30b431c133285b68e8398df2e0e52) | fix | provide location information for literal map keys |\n-| [fa7cb4b87a](https://github.com/angular/angular/commit/fa7cb4b87af39f64a77ba930d891ac371a6858e9) | fix | stop ThisReceiver inheritance from ImplicitReceiver |\n | [0ad3adc7c6](https://github.com/angular/angular/commit/0ad3adc7c6d4094f1e3432a3f2e3bdc9862cb4fa) | fix | Support empty cases |\n-### compiler-cli\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [106ba63650](https://github.com/angular/angular/commit/106ba63650340cc828e302dc4eb46dbd4fb43a3b) | fix | ensure component import diagnostics are reported within the `imports` expression |\n-| [3a26244d61](https://github.com/angular/angular/commit/3a26244d61c9233e237817dc861be12dfc4bc918) | fix | fix up spelling of diagnostic |\n-| [f12e160bc1](https://github.com/angular/angular/commit/f12e160bc1010daf582d5f0ab863a16e4b94ca4c) | fix | support qualified names in `typeof` type references |\n ### core\n | Commit | Type | Description |\n | -- | -- | -- |\n@@ -41,30 +20,45 @@\n | [a0dfa5fa86](https://github.com/angular/angular/commit/a0dfa5fa86f40520b0e368a021b3c72009a45e8e) | feat | support rest arguments in function calls |\n | [6e18fa8bc9](https://github.com/angular/angular/commit/6e18fa8bc9d7e6801e2e89e635c2f759dc422317) | feat | support spread elements in array literals |\n | [e407280ab5](https://github.com/angular/angular/commit/e407280ab53cde5f93c3a643457c848845c6ec8b) | feat | support spread expressions in object literals |\n-| [80b0fbba1f](https://github.com/angular/angular/commit/80b0fbba1f9e3a8ce9a89aa88ae3efd4a1f60271) | fix | avoid leaking view data in animations |\n-| [e2a9938c51](https://github.com/angular/angular/commit/e2a9938c517b1e0429818e285ef70b69bf61181b) | fix | explicitly cast signal node value to String |\n-| [30e9c62bdf](https://github.com/angular/angular/commit/30e9c62bdfb8af73c24833473bd4492869538d2d) | fix | fix memory leak with event replay |\n-| [86dc1283e8](https://github.com/angular/angular/commit/86dc1283e8cad0eac1a31bc2c6cff137e6cb2542) | fix | handle cancelled traversals in fake navigation |\n-| [91dc91bae4](https://github.com/angular/angular/commit/91dc91bae4a1bbefc58bef6ef739d0e02ab44d56) | fix | sanitize sensitive attributes on SVG script elements |\n+| [06be8034bb](https://github.com/angular/angular/commit/06be8034bb9b9adfc07ab0d40cd87c6ae5de02de) | fix | Microtask scheduling should be used after any application synchronization |\n+| [b4f584cf42](https://github.com/angular/angular/commit/b4f584cf42235c94bb8389fa55bc634e23d7b010) | fix | return `StaticProvider` for `providePlatformInitializer` |\n ### forms\n | Commit | Type | Description |\n | -- | -- | -- |\n-| [2d85ae5811](https://github.com/angular/angular/commit/2d85ae58115690507d4a47ca5c6a7a642abd1c2e) | feat | add `[formField]` directive |\n-| [89c37f1f7f](https://github.com/angular/angular/commit/89c37f1f7f93ec3746479c73b87b948a6e93dcaa) | fix | allow custom controls to require `dirty` input |\n-| [82edf18427](https://github.com/angular/angular/commit/82edf18427b1fcf7e63cb3ac930dfa1d065a25f1) | fix | allow custom controls to require `hidden` input |\n-| [1a4c3eb1d0](https://github.com/angular/angular/commit/1a4c3eb1d09a5db57a07ea5ed593cbe3e47e8125) | fix | allow custom controls to require `pending` input |\n-| [e7d99f02cb](https://github.com/angular/angular/commit/e7d99f02cba503aa7a30f71d388aef353205fff7) | fix | clean up abort listener after timeout |\n-| [cb09fb8308](https://github.com/angular/angular/commit/cb09fb8308a7c94cca9af6074ef523ce094d5f67) | fix | support custom controls with non signal-based models |\n-| [282220d032](https://github.com/angular/angular/commit/282220d032a64d32c466bb37057c6f91df39bfb3) | fix | Support readonly arrays in signal forms |\n+| [1ea5c97703](https://github.com/angular/angular/commit/1ea5c97703ad3c6d8e4cb1b4297eec57629ce117) | feat | allow focusing bound control from field state |\n+### platform-browser\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [ec9dc94cee](https://github.com/angular/angular/commit/ec9dc94ceeb3c026c64e01c6889b7f5c6fd25a66) | feat | add `context` to `createApplication` |\n+| [ab67988d2e](https://github.com/angular/angular/commit/ab67988d2e5242eff0034483f984428d684acd02) | feat | resolve JIT resources in `createApplication` |\n ### router\n | Commit | Type | Description |\n | -- | -- | -- |\n | [5edceffd04](https://github.com/angular/angular/commit/5edceffd0431f5a25e111a731db521e966b91f86) | feat | add controls for route cleanup |\n+| [a03c82564d](https://github.com/angular/angular/commit/a03c82564da6824e199ff48d5249ea8708040951) | feat | Add scroll behavior controls on router navigation |\n | [e44839b016](https://github.com/angular/angular/commit/e44839b01640505e554fff16f24e08f282a557c0) | feat | Add standalone function to create a comptued for isActive |\n+| [c25d749d85](https://github.com/angular/angular/commit/c25d749d85374fff7745980cd9bb2673c661105a) | feat | Execute RunGuardsAndResolvers function in injection context |\n | [1c00ab42f8](https://github.com/angular/angular/commit/1c00ab42f8714f2775ed75bbf3cdf0fd44ee32c3) | feat | extend paramters of RedirectFunction to include paramMap and queryParamMap |\n | [7003e8d241](https://github.com/angular/angular/commit/7003e8d2417660f71b3a2a017aff3e650c8d9646) | feat | Publish Router\u0027s integration with platform Navigation API as experimental |\n-| [bcef77d950](https://github.com/angular/angular/commit/bcef77d9507e9778c35a6186ef4a8c1d67cd5992) | fix | Fix RouterLink href not updating with `queryParamsHandling` |\n-| [9e043decaf](https://github.com/angular/angular/commit/9e043decaf01dc622236814a2a2db73ec2bffe28) | fix | handle errors from view transition `updateCallbackDone` promise |\n+| [c84d372778](https://github.com/angular/angular/commit/c84d37277874cf7cbd7582a295d796ff113b9cc1) | feat | Support wildcard params with segments trailing ([#64737](https://github.com/angular/angular/pull/64737)) |\n+### upgrade\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [75fe8f8af9](https://github.com/angular/angular/commit/75fe8f8af9488bae6f7068b64d44500643c5d63f) | refactor | deprecate `VERSION` export |\n+\n+\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n+\n+\u003ca name\u003d\"21.0.9\"\u003e\u003c/a\u003e\n+# 21.0.9 (2026-01-14)\n+### forms\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [82d556a8fb](https://github.com/angular/angular/commit/82d556a8fb38cd2024e3d098c55254305ba12b6b) | fix | Ensure the control instruction comes after the other bindings |\n+| [0055f3cc79](https://github.com/angular/angular/commit/0055f3cc79f387b8dec6ce5e1a33fad5486f9341) | fix | Rename signal form [field] to [formField] |\n+### migrations\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [e4bfa5c9e7](https://github.com/angular/angular/commit/e4bfa5c9e7feec48d3c4e9425a21a2ccf6532bdb) | fix | prevent duplicate imports in common-to-standalone migration |\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n@@ -135,53 +129,6 @@\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n-\u003ca name\u003d\"21.1.0-next.4\"\u003e\u003c/a\u003e\n-# 21.1.0-next.4 (2025-12-17)\n-## Breaking Changes\n-### forms\n-- The shape of `SignalFormsConfig.classes` has changed\n-  \n-  Previously each function in the `classes` map took a `FieldState`. Now\n-  it takes a `Field` directive.\n-  \n-  For example if you previously had:\n-  ```\n-  provideSignalFormsConfig({\n-    classes: {\n-      \u0027my-valid\u0027: (state) \u003d\u003e state.valid()\n-    }\n-  })\n-  ```\n-  \n-  You would need to update to:\n-  ```\n-  provideSignalFormsConfig({\n-    classes: {\n-      \u0027my-valid\u0027: ({state}) \u003d\u003e state().valid()\n-    }\n-  })\n-  ```\n-- \n-### core\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [06be8034bb](https://github.com/angular/angular/commit/06be8034bb9b9adfc07ab0d40cd87c6ae5de02de) | fix | Microtask scheduling should be used after any application synchronization |\n-| [b4f584cf42](https://github.com/angular/angular/commit/b4f584cf42235c94bb8389fa55bc634e23d7b010) | fix | return `StaticProvider` for `providePlatformInitializer` |\n-| [7be4ddef1c](https://github.com/angular/angular/commit/7be4ddef1ccb9a6b330b52b9bbdd174089755503) | fix | throw better errors for potential circular references |\n-| [f516370c8e](https://github.com/angular/angular/commit/f516370c8e8e96806bad757d43c857ab5f2051ed) | fix | use mutable ResponseInit type for RESPONSE_INIT token |\n-### forms\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [348f149e8b](https://github.com/angular/angular/commit/348f149e8b06d6885f54bac4cf03a9481a8b19b7) | feat | pass field directive to class config |\n-| [ae0c59028a](https://github.com/angular/angular/commit/ae0c59028a2f393ea5716bf222db2c38e7a3989f) | refactor | rename field to fieldTree in FieldContext and ValidationError |\n-### language-service\n-| Commit | Type | Description |\n-| -- | -- | -- |\n-| [9f5744a92d](https://github.com/angular/angular/commit/9f5744a92dda4219e93bf7e6236d32a93bc167e6) | fix | avoid interpolation highlighting inside @let |\n-| [ce1a4769f9](https://github.com/angular/angular/commit/ce1a4769f987e96e2a1b1cbc7654ed5bac9ce91d) | fix | Prevent language service from crashing on suggestion diagnostic errors |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n \u003ca name\u003d\"21.0.6\"\u003e\u003c/a\u003e\n # 21.0.6 (2025-12-17)\n ## Breaking Changes (affecting only experimental features)\n@@ -229,24 +176,6 @@\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n-\u003ca name\u003d\"21.1.0-next.3\"\u003e\u003c/a\u003e\n-\n-# 21.1.0-next.3 (2025-12-11)\n-\n-### core\n-\n-| Commit                                                                                            | Type | Description                                                                    |\n-| ------------------------------------------------------------------------------------------------- | ---- | ------------------------------------------------------------------------------ |\n-| [4f6014a756a](https://github.com/angular/angular/commit/4f6014a756a95ff9cb55e91deb27039b7eb079ee) | fix  | avoid false-positive deprecation when using `InjectionToken` with factory only |\n-\n-### forms\n-\n-| Commit                                                                                            | Type | Description                 |\n-| ------------------------------------------------------------------------------------------------- | ---- | --------------------------- |\n-| [d0097f7d0c2](https://github.com/angular/angular/commit/d0097f7d0c214c5c3d715e7f1dfa3723b31f4065) | fix  | fix signal forms type error |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n \u003ca name\u003d\"21.0.5\"\u003e\u003c/a\u003e\n \n # 21.0.5 (2025-12-11)\n@@ -265,47 +194,6 @@\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n-\u003ca name\u003d\"21.1.0-next.2\"\u003e\u003c/a\u003e\n-\n-# 21.1.0-next.2 (2025-12-10)\n-\n-## Deprecations\n-\n-### upgrade\n-\n-- `VERSION` from `@angular/upgrade` is deprecated. Please use the entry from `@angular/upgrade/static` instead.\n-\n-### compiler\n-\n-| Commit                                                                                            | Type | Description                       |\n-| ------------------------------------------------------------------------------------------------- | ---- | --------------------------------- |\n-| [ae1c0dc4900](https://github.com/angular/angular/commit/ae1c0dc49002665c10d4e44f530f4cb8d1e35b8d) | perf | chain query creation instructions |\n-\n-### compiler-cli\n-\n-| Commit                                                                                            | Type | Description                                         |\n-| ------------------------------------------------------------------------------------------------- | ---- | --------------------------------------------------- |\n-| [8a3f3a91cf6](https://github.com/angular/angular/commit/8a3f3a91cf6919f11c1583afeb71b65488f8cba4) | fix  | expand type for native controls with a dynamic type |\n-\n-### forms\n-\n-| Commit                                                                                            | Type | Description                                                                                             |\n-| ------------------------------------------------------------------------------------------------- | ---- | ------------------------------------------------------------------------------------------------------- |\n-| [aff8b248b35](https://github.com/angular/angular/commit/aff8b248b35931cbe7d644ad2594144b75064ca6) | feat | expose element on signal forms `Field` directive                                                        |\n-| [ebc5c2b083a](https://github.com/angular/angular/commit/ebc5c2b083a90fde6fced3521be434a414ef29dd) | feat | redo the signal forms metadata API                                                                      |\n-| [9fe95665813](https://github.com/angular/angular/commit/9fe95665813e24544d00dcf463658067da745ac2) | fix  | add signals for dirty, hidden, and pending states in custom controls                                    |\n-| [14713d09923](https://github.com/angular/angular/commit/14713d09923b5315ac7c6f20acc06fc69ff0ed79) | fix  | allow resetting with empty string                                                                       |\n-| [b96f65a963f](https://github.com/angular/angular/commit/b96f65a963febab376f2a783cf4313a8b8140efe) | fix  | memoize reads of child fields in signal forms ([#65802](https://github.com/angular/angular/pull/65802)) |\n-| [179b4cba67b](https://github.com/angular/angular/commit/179b4cba67b95563da27fd5f12dd2acc910a1a52) | fix  | Reuse key in parent in compat structure                                                                 |\n-\n-### upgrade\n-\n-| Commit                                                                                            | Type     | Description                |\n-| ------------------------------------------------------------------------------------------------- | -------- | -------------------------- |\n-| [75fe8f8af94](https://github.com/angular/angular/commit/75fe8f8af9488bae6f7068b64d44500643c5d63f) | refactor | deprecate `VERSION` export |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n \u003ca name\u003d\"21.0.4\"\u003e\u003c/a\u003e\n \n # 21.0.4 (2025-12-10)\n@@ -335,52 +223,6 @@\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n-\u003ca name\u003d\"21.1.0-next.1\"\u003e\u003c/a\u003e\n-\n-# 21.1.0-next.1 (2025-12-03)\n-\n-### compiler\n-\n-| Commit                                                                                           | Type | Description                                                       |\n-| ------------------------------------------------------------------------------------------------ | ---- | ----------------------------------------------------------------- |\n-| [1c6b0704fb](https://github.com/angular/angular/commit/1c6b0704fb63d051fab8acff84d076abfbc4893a) | fix  | prevent XSS via SVG animation `attributeName` and MathML/SVG URLs |\n-\n-### compiler-cli\n-\n-| Commit                                                                                           | Type | Description                                               |\n-| ------------------------------------------------------------------------------------------------ | ---- | --------------------------------------------------------- |\n-| [e30e61b789](https://github.com/angular/angular/commit/e30e61b7893a9b04ada54ab184c24e652dcd114e) | fix  | avoid allocating an object for signals in production mode |\n-| [6773d3b97d](https://github.com/angular/angular/commit/6773d3b97d07dcbf7760c0c12d9384fa60f7082e) | fix  | check that field radio button values are strings          |\n-\n-### core\n-\n-| Commit                                                                                           | Type | Description                                                                                                        |\n-| ------------------------------------------------------------------------------------------------ | ---- | ------------------------------------------------------------------------------------------------------------------ |\n-| [d8ab83ca82](https://github.com/angular/angular/commit/d8ab83ca82c36faacae9fc1a01e9eb9762e679fc) | fix  | run animation queue in environment injector context                                                                |\n-| [886cf6c452](https://github.com/angular/angular/commit/886cf6c452abcf85b70058caeb080ff3a5c51cb9) | fix  | unable to inject viewProviders when host directive with providers is present                                       |\n-| [e6d5632a30](https://github.com/angular/angular/commit/e6d5632a3059a4920f19eb6b193ec7edb11645d4) | perf | tree shake unused dynamic `[field]` binding instructions ([#65599](https://github.com/angular/angular/pull/65599)) |\n-\n-### forms\n-\n-| Commit                                                                                           | Type | Description                                                                                  |\n-| ------------------------------------------------------------------------------------------------ | ---- | -------------------------------------------------------------------------------------------- |\n-| [7d1e502345](https://github.com/angular/angular/commit/7d1e50234515185ee73c8bdd39f7af2a26635ca2) | feat | Allows transforms on `FormUiControl` signals                                                 |\n-| [cd7ae7e2ce](https://github.com/angular/angular/commit/cd7ae7e2ce4648edf62c047b3e453c8b32539d4a) | fix  | support dynamic `[field]` bindings ([#65599](https://github.com/angular/angular/pull/65599)) |\n-\n-### http\n-\n-| Commit                                                                                           | Type | Description                                          |\n-| ------------------------------------------------------------------------------------------------ | ---- | ---------------------------------------------------- |\n-| [0659d11c85](https://github.com/angular/angular/commit/0659d11c854c9c6b886a2e925afef98d70bb005f) | fix  | enable XSRF protection for same-origin absolute URLs |\n-\n-### router\n-\n-| Commit                                                                                           | Type | Description                                         |\n-| ------------------------------------------------------------------------------------------------ | ---- | --------------------------------------------------- |\n-| [b74a0693f2](https://github.com/angular/angular/commit/b74a0693f2409812ad1ab02f19eb3fbe7ce1b83e) | fix  | handle errors from view transition finished promise |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n \u003ca name\u003d\"21.0.3\"\u003e\u003c/a\u003e\n \n # 21.0.3 (2025-12-03)\n@@ -469,27 +311,6 @@\n \n \u003c!-- CHANGELOG SPLIT MARKER --\u003e\n \n-\u003ca name\u003d\"21.1.0-next.0\"\u003e\u003c/a\u003e\n-\n-# 21.1.0-next.0 (2025-11-25)\n-\n-### platform-browser\n-\n-| Commit                                                                                           | Type | Description                                  |\n-| ------------------------------------------------------------------------------------------------ | ---- | -------------------------------------------- |\n-| [ec9dc94cee](https://github.com/angular/angular/commit/ec9dc94ceeb3c026c64e01c6889b7f5c6fd25a66) | feat | add `context` to `createApplication`         |\n-| [ab67988d2e](https://github.com/angular/angular/commit/ab67988d2e5242eff0034483f984428d684acd02) | feat | resolve JIT resources in `createApplication` |\n-\n-### router\n-\n-| Commit                                                                                           | Type | Description                                                                                              |\n-| ------------------------------------------------------------------------------------------------ | ---- | -------------------------------------------------------------------------------------------------------- |\n-| [a03c82564d](https://github.com/angular/angular/commit/a03c82564da6824e199ff48d5249ea8708040951) | feat | Add scroll behavior controls on router navigation                                                        |\n-| [c25d749d85](https://github.com/angular/angular/commit/c25d749d85374fff7745980cd9bb2673c661105a) | feat | Execute RunGuardsAndResolvers function in injection context                                              |\n-| [c84d372778](https://github.com/angular/angular/commit/c84d37277874cf7cbd7582a295d796ff113b9cc1) | feat | Support wildcard params with segments trailing ([#64737](https://github.com/angular/angular/pull/64737)) |\n-\n-\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n-\n \u003ca name\u003d\"20.3.14\"\u003e\u003c/a\u003e\n \n # 20.3.14 (2025-11-25)","expectedMessage":"docs: release notes for the v21.1.0 release","repository":"angular","commitHash":"015926897139e8cc07589a57bdf129caaac3460b","metadata":{}}
{"id":"angular-d12e6f09","diff":" CHANGELOG.md | 14 ++++++++++++++\n 1 file changed, 14 insertions(+)\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex b6b603e0..596420e2 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -1,3 +1,17 @@\n+\u003ca name\u003d\"21.0.9\"\u003e\u003c/a\u003e\n+# 21.0.9 (2026-01-14)\n+### forms\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [82d556a8fb](https://github.com/angular/angular/commit/82d556a8fb38cd2024e3d098c55254305ba12b6b) | fix | Ensure the control instruction comes after the other bindings |\n+| [0055f3cc79](https://github.com/angular/angular/commit/0055f3cc79f387b8dec6ce5e1a33fad5486f9341) | fix | Rename signal form [field] to [formField] |\n+### migrations\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [e4bfa5c9e7](https://github.com/angular/angular/commit/e4bfa5c9e7feec48d3c4e9425a21a2ccf6532bdb) | fix | prevent duplicate imports in common-to-standalone migration |\n+\n+\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n+\n \u003ca name\u003d\"21.1.0-rc.0\"\u003e\u003c/a\u003e\n # 21.1.0-rc.0 (2026-01-08)\n ### common","expectedMessage":"docs: release notes for the v21.0.9 release","repository":"angular","commitHash":"d12e6f0986a3392633604dffab103d46d9974ae8","metadata":{}}
{"id":"angular-3f13db87","diff":" .github/workflows/ci.yml                   |  2 +-\n adev/scripts/synonyms/algolia-synonyms.mts |  2 +-\n adev/scripts/synonyms/tsconfig.json        | 22 ++++++++++++++++++++++\n adev/scripts/synonyms/update-synonyms.mts  |  2 +-\n 4 files changed, 25 insertions(+), 3 deletions(-)\n\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 04ff82f5..d1be1578 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -224,6 +224,6 @@ jobs:\n           configPath: \u0027adev/firebase.json\u0027\n           distDir: \u0027dist/bin/adev/dist\u0027\n       - name: Update Algolia synonym record\n-        run: pnpm tsx adev/scripts/synonyms/update-synonyms.mts\n+        run: node adev/scripts/synonyms/update-synonyms.mts\n         env:\n           ALGOLIA_KEY: ${{ secrets.ALGOLIA_SYNONYM_MANAGER }}\ndiff --git a/adev/scripts/synonyms/algolia-synonyms.mts b/adev/scripts/synonyms/algolia-synonyms.mts\nindex e50c8d28..78fe68c4 100644\n--- a/adev/scripts/synonyms/algolia-synonyms.mts\n+++ b/adev/scripts/synonyms/algolia-synonyms.mts\n@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.dev/license\n  */\n \n-import {SynonymHit} from \u0027algoliasearch\u0027;\n+import {type SynonymHit} from \u0027algoliasearch\u0027;\n \n /**\n  * List of synonyms to upload to algolia.\ndiff --git a/adev/scripts/synonyms/tsconfig.json b/adev/scripts/synonyms/tsconfig.json\nnew file mode 100644\nindex 00000000..7f56507b\n--- /dev/null\n+++ b/adev/scripts/synonyms/tsconfig.json\n@@ -0,0 +1,22 @@\n+{\n+  \"compileOnSave\": false,\n+  \"compilerOptions\": {\n+    \"forceConsistentCasingInFileNames\": true,\n+    \"strict\": true,\n+    \"noImplicitOverride\": true,\n+    \"noPropertyAccessFromIndexSignature\": true,\n+    \"noImplicitReturns\": true,\n+    \"noFallthroughCasesInSwitch\": true,\n+    \"sourceMap\": true,\n+    \"declaration\": false,\n+    \"moduleResolution\": \"bundler\",\n+    \"preserveSymlinks\": true,\n+    \"importHelpers\": true,\n+    \"target\": \"ES2022\",\n+    \"module\": \"ES2022\",\n+    \"allowImportingTsExtensions\": true,\n+    \"lib\": [\"ES2022\"],\n+    \"types\": [],\n+    \"skipLibCheck\": true\n+  }\n+}\ndiff --git a/adev/scripts/synonyms/update-synonyms.mts b/adev/scripts/synonyms/update-synonyms.mts\nindex c0277df8..ee28ec30 100644\n--- a/adev/scripts/synonyms/update-synonyms.mts\n+++ b/adev/scripts/synonyms/update-synonyms.mts\n@@ -7,7 +7,7 @@\n  */\n \n import {algoliasearch} from \u0027algoliasearch\u0027;\n-import synonyms from \u0027./algolia-synonyms.mjs\u0027;\n+import synonyms from \u0027./algolia-synonyms.mts\u0027;\n \n /** The name of the index being updated. */\n const INDEX_NAME \u003d \u0027angular_v17\u0027;","expectedMessage":"ci: update algolia synonym updater to use node directly rather than tsx","repository":"angular","commitHash":"3f13db87e27f6ffc207fc642979776606a71fcec","metadata":{}}
{"id":"angular-724e917f","diff":" adev/shared-docs/pipeline/shared/linking.mts | 3 +++\n 1 file changed, 3 insertions(+)\n\ndiff --git a/adev/shared-docs/pipeline/shared/linking.mts b/adev/shared-docs/pipeline/shared/linking.mts\nindex a51a59bb..87ddb02e 100644\n--- a/adev/shared-docs/pipeline/shared/linking.mts\n+++ b/adev/shared-docs/pipeline/shared/linking.mts\n@@ -20,6 +20,9 @@ const LINK_EXEMPT \u003d new Set([\n   \u0027hidden\u0027,\n   \u0027state\u0027,\n   \u0027group\u0027,\n+  \u0027animation\u0027,\n+  \u0027transition\u0027,\n+  \u0027trigger\u0027,\n ]);\n \n export function shouldLinkSymbol(symbol: string): boolean {","expectedMessage":"docs(docs-infra): Exempts animation-related symbols from linking","repository":"angular","commitHash":"724e917f7a68529996bf1c0e93876b699c544213","metadata":{}}
{"id":"angular-c9f584b9","diff":" adev/src/content/guide/templates/pipes.md | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/adev/src/content/guide/templates/pipes.md b/adev/src/content/guide/templates/pipes.md\nindex 61e558c2..1f8e5cdf 100644\n--- a/adev/src/content/guide/templates/pipes.md\n+++ b/adev/src/content/guide/templates/pipes.md\n@@ -271,7 +271,7 @@ export class MyCustomTransformationPipe implements PipeTransform {\n \n When you want a pipe to detect changes within arrays or objects, it must be marked as an impure function by passing the `pure` flag with a value of `false`.\n \n-Avoid creating impure pipes unless absolutely necessary, as they can incur a significant performance penalty if used without care.\n+IMPORTANT: Avoid creating impure pipes unless absolutely necessary, as they can incur a significant performance penalty if used without care.\n \n ```angular-ts\n import { Pipe, PipeTransform } from \u0027@angular/core\u0027;","expectedMessage":"docs: add IMPORTANT prefix to pipe usage warning and","repository":"angular","commitHash":"c9f584b91859838a4d811842a4f7ee1a7dca8d14","metadata":{}}
{"id":"angular-a904d9f7","diff":" .../src/ngtsc/transform/src/transform.ts           |  11 +-\n .../components_and_directives/GOLDEN_PARTIAL.js    |  33 +++++\n .../components_and_directives/TEST_CASES.json      | 135 +++++++--------------\n .../nested_component_definition.js                 |  10 ++\n .../nested_component_definition.ts                 |  13 ++\n 5 files changed, 105 insertions(+), 97 deletions(-)\n\ndiff --git a/packages/compiler-cli/src/ngtsc/transform/src/transform.ts b/packages/compiler-cli/src/ngtsc/transform/src/transform.ts\nindex ab1dd4d0..098af686 100644\n--- a/packages/compiler-cli/src/ngtsc/transform/src/transform.ts\n+++ b/packages/compiler-cli/src/ngtsc/transform/src/transform.ts\n@@ -136,9 +136,14 @@ class IvyTransformationVisitor extends Visitor {\n   override visitClassDeclaration(\n     node: ts.ClassDeclaration,\n   ): VisitListEntryResult\u003cts.Statement, ts.ClassDeclaration\u003e {\n+    // Node might be modified since results were collected in the compilation phase.\n+    const original \u003d ts.getOriginalNode(node, ts.isClassDeclaration);\n+\n     // If this class is not registered in the map, it means that it doesn\u0027t have Angular decorators,\n     // thus no further processing is required.\n-    if (!this.classCompilationMap.has(node)) {\n+    const compileResults \u003d\n+      this.classCompilationMap.get(node) ?? this.classCompilationMap.get(original);\n+    if (!compileResults) {\n       return {node};\n     }\n \n@@ -153,9 +158,9 @@ class IvyTransformationVisitor extends Visitor {\n \n     // Note: Class may be already transformed by e.g. Tsickle and\n     // not have a direct reference to the source file.\n-    const sourceFile \u003d ts.getOriginalNode(node).getSourceFile();\n+    const sourceFile \u003d original.getSourceFile();\n \n-    for (const field of this.classCompilationMap.get(node)!) {\n+    for (const field of compileResults) {\n       // Type-only member.\n       if (field.initializer \u003d\u003d\u003d null) {\n         continue;\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/GOLDEN_PARTIAL.js b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/GOLDEN_PARTIAL.js\nindex 01af447d..ea806335 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/GOLDEN_PARTIAL.js\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/GOLDEN_PARTIAL.js\n@@ -700,3 +700,36 @@ export declare class MainStandalone {\n     static cmp: i0.ComponentDeclaration\u003cMainStandalone, \"ng-component\", never, {}, {}, never, never, true, never\u003e;\n }\n \n+/****************************************************************************************************\n+ * PARTIAL FILE: nested_component_definition.js\n+ ****************************************************************************************************/\n+import { Component } from \u0027@angular/core\u0027;\n+import * as i0 from \"@angular/core\";\n+class Outer {\n+    constructor() {\n+        class Inner {\n+            static fac \u003d i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: Inner, deps: [], target: i0.FactoryTarget.Component });\n+            static cmp \u003d i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"0.0.0-PLACEHOLDER\", type: Inner, isStandalone: true, selector: \"ng-component\", ngImport: i0, template: \u0027inner\u0027, isInline: true });\n+        }\n+        i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: Inner, decorators: [{\n+                    type: Component,\n+                    args: [{\n+                            template: \u0027inner\u0027,\n+                        }]\n+                }] });\n+    }\n+    static fac \u003d i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: Outer, deps: [], target: i0.FactoryTarget.Component });\n+    static cmp \u003d i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"0.0.0-PLACEHOLDER\", type: Outer, isStandalone: true, selector: \"ng-component\", ngImport: i0, template: \u0027outer\u0027, isInline: true });\n+}\n+i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: Outer, decorators: [{\n+            type: Component,\n+            args: [{\n+                    template: \u0027outer\u0027,\n+                }]\n+        }], ctorParameters: () \u003d\u003e [] });\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: nested_component_definition.d.ts\n+ ****************************************************************************************************/\n+export {};\n+\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/TEST_CASES.json b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/TEST_CASES.json\nindex 6be669ee..87aa86e6 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/TEST_CASES.json\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/TEST_CASES.json\n@@ -3,202 +3,143 @@\n   \"cases\": [\n     {\n       \"description\": \"should instantiate directives in a closure when they are forward referenced\",\n-      \"inputFiles\": [\n-        \"forward_referenced_directive.ts\"\n-      ],\n+      \"inputFiles\": [\"forward_referenced_directive.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"forward_referenced_directive.js\"\n-          ]\n+          \"files\": [\"forward_referenced_directive.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should instantiate pipes in a closure when they are forward referenced\",\n-      \"inputFiles\": [\n-        \"forward_referenced_pipe.ts\"\n-      ],\n+      \"inputFiles\": [\"forward_referenced_pipe.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"forward_referenced_pipe.js\"\n-          ]\n+          \"files\": [\"forward_referenced_pipe.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should split multiple `exportAs` values into an array\",\n-      \"inputFiles\": [\n-        \"export_as.ts\"\n-      ],\n+      \"inputFiles\": [\"export_as.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Incorrect SomeDirective.dir\",\n-          \"files\": [\n-            \"export_as.js\"\n-          ]\n+          \"files\": [\"export_as.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should not generate a selectors array if the directive does not have a selector\",\n-      \"inputFiles\": [\n-        \"no_selector.ts\"\n-      ],\n+      \"inputFiles\": [\"no_selector.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid directive definition\",\n-          \"files\": [\n-            \"no_selector.js\"\n-          ]\n+          \"files\": [\"no_selector.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should generate a pure function for constant object literals\",\n-      \"inputFiles\": [\n-        \"constant_object_literals.ts\"\n-      ],\n+      \"inputFiles\": [\"constant_object_literals.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"constant_object_literals.js\"\n-          ]\n+          \"files\": [\"constant_object_literals.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should generate a pure function for constant array literals\",\n-      \"inputFiles\": [\n-        \"constant_array_literals.ts\"\n-      ],\n+      \"inputFiles\": [\"constant_array_literals.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"constant_array_literals.js\"\n-          ]\n+          \"files\": [\"constant_array_literals.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should not share pure functions between null and object literals\",\n-      \"inputFiles\": [\n-        \"object_literals_null_vs_empty.ts\"\n-      ],\n+      \"inputFiles\": [\"object_literals_null_vs_empty.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"object_literals_null_vs_empty.js\"\n-          ]\n+          \"files\": [\"object_literals_null_vs_empty.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should not share pure functions between null and array literals\",\n-      \"inputFiles\": [\n-        \"array_literals_null_vs_empty.ts\"\n-      ],\n+      \"inputFiles\": [\"array_literals_null_vs_empty.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"array_literals_null_vs_empty.js\"\n-          ]\n+          \"files\": [\"array_literals_null_vs_empty.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should not share pure functions between null and function calls\",\n-      \"inputFiles\": [\n-        \"object_literals_null_vs_function.ts\"\n-      ],\n+      \"inputFiles\": [\"object_literals_null_vs_function.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid component definition\",\n-          \"files\": [\n-            \"object_literals_null_vs_function.js\"\n-          ]\n+          \"files\": [\"object_literals_null_vs_function.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should emit a valid setClassMetadata call in ES5 if a class with a custom decorator is referencing itself inside its own metadata\",\n-      \"inputFiles\": [\n-        \"custom_decorator_es5.ts\"\n-      ],\n+      \"inputFiles\": [\"custom_decorator_es5.ts\"],\n       \"compilerOptions\": {\n         \"target\": \"ES5\"\n       },\n-      \"compilationModeFilter\": [\n-        \"full compile\"\n-      ],\n+      \"compilationModeFilter\": [\"full compile\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Incorrect setClassMetadata call\",\n-          \"files\": [\n-            \"custom_decorator_es5.js\"\n-          ]\n+          \"files\": [\"custom_decorator_es5.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should support empty property bindings on ng-template\",\n-      \"inputFiles\": [\n-        \"ng_template_empty_binding.ts\"\n-      ],\n+      \"inputFiles\": [\"ng_template_empty_binding.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Incorrect template\",\n-          \"files\": [\n-            \"ng_template_empty_binding.js\"\n-          ]\n+          \"files\": [\"ng_template_empty_binding.js\"]\n         }\n       ]\n     },\n     {\n       \"description\": \"should support inline non-literal templates\",\n-      \"inputFiles\": [\n-        \"non_literal_template.ts\"\n-      ]\n+      \"inputFiles\": [\"non_literal_template.ts\"]\n     },\n     {\n       \"description\": \"should support inline non-literal templates using substitution\",\n-      \"inputFiles\": [\n-        \"non_literal_template_with_substitution.ts\"\n-      ]\n+      \"inputFiles\": [\"non_literal_template_with_substitution.ts\"]\n     },\n     {\n       \"description\": \"should support inline non-literal templates using string concatenation\",\n-      \"inputFiles\": [\n-        \"non_literal_template_with_concatenation.ts\"\n-      ]\n+      \"inputFiles\": [\"non_literal_template_with_concatenation.ts\"]\n     },\n     {\n       \"description\": \"should not use reexport names inside declarations when a direct export is available\",\n-      \"inputFiles\": [\n-        \"external_library.d.ts\",\n-        \"library_exports.ts\"\n-      ],\n+      \"inputFiles\": [\"external_library.d.ts\", \"library_exports.ts\"],\n       \"expectations\": [\n         {\n           \"failureMessage\": \"Invalid list of directives\",\n-          \"files\": [\n-            \"library_exports.js\"\n-          ]\n+          \"files\": [\"library_exports.js\"]\n         }\n       ],\n       \"compilerOptions\": {\n         \"baseUrl\": \".\",\n         \"paths\": {\n-          \"external_library\": [\n-            \"./external_library\"\n-          ]\n+          \"external_library\": [\"./external_library\"]\n         }\n       }\n     },\n@@ -209,13 +150,19 @@\n         {\n           \"failureMessage\": \"Incorrect generated debug info statement\",\n           \"files\": [\"debug_info.js\"]\n-        }        \n+        }\n       ],\n-      \"compilationModeFilter\": [\n-        \"full compile\",\n-        \"local compile\",\n-        \"declaration-only emit\"\n+      \"compilationModeFilter\": [\"full compile\", \"local compile\", \"declaration-only emit\"]\n+    },\n+    {\n+      \"description\": \"should support nested component declarations\",\n+      \"inputFiles\": [\"nested_component_definition.ts\"],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Invalid component definition\",\n+          \"files\": [\"nested_component_definition.js\"]\n+        }\n       ]\n     }\n   ]\n-}\n\\ No newline at end of file\n+}\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.js b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.js\nnew file mode 100644\nindex 00000000..f68f23ab\n--- /dev/null\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.js\n@@ -0,0 +1,10 @@\n+class Outer {\n+  constructor() {\n+    class Inner {\n+      static fac \u003d \n+      static cmp \u003d \n+    }\n+  }\n+\n+  \n+}\n\\ No newline at end of file\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.ts b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.ts\nnew file mode 100644\nindex 00000000..9a1abccc\n--- /dev/null\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/nested_component_definition.ts\n@@ -0,0 +1,13 @@\n+import {Component} from \u0027@angular/core\u0027;\n+\n+@Component({\n+  template: \u0027outer\u0027,\n+})\n+class Outer {\n+  constructor() {\n+    @Component({\n+      template: \u0027inner\u0027,\n+    })\n+    class Inner {}\n+  }\n+}","expectedMessage":"fix(compiler-cli): support nested component declaration","repository":"angular","commitHash":"a904d9f77b56feab407f75f8d0527fa512d5dafb","metadata":{}}
{"id":"angular-074666b2","diff":" .../components/search-dialog/search-dialog.component.ts            | 3 +--\n .../references/api-reference-list/api-reference-list.component.ts  | 7 ++-----\n 2 files changed, 3 insertions(+), 7 deletions(-)\n\ndiff --git a/adev/shared-docs/components/search-dialog/search-dialog.component.ts b/adev/shared-docs/components/search-dialog/search-dialog.component.ts\nindex 4eb83ac6..688d3fa7 100644\n--- a/adev/shared-docs/components/search-dialog/search-dialog.component.ts\n+++ b/adev/shared-docs/components/search-dialog/search-dialog.component.ts\n@@ -54,7 +54,6 @@ export class SearchDialog {\n   readonly onClose \u003d output();\n   readonly dialog \u003d viewChild.required\u003cElementRef\u003cHTMLDialogElement\u003e\u003e(\u0027searchDialog\u0027);\n   readonly items \u003d viewChildren(SearchItem);\n-  readonly textField \u003d viewChild(TextField);\n \n   readonly history \u003d inject(SearchHistory);\n   private readonly search \u003d inject(Search);\n@@ -98,7 +97,7 @@ export class SearchDialog {\n         }\n         // We want to select the pre-existing text on opening\n         // In order to change the search input with minimal user interaction.\n-        this.textField()?.input().nativeElement.select();\n+        this.searchForm().focusBoundControl();\n       },\n     });\n \ndiff --git a/adev/src/app/features/references/api-reference-list/api-reference-list.component.ts b/adev/src/app/features/references/api-reference-list/api-reference-list.component.ts\nindex e4099e3e..770395ad 100644\n--- a/adev/src/app/features/references/api-reference-list/api-reference-list.component.ts\n+++ b/adev/src/app/features/references/api-reference-list/api-reference-list.component.ts\n@@ -18,7 +18,6 @@ import {\n   inject,\n   input,\n   linkedSignal,\n-  viewChild,\n } from \u0027@angular/core\u0027;\n import {Select, SelectOption, TextField} from \u0027@angular/docs\u0027;\n import {FormField, form} from \u0027@angular/forms/signals\u0027;\n@@ -62,7 +61,6 @@ export default class ApiReferenceList {\n   // services\n   private readonly apiReferenceManager \u003d inject(ApiReferenceManager);\n   private readonly router \u003d inject(Router);\n-  private readonly filterInput \u003d viewChild.required(TextField);\n   private readonly injector \u003d inject(EnvironmentInjector);\n \n   // inputs\n@@ -137,13 +135,12 @@ export default class ApiReferenceList {\n \n   constructor() {\n     effect(() \u003d\u003e {\n-      const filterInput \u003d this.filterInput();\n+      const filterInput \u003d this.form.query();\n       afterNextRender(\n         {\n           write: () \u003d\u003e {\n-            // Why not improve this once https://github.com/orgs/angular/projects/60?pane\u003dissue\u0026itemId\u003d143488813 is done\n             if (matchMedia(\u0027(hover: hover) and (pointer:fine)\u0027).matches) {\n-              scheduleOnIdle(() \u003d\u003e filterInput.focus());\n+              scheduleOnIdle(() \u003d\u003e filterInput.focusBoundControl());\n             }\n           },\n         },","expectedMessage":"docs(docs-infra): use Signals Forms focusBoundControl","repository":"angular","commitHash":"074666b2e8c3c8e2b7bc473f8d5772ebec4fc586","metadata":{}}
{"id":"angular-4c2d860c","diff":" .nvmrc            |   2 +-\n MODULE.bazel      |  16 +-\n MODULE.bazel.lock | 466 +++++++++++++++++++++++++++---------------------------\n 3 files changed, 242 insertions(+), 242 deletions(-)\n\ndiff --git a/.nvmrc b/.nvmrc\nindex 5767036a..85e50277 100644\n--- a/.nvmrc\n+++ b/.nvmrc\n@@ -1 +1 @@\n-22.21.1\n+22.22.0\ndiff --git a/MODULE.bazel b/MODULE.bazel\nindex c28f53c7..0c64d6d6 100644\n--- a/MODULE.bazel\n+++ b/MODULE.bazel\n@@ -49,15 +49,15 @@ use_repo(yq, \"yq_toolchains\")\n node \u003d use_extension(\"@rules_nodejs//nodejs:extensions.bzl\", \"node\")\n node.toolchain(\n     node_repositories \u003d {\n-        \"22.21.1-darwin_arm64\": (\"node-v22.21.1-darwin-arm64.tar.gz\", \"node-v22.21.1-darwin-arm64\", \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"),\n-        \"22.21.1-darwin_amd64\": (\"node-v22.21.1-darwin-x64.tar.gz\", \"node-v22.21.1-darwin-x64\", \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"),\n-        \"22.21.1-linux_arm64\": (\"node-v22.21.1-linux-arm64.tar.xz\", \"node-v22.21.1-linux-arm64\", \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"),\n-        \"22.21.1-linux_ppc64le\": (\"node-v22.21.1-linux-ppc64le.tar.xz\", \"node-v22.21.1-linux-ppc64le\", \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"),\n-        \"22.21.1-linux_s390x\": (\"node-v22.21.1-linux-s390x.tar.xz\", \"node-v22.21.1-linux-s390x\", \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"),\n-        \"22.21.1-linux_amd64\": (\"node-v22.21.1-linux-x64.tar.xz\", \"node-v22.21.1-linux-x64\", \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"),\n-        \"22.21.1-windows_amd64\": (\"node-v22.21.1-win-x64.zip\", \"node-v22.21.1-win-x64\", \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"),\n+        \"22.22.0-darwin_arm64\": (\"node-v22.22.0-darwin-arm64.tar.gz\", \"node-v22.22.0-darwin-arm64\", \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"),\n+        \"22.22.0-darwin_amd64\": (\"node-v22.22.0-darwin-x64.tar.gz\", \"node-v22.22.0-darwin-x64\", \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"),\n+        \"22.22.0-linux_arm64\": (\"node-v22.22.0-linux-arm64.tar.xz\", \"node-v22.22.0-linux-arm64\", \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"),\n+        \"22.22.0-linux_ppc64le\": (\"node-v22.22.0-linux-ppc64le.tar.xz\", \"node-v22.22.0-linux-ppc64le\", \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"),\n+        \"22.22.0-linux_s390x\": (\"node-v22.22.0-linux-s390x.tar.xz\", \"node-v22.22.0-linux-s390x\", \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"),\n+        \"22.22.0-linux_amd64\": (\"node-v22.22.0-linux-x64.tar.xz\", \"node-v22.22.0-linux-x64\", \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"),\n+        \"22.22.0-windows_amd64\": (\"node-v22.22.0-win-x64.zip\", \"node-v22.22.0-win-x64\", \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"),\n     },\n-    node_version \u003d \"22.21.1\",\n+    node_version \u003d \"22.22.0\",\n )\n use_repo(node, \"nodejs_toolchains\")\n use_repo(node, \"nodejs_darwin_amd64\")\ndiff --git a/MODULE.bazel.lock b/MODULE.bazel.lock\nindex 963c800f..be2c4e27 100644\n--- a/MODULE.bazel.lock\n+++ b/MODULE.bazel.lock\n@@ -1087,7 +1087,7 @@\n     \"@@rules_nodejs+//nodejs:extensions.bzl%node\": {\n       \"general\": {\n         \"bzlTransitiveDigest\": \"NwcLXHrbh2hoorA/Ybmcpjxsn/6avQmewDglodkDrgo\u003d\",\n-        \"usagesDigest\": \"6zqbiJMe63ISwLi85YnsFYWZh7eO1/JBkk3WkjOnqxc\u003d\",\n+        \"usagesDigest\": \"T3gjlzx8790k9gVB7W62mx5xJN1PsdmHx9Cnyq8U3FE\u003d\",\n         \"recordedFileInputs\": {},\n         \"recordedDirentsInputs\": {},\n         \"envVariables\": {},\n@@ -1097,46 +1097,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"linux_amd64\"\n             }\n@@ -1146,46 +1146,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"linux_arm64\"\n             }\n@@ -1195,46 +1195,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"linux_s390x\"\n             }\n@@ -1244,46 +1244,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"linux_ppc64le\"\n             }\n@@ -1293,46 +1293,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"darwin_amd64\"\n             }\n@@ -1342,46 +1342,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"darwin_arm64\"\n             }\n@@ -1391,46 +1391,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"windows_amd64\"\n             }\n@@ -1440,46 +1440,46 @@\n             \"attributes\": {\n               \"node_download_auth\": {},\n               \"node_repositories\": {\n-                \"22.21.1-darwin_arm64\": [\n-                  \"node-v22.21.1-darwin-arm64.tar.gz\",\n-                  \"node-v22.21.1-darwin-arm64\",\n-                  \"c170d6554fba83d41d25a76cdbad85487c077e51fa73519e41ac885aa429d8af\"\n+                \"22.22.0-darwin_arm64\": [\n+                  \"node-v22.22.0-darwin-arm64.tar.gz\",\n+                  \"node-v22.22.0-darwin-arm64\",\n+                  \"5ed4db0fcf1eaf84d91ad12462631d73bf4576c1377e192d222e48026a902640\"\n                 ],\n-                \"22.21.1-darwin_amd64\": [\n-                  \"node-v22.21.1-darwin-x64.tar.gz\",\n-                  \"node-v22.21.1-darwin-x64\",\n-                  \"8e3dc89614debe66c2a6ad2313a1adb06eb37db6cd6c40d7de6f7d987f7d1afd\"\n+                \"22.22.0-darwin_amd64\": [\n+                  \"node-v22.22.0-darwin-x64.tar.gz\",\n+                  \"node-v22.22.0-darwin-x64\",\n+                  \"5ea50c9d6dea3dfa3abb66b2656f7a4e1c8cef23432b558d45fb538c7b5dedce\"\n                 ],\n-                \"22.21.1-linux_arm64\": [\n-                  \"node-v22.21.1-linux-arm64.tar.xz\",\n-                  \"node-v22.21.1-linux-arm64\",\n-                  \"e660365729b434af422bcd2e8e14228637ecf24a1de2cd7c916ad48f2a0521e1\"\n+                \"22.22.0-linux_arm64\": [\n+                  \"node-v22.22.0-linux-arm64.tar.xz\",\n+                  \"node-v22.22.0-linux-arm64\",\n+                  \"1bf1eb9ee63ffc4e5d324c0b9b62cf4a289f44332dfef9607cea1a0d9596ba6f\"\n                 ],\n-                \"22.21.1-linux_ppc64le\": [\n-                  \"node-v22.21.1-linux-ppc64le.tar.xz\",\n-                  \"node-v22.21.1-linux-ppc64le\",\n-                  \"6f2b6aa1519a8f50a66b0ae7e94d2feeadfe9aa98095c737c2fc67df25012845\"\n+                \"22.22.0-linux_ppc64le\": [\n+                  \"node-v22.22.0-linux-ppc64le.tar.xz\",\n+                  \"node-v22.22.0-linux-ppc64le\",\n+                  \"d83b9957431cc18e1fc143a4b99f89cde7b8a18f53ef392231b4336afd058865\"\n                 ],\n-                \"22.21.1-linux_s390x\": [\n-                  \"node-v22.21.1-linux-s390x.tar.xz\",\n-                  \"node-v22.21.1-linux-s390x\",\n-                  \"c473e8e7eb46aa93e1580736ce240ba4cf3b22dc45a47118359e85508b63e211\"\n+                \"22.22.0-linux_s390x\": [\n+                  \"node-v22.22.0-linux-s390x.tar.xz\",\n+                  \"node-v22.22.0-linux-s390x\",\n+                  \"5aa0e520689448c4233e8d73f284e8e0634fdcd32b479735698494be5641f3e4\"\n                 ],\n-                \"22.21.1-linux_amd64\": [\n-                  \"node-v22.21.1-linux-x64.tar.xz\",\n-                  \"node-v22.21.1-linux-x64\",\n-                  \"680d3f30b24a7ff24b98db5e96f294c0070f8f9078df658da1bce1b9c9873c88\"\n+                \"22.22.0-linux_amd64\": [\n+                  \"node-v22.22.0-linux-x64.tar.xz\",\n+                  \"node-v22.22.0-linux-x64\",\n+                  \"9aa8e9d2298ab68c600bd6fb86a6c13bce11a4eca1ba9b39d79fa021755d7c37\"\n                 ],\n-                \"22.21.1-windows_amd64\": [\n-                  \"node-v22.21.1-win-x64.zip\",\n-                  \"node-v22.21.1-win-x64\",\n-                  \"3c624e9fbe07e3217552ec52a0f84e2bdc2e6ffa7348f3fdfb9fbf8f42e23fcf\"\n+                \"22.22.0-windows_amd64\": [\n+                  \"node-v22.22.0-win-x64.zip\",\n+                  \"node-v22.22.0-win-x64\",\n+                  \"c97fa376d2becdc8863fcd3ca2dd9a83a9f3468ee7ccf7a6d076ec66a645c77a\"\n                 ]\n               },\n               \"node_urls\": [\n                 \"https://nodejs.org/dist/v{version}/{filename}\"\n               ],\n-              \"node_version\": \"22.21.1\",\n+              \"node_version\": \"22.22.0\",\n               \"include_headers\": false,\n               \"platform\": \"windows_arm64\"\n             }","expectedMessage":"build: update dependency node to v22.22.0","repository":"angular","commitHash":"4c2d860c5f2be970db6320272bbea1197b2f141c","metadata":{}}
{"id":"angular-551f1205","diff":" .bazelversion     | 2 +-\n MODULE.bazel.lock | 4 ++--\n 2 files changed, 3 insertions(+), 3 deletions(-)\n\ndiff --git a/.bazelversion b/.bazelversion\nindex 6d289079..f9c71a52 100644\n--- a/.bazelversion\n+++ b/.bazelversion\n@@ -1 +1 @@\n-8.5.0\n+8.5.1\ndiff --git a/MODULE.bazel.lock b/MODULE.bazel.lock\nindex 6dec6aa9..963c800f 100644\n--- a/MODULE.bazel.lock\n+++ b/MODULE.bazel.lock\n@@ -412,7 +412,7 @@\n     },\n     \"@@aspect_rules_js+//npm:extensions.bzl%pnpm\": {\n       \"general\": {\n-        \"bzlTransitiveDigest\": \"zVV86HvMwDBJ8IsFt27k/Sjq0vCMPr8b8X9OAuprQ6w\u003d\",\n+        \"bzlTransitiveDigest\": \"VaGKuK2sKVTWlq9QBZfNc4fhigCeN9Wt4YhnhdGUkv8\u003d\",\n         \"usagesDigest\": \"V3eYj3dhR+UR/L7u17ZGfCuqJZpobNrN/6oEZPkZgDc\u003d\",\n         \"recordedFileInputs\": {},\n         \"recordedDirentsInputs\": {},\n@@ -1508,7 +1508,7 @@\n     },\n     \"@@rules_python+//python/extensions:pip.bzl%pip\": {\n       \"general\": {\n-        \"bzlTransitiveDigest\": \"39J6fxZx6VyebAMZs6LDsQSGw91SROMECqQx77bSJqE\u003d\",\n+        \"bzlTransitiveDigest\": \"rPZpN8uoLnuu3B+LRiijfMadoMlO1/dxOO8/emPCZV4\u003d\",\n         \"usagesDigest\": \"/9NP3RV6/DWuNdYAsIU/8UCgCX0TdPUJr0X6O+0lrtk\u003d\",\n         \"recordedFileInputs\": {\n           \"@@protobuf+//python/requirements.txt\": \"983be60d3cec4b319dcab6d48aeb3f5b2f7c3350f26b3a9e97486c37967c73c5\",","expectedMessage":"build: update dependency bazel to v8.5.1","repository":"angular","commitHash":"551f120530353d5201667152bbae3cbdd2428759","metadata":{}}
{"id":"angular-710a4bf0","diff":" .github/actions/deploy-docs-site/lib/sitemap.mts | 58 +++++++++++++++--------\n .github/actions/deploy-docs-site/main.js         | 60 +++++++++++++++---------\n 2 files changed, 76 insertions(+), 42 deletions(-)\n\ndiff --git a/.github/actions/deploy-docs-site/lib/sitemap.mts b/.github/actions/deploy-docs-site/lib/sitemap.mts\nindex 19bec71e..d453afdf 100644\n--- a/.github/actions/deploy-docs-site/lib/sitemap.mts\n+++ b/.github/actions/deploy-docs-site/lib/sitemap.mts\n@@ -1,33 +1,53 @@\n import {Deployment} from \u0027./deployments.mjs\u0027;\n-import {join} from \u0027path\u0027;\n-import {readFileSync, writeFileSync} from \u0027fs\u0027;\n-\n-export async function generateSitemap(deployment: Deployment, distDir: string) {\n-  const servingUrlWithoutEndingSlash \u003d deployment.servingUrl.endsWith(\u0027/\u0027)\n-    ? deployment.servingUrl.slice(0, -1)\n-    : deployment.servingUrl;\n+import {join} from \u0027node:path\u0027;\n+import {readFile, writeFile} from \u0027node:fs/promises\u0027;\n \n+export async function generateSitemap(deployment: Deployment, distDir: string): Promise\u003cvoid\u003e {\n   /** Timestamp string used to of the last file update. */\n   const lastModifiedTimestamp \u003d new Date().toISOString();\n   /** An object containing all of the routes available within the application. */\n-  const routes \u003d JSON.parse(readFileSync(join(distDir, \u0027prerendered-routes.json\u0027), \u0027utf-8\u0027));\n+  const {routes} \u003d JSON.parse(await readFile(join(distDir, \u0027prerendered-routes.json\u0027), \u0027utf-8\u0027));\n+  const routePaths \u003d Object.keys(routes);\n+\n   /** The generated sitemap string. */\n   const sitemap \u003d `\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n   \u003curlset xmlns\u003d\"http://www.sitemaps.org/schemas/sitemap/0.9\"\u003e\n-  ${Object.keys(routes.routes)\n-    .map((route) \u003d\u003e {\n-      const routeWithoutLeadingSlash \u003d route.startsWith(\u0027/\u0027) ? route.slice(1) : route;\n-      return `\n-    \u003curl\u003e\n-      \u003cloc\u003e${servingUrlWithoutEndingSlash}/${routeWithoutLeadingSlash}\u003c/loc\u003e\n+  ${routePaths\n+    .map(\n+      (route) \u003d\u003e `\u003curl\u003e\n+      \u003cloc\u003e${joinUrlParts(deployment.servingUrl, route)}\u003c/loc\u003e\n       \u003clastmod\u003e${lastModifiedTimestamp}\u003c/lastmod\u003e\n       \u003cchangefreq\u003edaily\u003c/changefreq\u003e\n       \u003cpriority\u003e1.0\u003c/priority\u003e\n-    \u003c/url\u003e\n-        `;\n-    })\n+    \u003c/url\u003e`,\n+    )\n     .join(\u0027\u0027)}\n   \u003c/urlset\u003e`;\n-  writeFileSync(join(distDir, \u0027browser\u0027, \u0027sitemap.xml\u0027), sitemap, \u0027utf-8\u0027);\n-  console.log(`Generated sitemap with ${Object.keys(routes.routes).length} entries.`);\n+\n+  await writeFile(join(distDir, \u0027browser\u0027, \u0027sitemap.xml\u0027), sitemap, \u0027utf-8\u0027);\n+\n+  console.log(`Generated sitemap with ${routePaths.length} entries.`);\n+}\n+\n+function joinUrlParts(...parts: string[]): string {\n+  const normalizeParts: string[] \u003d [];\n+  for (const part of parts) {\n+    if (part \u003d\u003d\u003d \u0027\u0027) {\n+      // Skip any empty parts\n+      continue;\n+    }\n+\n+    let normalizedPart \u003d part;\n+    if (part[0] \u003d\u003d\u003d \u0027/\u0027) {\n+      normalizedPart \u003d normalizedPart.slice(1);\n+    }\n+    if (part.at(-1) \u003d\u003d\u003d \u0027/\u0027) {\n+      normalizedPart \u003d normalizedPart.slice(0, -1);\n+    }\n+    if (normalizedPart !\u003d\u003d \u0027\u0027) {\n+      normalizeParts.push(normalizedPart);\n+    }\n+  }\n+\n+  return normalizeParts.join(\u0027/\u0027);\n }\ndiff --git a/.github/actions/deploy-docs-site/main.js b/.github/actions/deploy-docs-site/main.js\nindex 602c8a8b..97e2d6a6 100644\n--- a/.github/actions/deploy-docs-site/main.js\n+++ b/.github/actions/deploy-docs-site/main.js\n@@ -1500,7 +1500,7 @@ var require_summary \u003d __commonJS({\n     exports.summary \u003d exports.markdownSummary \u003d exports.SUMMARY_DOCS_URL \u003d exports.SUMMARY_ENV_VAR \u003d void 0;\n     var os_1 \u003d __require(\"os\");\n     var fs_1 \u003d __require(\"fs\");\n-    var { access, appendFile, writeFile: writeFile3 } \u003d fs_1.promises;\n+    var { access, appendFile, writeFile: writeFile4 } \u003d fs_1.promises;\n     exports.SUMMARY_ENV_VAR \u003d \"GITHUB_STEP_SUMMARY\";\n     exports.SUMMARY_DOCS_URL \u003d \"https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary\";\n     var Summary \u003d class {\n@@ -1558,7 +1558,7 @@ var require_summary \u003d __commonJS({\n         return __awaiter(this, void 0, void 0, function* () {\n           const overwrite \u003d !!(options \u003d\u003d\u003d null || options \u003d\u003d\u003d void 0 ? void 0 : options.overwrite);\n           const filePath \u003d yield this.filePath();\n-          const writeFunc \u003d overwrite ? writeFile3 : appendFile;\n+          const writeFunc \u003d overwrite ? writeFile4 : appendFile;\n           yield writeFunc(filePath, this._buffer, { encoding: \"utf8\" });\n           return this.emptyBuffer();\n         });\n@@ -8549,7 +8549,7 @@ var require_lockfile \u003d __commonJS({\n               }\n               const file \u003d _ref22;\n               if (yield exists(file)) {\n-                return readFile2(file);\n+                return readFile3(file);\n               }\n             }\n             return null;\n@@ -8568,7 +8568,7 @@ var require_lockfile \u003d __commonJS({\n         })();\n         let readJsonAndFile \u003d exports2.readJsonAndFile \u003d (() \u003d\u003e {\n           var _ref24 \u003d (0, (_asyncToGenerator2 || _load_asyncToGenerator()).default)(function* (loc) {\n-            const file \u003d yield readFile2(loc);\n+            const file \u003d yield readFile3(loc);\n             try {\n               return {\n                 object: (0, (_map || _load_map()).default)(JSON.parse(stripBOM(file))),\n@@ -8712,7 +8712,7 @@ var require_lockfile \u003d __commonJS({\n             if (eol !\u003d\u003d \"\\n\") {\n               data \u003d data.replace(/\\n/g, eol);\n             }\n-            yield writeFile3(path, data);\n+            yield writeFile4(path, data);\n           });\n           return function writeFilePreservingEol2(_x30, _x31) {\n             return _ref31.apply(this, arguments);\n@@ -8724,7 +8724,7 @@ var require_lockfile \u003d __commonJS({\n             const file \u003d (_path || _load_path()).default.join(dir, filename);\n             const fileLink \u003d (_path || _load_path()).default.join(dir, filename + \"-link\");\n             try {\n-              yield writeFile3(file, \"test\");\n+              yield writeFile4(file, \"test\");\n               yield link(file, fileLink);\n             } catch (err) {\n               return false;\n@@ -8814,7 +8814,7 @@ var require_lockfile \u003d __commonJS({\n           };\n         })();\n         exports2.copy \u003d copy;\n-        exports2.readFile \u003d readFile2;\n+        exports2.readFile \u003d readFile3;\n         exports2.readFileRaw \u003d readFileRaw;\n         exports2.normalizeOS \u003d normalizeOS;\n         var _fs;\n@@ -8879,7 +8879,7 @@ var require_lockfile \u003d __commonJS({\n         const lockQueue \u003d exports2.lockQueue \u003d new (_blockingQueue || _load_blockingQueue()).default(\"fs lock\");\n         const readFileBuffer \u003d exports2.readFileBuffer \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.readFile);\n         const open \u003d exports2.open \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.open);\n-        const writeFile3 \u003d exports2.writeFile \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.writeFile);\n+        const writeFile4 \u003d exports2.writeFile \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.writeFile);\n         const readlink \u003d exports2.readlink \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.readlink);\n         const realpath \u003d exports2.realpath \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.realpath);\n         const readdir \u003d exports2.readdir \u003d (0, (_promise2 || _load_promise2()).promisify)((_fs || _load_fs()).default.readdir);\n@@ -8913,7 +8913,7 @@ var require_lockfile \u003d __commonJS({\n             });\n           });\n         }\n-        function readFile2(loc) {\n+        function readFile3(loc) {\n           return _readFile(loc, \"utf8\").then(normalizeOS);\n         }\n         function readFileRaw(loc) {\n@@ -35356,28 +35356,42 @@ async function getDeployments() {\n }\n \n // .github/actions/deploy-docs-site/lib/sitemap.mjs\n-import { join as join4 } from \"path\";\n-import { readFileSync as readFileSync4, writeFileSync } from \"fs\";\n+import { join as join4 } from \"node:path\";\n+import { readFile as readFile2, writeFile as writeFile3 } from \"node:fs/promises\";\n async function generateSitemap(deployment, distDir) {\n-  const servingUrlWithoutEndingSlash \u003d deployment.servingUrl.endsWith(\"/\") ? deployment.servingUrl.slice(0, -1) : deployment.servingUrl;\n   const lastModifiedTimestamp \u003d (/* @__PURE__ */ new Date()).toISOString();\n-  const routes \u003d JSON.parse(readFileSync4(join4(distDir, \"prerendered-routes.json\"), \"utf-8\"));\n+  const { routes } \u003d JSON.parse(await readFile2(join4(distDir, \"prerendered-routes.json\"), \"utf-8\"));\n+  const routePaths \u003d Object.keys(routes);\n   const sitemap \u003d `\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n   \u003curlset xmlns\u003d\"http://www.sitemaps.org/schemas/sitemap/0.9\"\u003e\n-  ${Object.keys(routes.routes).map((route) \u003d\u003e {\n-    const routeWithoutLeadingSlash \u003d route.startsWith(\"/\") ? route.slice(1) : route;\n-    return `\n-    \u003curl\u003e\n-      \u003cloc\u003e${servingUrlWithoutEndingSlash}/${routeWithoutLeadingSlash}\u003c/loc\u003e\n+  ${routePaths.map((route) \u003d\u003e `\u003curl\u003e\n+      \u003cloc\u003e${joinUrlParts(deployment.servingUrl, route)}\u003c/loc\u003e\n       \u003clastmod\u003e${lastModifiedTimestamp}\u003c/lastmod\u003e\n       \u003cchangefreq\u003edaily\u003c/changefreq\u003e\n       \u003cpriority\u003e1.0\u003c/priority\u003e\n-    \u003c/url\u003e\n-        `;\n-  }).join(\"\")}\n+    \u003c/url\u003e`).join(\"\")}\n   \u003c/urlset\u003e`;\n-  writeFileSync(join4(distDir, \"browser\", \"sitemap.xml\"), sitemap, \"utf-8\");\n-  console.log(`Generated sitemap with ${Object.keys(routes.routes).length} entries.`);\n+  await writeFile3(join4(distDir, \"browser\", \"sitemap.xml\"), sitemap, \"utf-8\");\n+  console.log(`Generated sitemap with ${routePaths.length} entries.`);\n+}\n+function joinUrlParts(...parts) {\n+  const normalizeParts \u003d [];\n+  for (const part of parts) {\n+    if (part \u003d\u003d\u003d \"\") {\n+      continue;\n+    }\n+    let normalizedPart \u003d part;\n+    if (part[0] \u003d\u003d\u003d \"/\") {\n+      normalizedPart \u003d normalizedPart.slice(1);\n+    }\n+    if (part.at(-1) \u003d\u003d\u003d \"/\") {\n+      normalizedPart \u003d normalizedPart.slice(0, -1);\n+    }\n+    if (normalizedPart !\u003d\u003d \"\") {\n+      normalizeParts.push(normalizedPart);\n+    }\n+  }\n+  return normalizeParts.join(\"/\");\n }\n \n // .github/actions/deploy-docs-site/lib/main.mts","expectedMessage":"fix(docs-infra): remove trailing slash from sitemap URLs","repository":"angular","commitHash":"710a4bf02ba1a50d440bc55b6734956010873105","metadata":{}}
{"id":"angular-95e8c2fd","diff":" package.json                                 | 1 -\n pnpm-lock.yaml                               | 3 ---\n vscode-ng-language-service/package.json      | 2 +-\n vscode-ng-language-service/tools/release.mts | 2 +-\n 4 files changed, 2 insertions(+), 6 deletions(-)\n\ndiff --git a/package.json b/package.json\nindex cea79494..125e98aa 100644\n--- a/package.json\n+++ b/package.json\n@@ -150,7 +150,6 @@\n     \"todomvc-common\": \"^1.0.5\",\n     \"tslib\": \"^2.3.0\",\n     \"tslint\": \"6.1.3\",\n-    \"tsx\": \"^4.7.2\",\n     \"typescript\": \"5.9.3\",\n     \"webtreemap\": \"^2.0.1\",\n     \"ws\": \"^8.15.0\",\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex 3f21ba35..dc2963f0 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -310,9 +310,6 @@ importers:\n       tslint:\n         specifier: 6.1.3\n         version: 6.1.3(typescript@5.9.3)\n-      tsx:\n-        specifier: ^4.7.2\n-        version: 4.21.0\n       typescript:\n         specifier: 5.9.3\n         version: 5.9.3\ndiff --git a/vscode-ng-language-service/package.json b/vscode-ng-language-service/package.json\nindex 2597f8f6..a920c794 100644\n--- a/vscode-ng-language-service/package.json\n+++ b/vscode-ng-language-service/package.json\n@@ -257,7 +257,7 @@\n     \"test:inspect-common\": \"bazel run --config\u003ddebug //vscode-ng-language-service/common/tests:test\",\n     \"test:inspect-server\": \"bazel run --config\u003ddebug //vscode-ng-language-service/server/src/tests:test\",\n     \"test:inspect-syntaxes\": \"bazel run --config\u003ddebug //vscode-ng-language-service/syntaxes/test:test\",\n-    \"release\": \"tsx tools/release.mts\"\n+    \"release\": \"node tools/release.mts\"\n   },\n   \"dependencies\": {\n     \"@angular/language-service\": \"workspace:*\",\ndiff --git a/vscode-ng-language-service/tools/release.mts b/vscode-ng-language-service/tools/release.mts\nindex ef52502c..ced123d3 100644\n--- a/vscode-ng-language-service/tools/release.mts\n+++ b/vscode-ng-language-service/tools/release.mts\n@@ -17,7 +17,7 @@ import {input, select} from \u0027@inquirer/prompts\u0027;\n import chalk from \u0027chalk\u0027;\n import semver from \u0027semver\u0027;\n import {writeFile, readFile} from \u0027node:fs/promises\u0027;\n-import {exec as nodeExec, spawn, SpawnOptions} from \u0027node:child_process\u0027;\n+import {exec as nodeExec, spawn, type SpawnOptions} from \u0027node:child_process\u0027;\n import {promisify} from \u0027node:util\u0027;\n import {join} from \u0027node:path\u0027;\n ","expectedMessage":"build: remove `tsx` dependency and update release script to use `node` directly","repository":"angular","commitHash":"95e8c2fdeec5b3484ed77297e21f53395b5d1be9","metadata":{}}
{"id":"angular-227acddd","diff":" vscode-ng-language-service/tools/release.mts | 95 ++++++++++++++++++++++++----\n 1 file changed, 82 insertions(+), 13 deletions(-)\n\ndiff --git a/vscode-ng-language-service/tools/release.mts b/vscode-ng-language-service/tools/release.mts\nindex 37049db9..ef52502c 100644\n--- a/vscode-ng-language-service/tools/release.mts\n+++ b/vscode-ng-language-service/tools/release.mts\n@@ -13,7 +13,7 @@\n  */\n \n // tslint:disable:no-console\n-import {input} from \u0027@inquirer/prompts\u0027;\n+import {input, select} from \u0027@inquirer/prompts\u0027;\n import chalk from \u0027chalk\u0027;\n import semver from \u0027semver\u0027;\n import {writeFile, readFile} from \u0027node:fs/promises\u0027;\n@@ -68,6 +68,8 @@ async function main(): Promise\u003cvoid\u003e {\n \n   // Ensure the user has a clean working directory before starting the release process.\n   await checkCleanWorkingDirectory();\n+  // Ensure there is a github token before starting the release process.\n+  ensureGithubToken();\n \n   let branchToReleaseFrom: string | undefined \u003d process.env[\u0027BRANCH_TO_RELEASE\u0027];\n   if (!branchToReleaseFrom) {\n@@ -91,10 +93,13 @@ async function main(): Promise\u003cvoid\u003e {\n   await installDependencies();\n   await buildExtension();\n \n-  await prepareReleasePullRequest(releaseBranch, `${releaseCommitPrefix}${newVersion}`, [\n-    packageJsonPath,\n-    changelogPath,\n-  ]);\n+  const forkRemote \u003d await getForkRemoteName();\n+  await prepareReleasePullRequest(\n+    releaseBranch,\n+    `${releaseCommitPrefix}${newVersion}`,\n+    [packageJsonPath, changelogPath],\n+    forkRemote,\n+  );\n   await waitForPRToBeMergedAndTag(newVersion, branchToReleaseFrom);\n \n   await publishExtension();\n@@ -102,7 +107,7 @@ async function main(): Promise\u003cvoid\u003e {\n   await createGithubRelease(newVersion, changelog);\n \n   if (branchToReleaseFrom !\u003d\u003d \u0027main\u0027) {\n-    await cherryPickChangelog(changelog, newVersion);\n+    await cherryPickChangelog(changelog, newVersion, forkRemote);\n   }\n \n   console.log(chalk.green(\u0027VSCode extension release process complete!\u0027));\n@@ -216,10 +221,11 @@ async function prepareReleasePullRequest(\n   branch: string,\n   commitMessage: string,\n   files: string[],\n+  forkRemote: string,\n ): Promise\u003cvoid\u003e {\n   await exec(`git commit -m \"${commitMessage}\" \"${files.join(\u0027\" \"\u0027)}\"`);\n-  await exec(`git push origin ${branch} --force-with-lease`);\n-  const {stdout: remoteUrl} \u003d await exec(\u0027git remote get-url origin\u0027);\n+  await exec(`git push ${forkRemote} ${branch} --force-with-lease`);\n+  const {stdout: remoteUrl} \u003d await exec(`git remote get-url ${forkRemote}`);\n   const {owner, repo} \u003d getRepoDetails(remoteUrl);\n \n   console.log(\n@@ -382,6 +388,17 @@ async function buildExtension(): Promise\u003cvoid\u003e {\n   console.log(chalk.green(`VSCode extension packaged at ${extensionPath}`));\n }\n \n+function ensureGithubToken(): string {\n+  // https://github.com/angular/dev-infra/blob/8ce8257f740613a7291256173e2706fb2ed8aefa/ng-dev/utils/git/github-yargs.ts#L45\n+  const token \u003d process.env[\u0027GITHUB_TOKEN\u0027] ?? process.env[\u0027TOKEN\u0027];\n+  if (!token) {\n+    throw new Error(\n+      \u0027GITHUB_TOKEN nor TOKEN environment variable is not set. Cannot create GitHub release.\u0027,\n+    );\n+  }\n+  return token;\n+}\n+\n /**\n  * Creates a GitHub release and uploads the extension asset.\n  *\n@@ -389,10 +406,7 @@ async function buildExtension(): Promise\u003cvoid\u003e {\n  * @param changelog The changelog content for the release.\n  */\n async function createGithubRelease(version: string, changelog: string): Promise\u003cvoid\u003e {\n-  const token \u003d process.env[\u0027GITHUB_TOKEN\u0027];\n-  if (!token) {\n-    throw new Error(\u0027GITHUB_TOKEN environment variable is not set. Cannot create GitHub release.\u0027);\n-  }\n+  const token \u003d ensureGithubToken();\n \n   console.log(chalk.blue(\u0027Creating GitHub release...\u0027));\n \n@@ -478,7 +492,11 @@ async function publishExtension(): Promise\u003cvoid\u003e {\n  * @param changelog The changelog content to add.\n  * @param newVersion The new version number.\n  */\n-async function cherryPickChangelog(changelog: string, newVersion: string): Promise\u003cvoid\u003e {\n+async function cherryPickChangelog(\n+  changelog: string,\n+  newVersion: string,\n+  forkRemote: string,\n+): Promise\u003cvoid\u003e {\n   console.log(chalk.blue(\u0027Cherry-picking changelog to main...\u0027));\n \n   await exec(`git stash`);\n@@ -497,6 +515,7 @@ async function cherryPickChangelog(changelog: string, newVersion: string): Promi\n     cherryPickBranch,\n     `docs: release notes for the vscode extension ${newVersion} release`,\n     [changelogPath],\n+    forkRemote,\n   );\n }\n \n@@ -591,6 +610,56 @@ function getTagName(version: string): string {\n   return `${tagPrefix}${version}`;\n }\n \n+/**\n+ * Gets the name of the remote to use as the user\u0027s fork.\n+ *\n+ * This function lists all configured remotes and attempts to identify the user\u0027s fork.\n+ * - If \u0027origin\u0027 exists and is not the upstream angular repo, it is used.\n+ * - If there are other candidates (remotes that are not the upstream angular repo),\n+ *   it asks the user to select one if there are multiple.\n+ *\n+ * @returns The name of the remote to use.\n+ */\n+async function getForkRemoteName(): Promise\u003cstring\u003e {\n+  const {stdout} \u003d await exec(\u0027git remote -v\u0027);\n+  const remotes \u003d new Map\u003cstring, string\u003e();\n+  for (const line of stdout.split(\u0027\\n\u0027)) {\n+    const parts \u003d line.split(/\\s+/);\n+    if (parts.length \u003e\u003d 2) {\n+      const [name, url] \u003d parts;\n+      remotes.set(name, url);\n+    }\n+  }\n+\n+  const candidates: string[] \u003d [];\n+  for (const [name, url] of remotes) {\n+    if (getRepoDetails(url).owner !\u003d\u003d \u0027angular\u0027) {\n+      candidates.push(name);\n+    }\n+  }\n+\n+  // If origin is a candidate, we prefer it appropriately IF it\u0027s likely the user\u0027s fork.\n+  // The check `getRepoDetails(url).owner !\u003d\u003d \u0027angular\u0027` already filters out upstream.\n+  // So if `origin` is in candidates, it\u0027s safe to use?\n+  // User wanted: \"If origin exists and is a candidate ... return \u0027origin\u0027\".\n+  if (candidates.includes(\u0027origin\u0027)) {\n+    return \u0027origin\u0027;\n+  }\n+\n+  if (candidates.length \u003d\u003d\u003d 0) {\n+    throw new Error(\u0027No suitable fork remote found. Please add a remote for your fork.\u0027);\n+  }\n+\n+  if (candidates.length \u003d\u003d\u003d 1) {\n+    return candidates[0];\n+  }\n+\n+  return await select({\n+    message: \u0027Which remote should be used as your fork (to push the release commit to for the PR)?\u0027,\n+    choices: candidates.map((c) \u003d\u003e ({value: c})),\n+  });\n+}\n+\n // Start the release process.\n main().catch((err) \u003d\u003e {\n   console.error(chalk.red(err));","expectedMessage":"build: Update vscode release script","repository":"angular","commitHash":"227acddd3a075a59a7e3c66c967aef06846187fa","metadata":{}}
{"id":"angular-cb5879f5","diff":" packages/core/src/util/is_dev_mode.ts | 3 +++\n 1 file changed, 3 insertions(+)\n\ndiff --git a/packages/core/src/util/is_dev_mode.ts b/packages/core/src/util/is_dev_mode.ts\nindex 67e1df24..f868b46c 100644\n--- a/packages/core/src/util/is_dev_mode.ts\n+++ b/packages/core/src/util/is_dev_mode.ts\n@@ -40,5 +40,8 @@ export function enableProdMode(): void {\n   // `global[\u0027ngDevMode\u0027] \u003d false;` is also dropped.\n   if (typeof ngDevMode \u003d\u003d\u003d \u0027undefined\u0027 || ngDevMode) {\n     global[\u0027ngDevMode\u0027] \u003d false;\n+    // The ngGlobal might already be init, for because initNgDevMode() is invoked from the top level,\n+    // an this function might executed later. So we need to clean up the global.ng as well.\n+    global[\u0027ng\u0027] \u003d undefined;\n   }\n }","expectedMessage":"refactor(core): remove ng when invoking `enableProdMode`","repository":"angular","commitHash":"cb5879f566b799ab104bb3e5ceaa13e74c7263d0","metadata":{}}
{"id":"angular-029685bd","diff":" vscode-ng-language-service/tools/release.mts | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/vscode-ng-language-service/tools/release.mts b/vscode-ng-language-service/tools/release.mts\nindex d01e5482..37049db9 100644\n--- a/vscode-ng-language-service/tools/release.mts\n+++ b/vscode-ng-language-service/tools/release.mts\n@@ -481,6 +481,7 @@ async function publishExtension(): Promise\u003cvoid\u003e {\n async function cherryPickChangelog(changelog: string, newVersion: string): Promise\u003cvoid\u003e {\n   console.log(chalk.blue(\u0027Cherry-picking changelog to main...\u0027));\n \n+  await exec(`git stash`);\n   await exec(`git fetch ${angularRepoRemote} main`);\n   const cherryPickBranch \u003d `vscode-changelog-cherry-pick${newVersion}`;\n   await exec(`git branch -D ${cherryPickBranch}`).catch(() \u003d\u003e {});","expectedMessage":"build: update cherrypick changelog to stash","repository":"angular","commitHash":"029685bd934c6ecf44c1187778085da986ddd320","metadata":{}}
{"id":"angular-b95753eb","diff":" .../syntaxes/expression.json                       |  41 ++++\n .../syntaxes/src/expression.ts                     |  45 ++++\n .../syntaxes/test/data/expression.html             |  13 ++\n .../syntaxes/test/data/expression.html.snap        | 249 +++++++++++++++++++++\n 4 files changed, 348 insertions(+)\n\ndiff --git a/vscode-ng-language-service/syntaxes/expression.json b/vscode-ng-language-service/syntaxes/expression.json\nindex a2411b8a..9e3fe99a 100644\n--- a/vscode-ng-language-service/syntaxes/expression.json\n+++ b/vscode-ng-language-service/syntaxes/expression.json\n@@ -16,6 +16,9 @@\n         {\n           \"include\": \"#literal\"\n         },\n+        {\n+          \"include\": \"#arrowFunction\"\n+        },\n         {\n           \"include\": \"#ternaryExpression\"\n         },\n@@ -971,6 +974,44 @@\n           \"include\": \"#ngExpression\"\n         }\n       ]\n+    },\n+    \"arrowFunction\": {\n+      \"patterns\": [\n+        {\n+          \"name\": \"meta.arrow.ts\",\n+          \"match\": \"(?:(?\u003c![_$[:alnum:]])(?:(?\u003c\u003d\\\\.\\\\.\\\\.)|(?\u003c!\\\\.))\\\\basync\\\\s+)?([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(?\u003d\u003d\u003e)\",\n+          \"captures\": {\n+            \"1\": {\n+              \"name\": \"variable.parameter.ts\"\n+            }\n+          }\n+        },\n+        {\n+          \"name\": \"meta.arrow.ts\",\n+          \"begin\": \"(?x) (?:\\n  (?\u003c![_$[:alnum:]])(?:(?\u003c\u003d\\\\.\\\\.\\\\.)|(?\u003c!\\\\.))(\\\\basync)\\n)? ((?\u003c![})!\\\\]])\\\\s*\\n  (?\u003d\\n    # sure shot arrow functions even if \u003d\u003e is on new line\\n(\\n  (\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c])*\\\\\u003e)*\\\\\u003e)*\u003e\\\\s*)?\\n  [(]\\\\s*(\\\\/\\\\*([^\\\\*]|(\\\\*[^\\\\/]))*\\\\*\\\\/\\\\s*)*\\n  (\\n    ([)]\\\\s*:) |                                                                                       # ():\\n    ((\\\\.\\\\.\\\\.\\\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\\\s*:)                                                                  # [(]param: | [(]...param:\\n  )\\n) |\\n\\n# arrow function possible to detect only with \u003d\u003e on same line\\n(\\n  (\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c])*\\\\\u003e)*\\\\\u003e)*\u003e\\\\s*)?                                                                                 # typeparameters\\n  \\\\(\\\\s*(\\\\/\\\\*([^\\\\*]|(\\\\*[^\\\\/]))*\\\\*\\\\/\\\\s*)*(([_$[:alpha:]]|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\])|(\\\\.\\\\.\\\\.\\\\s*[_$[:alpha:]]))([^()\\\\\u0027\\\\\\\"\\\\`]|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\\u0027([^\\\\\u0027\\\\\\\\]|\\\\\\\\.)*\\\\\u0027)|(\\\\\\\"([^\\\\\\\"\\\\\\\\]|\\\\\\\\.)*\\\\\\\")|(\\\\`([^\\\\`\\\\\\\\]|\\\\\\\\.)*\\\\`))*)?\\\\)   # parameters\\n  (\\\\s*:\\\\s*([^\u003c\u003e\\\\(\\\\)\\\\{\\\\}]|\\\\\u003c([^\u003c\u003e]|\\\\\u003c([^\u003c\u003e]|\\\\\u003c[^\u003c\u003e]+\\\\\u003e)+\\\\\u003e)+\\\\\u003e|\\\\([^\\\\(\\\\)]+\\\\)|\\\\{[^\\\\{\\\\}]+\\\\})+)?                                                                        # return type\\n  \\\\s*\u003d\u003e                                                                                               # arrow operator\\n)\\n  )\\n)\",\n+          \"end\": \"(?\u003d\u003d\u003e|\\\\{|(^\\\\s*(export|function|class|interface|let|var|(?:\\\\busing(?\u003d\\\\s+(?!in\\\\b|of\\\\b(?!\\\\s*(?:of\\\\b|\u003d)))[_$[:alpha:]])\\\\b)|(?:\\\\bawait\\\\s+(?:\\\\busing(?\u003d\\\\s+(?!in\\\\b|of\\\\b(?!\\\\s*(?:of\\\\b|\u003d)))[_$[:alpha:]])\\\\b)\\\\b)|const|import|enum|namespace|module|type|abstract|declare)\\\\s+))\",\n+          \"patterns\": [\n+            {\n+              \"include\": \"#functionParameters\"\n+            }\n+          ]\n+        },\n+        {\n+          \"name\": \"meta.arrow.ts\",\n+          \"begin\": \"\u003d\u003e\",\n+          \"beginCaptures\": {\n+            \"0\": {\n+              \"name\": \"storage.type.function.arrow.ts\"\n+            }\n+          },\n+          \"end\": \"((?\u003c\u003d\\\\}|\\\\S)(?\u003c!\u003d\u003e)|((?!\\\\{)(?\u003d\\\\S)))(?!\\\\/[\\\\/\\\\*])\",\n+          \"patterns\": [\n+            {\n+              \"include\": \"#ngExpression\"\n+            }\n+          ]\n+        }\n+      ]\n     }\n   }\n }\ndiff --git a/vscode-ng-language-service/syntaxes/src/expression.ts b/vscode-ng-language-service/syntaxes/src/expression.ts\nindex f95d199d..9a36ae11 100644\n--- a/vscode-ng-language-service/syntaxes/src/expression.ts\n+++ b/vscode-ng-language-service/syntaxes/src/expression.ts\n@@ -22,6 +22,9 @@ export const Expression: GrammarDefinition \u003d {\n         {\n           include: \u0027#literal\u0027,\n         },\n+        {\n+          include: \u0027#arrowFunction\u0027,\n+        },\n         {\n           include: \u0027#ternaryExpression\u0027,\n         },\n@@ -982,5 +985,47 @@ export const Expression: GrammarDefinition \u003d {\n         },\n       ],\n     },\n+\n+    // Via https://github.com/microsoft/vscode-typescript-next/blob/2db036c6a8c4000dbe8cfc591512b1a6f4e666d0/syntaxes/TypeScript.tmLanguage.json#L1509\n+    arrowFunction: {\n+      patterns: [\n+        {\n+          name: \u0027meta.arrow.ts\u0027,\n+          match:\n+            /(?:(?\u003c![_$[:alnum:]])(?:(?\u003c\u003d\\.\\.\\.)|(?\u003c!\\.))\\basync\\s+)?([_$[:alpha:]][_$[:alnum:]]*)\\s*(?\u003d\u003d\u003e)/,\n+          captures: {\n+            1: {\n+              name: \u0027variable.parameter.ts\u0027,\n+            },\n+          },\n+        },\n+        {\n+          name: \u0027meta.arrow.ts\u0027,\n+          begin:\n+            \u0027(?x) (?:\\n  (?\u003c![_$[:alnum:]])(?:(?\u003c\u003d\\\\.\\\\.\\\\.)|(?\u003c!\\\\.))(\\\\basync)\\n)? ((?\u003c![})!\\\\]])\\\\s*\\n  (?\u003d\\n    # sure shot arrow functions even if \u003d\u003e is on new line\\n(\\n  (\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c])*\\\\\u003e)*\\\\\u003e)*\u003e\\\\s*)?\\n  [(]\\\\s*(\\\\/\\\\*([^\\\\*]|(\\\\*[^\\\\/]))*\\\\*\\\\/\\\\s*)*\\n  (\\n    ([)]\\\\s*:) |                                                                                       # ():\\n    ((\\\\.\\\\.\\\\.\\\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\\\s*:)                                                                  # [(]param: | [(]...param:\\n  )\\n) |\\n\\n# arrow function possible to detect only with \u003d\u003e on same line\\n(\\n  (\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c]|\\\\\u003c\\\\s*(((const\\\\s+)?[_$[:alpha:]])|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\]))([^\u003d\u003c\u003e]|\u003d[^\u003c])*\\\\\u003e)*\\\\\u003e)*\u003e\\\\s*)?                                                                                 # typeparameters\\n  \\\\(\\\\s*(\\\\/\\\\*([^\\\\*]|(\\\\*[^\\\\/]))*\\\\*\\\\/\\\\s*)*(([_$[:alpha:]]|(\\\\{([^\\\\{\\\\}]|(\\\\{([^\\\\{\\\\}]|\\\\{[^\\\\{\\\\}]*\\\\})*\\\\}))*\\\\})|(\\\\[([^\\\\[\\\\]]|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]*\\\\])*\\\\]))*\\\\])|(\\\\.\\\\.\\\\.\\\\s*[_$[:alpha:]]))([^()\\\\\\\u0027\\\\\"\\\\`]|(\\\\(([^\\\\(\\\\)]|(\\\\(([^\\\\(\\\\)]|\\\\([^\\\\(\\\\)]*\\\\))*\\\\)))*\\\\))|(\\\\\\\u0027([^\\\\\\\u0027\\\\\\\\]|\\\\\\\\.)*\\\\\\\u0027)|(\\\\\"([^\\\\\"\\\\\\\\]|\\\\\\\\.)*\\\\\")|(\\\\`([^\\\\`\\\\\\\\]|\\\\\\\\.)*\\\\`))*)?\\\\)   # parameters\\n  (\\\\s*:\\\\s*([^\u003c\u003e\\\\(\\\\)\\\\{\\\\}]|\\\\\u003c([^\u003c\u003e]|\\\\\u003c([^\u003c\u003e]|\\\\\u003c[^\u003c\u003e]+\\\\\u003e)+\\\\\u003e)+\\\\\u003e|\\\\([^\\\\(\\\\)]+\\\\)|\\\\{[^\\\\{\\\\}]+\\\\})+)?                                                                        # return type\\n  \\\\s*\u003d\u003e                                                                                               # arrow operator\\n)\\n  )\\n)\u0027,\n+          end: \u0027(?\u003d\u003d\u003e|\\\\{|(^\\\\s*(export|function|class|interface|let|var|(?:\\\\busing(?\u003d\\\\s+(?!in\\\\b|of\\\\b(?!\\\\s*(?:of\\\\b|\u003d)))[_$[:alpha:]])\\\\b)|(?:\\\\bawait\\\\s+(?:\\\\busing(?\u003d\\\\s+(?!in\\\\b|of\\\\b(?!\\\\s*(?:of\\\\b|\u003d)))[_$[:alpha:]])\\\\b)\\\\b)|const|import|enum|namespace|module|type|abstract|declare)\\\\s+))\u0027,\n+          patterns: [\n+            {\n+              include: \u0027#functionParameters\u0027,\n+            },\n+          ],\n+        },\n+        {\n+          name: \u0027meta.arrow.ts\u0027,\n+          begin: \u0027\u003d\u003e\u0027,\n+          beginCaptures: {\n+            \u00270\u0027: {\n+              name: \u0027storage.type.function.arrow.ts\u0027,\n+            },\n+          },\n+          end: \u0027((?\u003c\u003d\\\\}|\\\\S)(?\u003c!\u003d\u003e)|((?!\\\\{)(?\u003d\\\\S)))(?!\\\\/[\\\\/\\\\*])\u0027,\n+          patterns: [\n+            {\n+              include: \u0027#ngExpression\u0027,\n+            },\n+          ],\n+        },\n+      ],\n+    },\n   },\n };\ndiff --git a/vscode-ng-language-service/syntaxes/test/data/expression.html b/vscode-ng-language-service/syntaxes/test/data/expression.html\nindex 7cc3b4f1..fcf0b005 100644\n--- a/vscode-ng-language-service/syntaxes/test/data/expression.html\n+++ b/vscode-ng-language-service/syntaxes/test/data/expression.html\n@@ -104,3 +104,16 @@ as i }}\n \n \u003c!-- Rest --\u003e\n {{ someFn(1, ...foo, 2, ...bar, 3, ...baz) }}\n+\n+\u003c!-- Arrow functions --\u003e\n+{{ foo \u003d\u003e foo + 1 }}\n+{{ (foo, bar, baz) \u003d\u003e foo + bar + baz }}\n+{{ (foo, bar) \u003d\u003e [foo, bar, 1, 2] }}\n+{{ (foo, bar) \u003d\u003e ({foo: 1, bar: 2}) }}\n+{{ a \u003d\u003e (b, c) \u003d\u003e (d, e) \u003d\u003e f \u003d\u003e a + b + c + d + e + f }}\n+{{ ((a, b) \u003d\u003e a * b)(2, 3) }}\n+{{ [a \u003d\u003e a + 1, (b, c) \u003d\u003e b + c] }}\n+{{ (a, b) \u003d\u003e\n+    a / b + 123\n+}}\n+{{ someSignal.update(prev \u003d\u003e prev + 1) }}\ndiff --git a/vscode-ng-language-service/syntaxes/test/data/expression.html.snap b/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\nindex aad5365d..600c42b0 100644\n--- a/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\n+++ b/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\n@@ -1283,4 +1283,253 @@\n #                                         ^ template.ng expression.ng meta.brace.round.ts\n #                                          ^ template.ng expression.ng\n #                                           ^^ template.ng punctuation.definition.block.ts\n+\u003e\n+\u003e\u003c!-- Arrow functions --\u003e\n+#^^^^^^^^^^^^^^^^^^^^^^^^^ template.ng\n+\u003e{{ foo \u003d\u003e foo + 1 }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^^^ template.ng expression.ng meta.arrow.ts variable.parameter.ts\n+#      ^ template.ng expression.ng meta.arrow.ts\n+#       ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#         ^ template.ng expression.ng meta.arrow.ts\n+#          ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#             ^ template.ng expression.ng\n+#              ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#               ^ template.ng expression.ng\n+#                ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                 ^ template.ng expression.ng\n+#                  ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ (foo, bar, baz) \u003d\u003e foo + bar + baz }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng meta.arrow.ts\n+#   ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#    ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#         ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#            ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#             ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#              ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#                 ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#                  ^ template.ng expression.ng meta.arrow.ts\n+#                   ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                     ^ template.ng expression.ng meta.arrow.ts\n+#                      ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                         ^ template.ng expression.ng\n+#                          ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                           ^ template.ng expression.ng\n+#                            ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                               ^ template.ng expression.ng\n+#                                ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                 ^ template.ng expression.ng\n+#                                  ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                                     ^ template.ng expression.ng\n+#                                      ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ (foo, bar) \u003d\u003e [foo, bar, 1, 2] }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng meta.arrow.ts\n+#   ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#    ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#         ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#            ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#             ^ template.ng expression.ng meta.arrow.ts\n+#              ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                ^ template.ng expression.ng meta.arrow.ts\n+#                 ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#                  ^^^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#                     ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#                      ^ template.ng expression.ng meta.array.literal.ts\n+#                       ^^^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#                          ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#                           ^ template.ng expression.ng meta.array.literal.ts\n+#                            ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#                             ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#                              ^ template.ng expression.ng meta.array.literal.ts\n+#                               ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#                                ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#                                 ^ template.ng expression.ng\n+#                                  ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ (foo, bar) \u003d\u003e ({foo: 1, bar: 2}) }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng meta.arrow.ts\n+#   ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#    ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#         ^^^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#            ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#             ^ template.ng expression.ng meta.arrow.ts\n+#              ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                ^ template.ng expression.ng meta.arrow.ts\n+#                 ^ template.ng expression.ng meta.brace.round.ts\n+#                  ^ template.ng expression.ng\n+#                   ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                      ^^ template.ng expression.ng\n+#                        ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                         ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                          ^ template.ng expression.ng\n+#                           ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                              ^^ template.ng expression.ng\n+#                                ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                                 ^ template.ng expression.ng\n+#                                  ^ template.ng expression.ng meta.brace.round.ts\n+#                                   ^ template.ng expression.ng\n+#                                    ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ a \u003d\u003e (b, c) \u003d\u003e (d, e) \u003d\u003e f \u003d\u003e a + b + c + d + e + f }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^ template.ng expression.ng meta.arrow.ts variable.parameter.ts\n+#    ^ template.ng expression.ng meta.arrow.ts\n+#     ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#         ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#          ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#           ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts\n+#            ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#             ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#              ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts\n+#               ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                 ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts\n+#                  ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#                   ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#                    ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#                     ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts\n+#                      ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#                       ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#                        ^ template.ng expression.ng meta.arrow.ts meta.arrow.ts\n+#                         ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                           ^ template.ng expression.ng meta.arrow.ts\n+#                            ^ template.ng expression.ng meta.arrow.ts variable.parameter.ts\n+#                             ^ template.ng expression.ng meta.arrow.ts\n+#                              ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                                ^ template.ng expression.ng meta.arrow.ts\n+#                                 ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                  ^ template.ng expression.ng\n+#                                   ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                    ^ template.ng expression.ng\n+#                                     ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                      ^ template.ng expression.ng\n+#                                       ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                        ^ template.ng expression.ng\n+#                                         ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                          ^ template.ng expression.ng\n+#                                           ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                            ^ template.ng expression.ng\n+#                                             ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                              ^ template.ng expression.ng\n+#                                               ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                                ^ template.ng expression.ng\n+#                                                 ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                                  ^ template.ng expression.ng\n+#                                                   ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                                    ^ template.ng expression.ng\n+#                                                     ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                                      ^ template.ng expression.ng\n+#                                                       ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ ((a, b) \u003d\u003e a * b)(2, 3) }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^ template.ng expression.ng meta.brace.round.ts\n+#    ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#     ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#      ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#         ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#          ^ template.ng expression.ng meta.arrow.ts\n+#           ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#             ^ template.ng expression.ng meta.arrow.ts\n+#              ^ template.ng expression.ng variable.other.readwrite.ts\n+#               ^ template.ng expression.ng\n+#                ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                 ^ template.ng expression.ng\n+#                  ^ template.ng expression.ng variable.other.readwrite.ts\n+#                   ^ template.ng expression.ng meta.brace.round.ts\n+#                    ^ template.ng expression.ng meta.brace.round.ts\n+#                     ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                      ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                       ^ template.ng expression.ng\n+#                        ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                         ^ template.ng expression.ng meta.brace.round.ts\n+#                          ^ template.ng expression.ng\n+#                           ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ [a \u003d\u003e a + 1, (b, c) \u003d\u003e b + c] }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#    ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts variable.parameter.ts\n+#     ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts\n+#      ^^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts storage.type.function.arrow.ts\n+#        ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts\n+#         ^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#          ^ template.ng expression.ng meta.array.literal.ts\n+#           ^ template.ng expression.ng meta.array.literal.ts keyword.operator.arithmetic.ts\n+#            ^ template.ng expression.ng meta.array.literal.ts\n+#             ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#              ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#               ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts\n+#                ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#                 ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#                  ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#                   ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts\n+#                    ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#                     ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#                      ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts\n+#                       ^^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts storage.type.function.arrow.ts\n+#                         ^ template.ng expression.ng meta.array.literal.ts meta.arrow.ts\n+#                          ^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#                           ^ template.ng expression.ng meta.array.literal.ts\n+#                            ^ template.ng expression.ng meta.array.literal.ts keyword.operator.arithmetic.ts\n+#                             ^ template.ng expression.ng meta.array.literal.ts\n+#                              ^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#                               ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#                                ^ template.ng expression.ng\n+#                                 ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ (a, b) \u003d\u003e\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng meta.arrow.ts\n+#   ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.begin.ts\n+#    ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#     ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.separator.parameter.ts\n+#      ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts\n+#       ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts variable.parameter.ts\n+#        ^ template.ng expression.ng meta.arrow.ts meta.parameters.ts punctuation.definition.parameters.end.ts\n+#         ^ template.ng expression.ng meta.arrow.ts\n+#          ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+\u003e    a / b + 123\n+#^^^^ template.ng expression.ng meta.arrow.ts\n+#    ^ template.ng expression.ng variable.other.readwrite.ts\n+#     ^ template.ng expression.ng\n+#      ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#       ^ template.ng expression.ng\n+#        ^ template.ng expression.ng variable.other.readwrite.ts\n+#         ^ template.ng expression.ng\n+#          ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#           ^ template.ng expression.ng\n+#            ^^^ template.ng expression.ng constant.numeric.decimal.ts\n+\u003e}}\n+#^^ template.ng punctuation.definition.block.ts\n+\u003e{{ someSignal.update(prev \u003d\u003e prev + 1) }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^^^^^^^^^^ template.ng expression.ng variable.other.object.ts\n+#             ^ template.ng expression.ng punctuation.accessor.ts\n+#              ^^^^^^ template.ng expression.ng entity.name.function.ts\n+#                    ^ template.ng expression.ng meta.brace.round.ts\n+#                     ^^^^ template.ng expression.ng meta.arrow.ts variable.parameter.ts\n+#                         ^ template.ng expression.ng meta.arrow.ts\n+#                          ^^ template.ng expression.ng meta.arrow.ts storage.type.function.arrow.ts\n+#                            ^ template.ng expression.ng meta.arrow.ts\n+#                             ^^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                                 ^ template.ng expression.ng\n+#                                  ^ template.ng expression.ng keyword.operator.arithmetic.ts\n+#                                   ^ template.ng expression.ng\n+#                                    ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                                     ^ template.ng expression.ng meta.brace.round.ts\n+#                                      ^ template.ng expression.ng\n+#                                       ^^ template.ng punctuation.definition.block.ts\n \u003e\n\\ No newline at end of file","expectedMessage":"fix(vscode-extension): add syntax highlighting for arrow functions","repository":"angular","commitHash":"b95753eb7d9efa247ff5ef1955969f1becf28032","metadata":{}}
{"id":"angular-c70a6a6e","diff":" .../syntaxes/expression.json                       |  4 ++\n .../syntaxes/src/expression.ts                     |  4 ++\n .../syntaxes/test/data/expression.html             |  6 ++\n .../syntaxes/test/data/expression.html.snap        | 80 ++++++++++++++++++++++\n 4 files changed, 94 insertions(+)\n\ndiff --git a/vscode-ng-language-service/syntaxes/expression.json b/vscode-ng-language-service/syntaxes/expression.json\nindex 043de5ac..a2411b8a 100644\n--- a/vscode-ng-language-service/syntaxes/expression.json\n+++ b/vscode-ng-language-service/syntaxes/expression.json\n@@ -160,6 +160,10 @@\n           \"name\": \"keyword.operator.bitwise.shift.ts\",\n           \"match\": \"\u003c\u003c|\u003e\u003e\u003e|\u003e\u003e\"\n         },\n+        {\n+          \"name\": \"keyword.operator.spread.ts\",\n+          \"match\": \"\\\\.\\\\.\\\\.\"\n+        },\n         {\n           \"name\": \"keyword.operator.comparison.ts\",\n           \"match\": \"\u003d\u003d\u003d|!\u003d\u003d|\u003d\u003d|!\u003d\"\ndiff --git a/vscode-ng-language-service/syntaxes/src/expression.ts b/vscode-ng-language-service/syntaxes/src/expression.ts\nindex 9f59c58f..f95d199d 100644\n--- a/vscode-ng-language-service/syntaxes/src/expression.ts\n+++ b/vscode-ng-language-service/syntaxes/src/expression.ts\n@@ -169,6 +169,10 @@ export const Expression: GrammarDefinition \u003d {\n           name: \u0027keyword.operator.bitwise.shift.ts\u0027,\n           match: /\u003c\u003c|\u003e\u003e\u003e|\u003e\u003e/,\n         },\n+        {\n+          name: \u0027keyword.operator.spread.ts\u0027,\n+          match: /\\.\\.\\./,\n+        },\n         {\n           name: \u0027keyword.operator.comparison.ts\u0027,\n           match: /\u003d\u003d\u003d|!\u003d\u003d|\u003d\u003d|!\u003d/,\ndiff --git a/vscode-ng-language-service/syntaxes/test/data/expression.html b/vscode-ng-language-service/syntaxes/test/data/expression.html\nindex 4f262fc4..7cc3b4f1 100644\n--- a/vscode-ng-language-service/syntaxes/test/data/expression.html\n+++ b/vscode-ng-language-service/syntaxes/test/data/expression.html\n@@ -98,3 +98,9 @@ as i }}\n {{ (let param of params?.get(\u0027value\u0027)!.property | async).anotherProperty | translate: [\u0027language1\u0027, \u0027language2\u0027]; let i\n \u003d index; }}\n \n+\u003c!-- Spread --\u003e\n+{{ [1, ...foo, 2, ...bar, 3] }}\n+{{ {{a: 1, ...foo, b: 2, ...bar, c: 3}} }}\n+\n+\u003c!-- Rest --\u003e\n+{{ someFn(1, ...foo, 2, ...bar, 3, ...baz) }}\ndiff --git a/vscode-ng-language-service/syntaxes/test/data/expression.html.snap b/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\nindex 24d25e46..aad5365d 100644\n--- a/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\n+++ b/vscode-ng-language-service/syntaxes/test/data/expression.html.snap\n@@ -1203,4 +1203,84 @@\n #        ^ template.ng expression.ng\n #         ^^ template.ng punctuation.definition.block.ts\n \u003e\n+\u003e\u003c!-- Spread --\u003e\n+#^^^^^^^^^^^^^^^^ template.ng\n+\u003e{{ [1, ...foo, 2, ...bar, 3] }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#    ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#     ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#      ^ template.ng expression.ng meta.array.literal.ts\n+#       ^^^ template.ng expression.ng meta.array.literal.ts keyword.operator.spread.ts\n+#          ^^^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#             ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#              ^ template.ng expression.ng meta.array.literal.ts\n+#               ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#                ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#                 ^ template.ng expression.ng meta.array.literal.ts\n+#                  ^^^ template.ng expression.ng meta.array.literal.ts keyword.operator.spread.ts\n+#                     ^^^ template.ng expression.ng meta.array.literal.ts variable.other.readwrite.ts\n+#                        ^ template.ng expression.ng meta.array.literal.ts punctuation.separator.comma.ts\n+#                         ^ template.ng expression.ng meta.array.literal.ts\n+#                          ^ template.ng expression.ng meta.array.literal.ts constant.numeric.decimal.ts\n+#                           ^ template.ng expression.ng meta.array.literal.ts meta.brace.square.ts\n+#                            ^ template.ng expression.ng\n+#                             ^^ template.ng punctuation.definition.block.ts\n+\u003e{{ {{a: 1, ...foo, b: 2, ...bar, c: 3}} }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^^^ template.ng expression.ng\n+#     ^ template.ng expression.ng variable.other.readwrite.ts\n+#      ^^ template.ng expression.ng\n+#        ^ template.ng expression.ng constant.numeric.decimal.ts\n+#         ^ template.ng expression.ng punctuation.separator.comma.ts\n+#          ^ template.ng expression.ng\n+#           ^^^ template.ng expression.ng keyword.operator.spread.ts\n+#              ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                 ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                  ^ template.ng expression.ng\n+#                   ^ template.ng expression.ng variable.other.readwrite.ts\n+#                    ^^ template.ng expression.ng\n+#                      ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                       ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                        ^ template.ng expression.ng\n+#                         ^^^ template.ng expression.ng keyword.operator.spread.ts\n+#                            ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                               ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                                ^ template.ng expression.ng\n+#                                 ^ template.ng expression.ng variable.other.readwrite.ts\n+#                                  ^^ template.ng expression.ng\n+#                                    ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                                     ^^ template.ng punctuation.definition.block.ts\n+#                                       ^^^^ template.ng\n+\u003e\n+\u003e\u003c!-- Rest --\u003e\n+#^^^^^^^^^^^^^^ template.ng\n+\u003e{{ someFn(1, ...foo, 2, ...bar, 3, ...baz) }}\n+#^^ template.ng punctuation.definition.block.ts\n+#  ^ template.ng expression.ng\n+#   ^^^^^^ template.ng expression.ng entity.name.function.ts\n+#         ^ template.ng expression.ng meta.brace.round.ts\n+#          ^ template.ng expression.ng constant.numeric.decimal.ts\n+#           ^ template.ng expression.ng punctuation.separator.comma.ts\n+#            ^ template.ng expression.ng\n+#             ^^^ template.ng expression.ng keyword.operator.spread.ts\n+#                ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                   ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                    ^ template.ng expression.ng\n+#                     ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                      ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                       ^ template.ng expression.ng\n+#                        ^^^ template.ng expression.ng keyword.operator.spread.ts\n+#                           ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                              ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                               ^ template.ng expression.ng\n+#                                ^ template.ng expression.ng constant.numeric.decimal.ts\n+#                                 ^ template.ng expression.ng punctuation.separator.comma.ts\n+#                                  ^ template.ng expression.ng\n+#                                   ^^^ template.ng expression.ng keyword.operator.spread.ts\n+#                                      ^^^ template.ng expression.ng variable.other.readwrite.ts\n+#                                         ^ template.ng expression.ng meta.brace.round.ts\n+#                                          ^ template.ng expression.ng\n+#                                           ^^ template.ng punctuation.definition.block.ts\n \u003e\n\\ No newline at end of file","expectedMessage":"fix(vscode-extension): add syntax highlighting for spread/rest expressions","repository":"angular","commitHash":"c70a6a6ecc50e842bcd16db63650fc3501e462fb","metadata":{}}
{"id":"angular-e45f8afd","diff":" vscode-ng-language-service/CHANGELOG.md | 6 ++++++\n 1 file changed, 6 insertions(+)\n\ndiff --git a/vscode-ng-language-service/CHANGELOG.md b/vscode-ng-language-service/CHANGELOG.md\nindex c4e83534..9de2d943 100644\n--- a/vscode-ng-language-service/CHANGELOG.md\n+++ b/vscode-ng-language-service/CHANGELOG.md\n@@ -1,3 +1,9 @@\n+## 21.1.0 (2026-01-12)\n+\n+- fix(vscode-extension): convert enum member kind in completions correctly ([50674f8c28](https://github.com/angular/angular/commit/50674f8c28c970e6a9cfe222f9f55bace4e16321))\n+\n+\u003c!-- CHANGELOG SPLIT MARKER --\u003e\n+\n ## 21.0.1 (2025-12-17)\n \n - fix(language-service): Prevent language service from crashing on suggestion diagnostic errors ([5047be4bc1](https://github.com/angular/angular/commit/5047be4bc1c6f6016263703c743f8033f669f0ee))","expectedMessage":"docs: release notes for the vscode extension 21.1.0 release","repository":"angular","commitHash":"e45f8afdab1ad26128a2f3865eafd52db7cd4265","metadata":{}}
{"id":"angular-871fa1b2","diff":" packages/core/src/change_detection/lifecycle_hooks.ts | 19 +++++++++++++++----\n 1 file changed, 15 insertions(+), 4 deletions(-)\n\ndiff --git a/packages/core/src/change_detection/lifecycle_hooks.ts b/packages/core/src/change_detection/lifecycle_hooks.ts\nindex 94ac41ed..4a61dc26 100644\n--- a/packages/core/src/change_detection/lifecycle_hooks.ts\n+++ b/packages/core/src/change_detection/lifecycle_hooks.ts\n@@ -9,7 +9,8 @@ import {SimpleChanges} from \u0027./simple_change\u0027;\n \n /**\n  * @description\n- * A lifecycle hook that is called when any data-bound property of a directive changes.\n+ * A lifecycle hook that is called when the value of one or more component or directive inputs\n+ * change. This includes both signal-based and decorator-based inputs.\n  * Define an `ngOnChanges()` method to handle the changes.\n  *\n  * @see {@link DoCheck}\n@@ -18,9 +19,19 @@ import {SimpleChanges} from \u0027./simple_change\u0027;\n  *\n  * @usageNotes\n  * The following snippet shows how a component can implement this interface to\n- * define an on-changes handler for an input property.\n- *\n- * {@example core/ts/metadata/lifecycle_hooks_spec.ts region\u003d\u0027OnChanges\u0027}\n+ * define an on-changes handler for an input property. While you should prefer\n+ * `computed` and `effect` when working with signal-based inputs, the `ngOnChanges`\n+ * method does include value changes for signal-based inputs.\n+ *\n+ * ```ts\n+ * @Component({ ... })\n+ * export class UserProfile implements OnChanges {\n+ *   userId \u003d input\u003cnumber\u003e(0);\n+ *   ngOnChanges(changes: SimpleChanges\u003cUserProfile\u003e) {\n+ *     // changes.userId contains the old and new value.\n+ *   }\n+ * }\n+ * ```\n  *\n  * @publicApi\n  */","expectedMessage":"docs: update OnChanges API reference w/ signal input","repository":"angular","commitHash":"871fa1b2ddf124c5e0ffe2cbea0c38f39ec6dc1c","metadata":{}}
{"id":"angular-951671ab","diff":" adev/src/content/aria/_build-info.json    |  2 +-\n adev/src/content/aria/aria-accordion.json |  6 ++++++\n adev/src/content/aria/aria-combobox.json  |  9 +++++++++\n adev/src/content/aria/aria-grid.json      | 12 ++++++++++++\n adev/src/content/aria/aria-listbox.json   |  3 +++\n adev/src/content/aria/aria-menu.json      |  9 +++++++++\n adev/src/content/aria/aria-tabs.json      |  9 +++++++++\n adev/src/content/aria/aria-toolbar.json   |  9 +++++++++\n adev/src/content/aria/aria-tree.json      |  3 +++\n adev/src/content/cdk/_build-info.json     |  2 +-\n adev/src/content/cdk/cdk_drag_drop.json   |  3 +++\n 11 files changed, 65 insertions(+), 2 deletions(-)\n\ndiff --git a/adev/src/content/aria/_build-info.json b/adev/src/content/aria/_build-info.json\nindex b85ea990..de56a64f 100644\n--- a/adev/src/content/aria/_build-info.json\n+++ b/adev/src/content/aria/_build-info.json\n@@ -1,4 +1,4 @@\n {\n   \"branchName\": \"refs/heads/main\",\n-  \"sha\": \"2d371116b73210f2ce2977e2ad390dcc47aa24ca\"\n+  \"sha\": \"aac13b645a512e83843abe81b27541b11cc4278c\"\n }\n\\ No newline at end of file\ndiff --git a/adev/src/content/aria/aria-accordion.json b/adev/src/content/aria/aria-accordion.json\nindex a020eb71..1196c526 100755\n--- a/adev/src/content/aria/aria-accordion.json\n+++ b/adev/src/content/aria/aria-accordion.json\n@@ -382,6 +382,9 @@\n       \"exportAs\": [\n         \"ngAccordionTrigger\"\n       ],\n+      \"aliases\": [\n+        \"ngAccordionTrigger\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/accordion/accordion-trigger.ts\",\n         \"startLine\": 42,\n@@ -551,6 +554,9 @@\n       \"exportAs\": [\n         \"ngAccordionGroup\"\n       ],\n+      \"aliases\": [\n+        \"ngAccordionGroup\"\n+      ],\n       \"source\": {\n         \"filePath\": \"src/aria/accordion/accordion-group.ts\",\n         \"startLine\": 62,\ndiff --git a/adev/src/content/aria/aria-combobox.json b/adev/src/content/aria/aria-combobox.json\nindex 8669dc0c..8f720d3d 100755\n--- a/adev/src/content/aria/aria-combobox.json\n+++ b/adev/src/content/aria/aria-combobox.json\n@@ -131,6 +131,9 @@\n       \"exportAs\": [\n         \"ngComboboxDialog\"\n       ],\n+      \"aliases\": [\n+        \"ngComboboxDialog\"\n+      ],\n       \"source\": {\n         \"filePath\": \"src/aria/combobox/combobox-dialog.ts\",\n         \"startLine\": 34,\n@@ -208,6 +211,9 @@\n       \"exportAs\": [\n         \"ngComboboxInput\"\n       ],\n+      \"aliases\": [\n+        \"ngComboboxInput\"\n+      ],\n       \"source\": {\n         \"filePath\": \"src/aria/combobox/combobox-input.ts\",\n         \"startLine\": 44,\n@@ -265,6 +271,9 @@\n       \"exportAs\": [\n         \"ngComboboxPopup\"\n       ],\n+      \"aliases\": [\n+        \"ngComboboxPopup\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/combobox/combobox-popup.ts\",\n         \"startLine\": 29,\ndiff --git a/adev/src/content/aria/aria-grid.json b/adev/src/content/aria/aria-grid.json\nindex 0ff0bc17..33dc6b5a 100755\n--- a/adev/src/content/aria/aria-grid.json\n+++ b/adev/src/content/aria/aria-grid.json\n@@ -52,6 +52,9 @@\n       \"exportAs\": [\n         \"ngGridRow\"\n       ],\n+      \"aliases\": [\n+        \"ngGridRow\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/grid/grid-row.ts\",\n         \"startLine\": 35,\n@@ -266,6 +269,9 @@\n       \"exportAs\": [\n         \"ngGridCellWidget\"\n       ],\n+      \"aliases\": [\n+        \"ngGridCellWidget\"\n+      ],\n       \"source\": {\n         \"filePath\": \"src/aria/grid/grid-cell-widget.ts\",\n         \"startLine\": 42,\n@@ -434,6 +440,9 @@\n       \"exportAs\": [\n         \"ngGrid\"\n       ],\n+      \"aliases\": [\n+        \"ngGrid\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/grid/grid.ts\",\n         \"startLine\": 47,\n@@ -653,6 +662,9 @@\n       \"exportAs\": [\n         \"ngGridCell\"\n       ],\n+      \"aliases\": [\n+        \"ngGridCell\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/grid/grid-cell.ts\",\n         \"startLine\": 41,\ndiff --git a/adev/src/content/aria/aria-listbox.json b/adev/src/content/aria/aria-listbox.json\nindex 4f0042ed..124b4de3 100755\n--- a/adev/src/content/aria/aria-listbox.json\n+++ b/adev/src/content/aria/aria-listbox.json\n@@ -132,6 +132,9 @@\n       \"exportAs\": [\n         \"ngOption\"\n       ],\n+      \"aliases\": [\n+        \"ngOption\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/listbox/option.ts\",\n         \"startLine\": 34,\ndiff --git a/adev/src/content/aria/aria-menu.json b/adev/src/content/aria/aria-menu.json\nindex c8cf6101..bf3d3426 100755\n--- a/adev/src/content/aria/aria-menu.json\n+++ b/adev/src/content/aria/aria-menu.json\n@@ -210,6 +210,9 @@\n       \"exportAs\": [\n         \"ngMenuTrigger\"\n       ],\n+      \"aliases\": [\n+        \"ngMenuTrigger\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/menu/menu-trigger.ts\",\n         \"startLine\": 43,\n@@ -432,6 +435,9 @@\n       \"exportAs\": [\n         \"ngMenuItem\"\n       ],\n+      \"aliases\": [\n+        \"ngMenuItem\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/menu/menu-item.ts\",\n         \"startLine\": 33,\n@@ -602,6 +608,9 @@\n       \"exportAs\": [\n         \"ngMenuBar\"\n       ],\n+      \"aliases\": [\n+        \"ngMenuBar\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/menu/menu-bar.ts\",\n         \"startLine\": 56,\ndiff --git a/adev/src/content/aria/aria-tabs.json b/adev/src/content/aria/aria-tabs.json\nindex 496c0638..09aac1e3 100755\n--- a/adev/src/content/aria/aria-tabs.json\n+++ b/adev/src/content/aria/aria-tabs.json\n@@ -64,6 +64,9 @@\n       \"exportAs\": [\n         \"ngTabs\"\n       ],\n+      \"aliases\": [\n+        \"ngTabs\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/tabs/tabs.ts\",\n         \"startLine\": 45,\n@@ -402,6 +405,9 @@\n       \"exportAs\": [\n         \"ngTab\"\n       ],\n+      \"aliases\": [\n+        \"ngTab\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/tabs/tab.ts\",\n         \"startLine\": 41,\n@@ -664,6 +670,9 @@\n       \"exportAs\": [\n         \"ngTabList\"\n       ],\n+      \"aliases\": [\n+        \"ngTabList\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/tabs/tab-list.ts\",\n         \"startLine\": 45,\ndiff --git a/adev/src/content/aria/aria-toolbar.json b/adev/src/content/aria/aria-toolbar.json\nindex f54e5719..a8b42922 100755\n--- a/adev/src/content/aria/aria-toolbar.json\n+++ b/adev/src/content/aria/aria-toolbar.json\n@@ -69,6 +69,9 @@\n       \"exportAs\": [\n         \"ngToolbarWidgetGroup\"\n       ],\n+      \"aliases\": [\n+        \"ngToolbarWidgetGroup\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/toolbar/toolbar-widget-group.ts\",\n         \"startLine\": 31,\n@@ -190,6 +193,9 @@\n       \"exportAs\": [\n         \"ngToolbar\"\n       ],\n+      \"aliases\": [\n+        \"ngToolbar\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/toolbar/toolbar.ts\",\n         \"startLine\": 47,\n@@ -373,6 +379,9 @@\n       \"exportAs\": [\n         \"ngToolbarWidget\"\n       ],\n+      \"aliases\": [\n+        \"ngToolbarWidget\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/toolbar/toolbar-widget.ts\",\n         \"startLine\": 42,\ndiff --git a/adev/src/content/aria/aria-tree.json b/adev/src/content/aria/aria-tree.json\nindex 0809a1c4..da3c7fd7 100755\n--- a/adev/src/content/aria/aria-tree.json\n+++ b/adev/src/content/aria/aria-tree.json\n@@ -382,6 +382,9 @@\n       \"exportAs\": [\n         \"ngTreeItem\"\n       ],\n+      \"aliases\": [\n+        \"ngTreeItem\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/aria/tree/tree-item.ts\",\n         \"startLine\": 45,\ndiff --git a/adev/src/content/cdk/_build-info.json b/adev/src/content/cdk/_build-info.json\nindex 5ef951d5..50993cb2 100644\n--- a/adev/src/content/cdk/_build-info.json\n+++ b/adev/src/content/cdk/_build-info.json\n@@ -1,4 +1,4 @@\n {\n   \"branchName\": \"refs/heads/main\",\n-  \"sha\": \"0b2cabc2994899bae15e40a1575abf85d3540abc\"\n+  \"sha\": \"fc8b94d631a5d105a87abc2a008a6e8f76d7f3f5\"\n }\n\\ No newline at end of file\ndiff --git a/adev/src/content/cdk/cdk_drag_drop.json b/adev/src/content/cdk/cdk_drag_drop.json\nindex 5da91e47..46049465 100755\n--- a/adev/src/content/cdk/cdk_drag_drop.json\n+++ b/adev/src/content/cdk/cdk_drag_drop.json\n@@ -697,6 +697,9 @@\n       \"isStandalone\": true,\n       \"selector\": \"ng-template[cdkDragPlaceholder]\",\n       \"exportAs\": [],\n+      \"aliases\": [\n+        \"cdkDragPlaceholder\"\n+      ],\n       \"source\": {\n         \"filePath\": \"/src/cdk/drag-drop/directives/drag-placeholder.ts\",\n         \"startLine\": 23,","expectedMessage":"docs: update cross-repo adev docs","repository":"angular","commitHash":"951671ab09160d582ca4cbb81f82fd02fc719092","metadata":{}}
{"id":"angular-e8f8ac20","diff":" package.json   |  1 -\n pnpm-lock.yaml | 14 --------------\n 2 files changed, 15 deletions(-)\n\ndiff --git a/package.json b/package.json\nindex 394bba95..cea79494 100644\n--- a/package.json\n+++ b/package.json\n@@ -162,7 +162,6 @@\n   \"devDependencies\": {\n     \"@actions/core\": \"^2.0.0\",\n     \"@actions/github\": \"^7.0.0\",\n-    \"@angular-devkit/architect-cli\": \"0.2101.0-rc.0\",\n     \"@angular/ng-dev\": \"https://github.com/angular/dev-infra-private-ng-dev-builds.git#486b075a283ef0c169475b981de1bd229114a000\",\n     \"@babel/plugin-proposal-async-generator-functions\": \"7.20.7\",\n     \"@babel/plugin-transform-async-generator-functions\": \"^7.27.1\",\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex a4c5a79e..e774da61 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -338,9 +338,6 @@ importers:\n       \u0027@actions/github\u0027:\n         specifier: ^7.0.0\n         version: 7.0.0\n-      \u0027@angular-devkit/architect-cli\u0027:\n-        specifier: 0.2101.0-rc.0\n-        version: 0.2101.0-rc.0(chokidar@5.0.0)\n       \u0027@angular/ng-dev\u0027:\n         specifier: https://github.com/angular/dev-infra-private-ng-dev-builds.git#486b075a283ef0c169475b981de1bd229114a000\n         version: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/486b075a283ef0c169475b981de1bd229114a000(@modelcontextprotocol/sdk@1.25.2)\n@@ -1533,11 +1530,6 @@ packages:\n     resolution: {integrity: sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw\u003d\u003d}\n     engines: {node: \u0027\u003e\u003d6.0.0\u0027}\n \n-  \u0027@angular-devkit/architect-cli@0.2101.0-rc.0\u0027:\n-    resolution: {integrity: sha512-hNCHyH1FjrTtZFHAmTH5tLPNo26+3xWwv64H0fQiiLsmdnKkONqJDJMw9YqjxOpjxzLnhyIuaAg4RJnYMLvRSA\u003d\u003d}\n-    engines: {node: ^20.19.0 || ^22.12.0 || \u003e\u003d24.0.0, npm: ^6.11.0 || ^7.5.6 || \u003e\u003d8.0.0, yarn: \u0027\u003e\u003d 1.13.0\u0027}\n-    hasBin: true\n-\n   \u0027@angular-devkit/architect@0.2101.0-rc.0\u0027:\n     resolution: {integrity: sha512-QohNOLzTorQejqb4Kr5GFB9gCiaTuarmTza53g8oYjSMzB/zLDDN6O5e7SW6lp+wdfIla2mnUWyVBJSTNOa+Hg\u003d\u003d}\n     engines: {node: ^20.19.0 || ^22.12.0 || \u003e\u003d24.0.0, npm: ^6.11.0 || ^7.5.6 || \u003e\u003d8.0.0, yarn: \u0027\u003e\u003d 1.13.0\u0027}\n@@ -13540,12 +13532,6 @@ snapshots:\n       \u0027@jridgewell/gen-mapping\u0027: 0.3.13\n       \u0027@jridgewell/trace-mapping\u0027: 0.3.31\n \n-  \u0027@angular-devkit/architect-cli@0.2101.0-rc.0(chokidar@5.0.0)\u0027:\n-    dependencies:\n-      \u0027@angular-devkit/architect\u0027: 0.2101.0-rc.0(chokidar@5.0.0)\n-    transitivePeerDependencies:\n-      - chokidar\n-\n   \u0027@angular-devkit/architect@0.2101.0-rc.0(chokidar@5.0.0)\u0027:\n     dependencies:\n       \u0027@angular-devkit/core\u0027: 21.1.0-rc.0(chokidar@5.0.0)","expectedMessage":"build: remove `@angular-devkit/architect-cli` from dev dependencies","repository":"angular","commitHash":"e8f8ac20d6934f48619d0f4ede8cd131dd3b3aa5","metadata":{}}
{"id":"angular-72534e2a","diff":" .../content/guide/templates/expression-syntax.md   |  2 +-\n .../src/ngtsc/translator/src/api/ast_factory.ts    |  5 +++--\n .../src/ngtsc/translator/src/translator.ts         |  1 +\n .../ngtsc/translator/src/typescript_ast_factory.ts |  3 ++-\n .../src/ngtsc/typecheck/src/expression.ts          |  3 ++-\n .../ngtsc/typecheck/test/type_check_block_spec.ts  |  9 ++++++++\n .../test_cases/r3_view_compiler/GOLDEN_PARTIAL.js  | 10 +++++++++\n .../test_cases/r3_view_compiler/operators.ts       |  7 +++++-\n .../r3_view_compiler/operators_template.js         | 10 ++++-----\n .../test/ngtsc/template_typecheck_spec.ts          | 20 +++++++++++++++++\n packages/compiler/src/expression_parser/ast.ts     |  1 +\n packages/compiler/src/expression_parser/lexer.ts   |  5 +++++\n packages/compiler/src/expression_parser/parser.ts  |  9 ++++++--\n packages/compiler/src/output/abstract_emitter.ts   |  1 +\n packages/compiler/src/output/output_ast.ts         |  1 +\n .../src/template/pipeline/src/conversion.ts        |  1 +\n .../compiler/test/expression_parser/lexer_spec.ts  |  6 +++++\n .../compiler/test/expression_parser/parser_spec.ts | 21 +++++++++++------\n .../test/expression_parser/serializer_spec.ts      |  4 ++++\n .../core/test/acceptance/control_flow_if_spec.ts   | 26 ++++++++++++++++++++++\n packages/core/test/acceptance/integration_spec.ts  | 24 ++++++++++++++++++--\n 21 files changed, 147 insertions(+), 22 deletions(-)\n\ndiff --git a/adev/src/content/guide/templates/expression-syntax.md b/adev/src/content/guide/templates/expression-syntax.md\nindex b0d32c28..298f5e40 100644\n--- a/adev/src/content/guide/templates/expression-syntax.md\n+++ b/adev/src/content/guide/templates/expression-syntax.md\n@@ -68,6 +68,7 @@ Angular supports the following operators from standard JavaScript.\n | typeof                        | `typeof 42`                                    |\n | void                          | `void 1`                                       |\n | in                            | `\u0027model\u0027 in car`                               |\n+| instanceof                    | `car instanceof Automobile`                    |\n | Assignment                    | `a \u003d b`                                        |\n | Addition Assignment           | `a +\u003d b`                                       |\n | Subtraction Assignment        | `a -\u003d b`                                       |\n@@ -100,7 +101,6 @@ NOTE: Optional chaining behaves differently from the standard JavaScript version\n | Object destructuring  | `const { name } \u003d person`         |\n | Array destructuring   | `const [firstItem] \u003d items`       |\n | Comma operator        | `x \u003d (x++, x)`                    |\n-| instanceof            | `car instanceof Automobile`       |\n | new                   | `new Car()`                       |\n \n ## Lexical context for expressions\ndiff --git a/packages/compiler-cli/src/ngtsc/translator/src/api/ast_factory.ts b/packages/compiler-cli/src/ngtsc/translator/src/api/ast_factory.ts\nindex 5461ddf9..cb9dc984 100644\n--- a/packages/compiler-cli/src/ngtsc/translator/src/api/ast_factory.ts\n+++ b/packages/compiler-cli/src/ngtsc/translator/src/api/ast_factory.ts\n@@ -333,7 +333,6 @@ export type BinaryOperator \u003d\n   | \u0027||\u0027\n   | \u0027+\u0027\n   | \u0027??\u0027\n-  | \u0027in\u0027\n   | \u0027\u003d\u0027\n   | \u0027+\u003d\u0027\n   | \u0027-\u003d\u0027\n@@ -343,7 +342,9 @@ export type BinaryOperator \u003d\n   | \u0027**\u003d\u0027\n   | \u0027\u0026\u0026\u003d\u0027\n   | \u0027||\u003d\u0027\n-  | \u0027??\u003d\u0027;\n+  | \u0027??\u003d\u0027\n+  | \u0027in\u0027\n+  | \u0027instanceof\u0027;\n \n /**\n  * The original location of the start or end of a node created by the `AstFactory`.\ndiff --git a/packages/compiler-cli/src/ngtsc/translator/src/translator.ts b/packages/compiler-cli/src/ngtsc/translator/src/translator.ts\nindex d4bb430c..517fd267 100644\n--- a/packages/compiler-cli/src/ngtsc/translator/src/translator.ts\n+++ b/packages/compiler-cli/src/ngtsc/translator/src/translator.ts\n@@ -47,6 +47,7 @@ const BINARY_OPERATORS \u003d /* @__PURE__ */ new Map\u003co.BinaryOperator, BinaryOperato\n   [o.BinaryOperator.NullishCoalesce, \u0027??\u0027],\n   [o.BinaryOperator.Exponentiation, \u0027**\u0027],\n   [o.BinaryOperator.In, \u0027in\u0027],\n+  [o.BinaryOperator.InstanceOf, \u0027instanceof\u0027],\n   [o.BinaryOperator.Assign, \u0027\u003d\u0027],\n   [o.BinaryOperator.AdditionAssignment, \u0027+\u003d\u0027],\n   [o.BinaryOperator.SubtractionAssignment, \u0027-\u003d\u0027],\ndiff --git a/packages/compiler-cli/src/ngtsc/translator/src/typescript_ast_factory.ts b/packages/compiler-cli/src/ngtsc/translator/src/typescript_ast_factory.ts\nindex ce4e8014..50b69c0c 100644\n--- a/packages/compiler-cli/src/ngtsc/translator/src/typescript_ast_factory.ts\n+++ b/packages/compiler-cli/src/ngtsc/translator/src/typescript_ast_factory.ts\n@@ -68,7 +68,6 @@ export class TypeScriptAstFactory implements AstFactory\u003cts.Statement, ts.Express\n       \u0027||\u0027: ts.SyntaxKind.BarBarToken,\n       \u0027+\u0027: ts.SyntaxKind.PlusToken,\n       \u0027??\u0027: ts.SyntaxKind.QuestionQuestionToken,\n-      \u0027in\u0027: ts.SyntaxKind.InKeyword,\n       \u0027\u003d\u0027: ts.SyntaxKind.EqualsToken,\n       \u0027+\u003d\u0027: ts.SyntaxKind.PlusEqualsToken,\n       \u0027-\u003d\u0027: ts.SyntaxKind.MinusEqualsToken,\n@@ -79,6 +78,8 @@ export class TypeScriptAstFactory implements AstFactory\u003cts.Statement, ts.Express\n       \u0027\u0026\u0026\u003d\u0027: ts.SyntaxKind.AmpersandAmpersandEqualsToken,\n       \u0027||\u003d\u0027: ts.SyntaxKind.BarBarEqualsToken,\n       \u0027??\u003d\u0027: ts.SyntaxKind.QuestionQuestionEqualsToken,\n+      \u0027in\u0027: ts.SyntaxKind.InKeyword,\n+      \u0027instanceof\u0027: ts.SyntaxKind.InstanceOfKeyword,\n     }))();\n \n   private readonly VAR_TYPES: Record\u003cVariableDeclarationType, ts.NodeFlags\u003e \u003d\ndiff --git a/packages/compiler-cli/src/ngtsc/typecheck/src/expression.ts b/packages/compiler-cli/src/ngtsc/typecheck/src/expression.ts\nindex 96158374..e360bfce 100644\n--- a/packages/compiler-cli/src/ngtsc/typecheck/src/expression.ts\n+++ b/packages/compiler-cli/src/ngtsc/typecheck/src/expression.ts\n@@ -106,7 +106,6 @@ class AstTranslator implements AstVisitor {\n     [\u0027\u0026\u0027, ts.SyntaxKind.AmpersandToken],\n     [\u0027|\u0027, ts.SyntaxKind.BarToken],\n     [\u0027??\u0027, ts.SyntaxKind.QuestionQuestionToken],\n-    [\u0027in\u0027, ts.SyntaxKind.InKeyword],\n     [\u0027\u003d\u0027, ts.SyntaxKind.EqualsToken],\n     [\u0027+\u003d\u0027, ts.SyntaxKind.PlusEqualsToken],\n     [\u0027-\u003d\u0027, ts.SyntaxKind.MinusEqualsToken],\n@@ -117,6 +116,8 @@ class AstTranslator implements AstVisitor {\n     [\u0027\u0026\u0026\u003d\u0027, ts.SyntaxKind.AmpersandAmpersandEqualsToken],\n     [\u0027||\u003d\u0027, ts.SyntaxKind.BarBarEqualsToken],\n     [\u0027??\u003d\u0027, ts.SyntaxKind.QuestionQuestionEqualsToken],\n+    [\u0027in\u0027, ts.SyntaxKind.InKeyword],\n+    [\u0027instanceof\u0027, ts.SyntaxKind.InstanceOfKeyword],\n   ]);\n \n   constructor(\ndiff --git a/packages/compiler-cli/src/ngtsc/typecheck/test/type_check_block_spec.ts b/packages/compiler-cli/src/ngtsc/typecheck/test/type_check_block_spec.ts\nindex 41043cbc..9a65f05c 100644\n--- a/packages/compiler-cli/src/ngtsc/typecheck/test/type_check_block_spec.ts\n+++ b/packages/compiler-cli/src/ngtsc/typecheck/test/type_check_block_spec.ts\n@@ -114,6 +114,15 @@ describe(\u0027type check blocks\u0027, () \u003d\u003e {\n     expect(tcb(`{{!(\u0027bar\u0027 in {bar: \u0027bar\u0027}) }}`)).toContain(`!(((\"bar\") in ({ \"bar\": \"bar\" })))`);\n   });\n \n+  it(\u0027should handle \"instanceof\" expressions\u0027, () \u003d\u003e {\n+    expect(tcb(`{{obj instanceof MyClass}}`)).toContain(\n+      `((((this).obj)) instanceof (((this).MyClass)))`,\n+    );\n+    expect(tcb(`{{!(obj instanceof MyClass)}}`)).toContain(\n+      `!(((((this).obj)) instanceof (((this).MyClass)))))`,\n+    );\n+  });\n+\n   it(\u0027should handle attribute values for directive inputs\u0027, () \u003d\u003e {\n     const TEMPLATE \u003d `\u003cdiv dir inputA\u003d\"value\"\u003e\u003c/div\u003e`;\n     const DIRECTIVES: TestDeclaration[] \u003d [\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/GOLDEN_PARTIAL.js b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/GOLDEN_PARTIAL.js\nindex 70c0ecda..f40ecd9b 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/GOLDEN_PARTIAL.js\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/GOLDEN_PARTIAL.js\n@@ -80,9 +80,13 @@ i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDE\n             type: Pipe,\n             args: [{ name: \u0027identity\u0027 }]\n         }] });\n+export class Bar {\n+}\n export class MyApp {\n     foo \u003d { bar: \u0027baz\u0027 };\n     number \u003d 1;\n+    bar \u003d new Bar();\n+    Bar \u003d Bar;\n     static fac \u003d i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyApp, deps: [], target: i0.FactoryTarget.Component });\n     static cmp \u003d i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"0.0.0-PLACEHOLDER\", type: MyApp, isStandalone: true, selector: \"ng-component\", ngImport: i0, template: `\n     {{ 1 + 2 }}\n@@ -95,6 +99,7 @@ export class MyApp {\n     {{ void \u0027test\u0027 }}\n     {{ (-1) ** 3 }}\n     {{ \u0027bar\u0027 in foo }}\n+    {{ bar instanceof Bar }}\n     \u003cbutton (click)\u003d\"number +\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number -\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number *\u003d 1\"\u003e\u003c/button\u003e\n@@ -120,6 +125,7 @@ i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDE\n     {{ void \u0027test\u0027 }}\n     {{ (-1) ** 3 }}\n     {{ \u0027bar\u0027 in foo }}\n+    {{ bar instanceof Bar }}\n     \u003cbutton (click)\u003d\"number +\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number -\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number *\u003d 1\"\u003e\u003c/button\u003e\n@@ -143,11 +149,15 @@ export declare class IdentityPipe {\n     static fac: i0.FactoryDeclaration\u003cIdentityPipe, never\u003e;\n     static pipe: i0.PipeDeclaration\u003cIdentityPipe, \"identity\", true\u003e;\n }\n+export declare class Bar {\n+}\n export declare class MyApp {\n     foo: {\n         bar?: string;\n     };\n     number: number;\n+    bar: Bar;\n+    Bar: typeof Bar;\n     static fac: i0.FactoryDeclaration\u003cMyApp, never\u003e;\n     static cmp: i0.ComponentDeclaration\u003cMyApp, \"ng-component\", never, {}, {}, never, never, true, never\u003e;\n }\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators.ts b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators.ts\nindex 73568857..a4d03d7e 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators.ts\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators.ts\n@@ -1,4 +1,4 @@\n-import {Component, Pipe} from \u0027@angular/core\u0027;\n+import { Component, Pipe } from \u0027@angular/core\u0027;\n \n @Pipe({name: \u0027identity\u0027})\n export class IdentityPipe {\n@@ -7,6 +7,8 @@ export class IdentityPipe {\n   }\n }\n \n+export class Bar {}\n+\n @Component({\n   template: `\n     {{ 1 + 2 }}\n@@ -19,6 +21,7 @@ export class IdentityPipe {\n     {{ void \u0027test\u0027 }}\n     {{ (-1) ** 3 }}\n     {{ \u0027bar\u0027 in foo }}\n+    {{ bar instanceof Bar }}\n     \u003cbutton (click)\u003d\"number +\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number -\u003d 1\"\u003e\u003c/button\u003e\n     \u003cbutton (click)\u003d\"number *\u003d 1\"\u003e\u003c/button\u003e\n@@ -34,4 +37,6 @@ export class IdentityPipe {\n export class MyApp {\n   foo: {bar?: string} \u003d {bar: \u0027baz\u0027};\n   number \u003d 1;\n+  bar \u003d new Bar();\n+  Bar \u003d Bar;\n }\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators_template.js b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators_template.js\nindex d2e83ba7..c272e02e 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators_template.js\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/operators_template.js\n@@ -25,14 +25,14 @@ template: function MyApp_Template(rf, $ctx$) {\n \t\t1 + 2, \" \", \n \t\t1 % 2 + 3 / 4 * 5 ** 6, \" \", \n \t\t+1, \" \", \n-\t\ttypeof $r3$.pureFunction0(12, _c0) \u003d\u003d\u003d \"object\", \" \", \n-\t\t!(typeof $r3$.pureFunction0(13, _c0) \u003d\u003d\u003d \"object\"), \" \", \n+\t\ttypeof $r3$.pureFunction0(13, _c0) \u003d\u003d\u003d \"object\", \" \", \n+\t\t!(typeof $r3$.pureFunction0(14, _c0) \u003d\u003d\u003d \"object\"), \" \", \n \t\ttypeof ($ctx$.foo \u003d\u003d null ? null : $ctx$.foo.bar) \u003d\u003d\u003d \"string\", \" \", \n-\t\t$r3$.pipeBind1(1, 10, typeof ($ctx$.foo \u003d\u003d null ? null : $ctx$.foo.bar)), \" \",\n+\t\t$r3$.pipeBind1(1, 11, typeof ($ctx$.foo \u003d\u003d null ? null : $ctx$.foo.bar)), \" \",\n \t\tvoid \"test\", \" \",\n \t\t(-1) ** 3, \" \",\n-\t\t\"bar\" in $ctx$.foo, \" \"\n+\t\t\"bar\" in $ctx$.foo, \" \",\n+\t\t$ctx$.bar instanceof $ctx$.Bar, \" \"\n \t  ]);\t\n \t}\n }\n-  \n\\ No newline at end of file\ndiff --git a/packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts b/packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts\nindex 8d2e0641..c73ea218 100644\n--- a/packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts\n+++ b/packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts\n@@ -816,6 +816,26 @@ runInEachFileSystem(() \u003d\u003e {\n       expect(diags[0].messageText).toContain(`Type \u0027string\u0027 is not assignable to type \u0027object\u0027`);\n     });\n \n+    it(\u0027should error on invalid instanceof binary expressions\u0027, () \u003d\u003e {\n+      env.write(\n+        \u0027test.ts\u0027,\n+        `\n+        import {Component} from \u0027@angular/core\u0027;\n+        @Component({\n+          template: \\` {{\u0027foo\u0027 instanceof String}} \\`,\n+        })\n+        class TestCmp {\n+        }\n+        `,\n+      );\n+\n+      const diags \u003d env.driveDiagnostics();\n+      expect(diags.length).toBe(2);\n+      expect(diags[0].messageText).toContain(\n+        `The left-hand side of an \u0027instanceof\u0027 expression must be of type \u0027any\u0027, an object type or a type parameter.`,\n+      );\n+    });\n+\n     describe(\u0027strictInputTypes\u0027, () \u003d\u003e {\n       beforeEach(() \u003d\u003e {\n         env.write(\ndiff --git a/packages/compiler/src/expression_parser/ast.ts b/packages/compiler/src/expression_parser/ast.ts\nindex abefe44e..3ab242cf 100644\n--- a/packages/compiler/src/expression_parser/ast.ts\n+++ b/packages/compiler/src/expression_parser/ast.ts\n@@ -296,6 +296,7 @@ type BinaryOperation \u003d\n   | \u0027\u003c\u003d\u0027\n   | \u0027\u003e\u003d\u0027\n   | \u0027in\u0027\n+  | \u0027instanceof\u0027\n   // Additive\n   | \u0027+\u0027\n   | \u0027-\u0027\ndiff --git a/packages/compiler/src/expression_parser/lexer.ts b/packages/compiler/src/expression_parser/lexer.ts\nindex c91bf800..4d0568c5 100644\n--- a/packages/compiler/src/expression_parser/lexer.ts\n+++ b/packages/compiler/src/expression_parser/lexer.ts\n@@ -41,6 +41,7 @@ const KEYWORDS \u003d [\n   \u0027typeof\u0027,\n   \u0027void\u0027,\n   \u0027in\u0027,\n+  \u0027instanceof\u0027,\n ];\n \n export class Lexer {\n@@ -126,6 +127,10 @@ export class Token {\n     return this.type \u003d\u003d\u003d TokenType.Keyword \u0026\u0026 this.strValue \u003d\u003d\u003d \u0027in\u0027;\n   }\n \n+  isKeywordInstanceOf(): boolean {\n+    return this.type \u003d\u003d\u003d TokenType.Keyword \u0026\u0026 this.strValue \u003d\u003d\u003d \u0027instanceof\u0027;\n+  }\n+\n   isError(): boolean {\n     return this.type \u003d\u003d\u003d TokenType.Error;\n   }\ndiff --git a/packages/compiler/src/expression_parser/parser.ts b/packages/compiler/src/expression_parser/parser.ts\nindex 73988ad7..c0de70d4 100644\n--- a/packages/compiler/src/expression_parser/parser.ts\n+++ b/packages/compiler/src/expression_parser/parser.ts\n@@ -964,10 +964,14 @@ class _ParseAST {\n   }\n \n   private parseRelational(): AST {\n-    // \u0027\u003c\u0027, \u0027\u003e\u0027, \u0027\u003c\u003d\u0027, \u0027\u003e\u003d\u0027, \u0027in\u0027\n+    // \u0027\u003c\u0027, \u0027\u003e\u0027, \u0027\u003c\u003d\u0027, \u0027\u003e\u003d\u0027, \u0027in\u0027, \u0027instanceof\u0027\n     const start \u003d this.inputIndex;\n     let result \u003d this.parseAdditive();\n-    while (this.next.type \u003d\u003d TokenType.Operator || this.next.isKeywordIn) {\n+    while (\n+      this.next.type \u003d\u003d TokenType.Operator ||\n+      this.next.isKeywordIn() || // Should be invoked. This is bug here that will be fixed by #65249 when the breaking change window opens.\n+      this.next.isKeywordInstanceOf()\n+    ) {\n       const operator \u003d this.next.strValue;\n       switch (operator) {\n         case \u0027\u003c\u0027:\n@@ -975,6 +979,7 @@ class _ParseAST {\n         case \u0027\u003c\u003d\u0027:\n         case \u0027\u003e\u003d\u0027:\n         case \u0027in\u0027:\n+        case \u0027instanceof\u0027:\n           this.advance();\n           const right \u003d this.parseAdditive();\n           result \u003d new Binary(this.span(start), this.sourceSpan(start), operator, result, right);\ndiff --git a/packages/compiler/src/output/abstract_emitter.ts b/packages/compiler/src/output/abstract_emitter.ts\nindex 2ec7b776..adcff820 100644\n--- a/packages/compiler/src/output/abstract_emitter.ts\n+++ b/packages/compiler/src/output/abstract_emitter.ts\n@@ -44,6 +44,7 @@ const BINARY_OPERATORS \u003d new Map([\n   [o.BinaryOperator.Or, \u0027||\u0027],\n   [o.BinaryOperator.Plus, \u0027+\u0027],\n   [o.BinaryOperator.In, \u0027in\u0027],\n+  [o.BinaryOperator.InstanceOf, \u0027instanceof\u0027],\n   [o.BinaryOperator.AdditionAssignment, \u0027+\u003d\u0027],\n   [o.BinaryOperator.SubtractionAssignment, \u0027-\u003d\u0027],\n   [o.BinaryOperator.MultiplicationAssignment, \u0027*\u003d\u0027],\ndiff --git a/packages/compiler/src/output/output_ast.ts b/packages/compiler/src/output/output_ast.ts\nindex 2680e8fb..cf12cc81 100644\n--- a/packages/compiler/src/output/output_ast.ts\n+++ b/packages/compiler/src/output/output_ast.ts\n@@ -143,6 +143,7 @@ export enum BinaryOperator {\n   NullishCoalesce,\n   Exponentiation,\n   In,\n+  InstanceOf,\n   AdditionAssignment,\n   SubtractionAssignment,\n   MultiplicationAssignment,\ndiff --git a/packages/compiler/src/template/pipeline/src/conversion.ts b/packages/compiler/src/template/pipeline/src/conversion.ts\nindex e29a2e1b..de4657af 100644\n--- a/packages/compiler/src/template/pipeline/src/conversion.ts\n+++ b/packages/compiler/src/template/pipeline/src/conversion.ts\n@@ -31,6 +31,7 @@ export const BINARY_OPERATORS \u003d new Map([\n   [\u0027||\u0027, o.BinaryOperator.Or],\n   [\u0027+\u0027, o.BinaryOperator.Plus],\n   [\u0027in\u0027, o.BinaryOperator.In],\n+  [\u0027instanceof\u0027, o.BinaryOperator.InstanceOf],\n   [\u0027+\u003d\u0027, o.BinaryOperator.AdditionAssignment],\n   [\u0027-\u003d\u0027, o.BinaryOperator.SubtractionAssignment],\n   [\u0027*\u003d\u0027, o.BinaryOperator.MultiplicationAssignment],\ndiff --git a/packages/compiler/test/expression_parser/lexer_spec.ts b/packages/compiler/test/expression_parser/lexer_spec.ts\nindex 00ebb071..62e3f6be 100644\n--- a/packages/compiler/test/expression_parser/lexer_spec.ts\n+++ b/packages/compiler/test/expression_parser/lexer_spec.ts\n@@ -222,6 +222,12 @@ describe(\u0027lexer\u0027, () \u003d\u003e {\n       expect(tokens[0].isKeywordIn()).toBe(true);\n     });\n \n+    it(\u0027should tokenize instanceof keyword\u0027, () \u003d\u003e {\n+      const tokens: Token[] \u003d lex(\u0027instanceof\u0027);\n+      expectKeywordToken(tokens[0], 0, 10, \u0027instanceof\u0027);\n+      expect(tokens[0].isKeywordInstanceOf()).toBe(true);\n+    });\n+\n     it(\u0027should ignore whitespace\u0027, () \u003d\u003e {\n       const tokens: Token[] \u003d lex(\u0027a \\t \\n \\r b\u0027);\n       expectIdentifierToken(tokens[0], 0, 1, \u0027a\u0027);\ndiff --git a/packages/compiler/test/expression_parser/parser_spec.ts b/packages/compiler/test/expression_parser/parser_spec.ts\nindex c62c630a..86ac58fd 100644\n--- a/packages/compiler/test/expression_parser/parser_spec.ts\n+++ b/packages/compiler/test/expression_parser/parser_spec.ts\n@@ -6,30 +6,30 @@\n  * found in the LICENSE file at https://angular.dev/license\n  */\n \n+import {expect} from \u0027@angular/private/testing/matchers\u0027;\n import {\n   AbsoluteSourceSpan,\n+  ArrowFunction,\n   ASTWithSource,\n   BindingPipe,\n+  BindingPipeType,\n   Call,\n   EmptyExpr,\n   Interpolation,\n   LiteralMap,\n+  LiteralMapPropertyKey,\n+  ParseSpan,\n   PropertyRead,\n   TemplateBinding,\n   VariableBinding,\n-  BindingPipeType,\n-  ParseSpan,\n-  LiteralMapPropertyKey,\n-  ArrowFunction,\n } from \u0027../../src/expression_parser/ast\u0027;\n-import {ParseError} from \u0027../../src/parse_util\u0027;\n import {Lexer} from \u0027../../src/expression_parser/lexer\u0027;\n import {Parser, SplitInterpolation} from \u0027../../src/expression_parser/parser\u0027;\n-import {expect} from \u0027@angular/private/testing/matchers\u0027;\n+import {ParseError} from \u0027../../src/parse_util\u0027;\n \n+import {getFakeSpan} from \u0027./utils/span\u0027;\n import {unparse, unparseWithSpan} from \u0027./utils/unparser\u0027;\n import {validate} from \u0027./utils/validator\u0027;\n-import {getFakeSpan} from \u0027./utils/span\u0027;\n \n describe(\u0027parser\u0027, () \u003d\u003e {\n   describe(\u0027parseAction\u0027, () \u003d\u003e {\n@@ -88,6 +88,8 @@ describe(\u0027parser\u0027, () \u003d\u003e {\n       checkAction(\u00272 \u003e 3\u0027);\n       checkAction(\u00272 \u003c\u003d 2\u0027);\n       checkAction(\u00272 \u003e\u003d 2\u0027);\n+      checkAction(`\"key\" in obj`);\n+      checkAction(`foo instanceof Foo`);\n     });\n \n     it(\u0027should parse equality expressions\u0027, () \u003d\u003e {\n@@ -130,6 +132,11 @@ describe(\u0027parser\u0027, () \u003d\u003e {\n       checkAction(\u0027a //comment\u0027, \u0027a\u0027);\n     });\n \n+    it(\u0027should parse instanceof expressions\u0027, () \u003d\u003e {\n+      checkAction(`obj instanceof MyClass`, `obj instanceof MyClass`);\n+      checkAction(`(obj instanceof MyClass) || false`, `(obj instanceof MyClass) || false`);\n+    });\n+\n     it(\u0027should retain // in string literals\u0027, () \u003d\u003e {\n       checkAction(`\"http://www.google.com\"`, `\"http://www.google.com\"`);\n     });\ndiff --git a/packages/compiler/test/expression_parser/serializer_spec.ts b/packages/compiler/test/expression_parser/serializer_spec.ts\nindex 75a22317..a4d58636 100644\n--- a/packages/compiler/test/expression_parser/serializer_spec.ts\n+++ b/packages/compiler/test/expression_parser/serializer_spec.ts\n@@ -132,5 +132,9 @@ describe(\u0027serializer\u0027, () \u003d\u003e {\n     it(\u0027serializes in expressions\u0027, () \u003d\u003e {\n       expect(serialize(parse(\u0027 foo   in   bar \u0027))).toBe(\u0027foo in bar\u0027);\n     });\n+\n+    it(\u0027serializes instanceof expressions\u0027, () \u003d\u003e {\n+      expect(serialize(parse(\u0027 foo   instanceof   Bar \u0027))).toBe(\u0027foo instanceof Bar\u0027);\n+    });\n   });\n });\ndiff --git a/packages/core/test/acceptance/control_flow_if_spec.ts b/packages/core/test/acceptance/control_flow_if_spec.ts\nindex 01082650..56898277 100644\n--- a/packages/core/test/acceptance/control_flow_if_spec.ts\n+++ b/packages/core/test/acceptance/control_flow_if_spec.ts\n@@ -321,6 +321,32 @@ describe(\u0027control flow - if\u0027, () \u003d\u003e {\n     expect(fixture.nativeElement.textContent.trim()).toBe(\u0027no 42\u0027);\n   });\n \n+  it(\u0027should support a condition with the instanceof keyword\u0027, () \u003d\u003e {\n+    class Foo {}\n+\n+    // prettier-ignore\n+    @Component({\n+      template: `\n+        @if (value instanceof Foo) {\n+          is Foo\n+        } @else {\n+          is not Foo\n+        }\n+      `,\n+    })\n+    class TestComponent {\n+      Foo \u003d Foo;\n+      value: string | Foo \u003d new Foo();\n+    }\n+\n+    const fixture \u003d TestBed.createComponent(TestComponent);\n+    fixture.detectChanges();\n+    expect(fixture.nativeElement.textContent.trim()).toBe(\u0027is Foo\u0027);\n+    fixture.componentInstance.value \u003d \u0027not a Foo\u0027;\n+    fixture.detectChanges();\n+    expect(fixture.nativeElement.textContent.trim()).toBe(\u0027is not Foo\u0027);\n+  });\n+\n   it(\u0027should expose expression value through alias on @else if\u0027, () \u003d\u003e {\n     @Component({\n       template: `\ndiff --git a/packages/core/test/acceptance/integration_spec.ts b/packages/core/test/acceptance/integration_spec.ts\nindex 00bda0ee..80c34326 100644\n--- a/packages/core/test/acceptance/integration_spec.ts\n+++ b/packages/core/test/acceptance/integration_spec.ts\n@@ -9,6 +9,8 @@ import {animate, AnimationEvent, state, style, transition, trigger} from \u0027@angul\n import {AnimationDriver} from \u0027@angular/animations/browser\u0027;\n import {MockAnimationDriver, MockAnimationPlayer} from \u0027@angular/animations/browser/testing\u0027;\n import {CommonModule} from \u0027@angular/common\u0027;\n+import {By} from \u0027@angular/platform-browser\u0027;\n+import {NoopAnimationsModule} from \u0027@angular/platform-browser/animations\u0027;\n import {\n   Component,\n   ContentChild,\n@@ -38,8 +40,6 @@ import {isLView} from \u0027../../src/render3/interfaces/type_checks\u0027;\n import {ID, LView, PARENT, TVIEW} from \u0027../../src/render3/interfaces/view\u0027;\n import {getLView} from \u0027../../src/render3/state\u0027;\n import {fakeAsync, flushMicrotasks, TestBed} from \u0027../../testing\u0027;\n-import {By} from \u0027@angular/platform-browser\u0027;\n-import {NoopAnimationsModule} from \u0027@angular/platform-browser/animations\u0027;\n \n describe(\u0027acceptance integration tests\u0027, () \u003d\u003e {\n   beforeEach(() \u003d\u003e {\n@@ -3098,6 +3098,26 @@ describe(\u0027acceptance integration tests\u0027, () \u003d\u003e {\n     expect(fixture.nativeElement.textContent).toContain(\u0027KO\u0027);\n   });\n \n+  it(\u0027should support \"instanceof\" expressions\u0027, () \u003d\u003e {\n+    class MyClass {}\n+\n+    @Component({\n+      template: `{{ obj instanceof MyClass ? \u0027OK\u0027 : \u0027KO\u0027 }}`,\n+    })\n+    class TestComponent {\n+      MyClass \u003d MyClass;\n+      obj: any \u003d new MyClass();\n+    }\n+\n+    const fixture \u003d TestBed.createComponent(TestComponent);\n+    fixture.detectChanges();\n+    expect(fixture.nativeElement.textContent).toContain(\u0027OK\u0027);\n+\n+    fixture.componentInstance.obj \u003d {};\n+    fixture.detectChanges();\n+    expect(fixture.nativeElement.textContent).toContain(\u0027KO\u0027);\n+  });\n+\n   describe(\u0027tView.firstUpdatePass\u0027, () \u003d\u003e {\n     function isFirstUpdatePass() {\n       const lView \u003d getLView();","expectedMessage":"feat(compiler): Add support for the `instanceof` binary operator","repository":"angular","commitHash":"72534e2a3458df4e1bb097973872f00bbb92be42","metadata":{}}
{"id":"angular-910768f5","diff":" adev/src/content/guide/di/hierarchical-dependency-injection.md | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/adev/src/content/guide/di/hierarchical-dependency-injection.md b/adev/src/content/guide/di/hierarchical-dependency-injection.md\nindex 13a09681..72df6158 100644\n--- a/adev/src/content/guide/di/hierarchical-dependency-injection.md\n+++ b/adev/src/content/guide/di/hierarchical-dependency-injection.md\n@@ -959,8 +959,8 @@ export class VillainsList {}\n \n By providing `VillainsService` in the `VillainsList` metadata and nowhere else, the service becomes available only in the `VillainsList` and its subcomponent tree.\n \n-`VillainService` is a singleton with respect to `VillainsList` because that is where it is declared.\n-As long as `VillainsList` does not get destroyed it will be the same instance of `VillainService` but if there are multiple instances of `VillainsList`, then each instance of `VillainsList` will have its own instance of `VillainService`.\n+`VillainsService` is a singleton with respect to `VillainsList` because that is where it is declared.\n+As long as `VillainsList` does not get destroyed it will be the same instance of `VillainsService` but if there are multiple instances of `VillainsList`, then each instance of `VillainsList` will have its own instance of `VillainsService`.\n \n ### Scenario: multiple edit sessions\n ","expectedMessage":"docs: update hierarchical-dependency-injection.md","repository":"angular","commitHash":"910768f5cc20a59e6a0f80a208d6cf67852cbbcb","metadata":{}}
{"id":"angular-6e821674","diff":" renovate.json | 3 ++-\n 1 file changed, 2 insertions(+), 1 deletion(-)\n\ndiff --git a/renovate.json b/renovate.json\nindex 6bed7478..3082af81 100644\n--- a/renovate.json\n+++ b/renovate.json\n@@ -27,12 +27,12 @@\n     },\n     {\n       \"matchManagers\": [\"bazel\", \"bazel-module\", \"bazelisk\", \"npm\"],\n-      \"matchDepNames\": [\"!pnpm\", \"!typescript\", \"*\"],\n       \"postUpgradeTasks\": {\n         \"commands\": [\n           \"git restore .npmrc\",\n           \"pnpm install --frozen-lockfile\",\n           \"pnpm bazel mod deps --lockfile_mode\u003dupdate\",\n+          \"pnpm ng-dev misc sync-module-bazel\",\n           \"pnpm bazel run //.github/actions/deploy-docs-site:main\",\n           \"pnpm bazel run //packages/common:base_currencies_file\",\n           \"pnpm bazel run //packages/common/locales:closure_locale_file\",\n@@ -41,6 +41,7 @@\n         \"fileFilters\": [\n           \".github/actions/deploy-docs-site/**/*\",\n           \"packages/**/*\",\n+          \"MODULE.bazel\",\n           \"MODULE.bazel.lock\"\n         ],\n         \"executionMode\": \"branch\"","expectedMessage":"ci: update Renovate configuration to replace Bazel module dependency command","repository":"angular","commitHash":"6e821674814a6f9fc8b3004abab5d7c5101801a4","metadata":{}}
{"id":"angular-69da6390","diff":" vscode-ng-language-service/tools/release.mts | 32 +++++++++++++++++++++++++---\n 1 file changed, 29 insertions(+), 3 deletions(-)\n\ndiff --git a/vscode-ng-language-service/tools/release.mts b/vscode-ng-language-service/tools/release.mts\nindex 63541d8a..d01e5482 100644\n--- a/vscode-ng-language-service/tools/release.mts\n+++ b/vscode-ng-language-service/tools/release.mts\n@@ -241,13 +241,39 @@ async function prepareReleasePullRequest(\n  */\n async function generateChangelog(fromVersion: string, toVersion: string): Promise\u003cstring\u003e {\n   const previousTag \u003d await getPreviousTag(fromVersion);\n-  let {stdout: commits} \u003d await exec(\n+\n+  // Get all subjects from the previous release to filter out duplicates (cherry-picks).\n+  const {stdout: existingSubjectsOutput} \u003d await exec(\n+    `git log ${previousTag} -E ` +\n+      \u0027--grep\u003d\"^(feat|fix|perf)\\\\((vscode-extension|language-server|language-service)\\\\):\" \u0027 +\n+      \u0027--format\u003d\"%s\"\u0027,\n+  );\n+  const existingSubjects \u003d new Set(\n+    existingSubjectsOutput\n+      .trim()\n+      .split(\u0027\\n\u0027)\n+      .map((s) \u003d\u003e s.trim()),\n+  );\n+\n+  const {stdout: newCommitsRaw} \u003d await exec(\n     `git log --left-only FETCH_HEAD...${previousTag} -E ` +\n       \u0027--grep\u003d\"^(feat|fix|perf)\\\\((vscode-extension|language-server|language-service)\\\\):\" \u0027 +\n-      \u0027--format\u003d\"format:- %s ([%h](https://github.com/angular/angular/commit/%H))\"\u0027,\n+      \u0027--format\u003d\"%s|%h|%H\"\u0027,\n   );\n \n-  commits \u003d commits.trim();\n+  const commits \u003d newCommitsRaw\n+    .trim()\n+    .split(\u0027\\n\u0027)\n+    .filter((line) \u003d\u003e {\n+      if (!line) return false;\n+      const [subject, shortHash, hash] \u003d line.split(\u0027|\u0027);\n+      return !existingSubjects.has(subject.trim());\n+    })\n+    .map((line) \u003d\u003e {\n+      const [subject, shortHash, hash] \u003d line.split(\u0027|\u0027);\n+      return `- ${subject} ([${shortHash}](https://github.com/angular/angular/commit/${hash}))`;\n+    })\n+    .join(\u0027\\n\u0027);\n \n   const now \u003d new Date();\n   const date \u003d `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, \u00270\u0027)}-${String(now.getDate()).padStart(2, \u00270\u0027)}`;","expectedMessage":"build: improve changelog generation and tag fetching in release script","repository":"angular","commitHash":"69da6390b1832f67ce0026da140ac7a50b082f5e","metadata":{}}
{"id":"angular-78755771","diff":" vscode-ng-language-service/tools/release.mts | 39 ++++++++++++++++++++++++++--\n 1 file changed, 37 insertions(+), 2 deletions(-)\n\ndiff --git a/vscode-ng-language-service/tools/release.mts b/vscode-ng-language-service/tools/release.mts\nindex ebc675ce..63541d8a 100644\n--- a/vscode-ng-language-service/tools/release.mts\n+++ b/vscode-ng-language-service/tools/release.mts\n@@ -80,7 +80,7 @@ async function main(): Promise\u003cvoid\u003e {\n   }\n \n   console.log(chalk.blue(`Releasing from ${branchToReleaseFrom}.`));\n-  await exec(`git fetch ${angularRepoRemote} ${branchToReleaseFrom}`);\n+  await exec(`git fetch ${angularRepoRemote} ${branchToReleaseFrom} --tags`);\n \n   const currentVersion \u003d await getCurrentVersion();\n   const newVersion \u003d await getNewVersion(currentVersion);\n@@ -240,8 +240,9 @@ async function prepareReleasePullRequest(\n  * @param toVersion The version to generate the changelog for.\n  */\n async function generateChangelog(fromVersion: string, toVersion: string): Promise\u003cstring\u003e {\n+  const previousTag \u003d await getPreviousTag(fromVersion);\n   let {stdout: commits} \u003d await exec(\n-    `git log --left-only FETCH_HEAD...${getTagName(fromVersion)} -E ` +\n+    `git log --left-only FETCH_HEAD...${previousTag} -E ` +\n       \u0027--grep\u003d\"^(feat|fix|perf)\\\\((vscode-extension|language-server|language-service)\\\\):\" \u0027 +\n       \u0027--format\u003d\"format:- %s ([%h](https://github.com/angular/angular/commit/%H))\"\u0027,\n   );\n@@ -519,6 +520,40 @@ function getRepoDetails(remoteUrl: string): {owner: string; repo: string} {\n   };\n }\n \n+/**\n+ * Gets the previous tag to version from.\n+ *\n+ * It checks if the tag for the `currentVersion` exists. If it does, returning it.\n+ * If not, it finds the latest tag that adheres to the semver versioning of the extension.\n+ */\n+async function getPreviousTag(currentVersion: string): Promise\u003cstring\u003e {\n+  const currentTag \u003d getTagName(currentVersion);\n+  try {\n+    await exec(`git rev-parse \"${currentTag}\"`);\n+    return currentTag;\n+  } catch {\n+    // Tag does not exist.\n+  }\n+\n+  const {stdout: tags} \u003d await exec(`git tag --list \"${tagPrefix}*\"`);\n+  const versions \u003d tags\n+    .trim()\n+    .split(\u0027\\n\u0027)\n+    .map((t) \u003d\u003e t.trim())\n+    .filter((t) \u003d\u003e t.startsWith(tagPrefix))\n+    .map((t) \u003d\u003e t.slice(tagPrefix.length))\n+    .filter((v) \u003d\u003e semver.valid(v));\n+\n+  if (versions.length \u003d\u003d\u003d 0) {\n+    throw new Error(\u0027No previous release tags found.\u0027);\n+  }\n+\n+  // Sort versions in descending order\n+  versions.sort((a, b) \u003d\u003e semver.rcompare(a, b));\n+\n+  return getTagName(versions[0]);\n+}\n+\n /**\n  * Gets the tag name for the given version.\n  *","expectedMessage":"build: fix changelog generation for last rev","repository":"angular","commitHash":"78755771e1b998f9ee192d82c0f44fd6806f3629","metadata":{}}
{"id":"angular-36c2f4b6","diff":" adev/src/app/routing/router_providers.ts | 17 +++++++++--------\n 1 file changed, 9 insertions(+), 8 deletions(-)\n\ndiff --git a/adev/src/app/routing/router_providers.ts b/adev/src/app/routing/router_providers.ts\nindex 95340109..4d02a6be 100644\n--- a/adev/src/app/routing/router_providers.ts\n+++ b/adev/src/app/routing/router_providers.ts\n@@ -22,6 +22,7 @@ import {\n   RedirectCommand,\n   withNavigationErrorHandler,\n   withRouterConfig,\n+  isActive,\n } from \u0027@angular/router\u0027;\n import {routes} from \u0027./routes\u0027;\n import {ADevTitleStrategy} from \u0027../core/services/a-dev-title-strategy\u0027;\n@@ -51,14 +52,14 @@ export const routerProviders \u003d [\n         const router \u003d inject(Router);\n         const toTree \u003d createUrlTreeFromSnapshot(to, []);\n         // Skip the transition if the only thing changing is the fragment and queryParams\n-        if (\n-          router.isActive(toTree, {\n-            paths: \u0027exact\u0027,\n-            matrixParams: \u0027exact\u0027,\n-            fragment: \u0027ignored\u0027,\n-            queryParams: \u0027ignored\u0027,\n-          })\n-        ) {\n+        const isTargetRouteCurrent \u003d isActive(toTree, router, {\n+          paths: \u0027exact\u0027,\n+          matrixParams: \u0027exact\u0027,\n+          fragment: \u0027ignored\u0027,\n+          queryParams: \u0027ignored\u0027,\n+        });\n+\n+        if (isTargetRouteCurrent()) {\n           transition.skipTransition();\n         }\n       },","expectedMessage":"docs(docs-infra): replace deprecated Router.isActive with isActive (#66430)","repository":"angular","commitHash":"36c2f4b6f931fa7e0c7e835577abef80c9c98ec3","metadata":{}}
{"id":"angular-a39e3fda","diff":" adev/src/content/guide/routing/read-route-state.md | 27 ++++++++++++++++++++++\n .../guide/routing/route-transition-animations.md   |  6 +++--\n .../router/src/directives/router_link_active.ts    |  4 ++--\n packages/router/src/router.ts                      |  4 ++--\n packages/router/src/url_tree.ts                    |  4 +++-\n 5 files changed, 38 insertions(+), 7 deletions(-)\n\ndiff --git a/adev/src/content/guide/routing/read-route-state.md b/adev/src/content/guide/routing/read-route-state.md\nindex b2514675..88b6cdf8 100644\n--- a/adev/src/content/guide/routing/read-route-state.md\n+++ b/adev/src/content/guide/routing/read-route-state.md\n@@ -323,3 +323,30 @@ The RouterLinkActive directive can also be applied to an ancestor element in ord\n ```\n \n For more information, check out the [API docs for RouterLinkActive](/api/router/RouterLinkActive).\n+\n+## Check if a URL is active\n+\n+The `isActive` function returns a computed signal that tracks whether a given URL is currently active in the router. The signal automatically updates as the router state changes.\n+\n+```angular-ts\n+import {Component, inject} from \u0027@angular/core\u0027;\n+import {isActive, Router} from \u0027@angular/router\u0027;\n+\n+@Component({\n+  template: `\n+    \u003cdiv [class.active]\u003d\"isSettingsActive()\"\u003e\n+      \u003ch2\u003eSettings\u003c/h2\u003e\n+    \u003c/div\u003e\n+  `\n+})\n+export class Panel {\n+  private router \u003d inject(Router);\n+\n+  isSettingsActive \u003d isActive(\u0027/settings\u0027, this.router, {\n+    paths: \u0027subset\u0027,\n+    queryParams: \u0027ignored\u0027,\n+    fragment: \u0027ignored\u0027,\n+    matrixParams: \u0027ignored\u0027\n+  });\n+}\n+```\ndiff --git a/adev/src/content/guide/routing/route-transition-animations.md b/adev/src/content/guide/routing/route-transition-animations.md\nindex dd995f27..4f7cafac 100644\n--- a/adev/src/content/guide/routing/route-transition-animations.md\n+++ b/adev/src/content/guide/routing/route-transition-animations.md\n@@ -122,7 +122,7 @@ Use this callback to customize transition behavior based on navigation context.\n \n ```ts\n import {inject} from \u0027@angular/core\u0027;\n-import {Router, withViewTransitions} from \u0027@angular/router\u0027;\n+import {Router, withViewTransitions, isActive} from \u0027@angular/router\u0027;\n \n withViewTransitions({\n   onViewTransitionCreated: ({transition}) \u003d\u003e {\n@@ -137,7 +137,9 @@ withViewTransitions({\n       queryParams: \u0027ignored\u0027,\n     };\n \n-    if (router.isActive(targetUrl, config)) {\n+    const isTargetRouteCurrent \u003d isActive(targetUrl, router, config);\n+\n+    if (isTargetRouteCurrent()) {\n       transition.skipTransition();\n     }\n   },\ndiff --git a/packages/router/src/directives/router_link_active.ts b/packages/router/src/directives/router_link_active.ts\nindex 18e1b12e..e3482e40 100644\n--- a/packages/router/src/directives/router_link_active.ts\n+++ b/packages/router/src/directives/router_link_active.ts\n@@ -125,9 +125,9 @@ export class RouterLinkActive implements OnChanges, OnDestroy, AfterContentInit\n   /**\n    * Options to configure how to determine if the router link is active.\n    *\n-   * These options are passed to the `Router.isActive()` function.\n+   * These options are passed to the `isActive()` function.\n    *\n-   * @see {@link Router#isActive}\n+   * @see {@link isActive}\n    */\n   @Input() routerLinkActiveOptions: {exact: boolean} | IsActiveMatchOptions \u003d {exact: false};\n \ndiff --git a/packages/router/src/router.ts b/packages/router/src/router.ts\nindex 5b796458..26c47b23 100644\n--- a/packages/router/src/router.ts\n+++ b/packages/router/src/router.ts\n@@ -70,7 +70,7 @@ import {afterNextNavigation} from \u0027./utils/navigations\u0027;\n import {RouterState} from \u0027./router_state\u0027;\n \n /**\n- * The equivalent `IsActiveMatchOptions` options for `Router.isActive` is called with `true`\n+ * The equivalent `IsActiveMatchOptions` options for `isActive` is called with `true`\n  * (exact \u003d true).\n  */\n export const exactMatchOptions: IsActiveMatchOptions \u003d {\n@@ -81,7 +81,7 @@ export const exactMatchOptions: IsActiveMatchOptions \u003d {\n };\n \n /**\n- * The equivalent `IsActiveMatchOptions` options for `Router.isActive` is called with `false`\n+ * The equivalent `IsActiveMatchOptions` options for `isActive` is called with `false`\n  * (exact \u003d false).\n  */\n export const subsetMatchOptions: IsActiveMatchOptions \u003d {\ndiff --git a/packages/router/src/url_tree.ts b/packages/router/src/url_tree.ts\nindex 01980334..255ed74d 100644\n--- a/packages/router/src/url_tree.ts\n+++ b/packages/router/src/url_tree.ts\n@@ -18,7 +18,7 @@ import type {Router} from \u0027./router\u0027;\n  * for the current router state.\n  *\n  * @publicApi\n- * @see {@link Router#isActive}\n+ * @see {@link isActive}\n  */\n export interface IsActiveMatchOptions {\n   /**\n@@ -84,6 +84,8 @@ const paramCompareMap: Record\u003cParamMatchOptions, ParamCompareFn\u003e \u003d {\n  * Returns a computed signal of whether the given url is activated in the Router.\n  *\n  * As the router state changes, the signal will update to reflect whether the url is active.\n+ *\n+ * @see [Check if a URL is active](guide/routing/read-route-state#check-if-a-url-is-active)\n  * @publicApi 21.1\n  */\n export function isActive(","expectedMessage":"docs: update examples to use `isActive` instead of deprecated `Router.isActive` (#66430)","repository":"angular","commitHash":"a39e3fdabed1ab34f737c7bc3d78de150e3c8fc8","metadata":{}}
{"id":"angular-e8c44a00","diff":" .../src/statemanager/navigation_state_manager.ts   | 13 ++++++++++--\n .../router/test/with_platform_navigation.spec.ts   | 24 +++++++++++++++++++++-\n 2 files changed, 34 insertions(+), 3 deletions(-)\n\ndiff --git a/packages/router/src/statemanager/navigation_state_manager.ts b/packages/router/src/statemanager/navigation_state_manager.ts\nindex 8bfac6fa..260b3639 100644\n--- a/packages/router/src/statemanager/navigation_state_manager.ts\n+++ b/packages/router/src/statemanager/navigation_state_manager.ts\n@@ -199,8 +199,17 @@ export class NavigationStateManager extends StateManager {\n         resolve();\n       });\n     } else if (e instanceof NavigationCancel || e instanceof NavigationError) {\n-      // TODO(atscott): We want to keep the navigation event on redirects if\n-      // the URL wasn\u0027t committed yet rather than cancelling it.\n+      // If redirecting and the URL hasn\u0027t been committed yet (via precommmitHandler),\n+      // the redirect will be handled by `commitUrl` using `controller.redirect` and\n+      // we should retain the current NavigateEvent.\n+      // Otherwise, a full cancellation and rollback is needed.\n+      const redirectingBeforeUrlCommit \u003d\n+        e instanceof NavigationCancel \u0026\u0026\n+        e.code \u003d\u003d\u003d NavigationCancellationCode.Redirect \u0026\u0026\n+        !!this.currentNavigation.commitUrl;\n+      if (redirectingBeforeUrlCommit) {\n+        return;\n+      }\n       void this.cancel(transition, e);\n     } else if (e instanceof NavigationEnd) {\n       const {resolveHandler, removeAbortListener} \u003d this.currentNavigation;\ndiff --git a/packages/router/test/with_platform_navigation.spec.ts b/packages/router/test/with_platform_navigation.spec.ts\nindex 47b05cc6..7e32e9de 100644\n--- a/packages/router/test/with_platform_navigation.spec.ts\n+++ b/packages/router/test/with_platform_navigation.spec.ts\n@@ -7,7 +7,7 @@\n  */\n \n import {TestBed} from \u0027@angular/core/testing\u0027;\n-import {provideRouter, Router} from \u0027../src\u0027;\n+import {NavigationStart, provideRouter, Router} from \u0027../src\u0027;\n import {withExperimentalPlatformNavigation, withRouterConfig} from \u0027../src/provide_router\u0027;\n import {withBody} from \u0027@angular/private/testing\u0027;\n import {\n@@ -15,6 +15,7 @@ import {\n   Location,\n   PlatformNavigation,\n   BrowserPlatformLocation,\n+  PRECOMMIT_HANDLER_SUPPORTED as PRECOMMIT_HANDLER_SUPPORTED,\n } from \u0027@angular/common\u0027;\n import {\n   FakeNavigation as FakeNavigation,\n@@ -22,6 +23,7 @@ import {\n   provideLocationMocks,\n } from \u0027@angular/common/testing\u0027;\n import {timeout, useAutoTick} from \u0027./helpers\u0027;\n+import {inject} from \u0027@angular/core\u0027;\n \n /// \u003creference types\u003d\"dom-navigation\" /\u003e\n \n@@ -159,6 +161,26 @@ describe(\u0027withPlatformNavigation feature\u0027, () \u003d\u003e {\n       expect(navigateEvents.length).toBe(1);\n       expect(navigateEvents[0].navigationType).toBe(\u0027traverse\u0027);\n     });\n+\n+    it(\u0027retains a single NavigateEvent across redirects\u0027, async () \u003d\u003e {\n+      const navigateEvents: NavigateEvent[] \u003d [];\n+      navigation.addEventListener(\u0027navigate\u0027, (e: NavigateEvent) \u003d\u003e navigateEvents.push(e));\n+\n+      router.resetConfig([\n+        {path: \u0027first\u0027, canActivate: [() \u003d\u003e inject(Router).parseUrl(\u0027/redirected\u0027)], children: []},\n+        {path: \u0027**\u0027, children: []},\n+      ]);\n+      const navPromise \u003d router.navigateByUrl(\u0027/first\u0027);\n+      if (TestBed.inject(PRECOMMIT_HANDLER_SUPPORTED)) {\n+        router.events.subscribe((e) \u003d\u003e {\n+          if (e instanceof NavigationStart) {\n+            expect(navigateEvents.length).toBe(1);\n+          }\n+        });\n+      }\n+      await navPromise;\n+      expect(navigateEvents.length).toBe(1);\n+    });\n   });\n \n   describe(\u0027eager url update\u0027, () \u003d\u003e {","expectedMessage":"refactor(router): Retain original navigateEvent across redirects","repository":"angular","commitHash":"e8c44a00f9a416979b2cc749f2eab0955aa51dd6","metadata":{}}
{"id":"angular-e34365cf","diff":" vscode-ng-language-service/package.json | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/vscode-ng-language-service/package.json b/vscode-ng-language-service/package.json\nindex a920c794..2597f8f6 100644\n--- a/vscode-ng-language-service/package.json\n+++ b/vscode-ng-language-service/package.json\n@@ -257,7 +257,7 @@\n     \"test:inspect-common\": \"bazel run --config\u003ddebug //vscode-ng-language-service/common/tests:test\",\n     \"test:inspect-server\": \"bazel run --config\u003ddebug //vscode-ng-language-service/server/src/tests:test\",\n     \"test:inspect-syntaxes\": \"bazel run --config\u003ddebug //vscode-ng-language-service/syntaxes/test:test\",\n-    \"release\": \"node tools/release.mts\"\n+    \"release\": \"tsx tools/release.mts\"\n   },\n   \"dependencies\": {\n     \"@angular/language-service\": \"workspace:*\",","expectedMessage":"build: use tsx for release script","repository":"angular","commitHash":"e34365cfd5ed13cc1ad2f23fc912cb9d50467eb1","metadata":{}}
{"id":"angular-1ba9b7ac","diff":" goldens/public-api/core/index.api.md               |  19 +++\n packages/core/src/resource/api.ts                  |  16 +++\n packages/core/src/resource/from_snapshots.ts       |  51 ++++++++\n packages/core/src/resource/index.ts                |   1 +\n packages/core/src/resource/resource.ts             |  15 ++-\n .../core/test/resource/resource_snapshot_spec.ts   | 131 +++++++++++++++++++++\n 6 files changed, 232 insertions(+), 1 deletion(-)\n\ndiff --git a/goldens/public-api/core/index.api.md b/goldens/public-api/core/index.api.md\nindex ce9a39c9..58793060 100644\n--- a/goldens/public-api/core/index.api.md\n+++ b/goldens/public-api/core/index.api.md\n@@ -1627,6 +1627,7 @@ export interface Resource\u003cT\u003e {\n     // (undocumented)\n     hasValue(): boolean;\n     readonly isLoading: Signal\u003cboolean\u003e;\n+    readonly snapshot: Signal\u003cResourceSnapshot\u003cT\u003e\u003e;\n     readonly status: Signal\u003cResourceStatus\u003e;\n     readonly value: Signal\u003cT\u003e;\n }\n@@ -1639,6 +1640,9 @@ export function resource\u003cT, R\u003e(options: ResourceOptions\u003cT, R\u003e \u0026 {\n // @public\n export function resource\u003cT, R\u003e(options: ResourceOptions\u003cT, R\u003e): ResourceRef\u003cT | undefined\u003e;\n \n+// @public\n+export function resourceFromSnapshots\u003cT\u003e(source: () \u003d\u003e ResourceSnapshot\u003cT\u003e): Resource\u003cT\u003e;\n+\n // @public\n export type ResourceLoader\u003cT, R\u003e \u003d (param: ResourceLoaderParams\u003cR\u003e) \u003d\u003e PromiseLike\u003cT\u003e;\n \n@@ -1668,6 +1672,21 @@ export interface ResourceRef\u003cT\u003e extends WritableResource\u003cT\u003e {\n     hasValue(): boolean;\n }\n \n+// @public\n+export type ResourceSnapshot\u003cT\u003e \u003d {\n+    readonly status: \u0027idle\u0027;\n+    readonly value: T;\n+} | {\n+    readonly status: \u0027loading\u0027 | \u0027reloading\u0027;\n+    readonly value: T;\n+} | {\n+    readonly status: \u0027resolved\u0027 | \u0027local\u0027;\n+    readonly value: T;\n+} | {\n+    readonly status: \u0027error\u0027;\n+    readonly error: Error;\n+};\n+\n // @public\n export type ResourceStatus \u003d \u0027idle\u0027 | \u0027error\u0027 | \u0027loading\u0027 | \u0027reloading\u0027 | \u0027resolved\u0027 | \u0027local\u0027;\n \ndiff --git a/packages/core/src/resource/api.ts b/packages/core/src/resource/api.ts\nindex ed9c216f..955c17fb 100644\n--- a/packages/core/src/resource/api.ts\n+++ b/packages/core/src/resource/api.ts\n@@ -66,6 +66,11 @@ export interface Resource\u003cT\u003e {\n    */\n   readonly isLoading: Signal\u003cboolean\u003e;\n \n+  /**\n+   * The current state of this resource, represented as a `ResourceSnapshot`.\n+   */\n+  readonly snapshot: Signal\u003cResourceSnapshot\u003cT\u003e\u003e;\n+\n   /**\n    * Whether this resource has a valid current value.\n    *\n@@ -241,3 +246,14 @@ export type ResourceOptions\u003cT, R\u003e \u003d (\n  * @experimental\n  */\n export type ResourceStreamItem\u003cT\u003e \u003d {value: T} | {error: Error};\n+\n+/**\n+ * An explicit representation of a resource\u0027s state.\n+ *\n+ * @experimental\n+ */\n+export type ResourceSnapshot\u003cT\u003e \u003d\n+  | {readonly status: \u0027idle\u0027; readonly value: T}\n+  | {readonly status: \u0027loading\u0027 | \u0027reloading\u0027; readonly value: T}\n+  | {readonly status: \u0027resolved\u0027 | \u0027local\u0027; readonly value: T}\n+  | {readonly status: \u0027error\u0027; readonly error: Error};\ndiff --git a/packages/core/src/resource/from_snapshots.ts b/packages/core/src/resource/from_snapshots.ts\nnew file mode 100644\nindex 00000000..705a9320\n--- /dev/null\n+++ b/packages/core/src/resource/from_snapshots.ts\n@@ -0,0 +1,51 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.dev/license\n+ */\n+\n+import {Resource, ResourceSnapshot} from \u0027./api\u0027;\n+import {isSignal, Signal} from \u0027../render3/reactivity/api\u0027;\n+import {computed} from \u0027../render3/reactivity/computed\u0027;\n+import {ResourceValueError} from \u0027./resource\u0027;\n+\n+/**\n+ * Creates a `Resource` driven by a source of `ResourceSnapshot`s.\n+ *\n+ * @experimental\n+ */\n+export function resourceFromSnapshots\u003cT\u003e(source: () \u003d\u003e ResourceSnapshot\u003cT\u003e): Resource\u003cT\u003e {\n+  return new SnapshotResource(isSignal(source) ? source : computed(source));\n+}\n+\n+class SnapshotResource\u003cT\u003e implements Resource\u003cT\u003e {\n+  constructor(readonly snapshot: Signal\u003cResourceSnapshot\u003cT\u003e\u003e) {}\n+\n+  private get state(): ResourceSnapshot\u003cT\u003e {\n+    return this.snapshot();\n+  }\n+\n+  readonly value \u003d computed(() \u003d\u003e {\n+    if (this.state.status \u003d\u003d\u003d \u0027error\u0027) {\n+      throw new ResourceValueError(this.state.error);\n+    }\n+    return this.state.value;\n+  });\n+  readonly status \u003d computed(() \u003d\u003e this.state.status);\n+  readonly error \u003d computed(() \u003d\u003e (this.state.status \u003d\u003d\u003d \u0027error\u0027 ? this.state.error : undefined));\n+  readonly isLoading \u003d computed(\n+    () \u003d\u003e this.state.status \u003d\u003d\u003d \u0027loading\u0027 || this.state.status \u003d\u003d\u003d \u0027reloading\u0027,\n+  );\n+\n+  private isValueDefined \u003d computed(\n+    () \u003d\u003e this.state.status !\u003d\u003d \u0027error\u0027 \u0026\u0026 this.state.value !\u003d\u003d undefined,\n+  );\n+\n+  hasValue(this: T extends undefined ? this : never): this is Resource\u003cExclude\u003cT, undefined\u003e\u003e;\n+  hasValue(): boolean;\n+  hasValue(): boolean {\n+    return this.isValueDefined();\n+  }\n+}\ndiff --git a/packages/core/src/resource/index.ts b/packages/core/src/resource/index.ts\nindex d6b52667..751d70a4 100644\n--- a/packages/core/src/resource/index.ts\n+++ b/packages/core/src/resource/index.ts\n@@ -7,4 +7,5 @@\n  */\n \n export * from \u0027./api\u0027;\n+export {resourceFromSnapshots} from \u0027./from_snapshots\u0027;\n export {resource} from \u0027./resource\u0027;\ndiff --git a/packages/core/src/resource/resource.ts b/packages/core/src/resource/resource.ts\nindex 80974086..bbe66d12 100644\n--- a/packages/core/src/resource/resource.ts\n+++ b/packages/core/src/resource/resource.ts\n@@ -21,6 +21,7 @@ import {\n   StreamingResourceOptions,\n   ResourceStreamItem,\n   ResourceLoaderParams,\n+  ResourceSnapshot,\n } from \u0027./api\u0027;\n \n import {Injector} from \u0027../di/injector\u0027;\n@@ -141,6 +142,18 @@ abstract class BaseWritableResource\u003cT\u003e implements WritableResource\u003cT\u003e {\n     return this.value() !\u003d\u003d undefined;\n   });\n \n+  private _snapshot: Signal\u003cResourceSnapshot\u003cT\u003e\u003e | undefined;\n+  get snapshot(): Signal\u003cResourceSnapshot\u003cT\u003e\u003e {\n+    return (this._snapshot ??\u003d computed(() \u003d\u003e {\n+      const status \u003d this.status();\n+      if (status \u003d\u003d\u003d \u0027error\u0027) {\n+        return {status: \u0027error\u0027, error: this.error()!};\n+      } else {\n+        return {status, value: this.value()};\n+      }\n+    }));\n+  }\n+\n   hasValue(): this is ResourceRef\u003cExclude\u003cT, undefined\u003e\u003e {\n     return this.isValueDefined();\n   }\n@@ -509,7 +522,7 @@ export function isErrorLike(error: unknown): error is Error {\n   );\n }\n \n-class ResourceValueError extends Error {\n+export class ResourceValueError extends Error {\n   constructor(error: Error) {\n     super(\n       ngDevMode\ndiff --git a/packages/core/test/resource/resource_snapshot_spec.ts b/packages/core/test/resource/resource_snapshot_spec.ts\nnew file mode 100644\nindex 00000000..0dfd14f1\n--- /dev/null\n+++ b/packages/core/test/resource/resource_snapshot_spec.ts\n@@ -0,0 +1,131 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.dev/license\n+ */\n+\n+import {ResourceSnapshot} from \u0027../../src/resource/api\u0027;\n+import {resourceFromSnapshots} from \u0027../../src/resource/from_snapshots\u0027;\n+import {resource} from \u0027../../src/resource/resource\u0027;\n+import {signal} from \u0027../../src/render3/reactivity/signal\u0027;\n+import {Injector} from \u0027../../src/di/injector\u0027;\n+import {ApplicationRef} from \u0027../../src/application/application_ref\u0027;\n+import {TestBed} from \u0027../../testing/src/test_bed\u0027;\n+\n+describe(\u0027resource snapshots\u0027, () \u003d\u003e {\n+  describe(\u0027resourceFromSnapshots\u0027, () \u003d\u003e {\n+    it(\u0027should represent all stages of a resource\u0027, () \u003d\u003e {\n+      const source \u003d signal\u003cResourceSnapshot\u003cstring\u003e\u003e({status: \u0027idle\u0027, value: \u0027\u0027});\n+      const res \u003d resourceFromSnapshots(source);\n+\n+      expect(res.status()).toEqual(\u0027idle\u0027);\n+      expect(res.value()).toEqual(\u0027\u0027);\n+      expect(res.isLoading()).toBeFalse();\n+      expect(res.hasValue()).toBeTrue();\n+\n+      source.set({status: \u0027loading\u0027, value: \u0027alpha\u0027});\n+      expect(res.status()).toEqual(\u0027loading\u0027);\n+      expect(res.value()).toEqual(\u0027alpha\u0027);\n+      expect(res.isLoading()).toBeTrue();\n+      expect(res.hasValue()).toBeTrue();\n+\n+      source.set({status: \u0027resolved\u0027, value: \u0027beta\u0027});\n+      expect(res.status()).toEqual(\u0027resolved\u0027);\n+      expect(res.value()).toEqual(\u0027beta\u0027);\n+      expect(res.isLoading()).toBeFalse();\n+      expect(res.hasValue()).toBeTrue();\n+\n+      source.set({status: \u0027reloading\u0027, value: \u0027gamma\u0027});\n+      expect(res.status()).toEqual(\u0027reloading\u0027);\n+      expect(res.value()).toEqual(\u0027gamma\u0027);\n+      expect(res.isLoading()).toBeTrue();\n+      expect(res.hasValue()).toBeTrue();\n+\n+      source.set({status: \u0027local\u0027, value: \u0027delta\u0027});\n+      expect(res.status()).toEqual(\u0027local\u0027);\n+      expect(res.value()).toEqual(\u0027delta\u0027);\n+      expect(res.isLoading()).toBeFalse();\n+      expect(res.hasValue()).toBeTrue();\n+\n+      const error \u003d new Error();\n+      source.set({status: \u0027error\u0027, error});\n+      expect(res.status()).toEqual(\u0027error\u0027);\n+      expect(res.error()).toBe(error);\n+      expect(res.isLoading()).toBeFalse();\n+      expect(res.hasValue()).toBeFalse();\n+      expect(res.value).toThrowMatching((err: Error) \u003d\u003e err.cause \u003d\u003d\u003d error);\n+    });\n+\n+    it(\u0027should return `false` for hasValue() when the value is undefined\u0027, () \u003d\u003e {\n+      const source \u003d signal\u003cResourceSnapshot\u003cstring | undefined\u003e\u003e({\n+        status: \u0027loading\u0027,\n+        value: undefined,\n+      });\n+      const res \u003d resourceFromSnapshots(source);\n+\n+      expect(res.hasValue()).toBeFalse();\n+    });\n+\n+    it(\u0027should memoize the snapshot function\u0027, () \u003d\u003e {\n+      let readCount \u003d 0;\n+      function source(): ResourceSnapshot\u003cstring\u003e {\n+        readCount++;\n+        return {\n+          status: \u0027resolved\u0027,\n+          value: \u0027test\u0027,\n+        };\n+      }\n+\n+      const res \u003d resourceFromSnapshots(source);\n+\n+      // Access multiple computeds that depend on the snapshot.\n+      res.status();\n+      res.value();\n+      res.error();\n+\n+      // The `source` function should only have been called once.\n+      expect(readCount).toBe(1);\n+    });\n+  });\n+\n+  describe(\u0027Resource.snapshot\u0027, () \u003d\u003e {\n+    it(\u0027should represent idle, loading and resolved states\u0027, async () \u003d\u003e {\n+      const injector \u003d TestBed.inject(Injector);\n+      const params \u003d signal\u003cnumber | undefined\u003e(undefined);\n+      const res \u003d resource({\n+        params,\n+        loader: () \u003d\u003e Promise.resolve(\u0027test\u0027),\n+        injector,\n+      });\n+\n+      expect(res.snapshot()).toEqual({status: \u0027idle\u0027, value: undefined});\n+\n+      params.set(3);\n+      expect(res.snapshot()).toEqual({status: \u0027loading\u0027, value: undefined});\n+\n+      await injector.get(ApplicationRef).whenStable();\n+      expect(res.snapshot()).toEqual({status: \u0027resolved\u0027, value: \u0027test\u0027});\n+    });\n+\n+    it(\u0027should represent the error state\u0027, async () \u003d\u003e {\n+      const injector \u003d TestBed.inject(Injector);\n+      const res \u003d resource({\n+        loader: () \u003d\u003e {\n+          throw new Error(\u0027test\u0027);\n+        },\n+        injector,\n+      });\n+\n+      expect(res.snapshot()).toEqual({status: \u0027loading\u0027, value: undefined});\n+\n+      await injector.get(ApplicationRef).whenStable();\n+      const snap \u003d res.snapshot();\n+      if (snap.status !\u003d\u003d \u0027error\u0027) {\n+        return fail(`Expected resource to be in error state`);\n+      }\n+      expect(res.error).toBeDefined();\n+    });\n+  });\n+});","expectedMessage":"feat(core): resource composition via snapshots","repository":"angular","commitHash":"1ba9b7ac5001b315cc9df78c518964dbf479d647","metadata":{}}
{"id":"angular-65fa5b54","diff":" .../control_bindings/GOLDEN_PARTIAL.js             | 71 ++++++++++++++++++++++\n .../control_bindings/TEST_CASES.json               |  9 +++\n .../control_bindings/radio_bindings.js             | 27 ++++++++\n .../control_bindings/radio_bindings.ts             | 30 +++++++++\n .../src/template/pipeline/src/phases/ordering.ts   |  2 +\n .../signals/test/web/form_field_directive.spec.ts  | 57 +++++++++++++++++\n 6 files changed, 196 insertions(+)\n\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/GOLDEN_PARTIAL.js b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/GOLDEN_PARTIAL.js\nindex 16a0b402..b05eb685 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/GOLDEN_PARTIAL.js\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/GOLDEN_PARTIAL.js\n@@ -48,3 +48,74 @@ export declare class MyComponent {\n     static cmp: i0.ComponentDeclaration\u003cMyComponent, \"ng-component\", never, {}, {}, never, never, true, never\u003e;\n }\n \n+/****************************************************************************************************\n+ * PARTIAL FILE: radio_bindings.js\n+ ****************************************************************************************************/\n+import { Component, Directive, input } from \u0027@angular/core\u0027;\n+import * as i0 from \"@angular/core\";\n+export class FormField {\n+    formField \u003d input(...(ngDevMode ? [undefined, { debugName: \"formField\" }] : []));\n+    static fac \u003d i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: FormField, deps: [], target: i0.FactoryTarget.Directive });\n+    static dir \u003d i0.ngDeclareDirective({ minVersion: \"17.1.0\", version: \"0.0.0-PLACEHOLDER\", type: FormField, isStandalone: true, selector: \"[formField]\", inputs: { formField: { classPropertyName: \"formField\", publicName: \"formField\", isSignal: true, isRequired: false, transformFunction: null } }, ngImport: i0 });\n+}\n+i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: FormField, decorators: [{\n+            type: Directive,\n+            args: [{ selector: \u0027[formField]\u0027 }]\n+        }], propDecorators: { formField: [{ type: i0.Input, args: [{ isSignal: true, alias: \"formField\", required: false }] }] } });\n+// Notice that we check that the binding order doesn\u0027t matter\n+export class MyComponent {\n+    value \u003d \u0027foo\u0027;\n+    static fac \u003d i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyComponent, deps: [], target: i0.FactoryTarget.Component });\n+    static cmp \u003d i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"0.0.0-PLACEHOLDER\", type: MyComponent, isStandalone: true, selector: \"ng-component\", ngImport: i0, template: `\n+    \u003cinput\n+        type\u003d\"radio\"\n+        [formField]\u003d\"value\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        id\u003d\"radio\"\n+      /\u003e\n+\n+      \u003cinput\n+        type\u003d\"radio\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        [formField]\u003d\"value\"\n+        id\u003d\"radio\"\n+      /\u003e\n+  `, isInline: true, dependencies: [{ kind: \"directive\", type: FormField, selector: \"[formField]\", inputs: [\"formField\"] }] });\n+}\n+i0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyComponent, decorators: [{\n+            type: Component,\n+            args: [{\n+                    template: `\n+    \u003cinput\n+        type\u003d\"radio\"\n+        [formField]\u003d\"value\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        id\u003d\"radio\"\n+      /\u003e\n+\n+      \u003cinput\n+        type\u003d\"radio\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        [formField]\u003d\"value\"\n+        id\u003d\"radio\"\n+      /\u003e\n+  `,\n+                    imports: [FormField],\n+                }]\n+        }] });\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: radio_bindings.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class FormField {\n+    readonly formField: import(\"@angular/core\").InputSignal\u003cstring | undefined\u003e;\n+    static fac: i0.FactoryDeclaration\u003cFormField, never\u003e;\n+    static dir: i0.DirectiveDeclaration\u003cFormField, \"[formField]\", never, { \"formField\": { \"alias\": \"formField\"; \"required\": false; \"isSignal\": true; }; }, {}, never, never, true, never\u003e;\n+}\n+export declare class MyComponent {\n+    value: string;\n+    static fac: i0.FactoryDeclaration\u003cMyComponent, never\u003e;\n+    static cmp: i0.ComponentDeclaration\u003cMyComponent, \"ng-component\", never, {}, {}, never, never, true, never\u003e;\n+}\n+\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/TEST_CASES.json b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/TEST_CASES.json\nindex 00ecec89..7110cca5 100644\n--- a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/TEST_CASES.json\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/TEST_CASES.json\n@@ -9,6 +9,15 @@\n           \"files\": [\"control_bindings.js\"]\n         }\n       ]\n+    },\n+    {\n+      \"description\": \"should generate control instruction for `field` property bindings on radio inputs and execute it after the value\",\n+      \"inputFiles\": [\"radio_bindings.ts\"],\n+      \"expectations\": [\n+        {\n+          \"files\": [\"radio_bindings.js\"]\n+        }\n+      ]\n     }\n   ]\n }\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.js b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.js\nnew file mode 100644\nindex 00000000..6d610d17\n--- /dev/null\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.js\n@@ -0,0 +1,27 @@\n+export class MyComponent {\n+  // ...\n+  static cmp \u003d /* @__PURE__ */i0.defineComponent({\n+    type: MyComponent,\n+    selectors: [[\"ng-component\"]],\n+    decls: 2,\n+    vars: 6,\n+    consts: [[\"type\", \"radio\", \"id\", \"radio\", 3, \"formField\", \"value\"], [\"type\", \"radio\", \"id\", \"radio\", 3, \"value\", \"formField\"]],\n+    template: function MyComponent_Template(rf, ctx) {\n+      if (rf \u0026 1) {\n+        i0.element(0, \"input\", 0);\n+        i0.controlCreate();\n+        i0.element(1, \"input\", 1);\n+        i0.controlCreate();\n+      }\n+      if (rf \u0026 2) {\n+        i0.property(\"value\", \"foo\");\n+        i0.control(ctx.value, \"formField\");\n+        i0.advance();\n+        i0.property(\"value\", \"foo\");\n+        i0.control(ctx.value, \"formField\");\n+      }\n+    },\n+    dependencies: [FormField],\n+    encapsulation: 2\n+  });\n+}\ndiff --git a/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.ts b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.ts\nnew file mode 100644\nindex 00000000..31e75696\n--- /dev/null\n+++ b/packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_bindings/control_bindings/radio_bindings.ts\n@@ -0,0 +1,30 @@\n+import { Component, Directive, input } from \u0027@angular/core\u0027;\n+\n+@Directive({selector: \u0027[formField]\u0027})\n+export class FormField {\n+  readonly formField \u003d input\u003cstring\u003e();\n+}\n+\n+// Notice that we check that the binding order doesn\u0027t matter\n+@Component({\n+  template: `\n+    \u003cinput\n+        type\u003d\"radio\"\n+        [formField]\u003d\"value\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        id\u003d\"radio\"\n+      /\u003e\n+\n+      \u003cinput\n+        type\u003d\"radio\"\n+        [value]\u003d\"\u0027foo\u0027\"\n+        [formField]\u003d\"value\"\n+        id\u003d\"radio\"\n+      /\u003e\n+  `,\n+  imports: [FormField],\n+})\n+export class MyComponent {\n+  value \u003d \u0027foo\u0027;\n+  \n+}\ndiff --git a/packages/compiler/src/template/pipeline/src/phases/ordering.ts b/packages/compiler/src/template/pipeline/src/phases/ordering.ts\nindex 5a16d20c..ec034235 100644\n--- a/packages/compiler/src/template/pipeline/src/phases/ordering.ts\n+++ b/packages/compiler/src/template/pipeline/src/phases/ordering.ts\n@@ -66,6 +66,7 @@ const UPDATE_ORDERING: Array\u003cRule\u003cir.UpdateOp\u003e\u003e \u003d [\n   {test: kindWithInterpolationTest(ir.OpKind.Property, true)},\n   {test: nonInterpolationPropertyKindTest},\n   {test: kindWithInterpolationTest(ir.OpKind.Attribute, false)},\n+  {test: kindTest(ir.OpKind.Control)},\n ];\n \n /**\n@@ -97,6 +98,7 @@ const handledOpKinds \u003d new Set([\n   ir.OpKind.DomProperty,\n   ir.OpKind.Attribute,\n   ir.OpKind.Animation,\n+  ir.OpKind.Control,\n ]);\n \n /**\ndiff --git a/packages/forms/signals/test/web/form_field_directive.spec.ts b/packages/forms/signals/test/web/form_field_directive.spec.ts\nindex 8ba8fe29..e245dca2 100644\n--- a/packages/forms/signals/test/web/form_field_directive.spec.ts\n+++ b/packages/forms/signals/test/web/form_field_directive.spec.ts\n@@ -2667,6 +2667,30 @@ describe(\u0027field directive\u0027, () \u003d\u003e {\n     expect(cmp.f().value()).toBe(\u0027b\u0027);\n   });\n \n+  it(\u0027synchronizes with a radio group with bindings\u0027, () \u003d\u003e {\n+    const {cmp, inputA, inputB, inputC, ABC} \u003d setupRadioWithBindingsGroup();\n+\n+    // All the inputs should have the same name.\n+    expect(inputA.name).toBe(\u0027test\u0027);\n+    expect(inputB.name).toBe(\u0027test\u0027);\n+    expect(inputC.name).toBe(\u0027test\u0027);\n+\n+    // Model -\u003e View\n+    act(() \u003d\u003e cmp.f().value.set(ABC.C));\n+    expect(inputA.checked).toBe(false);\n+    expect(inputB.checked).toBe(false);\n+    expect(inputC.checked).toBe(true);\n+\n+    // View -\u003e Model\n+    act(() \u003d\u003e {\n+      inputB.click();\n+    });\n+    expect(inputA.checked).toBe(false);\n+    expect(inputB.checked).toBe(true);\n+    expect(inputC.checked).toBe(false);\n+    expect(cmp.f().value()).toBe(ABC.B);\n+  });\n+\n   it(\u0027synchronizes with a textarea\u0027, () \u003d\u003e {\n     @Component({\n       imports: [FormField],\n@@ -4321,6 +4345,39 @@ function setupRadioGroup() {\n   return {cmp, inputA, inputB, inputC};\n }\n \n+function setupRadioWithBindingsGroup() {\n+  enum ABC {\n+    A \u003d \u0027a\u0027,\n+    B \u003d \u0027b\u0027,\n+    C \u003d \u0027c\u0027,\n+  }\n+  @Component({\n+    imports: [FormField],\n+    template: `\n+      \u003cform\u003e\n+        \u003cinput type\u003d\"radio\" [formField]\u003d\"f\" [value]\u003d\"ABC.A\" /\u003e\n+        \u003cinput type\u003d\"radio\" [formField]\u003d\"f\" [value]\u003d\"ABC.B\" /\u003e\n+        \u003cinput type\u003d\"radio\" [formField]\u003d\"f\" [value]\u003d\"ABC.C\" /\u003e\n+      \u003c/form\u003e\n+    `,\n+  })\n+  class TestCmp {\n+    f \u003d form(signal(ABC.A), {\n+      name: \u0027test\u0027,\n+    });\n+    ABC \u003d ABC;\n+  }\n+\n+  const fix \u003d act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+  const formEl \u003d (fix.nativeElement as HTMLElement).firstChild as HTMLFormElement;\n+  const inputs \u003d Array.from(formEl.children) as HTMLInputElement[];\n+\n+  const [inputA, inputB, inputC] \u003d inputs;\n+  const cmp \u003d fix.componentInstance as TestCmp;\n+\n+  return {cmp, inputA, inputB, inputC, ABC};\n+}\n+\n function act\u003cT\u003e(fn: () \u003d\u003e T): T {\n   try {\n     return fn();","expectedMessage":"fix(forms): Ensure the control instruction comes after the other bindings","repository":"angular","commitHash":"65fa5b5439b9489dfa5f8fdfa24567cd9a32fac4","metadata":{}}
{"id":"angular-7fd076bd","diff":" .../test/node/api/validators/pattern.spec.ts       | 51 ++++++++++++++++++++++\n 1 file changed, 51 insertions(+)\n\ndiff --git a/packages/forms/signals/test/node/api/validators/pattern.spec.ts b/packages/forms/signals/test/node/api/validators/pattern.spec.ts\nindex 13f884fa..b043eaf3 100644\n--- a/packages/forms/signals/test/node/api/validators/pattern.spec.ts\n+++ b/packages/forms/signals/test/node/api/validators/pattern.spec.ts\n@@ -95,6 +95,57 @@ describe(\u0027pattern validator\u0027, () \u003d\u003e {\n       expect(f.name().pattern()).toEqual([/pir.*jok/, /pelmeni/]);\n     });\n \n+    it(\u0027validates multiple patterns independently (AND logic)\u0027, () \u003d\u003e {\n+      const model \u003d signal(\u0027abc123\u0027);\n+      const f \u003d form(\n+        model,\n+        (p) \u003d\u003e {\n+          pattern(p, /abc/); // matches\n+          pattern(p, /\\d+/); // matches\n+        },\n+        {injector: TestBed.inject(Injector)},\n+      );\n+\n+      // Both patterns match, so no errors\n+      expect(f().pattern()).toEqual([/abc/, /\\d+/]);\n+      expect(f().errors()).toEqual([]);\n+    });\n+\n+    it(\u0027validates multiple patterns independently - partial match produces errors\u0027, () \u003d\u003e {\n+      const model \u003d signal(\u0027abc\u0027);\n+      const f \u003d form(\n+        model,\n+        (p) \u003d\u003e {\n+          pattern(p, /abc/); // matches\n+          pattern(p, /\\d+/); // does not match\n+        },\n+        {injector: TestBed.inject(Injector)},\n+      );\n+\n+      // Only one pattern matches, so we get an error from the non-matching one\n+      expect(f().pattern()).toEqual([/abc/, /\\d+/]);\n+      expect(f().errors()).toEqual([patternError(/\\d+/, {fieldTree: f})]);\n+    });\n+\n+    it(\u0027validates multiple patterns - no match produces multiple errors\u0027, () \u003d\u003e {\n+      const model \u003d signal(\u0027xyz\u0027);\n+      const f \u003d form(\n+        model,\n+        (p) \u003d\u003e {\n+          pattern(p, /abc/); // does not match\n+          pattern(p, /\\d+/); // does not match\n+        },\n+        {injector: TestBed.inject(Injector)},\n+      );\n+\n+      // No patterns match, so we get errors from both\n+      expect(f().pattern()).toEqual([/abc/, /\\d+/]);\n+      expect(f().errors()).toEqual([\n+        patternError(/abc/, {fieldTree: f}),\n+        patternError(/\\d+/, {fieldTree: f}),\n+      ]);\n+    });\n+\n     it(\u0027PATTERN property defaults to empty list\u0027, () \u003d\u003e {\n       const cat \u003d signal({name: \u0027pelmeni-the-cat\u0027});\n       const f \u003d form(","expectedMessage":"test(forms): improve test coverage for multiple pattern validators","repository":"angular","commitHash":"7fd076bdd329071d8705acc5de9a852cbc68ab60","metadata":{}}
{"id":"angular-1b4dcc01","diff":" devtools/tools/angular-optimization/ensure-no-linker-decl.mjs           | 2 +-\n devtools/tools/angular-optimization/esbuild-plugin.d.ts                 | 2 +-\n devtools/tools/angular-optimization/esbuild-plugin.mjs                  | 2 +-\n modules/utilities/e2e_util.ts                                           | 2 +-\n modules/utilities/index.ts                                              | 2 +-\n modules/utilities/perf_util.ts                                          | 2 +-\n packages/compiler-cli/test/ngtsc/debug_transform_spec.ts                | 2 +-\n packages/core/primitives/signals/src/formatter.ts                       | 2 +-\n .../forms/src/directives/reactive_directives/abstract_form.directive.ts | 2 +-\n .../forms/src/directives/reactive_directives/form_array_directive.ts    | 2 +-\n tools/tslint/noImplicitOverrideAbstractRule.ts                          | 2 +-\n tools/tslint/validateImportForEsmCjsInteropRule.ts                      | 2 +-\n 12 files changed, 12 insertions(+), 12 deletions(-)\n\ndiff --git a/devtools/tools/angular-optimization/ensure-no-linker-decl.mjs b/devtools/tools/angular-optimization/ensure-no-linker-decl.mjs\nindex 55c4c4db..7f3969f0 100644\n--- a/devtools/tools/angular-optimization/ensure-no-linker-decl.mjs\n+++ b/devtools/tools/angular-optimization/ensure-no-linker-decl.mjs\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n /** Naively checks whether this node path resolves to an Angular declare invocation. */\ndiff --git a/devtools/tools/angular-optimization/esbuild-plugin.d.ts b/devtools/tools/angular-optimization/esbuild-plugin.d.ts\nindex ed44963b..46c9b354 100644\n--- a/devtools/tools/angular-optimization/esbuild-plugin.d.ts\n+++ b/devtools/tools/angular-optimization/esbuild-plugin.d.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {PluginItem} from \u0027@babel/core\u0027;\ndiff --git a/devtools/tools/angular-optimization/esbuild-plugin.mjs b/devtools/tools/angular-optimization/esbuild-plugin.mjs\nindex 6825ba75..17cf3a00 100644\n--- a/devtools/tools/angular-optimization/esbuild-plugin.mjs\n+++ b/devtools/tools/angular-optimization/esbuild-plugin.mjs\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import fs from \u0027fs\u0027;\ndiff --git a/modules/utilities/e2e_util.ts b/modules/utilities/e2e_util.ts\nindex d134a990..72e7a2d9 100644\n--- a/modules/utilities/e2e_util.ts\n+++ b/modules/utilities/e2e_util.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n /* tslint:disable:no-console  */\ndiff --git a/modules/utilities/index.ts b/modules/utilities/index.ts\nindex 82e47254..a4cd97cf 100644\n--- a/modules/utilities/index.ts\n+++ b/modules/utilities/index.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n export {openBrowser, verifyNoBrowserErrors} from \u0027./e2e_util\u0027;\n export {runBenchmark} from \u0027./perf_util\u0027;\ndiff --git a/modules/utilities/perf_util.ts b/modules/utilities/perf_util.ts\nindex 74707f8f..287fc676 100644\n--- a/modules/utilities/perf_util.ts\n+++ b/modules/utilities/perf_util.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {randomUUID} from \u0027node:crypto\u0027;\ndiff --git a/packages/compiler-cli/test/ngtsc/debug_transform_spec.ts b/packages/compiler-cli/test/ngtsc/debug_transform_spec.ts\nindex ce77e222..a7ded6f4 100644\n--- a/packages/compiler-cli/test/ngtsc/debug_transform_spec.ts\n+++ b/packages/compiler-cli/test/ngtsc/debug_transform_spec.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC All Rights Reserved.\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {runInEachFileSystem} from \u0027../../src/ngtsc/file_system/testing\u0027;\ndiff --git a/packages/core/primitives/signals/src/formatter.ts b/packages/core/primitives/signals/src/formatter.ts\nindex d67f722d..10153295 100644\n--- a/packages/core/primitives/signals/src/formatter.ts\n+++ b/packages/core/primitives/signals/src/formatter.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC All Rights Reserved.\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {SIGNAL} from \u0027./graph\u0027;\ndiff --git a/packages/forms/src/directives/reactive_directives/abstract_form.directive.ts b/packages/forms/src/directives/reactive_directives/abstract_form.directive.ts\nindex fce0fc24..b90e7d20 100644\n--- a/packages/forms/src/directives/reactive_directives/abstract_form.directive.ts\n+++ b/packages/forms/src/directives/reactive_directives/abstract_form.directive.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC All Rights Reserved.\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {\ndiff --git a/packages/forms/src/directives/reactive_directives/form_array_directive.ts b/packages/forms/src/directives/reactive_directives/form_array_directive.ts\nindex c67854ea..68be7fe7 100644\n--- a/packages/forms/src/directives/reactive_directives/form_array_directive.ts\n+++ b/packages/forms/src/directives/reactive_directives/form_array_directive.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC All Rights Reserved.\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {Directive, EventEmitter, forwardRef, Input, Output, Provider} from \u0027@angular/core\u0027;\ndiff --git a/tools/tslint/noImplicitOverrideAbstractRule.ts b/tools/tslint/noImplicitOverrideAbstractRule.ts\nindex 96a24218..d5ba727e 100644\n--- a/tools/tslint/noImplicitOverrideAbstractRule.ts\n+++ b/tools/tslint/noImplicitOverrideAbstractRule.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {Replacement, RuleFailure, WalkContext} from \u0027tslint/lib\u0027;\ndiff --git a/tools/tslint/validateImportForEsmCjsInteropRule.ts b/tools/tslint/validateImportForEsmCjsInteropRule.ts\nindex 35833f03..590826ee 100644\n--- a/tools/tslint/validateImportForEsmCjsInteropRule.ts\n+++ b/tools/tslint/validateImportForEsmCjsInteropRule.ts\n@@ -3,7 +3,7 @@\n  * Copyright Google LLC\n  *\n  * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n+ * found in the LICENSE file at https://angular.dev/license\n  */\n \n import {RuleFailure, WalkContext} from \u0027tslint/lib\u0027;","expectedMessage":"docs: replace old https://angular.io/license with https://angular.dev/license","repository":"angular","commitHash":"1b4dcc01ff385b5eb33eb35e4f299c6a4be7fe95","metadata":{}}
{"id":"angular-ebc90c26","diff":" vscode-ng-language-service/server/src/session.ts | 19 ++++++++++++++++++-\n 1 file changed, 18 insertions(+), 1 deletion(-)\n\ndiff --git a/vscode-ng-language-service/server/src/session.ts b/vscode-ng-language-service/server/src/session.ts\nindex 780aca77..20282200 100644\n--- a/vscode-ng-language-service/server/src/session.ts\n+++ b/vscode-ng-language-service/server/src/session.ts\n@@ -1403,7 +1403,24 @@ export class Session {\n       options,\n     );\n     if (!completions) {\n-      return null;\n+      const sf \u003d this.getDefaultProjectForScriptInfo(scriptInfo)?.getSourceFile(scriptInfo.path);\n+      if (!sf) {\n+        return null;\n+      }\n+      const node \u003d getTokenAtPosition(sf, offset);\n+      if (!isInlineStyleNode(node)) {\n+        return null;\n+      }\n+      const virtualScssDocContents \u003d getSCSSVirtualContent(sf);\n+      const virtualScssDoc \u003d TextDocument.create(\n+        params.textDocument.uri.toString(),\n+        \u0027scss\u0027,\n+        0,\n+        virtualScssDocContents,\n+      );\n+      const stylesheet \u003d scssLS.parseStylesheet(virtualScssDoc);\n+      const scssCompletions \u003d scssLS.doComplete(virtualScssDoc, params.position, stylesheet);\n+      return scssCompletions.items;\n     }\n     return completions.entries.map((e) \u003d\u003e\n       tsCompletionEntryToLspCompletionItem(e, params.position, scriptInfo),","expectedMessage":"feat(language-server): Add completions and hover info for inline styles","repository":"angular","commitHash":"ebc90c26f5ff1ba1e0ca9b775a44e301ebfb9473","metadata":{}}
{"id":"angular-573aadef","diff":" .../server/src/embedded_support.ts                 |  2 +-\n vscode-ng-language-service/server/src/session.ts   | 33 ++++++++++++++++++++--\n 2 files changed, 32 insertions(+), 3 deletions(-)\n\ndiff --git a/vscode-ng-language-service/server/src/embedded_support.ts b/vscode-ng-language-service/server/src/embedded_support.ts\nindex 8f9b1891..1e14bec8 100644\n--- a/vscode-ng-language-service/server/src/embedded_support.ts\n+++ b/vscode-ng-language-service/server/src/embedded_support.ts\n@@ -69,7 +69,7 @@ export function getSCSSVirtualContent(sf: ts.SourceFile): string {\n   return content;\n }\n \n-function isInlineStyleNode(node: ts.Node) {\n+export function isInlineStyleNode(node: ts.Node) {\n   if (!ts.isStringLiteralLike(node)) {\n     return false;\n   }\ndiff --git a/vscode-ng-language-service/server/src/session.ts b/vscode-ng-language-service/server/src/session.ts\nindex cf1591a7..780aca77 100644\n--- a/vscode-ng-language-service/server/src/session.ts\n+++ b/vscode-ng-language-service/server/src/session.ts\n@@ -39,7 +39,7 @@ import {\n \n import {readNgCompletionData, tsCompletionEntryToLspCompletionItem} from \u0027./completion\u0027;\n import {tsDiagnosticToLspDiagnostic} from \u0027./diagnostic\u0027;\n-import {getHTMLVirtualContent, getSCSSVirtualContent} from \u0027./embedded_support\u0027;\n+import {getHTMLVirtualContent, getSCSSVirtualContent, isInlineStyleNode} from \u0027./embedded_support\u0027;\n import {ServerHost} from \u0027./server_host\u0027;\n import {documentationToMarkdown} from \u0027./text_render\u0027;\n import {\n@@ -1327,7 +1327,23 @@ export class Session {\n     const offset \u003d lspPositionToTsPosition(scriptInfo, params.position);\n     const info \u003d languageService.getQuickInfoAtPosition(scriptInfo.fileName, offset);\n     if (!info) {\n-      return null;\n+      const sf \u003d this.getDefaultProjectForScriptInfo(scriptInfo)?.getSourceFile(scriptInfo.path);\n+      if (!sf) {\n+        return null;\n+      }\n+      const node \u003d getTokenAtPosition(sf, offset);\n+      if (!isInlineStyleNode(node)) {\n+        return null;\n+      }\n+      const virtualScssDocContents \u003d getSCSSVirtualContent(sf);\n+      const virtualScssDoc \u003d TextDocument.create(\n+        params.textDocument.uri.toString(),\n+        \u0027scss\u0027,\n+        0,\n+        virtualScssDocContents,\n+      );\n+      const stylesheet \u003d scssLS.parseStylesheet(virtualScssDoc);\n+      return scssLS.doHover(virtualScssDoc, params.position, stylesheet);\n     }\n     const {kind, kindModifiers, textSpan, displayParts, documentation, tags} \u003d info;\n     let desc \u003d kindModifiers ? kindModifiers + \u0027 \u0027 : \u0027\u0027;\n@@ -1668,3 +1684,16 @@ function generateCommandAndTextEditsFromCodeActions(\n     additionalTextEdits: additionalTextEdits.length ? additionalTextEdits : undefined,\n   };\n }\n+\n+function getTokenAtPosition(sourceFile: ts.SourceFile, position: number): ts.Node {\n+  let current: ts.Node \u003d sourceFile;\n+  while (true) {\n+    const child \u003d current\n+      .getChildren(sourceFile)\n+      .find((c) \u003d\u003e c.getStart(sourceFile) \u003c\u003d position \u0026\u0026 c.getEnd() \u003e position);\n+    if (!child || child.kind \u003d\u003d\u003d ts.SyntaxKind.EndOfFileToken) {\n+      return current;\n+    }\n+    current \u003d child;\n+  }\n+}","expectedMessage":"feat(language-server): Add quick info for inline styles","repository":"angular","commitHash":"573aadef7eb8b6b5e83b82a16f95d2a556f27c01","metadata":{}}
{"id":"angular-26fd0839","diff":" pnpm-lock.yaml                                     | 13 +++++\n vscode-ng-language-service/server/package.json     |  1 +\n vscode-ng-language-service/server/src/BUILD.bazel  |  1 +\n .../server/src/embedded_support.ts                 | 59 +++++++++++++++++++---\n vscode-ng-language-service/server/src/session.ts   | 17 ++++++-\n .../server/src/tests/embedded_support_spec.ts      | 29 ++++++++++-\n 6 files changed, 111 insertions(+), 9 deletions(-)\n\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex 17bf3a1a..a4c5a79e 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -1418,6 +1418,9 @@ importers:\n       \u0027@types/node\u0027:\n         specifier: ^24.5.2\n         version: 24.10.1\n+      vscode-css-languageservice:\n+        specifier: 6.3.9\n+        version: 6.3.9\n       vscode-html-languageservice:\n         specifier: 5.6.1\n         version: 5.6.1\n@@ -12891,6 +12894,9 @@ packages:\n       tslint: \u0027*\u0027\n       typescript: \u0027*\u0027\n \n+  vscode-css-languageservice@6.3.9:\n+    resolution: {integrity: sha512-1tLWfp+TDM5ZuVWht3jmaY5y7O6aZmpeXLoHl5bv1QtRsRKt4xYGRMmdJa5Pqx/FTkgRbsna9R+Gn2xE+evVuA\u003d\u003d}\n+\n   vscode-html-languageservice@5.6.1:\n     resolution: {integrity: sha512-5Mrqy5CLfFZUgkyhNZLA1Ye5g12Cb/v6VM7SxUzZUaRKWMDz4md+y26PrfRTSU0/eQAl3XpO9m2og+GGtDMuaA\u003d\u003d}\n \n@@ -27750,6 +27756,13 @@ snapshots:\n       tslint: 6.1.3(typescript@5.9.3)\n       typescript: 5.9.3\n \n+  vscode-css-languageservice@6.3.9:\n+    dependencies:\n+      \u0027@vscode/l10n\u0027: 0.0.18\n+      vscode-languageserver-textdocument: 1.0.12\n+      vscode-languageserver-types: 3.17.5\n+      vscode-uri: 3.1.0\n+\n   vscode-html-languageservice@5.6.1:\n     dependencies:\n       \u0027@vscode/l10n\u0027: 0.0.18\ndiff --git a/vscode-ng-language-service/server/package.json b/vscode-ng-language-service/server/package.json\nindex 2d2e890a..0d6e9a25 100644\n--- a/vscode-ng-language-service/server/package.json\n+++ b/vscode-ng-language-service/server/package.json\n@@ -23,6 +23,7 @@\n   \"devDependencies\": {\n     \"@types/node\": \"^24.5.2\",\n     \"vscode-html-languageservice\": \"5.6.1\",\n+    \"vscode-css-languageservice\": \"6.3.9\",\n     \"vscode-languageserver\": \"7.0.0\",\n     \"vscode-languageserver-textdocument\": \"^1.0.12\",\n     \"vscode-uri\": \"3.1.0\"\ndiff --git a/vscode-ng-language-service/server/src/BUILD.bazel b/vscode-ng-language-service/server/src/BUILD.bazel\nindex 29f459aa..ffac79a5 100644\n--- a/vscode-ng-language-service/server/src/BUILD.bazel\n+++ b/vscode-ng-language-service/server/src/BUILD.bazel\n@@ -11,6 +11,7 @@ ts_project(\n         \"//:node_modules/typescript\",\n         \"//vscode-ng-language-service/common\",\n         \"//vscode-ng-language-service/server:node_modules/@types/node\",\n+        \"//vscode-ng-language-service/server:node_modules/vscode-css-languageservice\",\n         \"//vscode-ng-language-service/server:node_modules/vscode-html-languageservice\",\n         \"//vscode-ng-language-service/server:node_modules/vscode-languageserver\",\n         \"//vscode-ng-language-service/server:node_modules/vscode-languageserver-textdocument\",\ndiff --git a/vscode-ng-language-service/server/src/embedded_support.ts b/vscode-ng-language-service/server/src/embedded_support.ts\nindex db6a1054..8f9b1891 100644\n--- a/vscode-ng-language-service/server/src/embedded_support.ts\n+++ b/vscode-ng-language-service/server/src/embedded_support.ts\n@@ -42,13 +42,60 @@ export function getHTMLVirtualContent(sf: ts.SourceFile): string {\n   return content;\n }\n \n+/**\n+ * Takes a TS file and strips out all non-inline style content.\n+ *\n+ * @see {@link getHTMLVirtualContent}\n+ */\n+export function getSCSSVirtualContent(sf: ts.SourceFile): string {\n+  const inlineStyleNodes: ts.Node[] \u003d findAllMatchingNodes(sf, isInlineStyleNode);\n+  const documentText \u003d sf.text;\n+\n+  // Create a blank document with same text length\n+  let content \u003d documentText\n+    .split(\u0027\\n\u0027)\n+    .map((line) \u003d\u003e {\n+      return \u0027 \u0027.repeat(line.length);\n+    })\n+    .join(\u0027\\n\u0027);\n+\n+  // add back all the inline style regions in-place\n+  for (const region of inlineStyleNodes) {\n+    content \u003d\n+      content.slice(0, region.getStart(sf) + 1) +\n+      documentText.slice(region.getStart(sf) + 1, region.getEnd() - 1) +\n+      content.slice(region.getEnd() - 1);\n+  }\n+  return content;\n+}\n+\n+function isInlineStyleNode(node: ts.Node) {\n+  if (!ts.isStringLiteralLike(node)) {\n+    return false;\n+  }\n+\n+  if (isAssignmentToPropertyWithName(node, \u0027styles\u0027)) {\n+    return true;\n+  }\n+\n+  if (\n+    node.parent \u0026\u0026\n+    ts.isArrayLiteralExpression(node.parent) \u0026\u0026\n+    isAssignmentToPropertyWithName(node.parent, \u0027styles\u0027)\n+  ) {\n+    return true;\n+  }\n+\n+  return false;\n+}\n+\n+function isAssignmentToPropertyWithName(node: ts.Node, propertyName: \u0027styles\u0027 | \u0027template\u0027) {\n+  const assignment \u003d getPropertyAssignmentFromValue(node, propertyName);\n+  return assignment !\u003d\u003d null \u0026\u0026 getClassDeclFromDecoratorProp(assignment) !\u003d\u003d null;\n+}\n+\n function isInlineTemplateNode(node: ts.Node) {\n-  const assignment \u003d getPropertyAssignmentFromValue(node, \u0027template\u0027);\n-  return (\n-    ts.isStringLiteralLike(node) \u0026\u0026\n-    assignment !\u003d\u003d null \u0026\u0026\n-    getClassDeclFromDecoratorProp(assignment) !\u003d\u003d null\n-  );\n+  return ts.isStringLiteralLike(node) ? isAssignmentToPropertyWithName(node, \u0027template\u0027) : false;\n }\n \n /**\ndiff --git a/vscode-ng-language-service/server/src/session.ts b/vscode-ng-language-service/server/src/session.ts\nindex 1dbf8ee0..cf1591a7 100644\n--- a/vscode-ng-language-service/server/src/session.ts\n+++ b/vscode-ng-language-service/server/src/session.ts\n@@ -15,6 +15,7 @@ import {\n import * as ts from \u0027typescript/lib/tsserverlibrary\u0027;\n import {promisify} from \u0027util\u0027;\n import {getLanguageService as getHTMLLanguageService} from \u0027vscode-html-languageservice\u0027;\n+import {getSCSSLanguageService} from \u0027vscode-css-languageservice\u0027;\n import {TextDocument} from \u0027vscode-languageserver-textdocument\u0027;\n import * as lsp from \u0027vscode-languageserver/node\u0027;\n \n@@ -38,7 +39,7 @@ import {\n \n import {readNgCompletionData, tsCompletionEntryToLspCompletionItem} from \u0027./completion\u0027;\n import {tsDiagnosticToLspDiagnostic} from \u0027./diagnostic\u0027;\n-import {getHTMLVirtualContent} from \u0027./embedded_support\u0027;\n+import {getHTMLVirtualContent, getSCSSVirtualContent} from \u0027./embedded_support\u0027;\n import {ServerHost} from \u0027./server_host\u0027;\n import {documentationToMarkdown} from \u0027./text_render\u0027;\n import {\n@@ -84,6 +85,7 @@ const defaultFormatOptions: ts.FormatCodeSettings \u003d {};\n let defaultPreferences: ts.UserPreferences \u003d {};\n \n const htmlLS \u003d getHTMLLanguageService();\n+const scssLS \u003d getSCSSLanguageService();\n \n const alwaysSuppressDiagnostics: number[] \u003d [\n   // Diagnostics codes whose errors should always be suppressed, regardless of the options\n@@ -1059,7 +1061,18 @@ export class Session {\n       0,\n       virtualHtmlDocContents,\n     );\n-    return [...htmlLS.getFoldingRanges(virtualHtmlDoc), ...angularFoldingRanges];\n+    const virtualScssDocContents \u003d getSCSSVirtualContent(sf);\n+    const virtualScssDoc \u003d TextDocument.create(\n+      params.textDocument.uri.toString(),\n+      \u0027scss\u0027,\n+      0,\n+      virtualScssDocContents,\n+    );\n+    return [\n+      ...htmlLS.getFoldingRanges(virtualHtmlDoc),\n+      ...scssLS.getFoldingRanges(virtualScssDoc),\n+      ...angularFoldingRanges,\n+    ];\n   }\n \n   private onDefinition(\ndiff --git a/vscode-ng-language-service/server/src/tests/embedded_support_spec.ts b/vscode-ng-language-service/server/src/tests/embedded_support_spec.ts\nindex 2af0083e..58882514 100644\n--- a/vscode-ng-language-service/server/src/tests/embedded_support_spec.ts\n+++ b/vscode-ng-language-service/server/src/tests/embedded_support_spec.ts\n@@ -8,7 +8,7 @@\n \n import * as ts from \u0027typescript\u0027;\n \n-import {getHTMLVirtualContent} from \u0027../embedded_support\u0027;\n+import {getHTMLVirtualContent, getSCSSVirtualContent} from \u0027../embedded_support\u0027;\n \n function assertEmbeddedHTMLContent(value: string, expectedContent: string): void {\n   const sf \u003d ts.createSourceFile(\u0027temp\u0027, value, ts.ScriptTarget.ESNext, true /* setParentNodes */);\n@@ -17,6 +17,13 @@ function assertEmbeddedHTMLContent(value: string, expectedContent: string): void\n   expect(virtualContent).toEqual(expectedContent);\n }\n \n+function assertEmbeddedSCSSContent(value: string, expectedContent: string): void {\n+  const sf \u003d ts.createSourceFile(\u0027temp\u0027, value, ts.ScriptTarget.ESNext, true /* setParentNodes */);\n+  const virtualContent \u003d getSCSSVirtualContent(sf);\n+\n+  expect(virtualContent).toEqual(expectedContent);\n+}\n+\n describe(\u0027server embedded support\u0027, () \u003d\u003e {\n   it(\u0027strips everything but the template string literal\u0027, () \u003d\u003e {\n     assertEmbeddedHTMLContent(\n@@ -41,4 +48,24 @@ describe(\u0027server embedded support\u0027, () \u003d\u003e {\n     // length and line break locations, our results will be just fine. It doesn\u0027t matter that we\n     // have an extra whitespace character at the end of the line for folding ranges.\n   });\n+\n+  describe(\u0027SCSS support\u0027, () \u003d\u003e {\n+    it(\u0027strips everything but the styles string literal\u0027, () \u003d\u003e {\n+      assertEmbeddedSCSSContent(\n+        `@Component({styles: [\u0027abc123\u0027]}) export class MyCmp`,\n+        `                      abc123                       `,\n+      );\n+    });\n+\n+    it(\u0027can locate multiple style literals\u0027, () \u003d\u003e {\n+      assertEmbeddedSCSSContent(\n+        `@Component({styles: [\u0027abc123\u0027, \u0027xyz789\u0027]})`,\n+        `                      abc123    xyz789    `,\n+      );\n+    });\n+\n+    it(\u0027can locate direct assignment to styles\u0027, () \u003d\u003e {\n+      assertEmbeddedSCSSContent(`@Component({styles: \u0027abc123\u0027})`, `                     abc123   `);\n+    });\n+  });\n });","expectedMessage":"feat(language-server): Add folding range support for inline styles","repository":"angular","commitHash":"26fd0839c32d2ebeaa5e3ecc10ed70ab9ca17749","metadata":{}}
{"id":"angular-27276374","diff":" .devcontainer/recommended-Dockerfile              | 17 +++++------------\n .devcontainer/recommended-devcontainer.json       | 11 ++++++-----\n .gitignore                                        |  3 +++\n contributing-docs/building-and-testing-angular.md | 16 ++++++++++++++++\n 4 files changed, 30 insertions(+), 17 deletions(-)\n\ndiff --git a/.devcontainer/recommended-Dockerfile b/.devcontainer/recommended-Dockerfile\nindex d1288512..0992ceb9 100644\n--- a/.devcontainer/recommended-Dockerfile\n+++ b/.devcontainer/recommended-Dockerfile\n@@ -1,23 +1,16 @@\n # Image metadata and config.\n # Ideally, the Node.js version should match what we use on CI.\n-FROM cimg/node:18.13.0@sha256:45d0ee279f522c4562a464df71108104cc9b2187205333ffd0707d4f05589731\n-\n+FROM cimg/node:22.21.1-browsers@sha256:eee8ed828d5a54196456a86ac6872c43325acad54e59632261e23b486c458992\n \n LABEL name\u003d\"Angular dev environment\" \\\n-      description\u003d\"This image can be used to create a dev environment for building Angular.\" \\\n-      vendor\u003d\"angular\" \\\n-      version\u003d\"1.0\"\n-\n-EXPOSE 4000 4200 4433 5000 8080 9876\n+  description\u003d\"This image can be used to create a dev environment for building Angular.\" \\\n+  vendor\u003d\"angular\" \\\n+  version\u003d\"1.0\"\n \n+EXPOSE 4200 4201 4205 4206 9876\n \n # Switch to `root`.\n USER root\n \n-\n-# Configure `Node.js`/`npm`.\n-RUN npm config --global set user root\n-\n-\n # Go! (And keep going.)\n CMD [\"tail\", \"--follow\", \"/dev/null\"]\ndiff --git a/.devcontainer/recommended-devcontainer.json b/.devcontainer/recommended-devcontainer.json\nindex 03a2e3b5..61316086 100644\n--- a/.devcontainer/recommended-devcontainer.json\n+++ b/.devcontainer/recommended-devcontainer.json\n@@ -2,10 +2,11 @@\n {\n   \"name\": \"Angular dev container\",\n   \"dockerFile\": \"Dockerfile\",\n-  \"appPort\": [4000, 4200, 4433, 5000, 8080, 9876],\n+  \"forwardPorts\": [4200, 4201, 4205, 4206, 9876],\n   \"postCreateCommand\": \"pnpm install\",\n-  \"extensions\": [\n-    \"devondcarew.bazel-code\",\n-    \"ms-vscode.vscode-typescript-tslint-plugin\"\n-  ],\n+  \"customizations\": {\n+    \"vscode\": {\n+      \"extensions\": [\"BazelBuild.vscode-bazel\", \"ms-vscode.vscode-typescript-tslint-plugin\"]\n+    }\n+  }\n }\ndiff --git a/.gitignore b/.gitignore\nindex 3a7c650d..a7b08fdc 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -54,3 +54,6 @@ baseline.json\n \n # Ignore cache created with the Angular CLI.\n .angular/\n+\n+# pnpm store\n+.pnpm-store\ndiff --git a/contributing-docs/building-and-testing-angular.md b/contributing-docs/building-and-testing-angular.md\nindex fe304b44..2d3264e6 100644\n--- a/contributing-docs/building-and-testing-angular.md\n+++ b/contributing-docs/building-and-testing-angular.md\n@@ -5,6 +5,7 @@ It also explains the basic mechanics of using `git`, `node`, and `pnpm`.\n \n - [Building and Testing Angular](#building-and-testing-angular)\n   - [Prerequisite Software](#prerequisite-software)\n+  - [Development in a Container](#development-in-a-container)\n   - [Getting the Sources](#getting-the-sources)\n   - [Installing NPM Modules](#installing-npm-modules)\n   - [Building](#building)\n@@ -52,6 +53,21 @@ following on your development machine:\n - On Windows: [MSYS2](https://www.msys2.org/) which is used by Bazel. Follow\n   the [instructions](https://bazel.build/install/windows#installing-compilers-and-language-runtimes)\n \n+## Development in a Container\n+\n+You can also use the provided [Dev Container](https://containers.dev/) configuration to set up a development environment. This approach uses Docker to create a container with all the necessary tools (Node.js, pnpm, etc.) pre-installed.\n+\n+**Prerequisites:**\n+\n+- [Docker Desktop](https://www.docker.com/products/docker-desktop)\n+- [VS Code](https://code.visualstudio.com/)\n+- [Dev Containers extension](https://marketplace.visualstudio.com/items?itemName\u003dms-vscode-remote.remote-containers)\n+\n+**Usage:**\n+\n+1. Open the Angular repository in VS Code.\n+2. Run the **Dev Containers: Reopen in Container** command from the Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P`).\n+\n ## Getting the Sources\n \n Fork and clone the Angular repository:","expectedMessage":"build: update dev container configuration","repository":"angular","commitHash":"27276374ab4f8af00fe5b6c8b18aca9e9f2af3da","metadata":{}}
{"id":"angular-f53f878e","diff":" adev/shared-docs/styles/_reference.scss | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/adev/shared-docs/styles/_reference.scss b/adev/shared-docs/styles/_reference.scss\nindex 1538df84..89f7eec4 100644\n--- a/adev/shared-docs/styles/_reference.scss\n+++ b/adev/shared-docs/styles/_reference.scss\n@@ -64,10 +64,10 @@\n   }\n \n   .docs-reference-section-heading {\n-    padding-block-start: 3rem;\n+    margin-block-start: 3rem;\n \n     \u0026--sub {\n-      padding-block-start: 1rem;\n+      margin-block-start: 1rem;\n     }\n \n     \u0026 \u003e a {","expectedMessage":"fix(docs-infra): use margin instead of padding to prevent heading hover overflow","repository":"angular","commitHash":"f53f878e0fdf658bd6bcdd8c349229324f8fd437","metadata":{}}
{"id":"angular-8bdd98ef","diff":" .../pipeline/api-gen/rendering/entities.mts        |  3 ++\n .../api-gen/rendering/entities/categorization.mts  |  9 ++++++\n .../api-gen/rendering/entities/renderables.mts     |  4 +++\n .../pipeline/api-gen/rendering/processing.mts      |  5 +++\n .../pipeline/api-gen/rendering/rendering.mts       |  5 +++\n .../rendering/templates/block-reference.tsx        | 23 ++++++++++++++\n .../api-gen/rendering/templates/header-api.tsx     | 15 +++++----\n .../rendering/transforms/block-transforms.mts      | 36 ++++++++++++++++++++++\n 8 files changed, 94 insertions(+), 6 deletions(-)\n\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/entities.mts b/adev/shared-docs/pipeline/api-gen/rendering/entities.mts\nindex ce784693..7b2ab7ed 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/entities.mts\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/entities.mts\n@@ -161,6 +161,9 @@ export type FunctionEntry \u003d FunctionDefinitionEntry \u0026\n     implementation: FunctionSignatureMetadata;\n   };\n \n+/** Documentation entity for a block. */\n+export interface BlockEntry extends DocEntry {}\n+\n /** Interface describing a function with overload signatures. */\n export interface FunctionDefinitionEntry {\n   name: string;\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/entities/categorization.mts b/adev/shared-docs/pipeline/api-gen/rendering/entities/categorization.mts\nindex 9c82e58e..02f51035 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/entities/categorization.mts\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/entities/categorization.mts\n@@ -7,6 +7,7 @@\n  */\n \n import {\n+  BlockEntry,\n   ClassEntry,\n   ConstantEntry,\n   DecoratorEntry,\n@@ -27,6 +28,7 @@ import {\n import {CliCommand} from \u0027../cli-entities.mjs\u0027;\n \n import {\n+  BlockEntryRenderable,\n   ClassEntryRenderable,\n   ConstantEntryRenderable,\n   DecoratorEntryRenderable,\n@@ -107,6 +109,13 @@ export function isFunctionEntry(entry: DocEntry): entry is FunctionEntry {\n   return entry.entryType \u003d\u003d\u003d EntryType.Function;\n }\n \n+/** Gets whether the given entry represents a block */\n+export function isBlockEntry(entry: DocEntryRenderable): entry is BlockEntryRenderable;\n+export function isBlockEntry(entry: DocEntry): entry is BlockEntry;\n+export function isBlockEntry(entry: DocEntry): entry is BlockEntry {\n+  return entry.entryType \u003d\u003d\u003d EntryType.Block;\n+}\n+\n export function isInitializerApiFunctionEntry(\n   entry: DocEntryRenderable,\n ): entry is InitializerApiFunctionRenderable;\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/entities/renderables.mts b/adev/shared-docs/pipeline/api-gen/rendering/entities/renderables.mts\nindex 322f7e87..bbfeb216 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/entities/renderables.mts\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/entities/renderables.mts\n@@ -21,6 +21,7 @@ import {\n   ParameterEntry,\n   PipeEntry,\n   TypeAliasEntry,\n+  EntryType,\n } from \u0027../entities.mjs\u0027;\n \n import {CliCommand, CliOption} from \u0027../cli-entities.mjs\u0027;\n@@ -106,6 +107,9 @@ export type FunctionSignatureMetadataRenderable \u003d FunctionSignatureMetadata \u0026\n     params: ParameterEntryRenderable[];\n   };\n \n+/** Documentation entity for a block augmented with transformed content for rendering. */\n+export type BlockEntryRenderable \u003d DocEntry \u0026 DocEntryRenderable;\n+\n /** Sub-entry for a single class or enum member augmented with transformed content for rendering. */\n export interface MemberEntryRenderable extends MemberEntry {\n   htmlDescription: string;\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/processing.mts b/adev/shared-docs/pipeline/api-gen/rendering/processing.mts\nindex 03862f9c..14230c17 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/processing.mts\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/processing.mts\n@@ -19,6 +19,7 @@ import {\n   isInitializerApiFunctionEntry,\n   isInterfaceEntry,\n   isTypeAliasEntry,\n+  isBlockEntry,\n } from \u0027./entities/categorization.mjs\u0027;\n import {CliCommandRenderable, DocEntryRenderable} from \u0027./entities/renderables.mjs\u0027;\n import {getClassRenderable} from \u0027./transforms/class-transforms.mjs\u0027;\n@@ -39,6 +40,7 @@ import {\n import {addModuleName} from \u0027./transforms/module-name.mjs\u0027;\n import {addRepo} from \u0027./transforms/repo.mjs\u0027;\n import {getTypeAliasRenderable} from \u0027./transforms/type-alias-transforms.mjs\u0027;\n+import {getBlockRenderable} from \u0027./transforms/block-transforms.mjs\u0027;\n \n export async function getRenderable(\n   entry: DocEntry | CliCommand,\n@@ -73,6 +75,9 @@ export async function getRenderable(\n   if (isInitializerApiFunctionEntry(entry)) {\n     return getInitializerApiFunctionRenderable(entry, moduleName, repo);\n   }\n+  if (isBlockEntry(entry)) {\n+    return getBlockRenderable(entry, moduleName, repo);\n+  }\n \n   // Fallback to an uncategorized renderable.\n   return setEntryFlags(\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/rendering.mts b/adev/shared-docs/pipeline/api-gen/rendering/rendering.mts\nindex d223ac0c..4f997ef2 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/rendering.mts\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/rendering.mts\n@@ -18,6 +18,7 @@ import {\n   isInitializerApiFunctionEntry,\n   isInterfaceEntry,\n   isTypeAliasEntry,\n+  isBlockEntry,\n } from \u0027./entities/categorization.mjs\u0027;\n import {CliCommandRenderable, DocEntryRenderable} from \u0027./entities/renderables.mjs\u0027;\n import {ClassReference} from \u0027./templates/class-reference\u0027;\n@@ -30,6 +31,7 @@ import {InitializerApiFunction} from \u0027./templates/initializer-api-function\u0027;\n import {TypeAliasReference} from \u0027./templates/type-alias-reference\u0027;\n import {DecoratorReference} from \u0027./templates/decorator-reference\u0027;\n import {setCurrentSymbol} from \u0027./symbol-context.mjs\u0027;\n+import {BlockReference} from \u0027./templates/block-reference\u0027;\n \n /** Given a doc entry, get the transformed version of the entry for rendering. */\n export function renderEntry(renderable: DocEntryRenderable | CliCommandRenderable): string {\n@@ -59,6 +61,9 @@ export function renderEntry(renderable: DocEntryRenderable | CliCommandRenderabl\n   if (isInitializerApiFunctionEntry(renderable)) {\n     return render(InitializerApiFunction(renderable));\n   }\n+  if (isBlockEntry(renderable)) {\n+    return render(BlockReference(renderable));\n+  }\n \n   // Fall back rendering nothing while in development.\n   return render(DocsReference(renderable));\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/templates/block-reference.tsx b/adev/shared-docs/pipeline/api-gen/rendering/templates/block-reference.tsx\nnew file mode 100644\nindex 00000000..79096223\n--- /dev/null\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/templates/block-reference.tsx\n@@ -0,0 +1,23 @@\n+/*!\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.dev/license\n+ */\n+\n+import {h} from \u0027preact\u0027;\n+import {BlockEntryRenderable} from \u0027../entities/renderables.mjs\u0027;\n+import {HeaderApi} from \u0027./header-api\u0027;\n+import {RawHtml} from \u0027./raw-html\u0027;\n+import {API_REFERENCE_CONTAINER} from \u0027../styling/css-classes.mjs\u0027;\n+\n+/** Component to render a block API reference document. */\n+export function BlockReference(entry: BlockEntryRenderable) {\n+  return (\n+    \u003cdiv className\u003d{API_REFERENCE_CONTAINER}\u003e\n+      \u003cHeaderApi entry\u003d{entry} hideDescription\u003d{true} /\u003e\n+      \u003cRawHtml value\u003d{entry.htmlDescription} /\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/templates/header-api.tsx b/adev/shared-docs/pipeline/api-gen/rendering/templates/header-api.tsx\nindex cfdcc84b..5d0d2289 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/templates/header-api.tsx\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/templates/header-api.tsx\n@@ -21,6 +21,7 @@ import {DocsPillRow} from \u0027./docs-pill-row\u0027;\n export function HeaderApi(props: {\n   entry: DocEntryRenderable | PipeEntryRenderable;\n   showFullDescription?: boolean;\n+  hideDescription?: boolean;\n }) {\n   const entry \u003d props.entry;\n \n@@ -60,12 +61,14 @@ export function HeaderApi(props: {\n         )}\n       \u003c/div\u003e\n \n-      \u003csection\n-        className\u003d{\u0027docs-reference-description\u0027}\n-        dangerouslySetInnerHTML\u003d{{\n-          __html: props.showFullDescription ? entry.htmlDescription : entry.shortHtmlDescription,\n-        }}\n-      \u003e\u003c/section\u003e\n+      {!props.hideDescription \u0026\u0026 (\n+        \u003csection\n+          className\u003d{\u0027docs-reference-description\u0027}\n+          dangerouslySetInnerHTML\u003d{{\n+            __html: props.showFullDescription ? entry.htmlDescription : entry.shortHtmlDescription,\n+          }}\n+        \u003e\u003c/section\u003e\n+      )}\n \n       \u003cDocsPillRow links\u003d{entry.additionalLinks} /\u003e\n     \u003c/header\u003e\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/transforms/block-transforms.mts b/adev/shared-docs/pipeline/api-gen/rendering/transforms/block-transforms.mts\nnew file mode 100644\nindex 00000000..a77386d5\n--- /dev/null\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/transforms/block-transforms.mts\n@@ -0,0 +1,36 @@\n+/*!\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.dev/license\n+ */\n+\n+import {DocEntry} from \u0027../entities.mjs\u0027;\n+import {BlockEntryRenderable} from \u0027../entities/renderables.mjs\u0027;\n+import {\n+  addHtmlAdditionalLinks,\n+  addHtmlDescription,\n+  addHtmlJsDocTagComments,\n+  addHtmlUsageNotes,\n+  setEntryFlags,\n+} from \u0027./jsdoc-transforms.mjs\u0027;\n+import {addModuleName} from \u0027./module-name.mjs\u0027;\n+import {addRepo} from \u0027./repo.mjs\u0027;\n+\n+/** Given an unprocessed block entry, get the fully renderable block entry. */\n+export function getBlockRenderable(\n+  blockEntry: DocEntry,\n+  moduleName: string,\n+  repo: string,\n+): BlockEntryRenderable {\n+  return setEntryFlags(\n+    addHtmlAdditionalLinks(\n+      addHtmlDescription(\n+        addHtmlUsageNotes(\n+          addHtmlJsDocTagComments(addRepo(addModuleName(blockEntry, moduleName), repo)),\n+        ),\n+      ),\n+    ),\n+  );\n+}","expectedMessage":"fix(docs-infra): prevent duplicate description rendering for block API entries","repository":"angular","commitHash":"8bdd98ef41141d7b21643fcb3d9b2a745a8a85c1","metadata":{}}
{"id":"angular-933ca9e5","diff":" adev/src/content/guide/signals/overview.md | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/adev/src/content/guide/signals/overview.md b/adev/src/content/guide/signals/overview.md\nindex cffc0924..7180209b 100644\n--- a/adev/src/content/guide/signals/overview.md\n+++ b/adev/src/content/guide/signals/overview.md\n@@ -188,7 +188,7 @@ effect(() \u003d\u003e {\n \n ## Advanced derivations\n \n-While `computed` handles simple readonly derivations, you might find youself needing a writable state that is dependant on other signals.\n+While `computed` handles simple readonly derivations, you might find yourself needing a writable state that is dependant on other signals.\n For more information see the [Dependent state with linkedSignal](/guide/signals/linked-signal) guide.\n \n All signal APIs are synchronous `signal`, `computed`, `input`, etc. However, applications often need to deal with data that is available asynchronously. A `Resource` gives you a way to incorporate async data into your application\u0027s signal-based code and still allow you to access its data synchronously. For more information see the [Async reactivity with resources](/guide/signals/resource) guide.","expectedMessage":"docs: fix spelling mistake in documentation","repository":"angular","commitHash":"933ca9e5dce1b0439a8c923459f2f16d7b5a27c8","metadata":{}}
{"id":"angular-4d6a6aaf","diff":" .ng-dev/github.mjs | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/.ng-dev/github.mjs b/.ng-dev/github.mjs\nindex 57b58572..8df9dcd8 100644\n--- a/.ng-dev/github.mjs\n+++ b/.ng-dev/github.mjs\n@@ -9,4 +9,5 @@ export const github \u003d {\n   name: \u0027angular\u0027,\n   mainBranchName: \u0027main\u0027,\n   mergeMode: \u0027caretaker-only\u0027,\n+  requireReleaseModeForRelease: true,\n };","expectedMessage":"build: begin requring usage of release mode for releases","repository":"angular","commitHash":"4d6a6aafeecc0449025b3ad94c08223770af1b97","metadata":{}}
{"id":"angular-4a76058b","diff":" .github/actions/saucelabs-legacy/action.yml        |  4 +-\n .github/workflows/adev-preview-build.yml           |  8 ++--\n .github/workflows/adev-preview-deploy.yml          |  2 +-\n .../workflows/assistant-to-the-branch-manager.yml  |  2 +-\n .github/workflows/benchmark-compare.yml            |  2 +-\n .github/workflows/ci.yml                           | 50 +++++++++++-----------\n .github/workflows/dev-infra.yml                    |  4 +-\n .github/workflows/google-internal-tests.yml        |  2 +-\n .github/workflows/manual.yml                       |  8 ++--\n .github/workflows/merge-ready-status.yml           |  2 +-\n .github/workflows/perf.yml                         |  6 +--\n .github/workflows/pr.yml                           | 40 ++++++++---------\n MODULE.bazel                                       |  2 +-\n package.json                                       |  2 +-\n pnpm-lock.yaml                                     | 12 +++---\n 15 files changed, 73 insertions(+), 73 deletions(-)\n\ndiff --git a/.github/actions/saucelabs-legacy/action.yml b/.github/actions/saucelabs-legacy/action.yml\nindex f4d2e324..b6046347 100644\n--- a/.github/actions/saucelabs-legacy/action.yml\n+++ b/.github/actions/saucelabs-legacy/action.yml\n@@ -5,9 +5,9 @@ runs:\n   using: \u0027composite\u0027\n   steps:\n     - name: Setup Bazel\n-      uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+      uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n     - name: Setup Saucelabs Variables\n-      uses: angular/dev-infra/github-actions/saucelabs@74db0cd6da7fe89807133854c645ed02c9980566\n+      uses: angular/dev-infra/github-actions/saucelabs@8ce8257f740613a7291256173e2706fb2ed8aefa\n     - name: Starting Saucelabs tunnel service\n       shell: bash\n       run: ./tools/saucelabs/sauce-service.sh run \u0026\ndiff --git a/.github/workflows/adev-preview-build.yml b/.github/workflows/adev-preview-build.yml\nindex 85507172..44ece322 100644\n--- a/.github/workflows/adev-preview-build.yml\n+++ b/.github/workflows/adev-preview-build.yml\n@@ -21,17 +21,17 @@ jobs:\n       (github.event.action \u003d\u003d \u0027synchronize\u0027 \u0026\u0026 contains(github.event.pull_request.labels.*.name, \u0027adev: preview\u0027))\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Build adev\n         # `snapshot-build` config is used to stamp the exact version with sha in the footer.\n         run: pnpm bazel build //adev:build.production --config\u003dsnapshot-build\n-      - uses: angular/dev-infra/github-actions/previews/pack-and-upload-artifact@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/previews/pack-and-upload-artifact@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           workflow-artifact-name: \u0027adev-preview\u0027\n           pull-number: \u0027${{github.event.pull_request.number}}\u0027\ndiff --git a/.github/workflows/adev-preview-deploy.yml b/.github/workflows/adev-preview-deploy.yml\nindex 72203765..1b7ee8e3 100644\n--- a/.github/workflows/adev-preview-deploy.yml\n+++ b/.github/workflows/adev-preview-deploy.yml\n@@ -40,7 +40,7 @@ jobs:\n           npx -y firebase-tools@latest target:clear --config adev/firebase.json --project ${{env.PREVIEW_PROJECT}} hosting angular-docs\n           npx -y firebase-tools@latest target:apply --config adev/firebase.json --project ${{env.PREVIEW_PROJECT}} hosting angular-docs ${{env.PREVIEW_SITE}}\n \n-      - uses: angular/dev-infra/github-actions/previews/upload-artifacts-to-firebase@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/previews/upload-artifacts-to-firebase@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           github-token: \u0027${{secrets.GITHUB_TOKEN}}\u0027\n           workflow-artifact-name: \u0027adev-preview\u0027\ndiff --git a/.github/workflows/assistant-to-the-branch-manager.yml b/.github/workflows/assistant-to-the-branch-manager.yml\nindex b310fb73..60208dd0 100644\n--- a/.github/workflows/assistant-to-the-branch-manager.yml\n+++ b/.github/workflows/assistant-to-the-branch-manager.yml\n@@ -17,6 +17,6 @@ jobs:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n         with:\n           persist-credentials: false\n-      - uses: angular/dev-infra/github-actions/branch-manager@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/branch-manager@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/benchmark-compare.yml b/.github/workflows/benchmark-compare.yml\nindex ed4d6966..d1dda15a 100644\n--- a/.github/workflows/benchmark-compare.yml\n+++ b/.github/workflows/benchmark-compare.yml\n@@ -38,7 +38,7 @@ jobs:\n \n       - run: pnpm install --frozen-lockfile\n \n-      - uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           bazelrc: ./.bazelrc.user\n \ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 168335f8..f5dc4b85 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -21,7 +21,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Check code lint\n@@ -39,13 +39,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           disable-package-manager-cache: true\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -67,11 +67,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -83,11 +83,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -100,11 +100,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -119,11 +119,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -136,11 +136,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - run: echo \"https://${{secrets.SNAPSHOT_BUILDS_GITHUB_TOKEN}}:@github.com\" \u003e ${HOME}/.git_credentials\n@@ -152,11 +152,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           google_credential: ${{ secrets.RBE_TRUSTED_BUILDS_USER }}\n       - name: Install node modules\n@@ -206,11 +206,11 @@ jobs:\n     runs-on: ubuntu-latest-8core\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Build adev\ndiff --git a/.github/workflows/dev-infra.yml b/.github/workflows/dev-infra.yml\nindex b8bc229c..1e7e5cdb 100644\n--- a/.github/workflows/dev-infra.yml\n+++ b/.github/workflows/dev-infra.yml\n@@ -13,13 +13,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/pull-request-labeling@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/pull-request-labeling@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\n   post_approval_changes:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/post-approval-changes@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/post-approval-changes@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/google-internal-tests.yml b/.github/workflows/google-internal-tests.yml\nindex 6e26a891..f780dfb0 100644\n--- a/.github/workflows/google-internal-tests.yml\n+++ b/.github/workflows/google-internal-tests.yml\n@@ -14,7 +14,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1\n-      - uses: angular/dev-infra/github-actions/google-internal-tests@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/google-internal-tests@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           run-tests-guide-url: http://go/angular-g3sync-start\n           github-token: ${{ secrets.GITHUB_TOKEN }}\ndiff --git a/.github/workflows/manual.yml b/.github/workflows/manual.yml\nindex 2f41b97b..d1034060 100644\n--- a/.github/workflows/manual.yml\n+++ b/.github/workflows/manual.yml\n@@ -13,15 +13,15 @@ jobs:\n       JOBS: 2\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Saucelabs Variables\n-        uses: angular/dev-infra/github-actions/saucelabs@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/saucelabs@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Set up Sauce Tunnel Daemon\n         run: pnpm bazel run //tools/saucelabs-daemon/background-service -- $JOBS \u0026\n         env:\ndiff --git a/.github/workflows/merge-ready-status.yml b/.github/workflows/merge-ready-status.yml\nindex ed33b15a..f781cf4d 100644\n--- a/.github/workflows/merge-ready-status.yml\n+++ b/.github/workflows/merge-ready-status.yml\n@@ -9,6 +9,6 @@ jobs:\n   status:\n     runs-on: ubuntu-latest\n     steps:\n-      - uses: angular/dev-infra/github-actions/unified-status-check@74db0cd6da7fe89807133854c645ed02c9980566\n+      - uses: angular/dev-infra/github-actions/unified-status-check@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           angular-robot-key: ${{ secrets.ANGULAR_ROBOT_PRIVATE_KEY }}\ndiff --git a/.github/workflows/perf.yml b/.github/workflows/perf.yml\nindex bebccf85..45751a84 100644\n--- a/.github/workflows/perf.yml\n+++ b/.github/workflows/perf.yml\n@@ -21,7 +21,7 @@ jobs:\n       workflows: ${{ steps.workflows.outputs.workflows }}\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - id: workflows\n@@ -36,9 +36,9 @@ jobs:\n         workflow: ${{ fromJSON(needs.list.outputs.workflows) }}\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       # We utilize the google-github-actions/auth action to allow us to get an active credential using workflow\ndiff --git a/.github/workflows/pr.yml b/.github/workflows/pr.yml\nindex ceb4af17..f433f813 100644\n--- a/.github/workflows/pr.yml\n+++ b/.github/workflows/pr.yml\n@@ -19,7 +19,7 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Check code lint\n@@ -37,7 +37,7 @@ jobs:\n       - name: Check code format\n         run: pnpm ng-dev format changed --check ${{ github.event.pull_request.base.sha }}\n       - name: Check Package Licenses\n-        uses: angular/dev-infra/github-actions/linting/licenses@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/linting/licenses@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           allow-dependencies-licenses: \u0027pkg:npm/google-protobuf@\u0027\n \n@@ -45,13 +45,13 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n         with:\n           disable-package-manager-cache: true\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run unit tests\n@@ -71,11 +71,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run CI tests for framework\n@@ -95,11 +95,11 @@ jobs:\n     runs-on: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel Remote Caching\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run integration CI tests for framework\n@@ -110,11 +110,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run tests\n@@ -127,11 +127,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - name: Run tests\n@@ -142,11 +142,11 @@ jobs:\n       labels: ubuntu-latest\n     steps:\n       - name: Initialize environment\n-        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/npm/checkout-and-setup-node@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel\n-        uses: angular/dev-infra/github-actions/bazel/setup@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/setup@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Setup Bazel RBE\n-        uses: angular/dev-infra/github-actions/bazel/configure-remote@74db0cd6da7fe89807133854c645ed02c9980566\n+        uses: angular/dev-infra/github-actions/bazel/configure-remote@8ce8257f740613a7291256173e2706fb2ed8aefa\n       - name: Install node modules\n         run: pnpm install --frozen-lockfile\n       - run: |\ndiff --git a/MODULE.bazel b/MODULE.bazel\nindex 46fad448..c28f53c7 100644\n--- a/MODULE.bazel\n+++ b/MODULE.bazel\n@@ -25,7 +25,7 @@ git_override(\n bazel_dep(name \u003d \"devinfra\")\n git_override(\n     module_name \u003d \"devinfra\",\n-    commit \u003d \"74db0cd6da7fe89807133854c645ed02c9980566\",\n+    commit \u003d \"8ce8257f740613a7291256173e2706fb2ed8aefa\",\n     remote \u003d \"https://github.com/angular/dev-infra.git\",\n )\n \ndiff --git a/package.json b/package.json\nindex 50e3015d..394bba95 100644\n--- a/package.json\n+++ b/package.json\n@@ -163,7 +163,7 @@\n     \"@actions/core\": \"^2.0.0\",\n     \"@actions/github\": \"^7.0.0\",\n     \"@angular-devkit/architect-cli\": \"0.2101.0-rc.0\",\n-    \"@angular/ng-dev\": \"https://github.com/angular/dev-infra-private-ng-dev-builds.git#8538b565cd4eb980c7143590335216ebb64dd54f\",\n+    \"@angular/ng-dev\": \"https://github.com/angular/dev-infra-private-ng-dev-builds.git#486b075a283ef0c169475b981de1bd229114a000\",\n     \"@babel/plugin-proposal-async-generator-functions\": \"7.20.7\",\n     \"@babel/plugin-transform-async-generator-functions\": \"^7.27.1\",\n     \"@bazel/bazelisk\": \"^1.7.5\",\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex b092da8a..17bf3a1a 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -342,8 +342,8 @@ importers:\n         specifier: 0.2101.0-rc.0\n         version: 0.2101.0-rc.0(chokidar@5.0.0)\n       \u0027@angular/ng-dev\u0027:\n-        specifier: https://github.com/angular/dev-infra-private-ng-dev-builds.git#8538b565cd4eb980c7143590335216ebb64dd54f\n-        version: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/8538b565cd4eb980c7143590335216ebb64dd54f(@modelcontextprotocol/sdk@1.25.2)\n+        specifier: https://github.com/angular/dev-infra-private-ng-dev-builds.git#486b075a283ef0c169475b981de1bd229114a000\n+        version: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/486b075a283ef0c169475b981de1bd229114a000(@modelcontextprotocol/sdk@1.25.2)\n       \u0027@babel/plugin-proposal-async-generator-functions\u0027:\n         specifier: 7.20.7\n         version: 7.20.7(@babel/core@7.28.5)\n@@ -1698,9 +1698,9 @@ packages:\n       \u0027@angular/platform-browser\u0027: ^21.0.0-0 || ^21.1.0-0 || ^21.2.0-0 || ^21.3.0-0 || ^22.0.0-0\n       rxjs: ^6.5.3 || ^7.4.0\n \n-  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/8538b565cd4eb980c7143590335216ebb64dd54f\u0027:\n-    resolution: {tarball: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/8538b565cd4eb980c7143590335216ebb64dd54f}\n-    version: 0.0.0-74db0cd6da7fe89807133854c645ed02c9980566\n+  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/486b075a283ef0c169475b981de1bd229114a000\u0027:\n+    resolution: {tarball: https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/486b075a283ef0c169475b981de1bd229114a000}\n+    version: 0.0.0-8ce8257f740613a7291256173e2706fb2ed8aefa\n     hasBin: true\n \n   \u0027@angular/ssr@21.1.0-rc.0\u0027:\n@@ -13943,7 +13943,7 @@ snapshots:\n       rxjs: 7.8.2\n       tslib: 2.8.1\n \n-  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/8538b565cd4eb980c7143590335216ebb64dd54f(@modelcontextprotocol/sdk@1.25.2)\u0027:\n+  \u0027@angular/ng-dev@https://codeload.github.com/angular/dev-infra-private-ng-dev-builds/tar.gz/486b075a283ef0c169475b981de1bd229114a000(@modelcontextprotocol/sdk@1.25.2)\u0027:\n     dependencies:\n       \u0027@actions/core\u0027: 2.0.1\n       \u0027@google-cloud/spanner\u0027: 8.0.0(supports-color@10.2.2)","expectedMessage":"build: update cross-repo angular dependencies","repository":"angular","commitHash":"4a76058bafb4df7376e074073fe5ad05f48e5033","metadata":{}}
{"id":"angular-4d983e99","diff":" adev/package.json                                   |  2 +-\n .../src/app/editor/terminal/interactive-terminal.ts | 15 +++++++++++++--\n .../app/editor/terminal/terminal-handler.service.ts | 21 ++++++++++++++++-----\n pnpm-lock.yaml                                      | 10 +++++-----\n 4 files changed, 35 insertions(+), 13 deletions(-)\n\ndiff --git a/adev/package.json b/adev/package.json\nindex 6d977a33..39788126 100644\n--- a/adev/package.json\n+++ b/adev/package.json\n@@ -48,7 +48,7 @@\n     \"@typescript/vfs\": \"1.6.2\",\n     \"@webcontainer/api\": \"1.6.1\",\n     \"@xterm/addon-fit\": \"0.11.0\",\n-    \"@xterm/xterm\": \"5.5.0\",\n+    \"@xterm/xterm\": \"6.0.0\",\n     \"algoliasearch\": \"5.46.2\",\n     \"angular-split\": \"20.0.0\",\n     \"crelt\": \"1.0.6\",\ndiff --git a/adev/src/app/editor/terminal/interactive-terminal.ts b/adev/src/app/editor/terminal/interactive-terminal.ts\nindex 33ed288c..cc95de50 100644\n--- a/adev/src/app/editor/terminal/interactive-terminal.ts\n+++ b/adev/src/app/editor/terminal/interactive-terminal.ts\n@@ -7,7 +7,7 @@\n  */\n \n import {Subject} from \u0027rxjs\u0027;\n-import {Terminal} from \u0027@xterm/xterm\u0027;\n+import {Terminal, ITerminalOptions, ITerminalInitOnlyOptions} from \u0027@xterm/xterm\u0027;\n \n import {CommandValidator} from \u0027./command-validator.service\u0027;\n \n@@ -21,6 +21,16 @@ export const ALLOWED_KEYS: Array\u003cKeyboardEvent[\u0027key\u0027]\u003e \u003d [\n   \u0027ArrowDown\u0027,\n ];\n \n+/** Set of defaults to use for all terminal instances in adev. */\n+export const adevTerminalDefaultOptions: ITerminalOptions \u003d {\n+  convertEol: true,\n+  theme: {\n+    background: \u0027#00000000\u0027,\n+  },\n+  fontFamily: \u0027courier-new, courier, monospace\u0027,\n+  fontSize: 15,\n+};\n+\n export class InteractiveTerminal extends Terminal {\n   private readonly breakProcess \u003d new Subject\u003cvoid\u003e();\n \n@@ -28,10 +38,11 @@ export class InteractiveTerminal extends Terminal {\n   breakProcess$ \u003d this.breakProcess.asObservable();\n \n   constructor(\n+    options: ITerminalOptions \u0026 ITerminalInitOnlyOptions,\n     readonly window: Window,\n     readonly commandValidator: CommandValidator,\n   ) {\n-    super({convertEol: true, disableStdin: false});\n+    super(options);\n \n     // bypass command validation if sudo\u003dtrue is present in the query string\n     if (!this.window.location.search.includes(\u0027sudo\u003dtrue\u0027)) {\ndiff --git a/adev/src/app/editor/terminal/terminal-handler.service.ts b/adev/src/app/editor/terminal/terminal-handler.service.ts\nindex 2ae13380..9bdb8dac 100644\n--- a/adev/src/app/editor/terminal/terminal-handler.service.ts\n+++ b/adev/src/app/editor/terminal/terminal-handler.service.ts\n@@ -9,7 +9,7 @@\n import {computed, inject, Injectable, signal, Signal, untracked} from \u0027@angular/core\u0027;\n import {Terminal} from \u0027@xterm/xterm\u0027;\n import {FitAddon} from \u0027@xterm/addon-fit\u0027;\n-import {InteractiveTerminal} from \u0027./interactive-terminal\u0027;\n+import {InteractiveTerminal, adevTerminalDefaultOptions} from \u0027./interactive-terminal\u0027;\n import {WINDOW} from \u0027@angular/docs\u0027;\n import {CommandValidator} from \u0027./command-validator.service\u0027;\n \n@@ -28,11 +28,18 @@ export class TerminalHandler {\n     // Because colors are parsed\n     // See https://github.com/xtermjs/xterm.js/blob/854e2736f66ca3e5d3ab5a7b65bf3fd6fba8b707/src/browser/services/ThemeService.ts#L125\n     [TerminalType.READONLY]: signal({\n-      instance: new Terminal({convertEol: true, disableStdin: true}),\n+      instance: new Terminal({\n+        ...adevTerminalDefaultOptions,\n+        disableStdin: true,\n+      }),\n       fitAddon: new FitAddon(),\n     }),\n     [TerminalType.INTERACTIVE]: signal({\n-      instance: new InteractiveTerminal(this.window, this.commandValidator),\n+      instance: new InteractiveTerminal(\n+        adevTerminalDefaultOptions,\n+        this.window,\n+        this.commandValidator,\n+      ),\n       fitAddon: new FitAddon(),\n     }),\n   };\n@@ -59,10 +66,14 @@ export class TerminalHandler {\n       instance.dispose();\n       fitAddon \u003d new FitAddon();\n       if (type \u003d\u003d\u003d TerminalType.READONLY) {\n-        instance \u003d new Terminal({convertEol: true, disableStdin: true});\n+        instance \u003d new Terminal({...adevTerminalDefaultOptions, disableStdin: true});\n         this.terminals[type].set({instance, fitAddon});\n       } else {\n-        const newInstance \u003d new InteractiveTerminal(this.window, this.commandValidator);\n+        const newInstance \u003d new InteractiveTerminal(\n+          adevTerminalDefaultOptions,\n+          this.window,\n+          this.commandValidator,\n+        );\n         instance \u003d newInstance;\n         this.terminals[type].set({instance: newInstance, fitAddon});\n       }\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex 9aa0bc63..b092da8a 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -609,8 +609,8 @@ importers:\n         specifier: 0.11.0\n         version: 0.11.0\n       \u0027@xterm/xterm\u0027:\n-        specifier: 5.5.0\n-        version: 5.5.0\n+        specifier: 6.0.0\n+        version: 6.0.0\n       algoliasearch:\n         specifier: 5.46.2\n         version: 5.46.2\n@@ -5770,8 +5770,8 @@ packages:\n   \u0027@xterm/addon-fit@0.11.0\u0027:\n     resolution: {integrity: sha512-jYcgT6xtVYhnhgxh3QgYDnnNMYTcf8ElbxxFzX0IZo+vabQqSPAjC3c1wJrKB5E19VwQei89QCiZZP86DCPF7g\u003d\u003d}\n \n-  \u0027@xterm/xterm@5.5.0\u0027:\n-    resolution: {integrity: sha512-hqJHYaQb5OptNunnyAnkHyM8aCjZ1MEIDTQu1iIbbTD/xops91NB5yq1ZK/dC2JDbVWtF23zUtl9JE2NqwT87A\u003d\u003d}\n+  \u0027@xterm/xterm@6.0.0\u0027:\n+    resolution: {integrity: sha512-TQwDdQGtwwDt+2cgKDLn0IRaSxYu1tSUjgKarSDkUM0ZNiSRXFpjxEsvc/Zgc5kq5omJ+V0a8/kIM2WD3sMOYg\u003d\u003d}\n \n   \u0027@xtuc/ieee754@1.2.0\u0027:\n     resolution: {integrity: sha512-DX8nKgqcGwsc0eJSqYt5lwP4DH5FlHnmuWWBRy7X0NcaGR0ZtuyeESgMwTYVEtxmsNGY+qit4QYT/MIYTOTPeA\u003d\u003d}\n@@ -18723,7 +18723,7 @@ snapshots:\n \n   \u0027@xterm/addon-fit@0.11.0\u0027: {}\n \n-  \u0027@xterm/xterm@5.5.0\u0027: {}\n+  \u0027@xterm/xterm@6.0.0\u0027: {}\n \n   \u0027@xtuc/ieee754@1.2.0\u0027: {}\n ","expectedMessage":"build(docs-infra): Update dependency @xterm/xterm to v6","repository":"angular","commitHash":"4d983e9904d16a209ce2c97156636d67752a3b89","metadata":{}}
{"id":"angular-c63bc58e","diff":" adev/src/content/guide/components/queries.md | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/adev/src/content/guide/components/queries.md b/adev/src/content/guide/components/queries.md\nindex eb0ac018..badbc171 100644\n--- a/adev/src/content/guide/components/queries.md\n+++ b/adev/src/content/guide/components/queries.md\n@@ -107,7 +107,7 @@ By default, content queries find only _direct_ children of the component and do\n \n You can also query for multiple results with the `contentChildren` function.\n \n-```angular-ts {highlight: [14, 16, 17, 18, 19, 20]}\n+```angular-ts {highlight: [15, 16]}\n @Component({\n   selector: \u0027custom-menu-item\u0027,\n   /*...*/","expectedMessage":"docs: correct line number highlighting in query examples","repository":"angular","commitHash":"c63bc58e0f1828a0133460cfd05cfdb97252db57","metadata":{}}
{"id":"angular-e38c1bf7","diff":" packages/common/http/src/xsrf.ts | 1 -\n 1 file changed, 1 deletion(-)\n\ndiff --git a/packages/common/http/src/xsrf.ts b/packages/common/http/src/xsrf.ts\nindex f6e485e4..c893474d 100644\n--- a/packages/common/http/src/xsrf.ts\n+++ b/packages/common/http/src/xsrf.ts\n@@ -41,7 +41,6 @@ export const XSRF_DEFAULT_HEADER_NAME \u003d \u0027X-XSRF-TOKEN\u0027;\n export const XSRF_HEADER_NAME \u003d new InjectionToken\u003cstring\u003e(\n   typeof ngDevMode !\u003d\u003d \u0027undefined\u0027 \u0026\u0026 ngDevMode ? \u0027XSRF_HEADER_NAME\u0027 : \u0027\u0027,\n   {\n-    providedIn: \u0027root\u0027,\n     factory: () \u003d\u003e XSRF_DEFAULT_HEADER_NAME,\n   },\n );","expectedMessage":"refactor(http): remove redundant providedIn: \u0027root\u0027 in XSRF_HEADER_NAME","repository":"angular","commitHash":"e38c1bf743be5f9dfa3cc4dc8e7dc87437cc821a","metadata":{}}
{"id":"angular-fa6e82b5","diff":" packages/core/src/change_detection/scheduling/ng_zone_scheduling.ts    | 3 ++-\n .../core/src/change_detection/scheduling/zoneless_scheduling_impl.ts   | 3 ++-\n 2 files changed, 4 insertions(+), 2 deletions(-)\n\ndiff --git a/packages/core/src/change_detection/scheduling/ng_zone_scheduling.ts b/packages/core/src/change_detection/scheduling/ng_zone_scheduling.ts\nindex 8a3c365a..f714e5fb 100644\n--- a/packages/core/src/change_detection/scheduling/ng_zone_scheduling.ts\n+++ b/packages/core/src/change_detection/scheduling/ng_zone_scheduling.ts\n@@ -31,9 +31,10 @@ import {\n } from \u0027./zoneless_scheduling\u0027;\n import {SCHEDULE_IN_ROOT_ZONE_DEFAULT} from \u0027./flags\u0027;\n import {INTERNAL_APPLICATION_ERROR_HANDLER} from \u0027../../error_handler\u0027;\n+import {OnDestroy} from \u0027../lifecycle_hooks\u0027;\n \n @Injectable({providedIn: \u0027root\u0027})\n-export class NgZoneChangeDetectionScheduler {\n+export class NgZoneChangeDetectionScheduler implements OnDestroy {\n   private readonly zone \u003d inject(NgZone);\n   private readonly changeDetectionScheduler \u003d inject(ChangeDetectionScheduler);\n   private readonly applicationRef \u003d inject(ApplicationRef);\ndiff --git a/packages/core/src/change_detection/scheduling/zoneless_scheduling_impl.ts b/packages/core/src/change_detection/scheduling/zoneless_scheduling_impl.ts\nindex dcc0de84..2c44a2cd 100644\n--- a/packages/core/src/change_detection/scheduling/zoneless_scheduling_impl.ts\n+++ b/packages/core/src/change_detection/scheduling/zoneless_scheduling_impl.ts\n@@ -31,6 +31,7 @@ import {\n } from \u0027./zoneless_scheduling\u0027;\n import {TracingService} from \u0027../../application/tracing\u0027;\n import {INTERNAL_APPLICATION_ERROR_HANDLER} from \u0027../../error_handler\u0027;\n+import {OnDestroy} from \u0027../lifecycle_hooks\u0027;\n \n const CONSECUTIVE_MICROTASK_NOTIFICATION_LIMIT \u003d 100;\n let consecutiveMicrotaskNotifications \u003d 0;\n@@ -56,7 +57,7 @@ function trackMicrotaskNotificationForDebugging() {\n }\n \n @Injectable({providedIn: \u0027root\u0027})\n-export class ChangeDetectionSchedulerImpl implements ChangeDetectionScheduler {\n+export class ChangeDetectionSchedulerImpl implements ChangeDetectionScheduler, OnDestroy {\n   private readonly applicationErrorHandler \u003d inject(INTERNAL_APPLICATION_ERROR_HANDLER);\n   private readonly appRef \u003d inject(ApplicationRef);\n   private readonly taskService \u003d inject(PendingTasksInternal);","expectedMessage":"refactor(core): Add missing OnDestroy to zone and zoneless change detection schedulers","repository":"angular","commitHash":"fa6e82b569b99a4d9ecfcea0f008a0333d330f32","metadata":{}}
{"id":"angular-10e9022a","diff":" goldens/public-api/forms/signals/index.api.md      |   2 +\n packages/core/src/core_render3_private_export.ts   | 211 +++++++++++----------\n packages/core/src/render3/instructions/control.ts  | 132 ++++++++-----\n packages/core/src/render3/interfaces/control.ts    |  22 ++-\n .../forms/signals/src/api/form_field_directive.ts  |  13 +-\n packages/forms/signals/src/api/types.ts            |   6 +\n packages/forms/signals/src/field/node.ts           |  36 ++++\n packages/forms/signals/src/field/structure.ts      |   4 +-\n packages/forms/signals/test/web/focus.spec.ts      | 191 +++++++++++++++++++\n 9 files changed, 452 insertions(+), 165 deletions(-)\n\ndiff --git a/goldens/public-api/forms/signals/index.api.md b/goldens/public-api/forms/signals/index.api.md\nindex 90abf82e..617de19f 100644\n--- a/goldens/public-api/forms/signals/index.api.md\n+++ b/goldens/public-api/forms/signals/index.api.md\n@@ -130,6 +130,7 @@ export interface FieldState\u003cTValue, TKey extends string | number \u003d string | numb\n     // (undocumented)\n     readonly errors: Signal\u003cValidationError.WithField[]\u003e;\n     readonly errorSummary: Signal\u003cValidationError.WithField[]\u003e;\n+    focusBoundControl(): void;\n     readonly formFieldBindings: Signal\u003creadonly FormField\u003cunknown\u003e[]\u003e;\n     readonly hidden: Signal\u003cboolean\u003e;\n     readonly invalid: Signal\u003cboolean\u003e;\n@@ -174,6 +175,7 @@ export class FormField\u003cT\u003e {\n     };\n     // (undocumented)\n     readonly element: HTMLElement;\n+    focus?(): void;\n     // (undocumented)\n     readonly formField: i0.InputSignal\u003cFieldTree\u003cT\u003e\u003e;\n     protected getOrCreateNgControl(): InteropNgControl;\ndiff --git a/packages/core/src/core_render3_private_export.ts b/packages/core/src/core_render3_private_export.ts\nindex d5a77d6f..19cc4dd7 100644\n--- a/packages/core/src/core_render3_private_export.ts\n+++ b/packages/core/src/core_render3_private_export.ts\n@@ -10,26 +10,33 @@\n // performed by rollup while it\u0027s creating fesm files.\n //\n // no code actually imports these symbols from the @angular/core entry point\n-export {isBoundToModule as isBoundToModule} from \u0027./application/application_ref\u0027;\n+export {\n+  Framework as Framework,\n+  Profiler as Profiler,\n+  ProfilerEvent as ProfilerEvent,\n+} from \u0027../primitives/devtools\u0027;\n export {compileNgModuleFactory as compileNgModuleFactory} from \u0027./application/application_ngmodule_factory_compiler\u0027;\n+export {isBoundToModule as isBoundToModule} from \u0027./application/application_ref\u0027;\n export {injectChangeDetectorRef as injectChangeDetectorRef} from \u0027./change_detection/change_detector_ref\u0027;\n export {getDebugNode as getDebugNode} from \u0027./debug/debug_node\u0027;\n+export {createInjector as createInjector} from \u0027./di/create_injector\u0027;\n export {\n+  isInjectable as isInjectable,\n   NG_INJ_DEF as NG_INJ_DEF,\n   NG_PROV_DEF as NG_PROV_DEF,\n-  isInjectable as isInjectable,\n } from \u0027./di/interface/defs\u0027;\n-export {createInjector as createInjector} from \u0027./di/create_injector\u0027;\n export {\n-  registerNgModuleType as registerNgModuleType,\n   setAllowDuplicateNgModuleIdsForTest as setAllowDuplicateNgModuleIdsForTest,\n+  registerNgModuleType as registerNgModuleType,\n } from \u0027./linker/ng_module_registration\u0027;\n export {\n   NgModuleDef as NgModuleDef,\n   NgModuleTransitiveScopes as NgModuleTransitiveScopes,\n } from \u0027./metadata/ng_module_def\u0027;\n-export {getLContext as getLContext} from \u0027./render3/context_discovery\u0027;\n+export {AfterRenderManager as AfterRenderManager} from \u0027./render3/after_render/manager\u0027;\n export {inferTagNameFromDefinition as inferTagNameFromDefinition} from \u0027./render3/component_ref\u0027;\n+export {getLContext as getLContext} from \u0027./render3/context_discovery\u0027;\n+export {depsTracker as depsTracker} from \u0027./render3/deps_tracker/deps_tracker\u0027;\n export {\n   NG_COMP_DEF as NG_COMP_DEF,\n   NG_DIR_DEF as NG_DIR_DEF,\n@@ -38,64 +45,89 @@ export {\n   NG_PIPE_DEF as NG_PIPE_DEF,\n } from \u0027./render3/fields\u0027;\n export {\n+  AcxChangeDetectionStrategy as AcxChangeDetectionStrategy,\n+  AcxComponentDebugMetadata as AcxComponentDebugMetadata,\n+  AcxDirectiveDebugMetadata as AcxDirectiveDebugMetadata,\n+  AcxViewEncapsulation as AcxViewEncapsulation,\n+  AngularComponentDebugMetadata as AngularComponentDebugMetadata,\n+  AngularDirectiveDebugMetadata as AngularDirectiveDebugMetadata,\n   AttributeMarker as AttributeMarker,\n+  BaseDirectiveDebugMetadata as BaseDirectiveDebugMetadata,\n   ComponentDef as ComponentDef,\n-  ComponentFactory as Render3ComponentFactory,\n-  ComponentRef as Render3ComponentRef,\n   ComponentType as ComponentType,\n+  controlUpdate,\n   CssSelectorList as CssSelectorList,\n+  DEFER_BLOCK_CONFIG,\n+  DEFER_BLOCK_DEPENDENCY_INTERCEPTOR,\n+  DeferBlockDependencyInterceptor,\n+  DirectiveDebugMetadata as DirectiveDebugMetadata,\n   DirectiveDef as DirectiveDef,\n   DirectiveType as DirectiveType,\n   getDirectives as getDirectives,\n   getHostElement as getHostElement,\n+  getUnknownElementStrictMode,\n+  getUnknownPropertyStrictMode,\n   NgModuleFactory as NgModuleFactory,\n-  NgModuleRef as Render3NgModuleRef,\n   NgModuleType as NgModuleType,\n   NO_CHANGE as NO_CHANGE,\n   PipeDef as PipeDef,\n+  ComponentFactory as Render3ComponentFactory,\n+  ComponentRef as Render3ComponentRef,\n+  NgModuleRef as Render3NgModuleRef,\n   RenderFlags as RenderFlags,\n+  setClassDebugInfo,\n   setClassMetadata as setClassMetadata,\n   setClassMetadataAsync as setClassMetadataAsync,\n-  setClassDebugInfo,\n   setLocaleId as setLocaleId,\n+  setUnknownElementStrictMode,\n+  setUnknownPropertyStrictMode,\n   store as store,\n-  DeferBlockDependencyInterceptor,\n-  DEFER_BLOCK_DEPENDENCY_INTERCEPTOR,\n-  DEFER_BLOCK_CONFIG,\n-  BaseDirectiveDebugMetadata as BaseDirectiveDebugMetadata,\n-  AngularDirectiveDebugMetadata as AngularDirectiveDebugMetadata,\n-  AngularComponentDebugMetadata as AngularComponentDebugMetadata,\n-  AcxChangeDetectionStrategy as AcxChangeDetectionStrategy,\n-  AcxViewEncapsulation as AcxViewEncapsulation,\n-  AcxDirectiveDebugMetadata as AcxDirectiveDebugMetadata,\n-  AcxComponentDebugMetadata as AcxComponentDebugMetadata,\n   WizComponentDebugMetadata as WizComponentDebugMetadata,\n-  DirectiveDebugMetadata as DirectiveDebugMetadata,\n   advance,\n+  animateEnter,\n+  animateEnterListener,\n+  animateLeave,\n+  animateLeaveListener,\n   ariaProperty,\n+  arrowFunction,\n+  attachSourceLocations,\n   attribute,\n-  interpolate,\n-  interpolate1,\n-  interpolate2,\n-  interpolate3,\n-  interpolate4,\n-  interpolate5,\n-  interpolate6,\n-  interpolate7,\n-  interpolate8,\n-  interpolateV,\n   classMap,\n   classProp,\n   ComponentDeclaration,\n+  componentInstance,\n   conditional,\n-  conditionalCreate,\n   conditionalBranchCreate,\n+  conditionalCreate,\n   contentQuery,\n   contentQuerySignal,\n   control,\n   controlCreate,\n-  controlUpdate,\n-  componentInstance,\n+  declareLet,\n+  defer,\n+  deferEnableTimerScheduling,\n+  deferHydrateNever,\n+  deferHydrateOnHover,\n+  deferHydrateOnIdle,\n+  deferHydrateOnImmediate,\n+  deferHydrateOnInteraction,\n+  deferHydrateOnTimer,\n+  deferHydrateOnViewport,\n+  deferHydrateWhen,\n+  deferOnHover,\n+  deferOnIdle,\n+  deferOnImmediate,\n+  deferOnInteraction,\n+  deferOnTimer,\n+  deferOnViewport,\n+  deferPrefetchOnHover,\n+  deferPrefetchOnIdle,\n+  deferPrefetchOnImmediate,\n+  deferPrefetchOnInteraction,\n+  deferPrefetchOnTimer,\n+  deferPrefetchOnViewport,\n+  deferPrefetchWhen,\n+  deferWhen,\n   defineComponent,\n   defineDirective,\n   defineNgModule,\n@@ -103,25 +135,29 @@ export {\n   DirectiveDeclaration,\n   directiveInject,\n   disableBindings,\n+  domElement,\n+  domElementContainer,\n+  domElementContainerEnd,\n+  domElementContainerStart,\n+  domElementEnd,\n+  domElementStart,\n+  domListener,\n+  domProperty,\n+  domTemplate,\n   element,\n   elementContainer,\n   elementContainerEnd,\n   elementContainerStart,\n   elementEnd,\n   elementStart,\n-  domElement,\n-  domElementStart,\n-  domElementEnd,\n-  domElementContainer,\n-  domElementContainerStart,\n-  domElementContainerEnd,\n-  domTemplate,\n-  domListener,\n   enableBindings,\n+  ExternalStylesFeature,\n   FactoryDeclaration,\n+  getComponentDepsFactory,\n   getCurrentView,\n   getInheritedFactory,\n-  domProperty,\n+  getReplaceMetadataURL,\n+  HostDirectivesFeature,\n   i18n,\n   i18nApply,\n   i18nAttributes,\n@@ -132,6 +168,16 @@ export {\n   InheritDefinitionFeature,\n   injectAttribute,\n   InjectorDeclaration,\n+  interpolate,\n+  interpolate1,\n+  interpolate2,\n+  interpolate3,\n+  interpolate4,\n+  interpolate5,\n+  interpolate6,\n+  interpolate7,\n+  interpolate8,\n+  interpolateV,\n   invalidFactory,\n   listener,\n   loadQuery,\n@@ -152,7 +198,6 @@ export {\n   projectionDef,\n   property,\n   ProvidersFeature,\n-  HostDirectivesFeature,\n   pureFunction0,\n   pureFunction1,\n   pureFunction2,\n@@ -165,50 +210,27 @@ export {\n   pureFunctionV,\n   queryAdvance,\n   queryRefresh,\n+  readContextLet,\n   reference,\n+  repeater,\n+  repeaterCreate,\n+  repeaterTrackByIdentity,\n+  repeaterTrackByIndex,\n+  replaceMetadata,\n   resetView,\n   resolveBody,\n   resolveDocument,\n   resolveWindow,\n   restoreView,\n-  repeater,\n-  repeaterCreate,\n-  repeaterTrackByIdentity,\n-  repeaterTrackByIndex,\n   setComponentScope,\n   setNgModuleScope,\n-  getComponentDepsFactory,\n-  ExternalStylesFeature,\n+  storeLet,\n   styleMap,\n   styleProp,\n   syntheticHostListener,\n   syntheticHostProperty,\n   template,\n   templateRefExtractor,\n-  defer,\n-  deferWhen,\n-  deferOnIdle,\n-  deferOnImmediate,\n-  deferOnTimer,\n-  deferOnHover,\n-  deferOnInteraction,\n-  deferOnViewport,\n-  deferPrefetchWhen,\n-  deferPrefetchOnIdle,\n-  deferPrefetchOnImmediate,\n-  deferPrefetchOnTimer,\n-  deferPrefetchOnHover,\n-  deferPrefetchOnInteraction,\n-  deferPrefetchOnViewport,\n-  deferEnableTimerScheduling,\n-  deferHydrateWhen,\n-  deferHydrateNever,\n-  deferHydrateOnIdle,\n-  deferHydrateOnImmediate,\n-  deferHydrateOnTimer,\n-  deferHydrateOnHover,\n-  deferHydrateOnInteraction,\n-  deferHydrateOnViewport,\n   text,\n   textInterpolate,\n   textInterpolate1,\n@@ -220,30 +242,20 @@ export {\n   textInterpolate7,\n   textInterpolate8,\n   textInterpolateV,\n-  viewQuery,\n-  viewQuerySignal,\n-  twoWayProperty,\n   twoWayBindingSet,\n   twoWayListener,\n-  getUnknownElementStrictMode,\n-  setUnknownElementStrictMode,\n-  getUnknownPropertyStrictMode,\n-  setUnknownPropertyStrictMode,\n-  declareLet,\n-  storeLet,\n-  readContextLet,\n-  replaceMetadata,\n-  getReplaceMetadataURL,\n-  attachSourceLocations,\n-  animateEnter,\n-  animateEnterListener,\n-  animateLeave,\n-  animateLeaveListener,\n-  arrowFunction,\n+  twoWayProperty,\n+  viewQuery,\n+  viewQuerySignal,\n } from \u0027./render3/index\u0027;\n export {CONTAINER_HEADER_OFFSET as CONTAINER_HEADER_OFFSET} from \u0027./render3/interfaces/container\u0027;\n export {LContext as LContext} from \u0027./render3/interfaces/context\u0027;\n-export {CONTROL, Control, FieldState, InteropControl} from \u0027./render3/interfaces/control\u0027;\n+export {\n+  CONTROL,\n+  FieldState,\n+  FormFieldDirective,\n+  InteropControl,\n+} from \u0027./render3/interfaces/control\u0027;\n export {setDocument as setDocument} from \u0027./render3/interfaces/document\u0027;\n export {\n   compileComponent as compileComponent,\n@@ -254,6 +266,7 @@ export {\n   compileNgModule as compileNgModule,\n   compileNgModuleDefs as compileNgModuleDefs,\n   flushModuleScopingQueueAsMuchAsPossible as flushModuleScopingQueueAsMuchAsPossible,\n+  generateStandaloneInDeclarationsError as generateStandaloneInDeclarationsError,\n   patchComponentDefWithScope as patchComponentDefWithScope,\n   resetCompiledComponents as resetCompiledComponents,\n   transitiveScopesFor as transitiveScopesFor,\n@@ -272,20 +285,17 @@ export {\n } from \u0027./render3/jit/partial\u0027;\n export {compilePipe as compilePipe} from \u0027./render3/jit/pipe\u0027;\n export {isNgModule as isNgModule} from \u0027./render3/jit/util\u0027;\n-export {\n-  Profiler as Profiler,\n-  ProfilerEvent as ProfilerEvent,\n-  Framework as Framework,\n-} from \u0027../primitives/devtools\u0027;\n+export {getAsyncClassMetadataFn as getAsyncClassMetadataFn} from \u0027./render3/metadata\u0027;\n+export {DeferBlockData as DeferBlockData} from \u0027./render3/util/defer\u0027;\n export {\n   FrameworkAgnosticGlobalUtils as FrameworkAgnosticGlobalUtils,\n   GlobalDevModeUtils as GlobalDevModeUtils,\n } from \u0027./render3/util/global_utils\u0027;\n export {getTransferState as getTransferState} from \u0027./render3/util/transfer_state_utils\u0027;\n export {\n-  ViewRef as ViewRef,\n   isViewDirty as isViewDirty,\n   markForRefresh as markForRefresh,\n+  ViewRef as ViewRef,\n } from \u0027./render3/view_ref\u0027;\n export {\n   bypassSanitizationTrustHtml as bypassSanitizationTrustHtml,\n@@ -306,8 +316,3 @@ export {\n   validateAttribute,\n } from \u0027./sanitization/sanitization\u0027;\n export {noSideEffects as noSideEffects} from \u0027./util/closure\u0027;\n-export {AfterRenderManager as AfterRenderManager} from \u0027./render3/after_render/manager\u0027;\n-export {depsTracker as depsTracker} from \u0027./render3/deps_tracker/deps_tracker\u0027;\n-export {generateStandaloneInDeclarationsError as generateStandaloneInDeclarationsError} from \u0027./render3/jit/module\u0027;\n-export {getAsyncClassMetadataFn as getAsyncClassMetadataFn} from \u0027./render3/metadata\u0027;\n-export {DeferBlockData as DeferBlockData} from \u0027./render3/util/defer\u0027;\ndiff --git a/packages/core/src/render3/instructions/control.ts b/packages/core/src/render3/instructions/control.ts\nindex 9bdbc808..e73e3ce3 100644\n--- a/packages/core/src/render3/instructions/control.ts\n+++ b/packages/core/src/render3/instructions/control.ts\n@@ -10,7 +10,12 @@ import {performanceMarkFeature} from \u0027../../util/performance\u0027;\n import {getClosureSafeProperty} from \u0027../../util/property\u0027;\n import {assertFirstCreatePass} from \u0027../assert\u0027;\n import {bindingUpdated} from \u0027../bindings\u0027;\n-import {CONTROL, Control, FieldState} from \u0027../interfaces/control\u0027;\n+import {\n+  CONTROL,\n+  FieldState,\n+  FormFieldDirective,\n+  type CustomControl,\n+} from \u0027../interfaces/control\u0027;\n import {DirectiveDef} from \u0027../interfaces/definition\u0027;\n import {TElementNode, TNode, TNodeFlags, TNodeType} from \u0027../interfaces/node\u0027;\n import {Renderer} from \u0027../interfaces/renderer\u0027;\n@@ -37,11 +42,11 @@ import {setPropertyAndInputs, storePropertyBindingMetadata} from \u0027./shared\u0027;\n import {writeToDirectiveInput} from \u0027./write_to_directive_input\u0027;\n \n /**\n- * Possibly sets up a {@link Control} to manage a native or custom form control.\n+ * Possibly sets up a {@link FormFieldDirective} to manage a native or custom form control.\n  *\n- * Setup occurs if a `field` input is bound to a {@link Control} directive on the current node,\n+ * Setup occurs if a `field` input is bound to a {@link FormFieldDirective} on the current node,\n  * but not to a component. If a `field` input is bound to a component, we assume the component\n- * will manage the control in its own template.\n+ * will manage the field in its own template.\n  *\n  * @codeGenApi\n  */\n@@ -54,24 +59,24 @@ export function controlCreate(): void {\n     initializeControlFirstCreatePass(tView, tNode, lView);\n   }\n \n-  const control \u003d getControlDirective(tNode, lView);\n-  if (!control) {\n+  const fieldDirective \u003d getFieldDirective(tNode, lView);\n+  if (!fieldDirective) {\n     return;\n   }\n \n   performanceMarkFeature(\u0027NgSignalForms\u0027);\n \n   if (tNode.flags \u0026 TNodeFlags.isFormValueControl) {\n-    listenToCustomControl(lView, tNode, control, \u0027value\u0027);\n+    initializeCustomControl(lView, tNode, fieldDirective, \u0027value\u0027);\n   } else if (tNode.flags \u0026 TNodeFlags.isFormCheckboxControl) {\n-    listenToCustomControl(lView, tNode, control, \u0027checked\u0027);\n+    initializeCustomControl(lView, tNode, fieldDirective, \u0027checked\u0027);\n   } else if (tNode.flags \u0026 TNodeFlags.isInteropControl) {\n-    listenToInteropControl(control);\n-  } else {\n-    listenToNativeControl(lView, tNode, control);\n+    initializeInteropControl(fieldDirective);\n+  } else if (tNode.flags \u0026 TNodeFlags.isNativeControl) {\n+    initializeNativeControl(lView, tNode, fieldDirective);\n   }\n \n-  control.register();\n+  fieldDirective.register();\n }\n \n /**\n@@ -121,18 +126,18 @@ export function controlUpdate(): void {\n  * @param tNode The `TNode` of the control.\n  */\n function updateControl\u003cT\u003e(lView: LView, tNode: TNode): void {\n-  const control \u003d getControlDirective(tNode, lView);\n-  if (control) {\n-    updateControlClasses(lView, tNode, control);\n+  const fieldDirective \u003d getFieldDirective(tNode, lView);\n+  if (fieldDirective) {\n+    updateControlClasses(lView, tNode, fieldDirective);\n \n     if (tNode.flags \u0026 TNodeFlags.isFormValueControl) {\n-      updateCustomControl(tNode, lView, control, \u0027value\u0027);\n+      updateCustomControl(tNode, lView, fieldDirective, \u0027value\u0027);\n     } else if (tNode.flags \u0026 TNodeFlags.isFormCheckboxControl) {\n-      updateCustomControl(tNode, lView, control, \u0027checked\u0027);\n+      updateCustomControl(tNode, lView, fieldDirective, \u0027checked\u0027);\n     } else if (tNode.flags \u0026 TNodeFlags.isInteropControl) {\n-      updateInteropControl(tNode, lView, control);\n+      updateInteropControl(tNode, lView, fieldDirective);\n     } else {\n-      updateNativeControl(tNode, lView, control);\n+      updateNativeControl(tNode, lView, fieldDirective);\n     }\n   }\n \n@@ -217,7 +222,7 @@ function describeElement(tView: TView, tNode: TNode): string {\n  * @returns `true` if an interop control is found, `false` otherwise.\n  */\n function isInteropControlFirstCreatePass(tNode: TNode, lView: LView): boolean {\n-  const control \u003d lView[tNode.fieldIndex] as Control\u003cunknown\u003e;\n+  const control \u003d lView[tNode.fieldIndex] as FormFieldDirective\u003cunknown\u003e;\n   if (control.interopControl) {\n     tNode.flags |\u003d TNodeFlags.isInteropControl;\n     return true;\n@@ -278,7 +283,7 @@ function isNativeControlFirstCreatePass(tNode: TNode): boolean {\n }\n \n /**\n- * Returns the {@link Control} directive on the specified node, if one is present and a `field`\n+ * Returns the {@link FormFieldDirective} on the specified node, if one is present and a `field`\n  * input is bound to it, but not to a component. If a `field` input is bound to a component, we\n  * assume the component will manage the control in its own template and return nothing to indicate\n  * that the directive should not be set up.\n@@ -286,11 +291,16 @@ function isNativeControlFirstCreatePass(tNode: TNode): boolean {\n  * @param tNode The `TNode` of the element to check.\n  * @param lView The `LView` that contains the element.\n  */\n-function getControlDirective\u003cT\u003e(tNode: TNode, lView: LView): Control\u003cT\u003e | null {\n+function getFieldDirective\u003cT\u003e(tNode: TNode, lView: LView): FormFieldDirective\u003cT\u003e | null {\n   const index \u003d tNode.fieldIndex;\n   return index \u003d\u003d\u003d -1 ? null : lView[index];\n }\n \n+function getCustomControl(tNode: TNode, lView: LView): CustomControl | null {\n+  const index \u003d tNode.customControlIndex;\n+  return index \u003d\u003d\u003d -1 ? null : lView[index];\n+}\n+\n /**\n  * Returns whether the specified `directiveDef` has a model-like input named `name`.\n  *\n@@ -312,18 +322,19 @@ function hasOutput(directiveDef: DirectiveDef\u003cunknown\u003e, name: string): boolean {\n }\n \n /**\n- * Adds event listeners to a custom form control component to notify the `field` of changes.\n+ * Initializes a custom form control component, setting up focus logic and event listeners to notify\n+ * the `field` of changes.\n  *\n  * @param lView The `LView` that contains the custom form control.\n  * @param tNode The `TNode` of the custom form control.\n- * @param control The `Control` directive instance.\n+ * @param fieldDirective The `FormFieldDirective` instance.\n  * @param componentIndex The index of the custom form control component in the `LView`.\n  * @param modelName The name of the model property on the custom form control.\n  */\n-function listenToCustomControl(\n+function initializeCustomControl(\n   lView: LView\u003c{} | null\u003e,\n   tNode: TNode,\n-  control: Control\u003cunknown\u003e,\n+  fieldDirective: FormFieldDirective\u003cunknown\u003e,\n   modelName: string,\n ) {\n   const tView \u003d getTView();\n@@ -335,7 +346,7 @@ function listenToCustomControl(\n     directiveIndex,\n     outputName,\n     outputName,\n-    wrapListener(tNode, lView, (value: unknown) \u003d\u003e control.state().setControlValue(value)),\n+    wrapListener(tNode, lView, (value: unknown) \u003d\u003e fieldDirective.state().setControlValue(value)),\n   );\n \n   const directiveDef \u003d tView.data[directiveIndex] as DirectiveDef\u003cunknown\u003e;\n@@ -347,20 +358,28 @@ function listenToCustomControl(\n       directiveIndex,\n       touchedOutputName,\n       touchedOutputName,\n-      wrapListener(tNode, lView, () \u003d\u003e control.state().markAsTouched()),\n+      wrapListener(tNode, lView, () \u003d\u003e fieldDirective.state().markAsTouched()),\n     );\n   }\n+\n+  const customControl \u003d lView[directiveIndex] as CustomControl;\n+  fieldDirective.focus \u003d () \u003d\u003e\n+    customControl.focus ? customControl.focus() : fieldDirective.element.focus();\n }\n \n /**\n- * Adds event listeners to an interoperable form control to notify the `field` of changes.\n+ * Initializes an interoperable form control, setting up focus logic and event listeners to notify\n+ * the `field` of changes.\n  *\n- * @param control The `Control` directive instance.\n+ * @param fieldDirective The `FormFieldDirective` instance.\n  */\n-function listenToInteropControl(control: Control\u003cunknown\u003e): void {\n-  const interopControl \u003d control.interopControl!;\n-  interopControl.registerOnChange((value: unknown) \u003d\u003e control.state().setControlValue(value));\n-  interopControl.registerOnTouched(() \u003d\u003e control.state().markAsTouched());\n+function initializeInteropControl(fieldDirective: FormFieldDirective\u003cunknown\u003e): void {\n+  const interopControl \u003d fieldDirective.interopControl!;\n+  interopControl.registerOnChange((value: unknown) \u003d\u003e\n+    fieldDirective.state().setControlValue(value),\n+  );\n+  interopControl.registerOnTouched(() \u003d\u003e fieldDirective.state().markAsTouched());\n+  fieldDirective.focus \u003d () \u003d\u003e fieldDirective.element.focus();\n }\n \n /**\n@@ -389,19 +408,24 @@ function isNativeControl(tNode: TNode): tNode is TElementNode {\n }\n \n /**\n- * Adds event listeners to a native form control element to notify the `field` of changes.\n+ * Initializes a native form control element, setting up focus logic and event listeners to notify\n+ * the `field` of changes.\n  *\n  * @param lView The `LView` that contains the native form control.\n  * @param tNode The `TNode` of the native form control.\n- * @param control The `Control` directive instance.\n+ * @param fieldDirective The `FormFieldDirective` instance.\n  */\n-function listenToNativeControl(lView: LView\u003c{} | null\u003e, tNode: TNode, control: Control\u003cunknown\u003e) {\n+function initializeNativeControl(\n+  lView: LView\u003c{} | null\u003e,\n+  tNode: TNode,\n+  fieldDirective: FormFieldDirective\u003cunknown\u003e,\n+) {\n   const tView \u003d getTView();\n   const renderer \u003d lView[RENDERER];\n   const element \u003d getNativeByTNode(tNode, lView) as NativeControlElement;\n \n   const inputListener \u003d () \u003d\u003e {\n-    const state \u003d control.state();\n+    const state \u003d fieldDirective.state();\n     state.setControlValue(getNativeControlValue(element, state.value));\n   };\n   listenToDomEvent(\n@@ -416,7 +440,7 @@ function listenToNativeControl(lView: LView\u003c{} | null\u003e, tNode: TNode, control: \n   );\n \n   const blurListener \u003d () \u003d\u003e {\n-    control.state().markAsTouched();\n+    fieldDirective.state().markAsTouched();\n   };\n   listenToDomEvent(\n     tNode,\n@@ -443,11 +467,13 @@ function listenToNativeControl(lView: LView\u003c{} | null\u003e, tNode: TNode, control: \n   ) {\n     const observer \u003d observeSelectMutations(\n       element as HTMLSelectElement,\n-      control as Control\u003cstring\u003e,\n+      fieldDirective as FormFieldDirective\u003cstring\u003e,\n     );\n \n     storeCleanupWithContext(tView, lView, observer, observer.disconnect);\n   }\n+\n+  fieldDirective.focus \u003d () \u003d\u003e element.focus();\n }\n \n /**\n@@ -460,7 +486,7 @@ function listenToNativeControl(lView: LView\u003c{} | null\u003e, tNode: TNode, control: \n  */\n function observeSelectMutations(\n   select: HTMLSelectElement,\n-  controlDirective: Control\u003cstring\u003e,\n+  controlDirective: FormFieldDirective\u003cstring\u003e,\n ): MutationObserver {\n   const observer \u003d new MutationObserver((mutations) \u003d\u003e {\n     if (mutations.some((m) \u003d\u003e isRelevantSelectMutation(m))) {\n@@ -520,9 +546,9 @@ function isRelevantSelectMutation(mutation: MutationRecord) {\n  *\n  * @param lView The `LView` that contains the control.\n  * @param tNode The `TNode` of the control.\n- * @param control The `Control` directive instance.\n+ * @param control The `FormFieldDirective` instance.\n  */\n-function updateControlClasses(lView: LView, tNode: TNode, control: Control\u003cunknown\u003e) {\n+function updateControlClasses(lView: LView, tNode: TNode, control: FormFieldDirective\u003cunknown\u003e) {\n   if (control.classes) {\n     const bindings \u003d getControlBindings(lView);\n     bindings.classes ??\u003d {};\n@@ -549,12 +575,12 @@ function updateControlClasses(lView: LView, tNode: TNode, control: Control\u003cunk\n  * @param lView The `LView` that contains the custom form control.\n  * @param componentIndex The index of the custom form control component in the `LView`.\n  * @param modelName The name of the model property on the custom form control.\n- * @param control The `Control` directive instance.\n+ * @param control The `FormFieldDirective` instance.\n  */\n function updateCustomControl(\n   tNode: TNode,\n   lView: LView,\n-  control: Control\u003cunknown\u003e,\n+  control: FormFieldDirective\u003cunknown\u003e,\n   modelName: string,\n ) {\n   const tView \u003d getTView();\n@@ -595,9 +621,13 @@ function updateCustomControl(\n  *\n  * @param tNode The `TNode` of the form control.\n  * @param lView The `LView` that contains the native form control.\n- * @param control The `Control` directive instance.\n+ * @param control The `FormFieldDirective` instance.\n  */\n-function updateInteropControl(tNode: TNode, lView: LView, control: Control\u003cunknown\u003e): void {\n+function updateInteropControl(\n+  tNode: TNode,\n+  lView: LView,\n+  control: FormFieldDirective\u003cunknown\u003e,\n+): void {\n   const interopControl \u003d control.interopControl!;\n   const bindings \u003d getControlBindings(lView);\n   const state \u003d control.state();\n@@ -639,9 +669,13 @@ function updateInteropControl(tNode: TNode, lView: LView, control: Control\u003cunk\n  *\n  * @param tNode The `TNode` of the native form control.\n  * @param lView The `LView` that contains the native form control.\n- * @param control The `Control` directive instance.\n+ * @param control The `FormFieldDirective` instance.\n  */\n-function updateNativeControl(tNode: TNode, lView: LView, control: Control\u003cunknown\u003e): void {\n+function updateNativeControl(\n+  tNode: TNode,\n+  lView: LView,\n+  control: FormFieldDirective\u003cunknown\u003e,\n+): void {\n   const element \u003d getNativeByTNode(tNode, lView) as NativeControlElement;\n   const renderer \u003d lView[RENDERER];\n   const state \u003d control.state();\ndiff --git a/packages/core/src/render3/interfaces/control.ts b/packages/core/src/render3/interfaces/control.ts\nindex 3f94682b..393b6031 100644\n--- a/packages/core/src/render3/interfaces/control.ts\n+++ b/packages/core/src/render3/interfaces/control.ts\n@@ -8,11 +8,11 @@\n import {Signal} from \u0027../reactivity/api\u0027;\n import {WritableSignal} from \u0027../reactivity/signal\u0027;\n \n-/** A unique symbol used to identify {@link Control} implementations. */\n+/** A unique symbol used to identify {@link FormFieldDirective} implementations. */\n export const CONTROL: unique symbol \u003d Symbol(\u0027CONTROL\u0027);\n \n /**\n- * Instructions for dynamically binding a {@link Control} to a form control.\n+ * Instructions for dynamically binding a {@link FormFieldDirective} to a form control.\n  */\n export interface ControlBinding {\n   create(): void;\n@@ -22,15 +22,17 @@ export interface ControlBinding {\n /**\n  * A directive that binds a {@link FieldState} to a form control.\n  */\n-export interface Control\u003cT\u003e {\n+export interface FormFieldDirective\u003cT\u003e {\n   /**\n-   * The presence of this property is used to identify {@link Control} implementations, while the\n-   * value is used to store the instructions for dynamically binding to a form control. The\n-   * instructions are stored on the directive so that they can be tree-shaken when the directive is\n-   * not used.\n+   * The presence of this property is used to identify {@link FormFieldDirective} implementations,\n+   * while the value is used to store the instructions for dynamically binding to a form control.\n+   * The instructions are stored on the directive so that they can be tree-shaken when the directive\n+   * is not used.\n    */\n   readonly [CONTROL]: ControlBinding;\n \n+  readonly element: HTMLElement;\n+\n   /** The state of the field bound to this control. */\n   readonly state: Signal\u003cFieldState\u003cT\u003e\u003e;\n \n@@ -40,6 +42,8 @@ export interface Control\u003cT\u003e {\n   /** A reference to the interoperable control, if one is present. */\n   readonly interopControl: InteropControl | undefined;\n \n+  focus?(): void;\n+\n   /**\n    * Registers this directive as a control of its associated form field.\n    *\n@@ -51,6 +55,10 @@ export interface Control\u003cT\u003e {\n   register(): void;\n }\n \n+export interface CustomControl {\n+  focus?(): void;\n+}\n+\n /** Mirrors the `ControlValueAccessor` interface for interoperability.  */\n export interface InteropControl {\n   /** Registers a callback function that is called when the control\u0027s value changes. */\ndiff --git a/packages/forms/signals/src/api/form_field_directive.ts b/packages/forms/signals/src/api/form_field_directive.ts\nindex 712d3374..91e8f72d 100644\n--- a/packages/forms/signals/src/api/form_field_directive.ts\n+++ b/packages/forms/signals/src/api/form_field_directive.ts\n@@ -19,7 +19,7 @@ import {\n   controlUpdate as updateControlBinding,\n   CONTROL,\n   InteropControl,\n-  type Control,\n+  type FormFieldDirective,\n } from \u0027@angular/core\u0027;\n import {NG_VALUE_ACCESSOR, NgControl} from \u0027@angular/forms\u0027;\n import {InteropNgControl} from \u0027../controls/interop_ng_control\u0027;\n@@ -71,7 +71,7 @@ const controlInstructions \u003d {\n     {provide: NgControl, useFactory: () \u003d\u003e inject(FormField).getOrCreateNgControl()},\n   ],\n })\n-// This directive should `implements Control\u003cT\u003e`, but actually adding that breaks people\u0027s\n+// This directive should `implements FormFieldDirective\u003cT\u003e`, but actually adding that breaks people\u0027s\n // builds because part of the public API is marked `@internal` and stripped.\n // Instead we have an type check below that enforces this in a non-breaking way.\n export class FormField\u003cT\u003e {\n@@ -130,9 +130,14 @@ export class FormField\u003cT\u003e {\n       {injector: this.injector},\n     );\n   }\n+\n+  /** Focuses this UI control. */\n+  focus?(): void;\n }\n \n-// We can\u0027t add `implements Control\u003cT\u003e` to `Field` even though it should conform to the interface.\n+// We can\u0027t add `implements FormFieldDirective\u003cT\u003e` to `Field` even though it should conform to the interface.\n // Instead we enforce it here through some utility types.\n type Check\u003cT extends true\u003e \u003d T;\n-type FieldImplementsControl \u003d Check\u003cFormField\u003cany\u003e extends Control\u003cany\u003e ? true : false\u003e;\n+type FormFieldImplementsFormFieldDirective \u003d Check\u003c\n+  FormField\u003cany\u003e extends FormFieldDirective\u003cany\u003e ? true : false\n+\u003e;\ndiff --git a/packages/forms/signals/src/api/types.ts b/packages/forms/signals/src/api/types.ts\nindex 8b293df4..479c0ee4 100644\n--- a/packages/forms/signals/src/api/types.ts\n+++ b/packages/forms/signals/src/api/types.ts\n@@ -310,6 +310,12 @@ export interface FieldState\u003cTValue, TKey extends string | number \u003d string | numb\n    * @param value Optional value to set to the form. If not passed, the value will not be changed.\n    */\n   reset(value?: TValue): void;\n+\n+  /**\n+   * Focuses the first UI control in the DOM that is bound to this field state.\n+   * If no UI control is bound, does nothing.\n+   */\n+  focusBoundControl(): void;\n }\n \n /**\ndiff --git a/packages/forms/signals/src/field/node.ts b/packages/forms/signals/src/field/node.ts\nindex 6468dc58..770f54fe 100644\n--- a/packages/forms/signals/src/field/node.ts\n+++ b/packages/forms/signals/src/field/node.ts\n@@ -80,6 +80,31 @@ export class FieldNode implements FieldState\u003cunknown\u003e {\n     this.submitState \u003d new FieldSubmitState(this);\n   }\n \n+  focusBoundControl(): void {\n+    this.getBindingForFocus()?.focus();\n+  }\n+\n+  /**\n+   * Gets the Field directive binding that should be focused when the developer calls\n+   * `focusBoundControl` on this node.\n+   *\n+   * This will prioritize focusable bindings to this node, and if multiple exist, it will return\n+   * the first one in the DOM. If no focusable bindings exist on this node, it will return the\n+   * first focusable binding in the DOM for any descendant node of this one.\n+   */\n+  private getBindingForFocus(): (FormField\u003cunknown\u003e \u0026 {focus: VoidFunction}) | undefined {\n+    // First try to focus one of our own bindings.\n+    const own \u003d this.formFieldBindings()\n+      .filter((b): b is FormField\u003cunknown\u003e \u0026 {focus: VoidFunction} \u003d\u003e b.focus !\u003d\u003d undefined)\n+      .reduce(firstInDom\u003cFormField\u003cunknown\u003e \u0026 {focus: VoidFunction}\u003e, undefined);\n+    if (own) return own;\n+    // Fallback to focusing the bound control for one of our children.\n+    return this.structure\n+      .children()\n+      .map((child) \u003d\u003e child.getBindingForFocus())\n+      .reduce(firstInDom, undefined);\n+  }\n+\n   /**\n    * The `AbortController` for the currently debounced sync, or `undefined` if there is none.\n    *\n@@ -353,3 +378,14 @@ export interface ParentFieldNode extends FieldNode {\n   readonly value: WritableSignal\u003cRecord\u003cstring, unknown\u003e\u003e;\n   readonly structure: FieldNodeStructure \u0026 {value: WritableSignal\u003cRecord\u003cstring, unknown\u003e\u003e};\n }\n+\n+/** Given two elements, returns the one that appears earlier in the DOM. */\n+function firstInDom\u003cT extends FormField\u003cunknown\u003e\u003e(\n+  a: T | undefined,\n+  b: T | undefined,\n+): T | undefined {\n+  if (!a) return b;\n+  if (!b) return a;\n+  const position \u003d a.element.compareDocumentPosition(b.element);\n+  return position \u0026 Node.DOCUMENT_POSITION_PRECEDING ? b : a;\n+}\ndiff --git a/packages/forms/signals/src/field/structure.ts b/packages/forms/signals/src/field/structure.ts\nindex c683fcaf..141a2b84 100644\n--- a/packages/forms/signals/src/field/structure.ts\n+++ b/packages/forms/signals/src/field/structure.ts\n@@ -11,10 +11,10 @@ import {\n   DestroyableInjector,\n   Injector,\n   linkedSignal,\n+  RuntimeError as RuntimeError,\n   Signal,\n   untracked,\n   WritableSignal,\n-  RuntimeError as RuntimeError,\n } from \u0027@angular/core\u0027;\n \n import {SignalFormsErrorCode} from \u0027../errors\u0027;\n@@ -100,7 +100,7 @@ export abstract class FieldNodeStructure {\n   }\n \n   /** Gets the child fields of this field. */\n-  children(): Iterable\u003cFieldNode\u003e {\n+  children(): readonly FieldNode[] {\n     const map \u003d this.childrenMap();\n     if (map \u003d\u003d\u003d undefined) {\n       return [];\ndiff --git a/packages/forms/signals/test/web/focus.spec.ts b/packages/forms/signals/test/web/focus.spec.ts\nnew file mode 100644\nindex 00000000..92918391\n--- /dev/null\n+++ b/packages/forms/signals/test/web/focus.spec.ts\n@@ -0,0 +1,191 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.dev/license\n+ */\n+\n+import {ApplicationRef, Component, input, model, signal} from \u0027@angular/core\u0027;\n+import {TestBed} from \u0027@angular/core/testing\u0027;\n+import {FormControl} from \u0027@angular/forms\u0027;\n+import {compatForm} from \u0027../../compat\u0027;\n+import {FormField, form, type FieldTree} from \u0027../../public_api\u0027;\n+\n+describe(\u0027FieldState focus behavior\u0027, () \u003d\u003e {\n+  it(\u0027should focus a native control\u0027, async () \u003d\u003e {\n+    @Component({\n+      imports: [FormField],\n+      template: `\u003cinput [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal(\u0027\u0027));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const input \u003d fixture.nativeElement.firstChild;\n+\n+    expect(document.activeElement).not.toBe(input);\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(input);\n+  });\n+\n+  it(\u0027should delegate focus behavior to a custom control if focus logic is implemented\u0027, async () \u003d\u003e {\n+    let focusCalled \u003d false;\n+\n+    @Component({\n+      selector: \u0027custom-control\u0027,\n+      host: {\u0027tabindex\u0027: \u0027-1\u0027},\n+      template: \u0027\u0027,\n+    })\n+    class CustomControl {\n+      readonly value \u003d model\u003cstring\u003e();\n+      focus() {\n+        focusCalled \u003d true;\n+      }\n+    }\n+\n+    @Component({\n+      imports: [FormField, CustomControl],\n+      template: `\u003ccustom-control [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal(\u0027\u0027));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const customControl \u003d fixture.nativeElement.firstChild as HTMLInputElement;\n+\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(focusCalled).toBeTrue();\n+    expect(document.activeElement).not.toBe(customControl);\n+  });\n+\n+  it(\u0027should directly focus a custom control that has no custom focus logic\u0027, async () \u003d\u003e {\n+    @Component({\n+      selector: \u0027custom-control\u0027,\n+      host: {\u0027tabindex\u0027: \u0027-1\u0027},\n+      template: \u0027\u0027,\n+    })\n+    class CustomControl {\n+      readonly value \u003d model\u003cstring\u003e();\n+    }\n+\n+    @Component({\n+      imports: [FormField, CustomControl],\n+      template: `\u003ccustom-control [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal(\u0027\u0027));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const customControl \u003d fixture.nativeElement.firstChild as HTMLInputElement;\n+\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(customControl);\n+  });\n+\n+  it(\u0027should focus the first (in the DOM) control bound to the field state\u0027, async () \u003d\u003e {\n+    @Component({\n+      imports: [FormField],\n+      template: `\n+        @if (showFirst()) {\n+          \u003cinput [formField]\u003d\"f\" id\u003d\"input1\" /\u003e\n+        }\n+        \u003cinput [formField]\u003d\"f\" id\u003d\"input2\" /\u003e\n+      `,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal(\u0027\u0027));\n+      showFirst \u003d signal(false);\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const input2 \u003d fixture.nativeElement.querySelector(\u0027#input2\u0027);\n+\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(input2);\n+\n+    await act(() \u003d\u003e fixture.componentInstance.showFirst.set(true));\n+    const input1 \u003d fixture.nativeElement.querySelector(\u0027#input1\u0027);\n+\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(input1);\n+  });\n+\n+  it(\u0027should focus the first (in the DOM) bound child of a pass-through control\u0027, async () \u003d\u003e {\n+    @Component({\n+      selector: \u0027custom-control\u0027,\n+      imports: [FormField],\n+      template: `\n+        \u003cinput [formField]\u003d\"formField().child2\" id\u003d\"child2\" /\u003e\n+        \u003cinput [formField]\u003d\"formField().child1\" id\u003d\"child1\" /\u003e\n+      `,\n+    })\n+    class CustomControl {\n+      formField \u003d input.required\u003cFieldTree\u003c{child1: string; child2: string}\u003e\u003e();\n+    }\n+\n+    @Component({\n+      imports: [FormField, CustomControl],\n+      template: `\u003ccustom-control [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal({child1: \u0027\u0027, child2: \u0027\u0027}));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const child2 \u003d fixture.nativeElement.querySelector(\u0027#child2\u0027);\n+\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(child2);\n+  });\n+\n+  it(\u0027should focus host element for a compat control\u0027, async () \u003d\u003e {\n+    @Component({\n+      imports: [FormField],\n+      template: `\u003cinput [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d compatForm(signal(new FormControl(\u0027\u0027, {nonNullable: true})));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+    const input \u003d fixture.nativeElement.firstChild;\n+\n+    expect(document.activeElement).not.toBe(input);\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(input);\n+  });\n+\n+  it(\u0027should not change focus if there is nothing to focus\u0027, async () \u003d\u003e {\n+    @Component({\n+      selector: \u0027custom-control\u0027,\n+      template: ``,\n+    })\n+    class CustomControl {\n+      formField \u003d input.required\u003cFieldTree\u003cstring\u003e\u003e();\n+    }\n+\n+    @Component({\n+      imports: [FormField, CustomControl],\n+      template: `\u003ccustom-control [formField]\u003d\"f\" /\u003e`,\n+    })\n+    class TestCmp {\n+      readonly f \u003d form(signal(\u0027\u0027));\n+    }\n+\n+    const fixture \u003d await act(() \u003d\u003e TestBed.createComponent(TestCmp));\n+\n+    const focusedEl \u003d document.activeElement;\n+    await act(() \u003d\u003e fixture.componentInstance.f().focusBoundControl());\n+    expect(document.activeElement).toBe(focusedEl);\n+  });\n+});\n+\n+async function act\u003cT\u003e(fn: () \u003d\u003e T): Promise\u003cT\u003e {\n+  const result \u003d fn();\n+  await TestBed.inject(ApplicationRef).whenStable();\n+  return result;\n+}","expectedMessage":"feat(forms): allow focusing bound control from field state","repository":"angular","commitHash":"10e9022a07af541634ec3e0388c6ed7b990cd140","metadata":{}}
{"id":"angular-b2283557","diff":" .../rendering/templates/class-method-info.tsx        |  9 ++++++---\n .../rendering/templates/function-reference.tsx       | 20 ++++++++------------\n .../rendering/templates/initializer-api-function.tsx | 12 ++++--------\n 3 files changed, 18 insertions(+), 23 deletions(-)\n\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/templates/class-method-info.tsx b/adev/shared-docs/pipeline/api-gen/rendering/templates/class-method-info.tsx\nindex b37d5d5e..e64dd38b 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/templates/class-method-info.tsx\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/templates/class-method-info.tsx\n@@ -12,15 +12,18 @@ import {\n   ParameterEntryRenderable,\n } from \u0027../entities/renderables.mjs\u0027;\n import {PARAM_KEYWORD_CLASS_NAME, REFERENCE_MEMBER_CARD_ITEM} from \u0027../styling/css-classes.mjs\u0027;\n+import {CodeSymbol} from \u0027./code-symbols\u0027;\n import {DeprecatedLabel} from \u0027./deprecated-label\u0027;\n import {Parameter} from \u0027./parameter\u0027;\n import {RawHtml} from \u0027./raw-html\u0027;\n-import {CodeSymbol} from \u0027./code-symbols\u0027;\n \n /**\n  * Component to render the method-specific parts of a class\u0027s API reference.\n  */\n-export function ClassMethodInfo(props: {entry: FunctionSignatureMetadataRenderable}) {\n+export function ClassMethodInfo(props: {\n+  entry: FunctionSignatureMetadataRenderable;\n+  hideUsageNotes?: boolean;\n+}) {\n   const entry \u003d props.entry;\n \n   return (\n@@ -43,7 +46,7 @@ export function ClassMethodInfo(props: {entry: FunctionSignatureMetadataRenderab\n         \u003cspan className\u003d{PARAM_KEYWORD_CLASS_NAME}\u003e@returns\u003c/span\u003e\n         \u003cCodeSymbol code\u003d{entry.returnType} /\u003e\n       \u003c/div\u003e\n-      {entry.htmlUsageNotes ? (\n+      {entry.htmlUsageNotes \u0026\u0026 !props.hideUsageNotes ? (\n         \u003cdiv className\u003d{\u0027docs-usage-notes\u0027}\u003e\n           \u003cspan className\u003d{\u0027docs-usage-notes-heading\u0027}\u003eUsage notes\u003c/span\u003e\n           \u003cRawHtml value\u003d{entry.htmlUsageNotes} /\u003e\ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/templates/function-reference.tsx b/adev/shared-docs/pipeline/api-gen/rendering/templates/function-reference.tsx\nindex 6741bb3d..e1aa46b8 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/templates/function-reference.tsx\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/templates/function-reference.tsx\n@@ -22,23 +22,22 @@ import {printInitializerFunctionSignatureLine} from \u0027../transforms/code-transfor\n import {getFunctionMetadataRenderable} from \u0027../transforms/function-transforms.mjs\u0027;\n import {ClassMethodInfo} from \u0027./class-method-info\u0027;\n import {CodeSymbol} from \u0027./code-symbols\u0027;\n+import {DeprecationWarning} from \u0027./deprecation-warning\u0027;\n import {HeaderApi} from \u0027./header-api\u0027;\n import {HighlightTypeScript} from \u0027./highlight-ts\u0027;\n import {SectionApi} from \u0027./section-api\u0027;\n import {SectionDescription} from \u0027./section-description\u0027;\n import {SectionUsageNotes} from \u0027./section-usage-notes\u0027;\n-import {DeprecationWarning} from \u0027./deprecation-warning\u0027;\n \n export const signatureCard \u003d (\n   name: string,\n   signature: FunctionSignatureMetadataRenderable,\n-  opts: {id: string},\n-  printSignaturesAsHeader: boolean,\n+  opts: {id: string; printSignaturesAsHeader: boolean; hideUsageNotes?: boolean},\n ) \u003d\u003e {\n   return (\n     \u003cdiv id\u003d{opts.id} class\u003d{REFERENCE_MEMBER_CARD}\u003e\n       \u003cheader class\u003d{REFERENCE_MEMBER_CARD_HEADER}\u003e\n-        {printSignaturesAsHeader ? (\n+        {opts.printSignaturesAsHeader ? (\n           \u003cHighlightTypeScript\n             code\u003d{printInitializerFunctionSignatureLine(\n               name,\n@@ -57,7 +56,7 @@ export const signatureCard \u003d (\n         )}\n       \u003c/header\u003e\n       \u003cdiv class\u003d{REFERENCE_MEMBER_CARD_BODY}\u003e\n-        \u003cClassMethodInfo entry\u003d{signature} /\u003e\n+        \u003cClassMethodInfo entry\u003d{signature} hideUsageNotes\u003d{opts.hideUsageNotes} /\u003e\n       \u003c/div\u003e\n     \u003c/div\u003e\n   );\n@@ -75,14 +74,11 @@ export function FunctionReference(entry: FunctionEntryRenderable) {\n       \u003cSectionApi entry\u003d{entry} /\u003e\n       \u003cdiv className\u003d{REFERENCE_MEMBERS}\u003e\n         {entry.signatures.map((s, i) \u003d\u003e\n-          signatureCard(\n-            s.name,\n-            getFunctionMetadataRenderable(s, entry.moduleName, entry.repo),\n-            {\n-              id: `${s.name}_${i}`,\n-            },\n+          signatureCard(s.name, getFunctionMetadataRenderable(s, entry.moduleName, entry.repo), {\n+            id: `${s.name}_${i}`,\n             printSignaturesAsHeader,\n-          ),\n+            hideUsageNotes: true,\n+          }),\n         )}\n       \u003c/div\u003e\n \ndiff --git a/adev/shared-docs/pipeline/api-gen/rendering/templates/initializer-api-function.tsx b/adev/shared-docs/pipeline/api-gen/rendering/templates/initializer-api-function.tsx\nindex dce391ee..0a3fb8e8 100644\n--- a/adev/shared-docs/pipeline/api-gen/rendering/templates/initializer-api-function.tsx\n+++ b/adev/shared-docs/pipeline/api-gen/rendering/templates/initializer-api-function.tsx\n@@ -40,14 +40,10 @@ export function InitializerApiFunction(entry: InitializerApiFunctionRenderable)\n \n       \u003cdiv class\u003d{REFERENCE_MEMBERS}\u003e\n         {entry.callFunction.signatures.map((s, i) \u003d\u003e\n-          signatureCard(\n-            s.name,\n-            getFunctionMetadataRenderable(s, entry.moduleName, entry.repo),\n-            {\n-              id: `${s.name}_${i}`,\n-            },\n+          signatureCard(s.name, getFunctionMetadataRenderable(s, entry.moduleName, entry.repo), {\n+            id: `${s.name}_${i}`,\n             printSignaturesAsHeader,\n-          ),\n+          }),\n         )}\n \n         {entry.subFunctions.reduce(\n@@ -59,8 +55,8 @@ export function InitializerApiFunction(entry: InitializerApiFunctionRenderable)\n                 getFunctionMetadataRenderable(s, entry.moduleName, entry.repo),\n                 {\n                   id: `${entry.name}_${s.name}_${i}`,\n+                  printSignaturesAsHeader,\n                 },\n-                printSignaturesAsHeader,\n               ),\n             ),\n           ],","expectedMessage":"docs(docs-infra): prevent from showing duplicate usage blocks in functions API docs","repository":"angular","commitHash":"b22835579e54e9fd7039237fa3f83c5b7ebcef9f","metadata":{}}
