{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/services/navigationBar.ts\n\ndiff --git a/src/services/navigationBar.ts b/src/services/navigationBar.ts\nindex 26a5f0989..167ca6298 100644\n--- a/src/services/navigationBar.ts\n+++ b/src/services/navigationBar.ts\n@@ -84,6 +84,7 @@ import {\n     isStatic,\n     isStringLiteralLike,\n     isStringOrNumericLiteralLike,\n+    isTemplateLiteral,\n     isToken,\n     isVariableDeclaration,\n     lastOrUndefined,\n@@ -1057,7 +1058,7 @@ function getFunctionOrClassName(node: FunctionExpression | FunctionDeclaration |\n                 return `${name} callback`;\n             }\n \n-            const args = cleanText(mapDefined(parent.arguments, a => isStringLiteralLike(a) ? a.getText(curSourceFile) : undefined).join(\", \"));\n+            const args = cleanText(mapDefined(parent.arguments, a => isStringLiteralLike(a) || isTemplateLiteral(a) ? a.getText(curSourceFile) : undefined).join(\", \"));\n             return `${name}(${args}) callback`;\n         }\n     }\ndiff --git a/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions.ts b/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions.ts\nindex d35d051ed..16ad964e5 100644\n--- a/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions.ts\n+++ b/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions.ts\n@@ -18,7 +18,7 @@\n ////    // These will only show up as childItems.\n ////    function z() {}\n ////    console.log(function() {})\n-////    describe(\"this\", 'function', `is a function`, `but this ${\"wont\"} show`, () => {});\n+////    describe(\"this\", 'function', `is a function`, `with template literal ${\"a\"}`, () => {});\n ////    [].map(() => {});\n ////})\n ////(function classes() {\n@@ -77,11 +77,11 @@ verify.navigationTree({\n                     \"kind\": \"function\"\n                 },\n                 {\n-                    \"text\": `describe(\"this\", 'function', \\`is a function\\`) callback`,\n+                    \"text\": \"describe(\\\"this\\\", 'function', `is a function`, `with template literal ${\\\"a\\\"}`) callback\",\n                     \"kind\": \"function\"\n                 },\n                 {\n-                    \"text\": `map() callback`,\n+                    \"text\": \"map() callback\",\n                     \"kind\": \"function\"\n                 },\n                 {\n@@ -199,11 +199,11 @@ verify.navigationBar([\n                 \"kind\": \"function\"\n             },\n             {\n-                \"text\": `describe(\"this\", 'function', \\`is a function\\`) callback`,\n+                \"text\": \"describe(\\\"this\\\", 'function', `is a function`, `with template literal ${\\\"a\\\"}`) callback\",\n                 \"kind\": \"function\"\n             },\n             {\n-                \"text\": `map() callback`,\n+                \"text\": \"map() callback\",\n                 \"kind\": \"function\"\n             },\n             {\ndiff --git a/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions3.ts b/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions3.ts\nnew file mode 100644\nindex 000000000..2b2881e8a\n--- /dev/null\n+++ b/tests/cases/fourslash/navigationBarAnonymousClassAndFunctionExpressions3.ts\n@@ -0,0 +1,93 @@\n+/// <reference path=\"fourslash.ts\"/>\n+\n+////describe('foo', () => {\n+////    test(`a ${1} b ${2}`, () => {})\n+////})\n+////\n+////const a = 1;\n+////const b = 2;\n+////describe('foo', () => {\n+////    test(`a ${a} b {b}`, () => {})\n+////})\n+\n+verify.navigationTree({\n+    \"text\": \"<global>\",\n+    \"kind\": \"script\",\n+    \"childItems\": [\n+        {\n+            \"text\": \"a\",\n+            \"kind\": \"const\"\n+        },\n+        {\n+            \"text\": \"b\",\n+            \"kind\": \"const\"\n+        },\n+        {\n+            \"text\": \"describe('foo') callback\",\n+            \"kind\": \"function\",\n+            \"childItems\": [\n+                {\n+                    \"text\": \"test(`a ${1} b ${2}`) callback\",\n+                    \"kind\": \"function\"\n+                }\n+            ]\n+        },\n+        {\n+            \"text\": \"describe('foo') callback\",\n+            \"kind\": \"function\",\n+            \"childItems\": [\n+                {\n+                    \"text\": \"test(`a ${a} b {b}`) callback\",\n+                    \"kind\": \"function\"\n+                }\n+            ]\n+        }\n+    ]\n+});\n+\n+verify.navigationBar([\n+    {\n+        \"text\": \"<global>\",\n+        \"kind\": \"script\",\n+        \"childItems\": [\n+            {\n+                \"text\": \"a\",\n+                \"kind\": \"const\"\n+            },\n+            {\n+                \"text\": \"b\",\n+                \"kind\": \"const\"\n+            },\n+            {\n+                \"text\": \"describe('foo') callback\",\n+                \"kind\": \"function\"\n+            },\n+            {\n+                \"text\": \"describe('foo') callback\",\n+                \"kind\": \"function\"\n+            }\n+        ]\n+    },\n+    {\n+        \"text\": \"describe('foo') callback\",\n+        \"kind\": \"function\",\n+        \"childItems\": [\n+            {\n+                \"text\": \"test(`a ${1} b ${2}`) callback\",\n+                \"kind\": \"function\"\n+            }\n+        ],\n+        \"indent\": 1\n+    },\n+    {\n+        \"text\": \"describe('foo') callback\",\n+        \"kind\": \"function\",\n+        \"childItems\": [\n+            {\n+                \"text\": \"test(`a ${a} b {b}`) callback\",\n+                \"kind\": \"function\"\n+            }\n+        ],\n+        \"indent\": 1\n+    }\n+]);"}, {"role": "assistant", "content": "fix(56665): Improve Outline for template literals (#56667)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n SUMMARY.md\n\ndiff --git a/SUMMARY.md b/SUMMARY.md\nnew file mode 100644\nindex 00000000..281089a5\n--- /dev/null\n+++ b/SUMMARY.md\n@@ -0,0 +1,45 @@\n+# Summary\n+* Basics\n+    * [Core Ideas](docs/Basics/Core Ideas.md)\n+    * [Getting Started](docs/Basics/Getting Started.md)\n+    * [Migrating to Redux](docs/Basics/Migrating to Redux.md)\n+    * [Relation to Other Libraries](docs/Basics/Relation to Other Libraries.md)\n+    * [The Redux Flow](docs/Basics/The Redux Flow.md)\n+    * [Userland and Core](docs/Basics/Userland and Core.md)\n+    * [Why Redux](docs/Basics/Why Redux.md)\n+* Recipes\n+  * [Anti-Patterns](docs/Recipes/Anti-Patterns.md)\n+  * [Asynchronous Data Fetching](docs/Recipes/Asynchronous Data Fetching.md)\n+  * [Authentication](docs/Recipes/Authentication.md)\n+  * [Code Splitting](docs/Recipes/Code Splitting.md)\n+  * [Connecting UI](docs/Recipes/Connecting UI.md)\n+  * [Derived Data](docs/Recipes/Derived Data.md)\n+  * [Developer Tools](docs/Recipes/Developer Tools.md)\n+  * [Expressing Dependencies](docs/Recipes/Expressing Dependencies.md)\n+  * [Hot Reloading](docs/Recipes/Hot Reloading.md)\n+  * [Immutability](docs/Recipes/Immutability.md)\n+  * [Logging](docs/Recipes/Logging.md)\n+  * [Middleware](docs/Recipes/Middleware.md)\n+  * [Optimistic Updates](docs/Recipes/Optimistic Updates.md)\n+  * [Optimizing Performance](docs/Recipes/Optimizing Performance.md)\n+  * [Pagination](docs/Recipes/Pagination.md)\n+  * [React Native](docs/Recipes/React Native.md)\n+  * [React Router](docs/Recipes/React Router.md)\n+  * [React](docs/Recipes/React.md)\n+  * [Recording and Replaying](docs/Recipes/Recording and Replaying.md)\n+  * [Relay and GraphQL](docs/Recipes/Relay and GraphQL.md)\n+  * [Side Effects](docs/Recipes/Side Effects.md)\n+  * [Stores Enhancers](docs/Recipes/Stores Enhancers.md)\n+  * [Thunks, Promises and Observables](docs/Recipes/Thunks, Promises and Observables.md)\n+  * [Time Travel](docs/Recipes/Time Travel.md)\n+  * [Undo and Redo](docs/Recipes/Undo and Redo.md)\n+  * [Unit Testing](docs/Recipes/Unit Testing.md)\n+  * [Universal Apps](docs/Recipes/Universal Apps.md)\n+* Reference\n+  * [API](docs/Reference/API.md)\n+  * [Glossary](docs/Reference/Glossary.md)\n+* Resources\n+  * [Articles](docs/Resources/Articles.md)\n+  * [Examples](docs/Resources/Examples.md)\n+  * [Getting Help](docs/Resources/Getting Help.md)\n+  * [Utilities](docs/Resources/Utilities.md)\ndiff --git a/package.json b/package.json\nindex d79bf317..18995289 100644\n--- a/package.json\n+++ b/package.json\n@@ -8,7 +8,7 @@\n     \"lint\": \"eslint src test examples\",\n     \"test\": \"NODE_ENV=test mocha --compilers js:babel/register --recursive\",\n     \"test:watch\": \"npm test -- --watch\",\n-    \"test:cov\": \"babel-node ./node_modules/.bin/isparta cover ./node_modules/.bin/_mocha -- --recursive\",\n+    \"test:cov\": \"babel-node $(npm bin)/isparta cover $(npm bin)/_mocha -- --recursive\",\n     \"check\": \"npm run lint && npm run test\",\n     \"build:lib\": \"babel src --out-dir lib\",\n     \"build:umd\": \"webpack src/index.js dist/redux.js && NODE_ENV=production webpack src/index.js dist/redux.min.js\",\n@@ -16,7 +16,8 @@\n     \"preversion\": \"npm run clean && npm run check\",\n     \"version\": \"npm run build\",\n     \"postversion\": \"git push && git push --tags && npm run clean\",\n-    \"prepublish\": \"npm run clean && npm run build\"\n+    \"prepublish\": \"npm run clean && npm run build\",\n+    \"docs:build\": \"$(npm bin)/gitbook build\"\n   },\n   \"repository\": {\n     \"type\": \"git\",\n@@ -50,6 +51,7 @@\n     \"eslint-config-airbnb\": \"0.0.6\",\n     \"eslint-plugin-react\": \"^2.3.0\",\n     \"expect\": \"^1.6.0\",\n+    \"gitbook-cli\": \"^0.3.4\",\n     \"isparta\": \"^3.0.3\",\n     \"mocha\": \"^2.2.5\",\n     \"rimraf\": \"^2.3.4\","}, {"role": "assistant", "content": "feat: add gitbook (#311)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 9b82960ef..235f9f5ba 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -4110,9 +4110,9 @@ globals@^15.11.0:\n   integrity sha512-7ACyT3wmyp3I61S4fG682L0VA2RGD9otkqGJIwNUMF1SWUombIIk+af1unuDYgMm082aHYwD+mzJvv9Iu8dsgg==\n \n globals@^16.0.0, globals@^16.3.0:\n-  version \"16.3.0\"\n-  resolved \"https://registry.yarnpkg.com/globals/-/globals-16.3.0.tgz#66118e765ddaf9e2d880f7e17658543f93f1f667\"\n-  integrity sha512-bqWEnJ1Nt3neqx2q5SFfGS8r/ahumIakg3HcwtNlrVlwXIeNumWn/c7Pn/wKzGhf6SaW6H6uWXLqC30STCMchQ==\n+  version \"16.4.0\"\n+  resolved \"https://registry.yarnpkg.com/globals/-/globals-16.4.0.tgz#574bc7e72993d40cf27cf6c241f324ee77808e51\"\n+  integrity sha512-ob/2LcVVaVGCYN+r14cnwnoDPUufjiYgSqRhiFD0Q1iI4Odora5RE8Iv1D24hAz5oMophRGkGz+yuvQmmUMnMw==\n \n globalthis@^1.0.4:\n   version \"1.0.4\"\n@@ -5678,9 +5678,9 @@ memfs@^3.4.1:\n     fs-monkey \"^1.0.4\"\n \n memfs@^4.14.0:\n-  version \"4.38.2\"\n-  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.38.2.tgz#e3a3a0362032c3ab7093cc7c179bd5fa8abc94c3\"\n-  integrity sha512-FpWsVHpAkoSh/LfY1BgAl72BVd374ooMRtDi2VqzBycX4XEfvC0XKACCe0C9VRZoYq5viuoyTv6lYXZ/Q7TrLQ==\n+  version \"4.38.3\"\n+  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.38.3.tgz#d5eaced44c746a81ca2f3f59f031cb0f5bdb3fcf\"\n+  integrity sha512-2s0E1tj016MQL6Eo6en0rNJnEWppbTAytbK7P0VPLtB9zA0xU7B522A1A0Tyz9usEkkWrSEDxIa/N7SdJWWAYg==\n   dependencies:\n     \"@jsonjoy.com/json-pack\" \"^1.11.0\"\n     \"@jsonjoy.com/util\" \"^1.9.0\""}, {"role": "assistant", "content": "chore(deps-dev): bump the dependencies group with 2 updates (#19895)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .circleci/config.yml\n\ndiff --git a/.circleci/config.yml b/.circleci/config.yml\nindex ed0ac2c9..855a6fd6 100644\n--- a/.circleci/config.yml\n+++ b/.circleci/config.yml\n@@ -12,7 +12,7 @@ aliases:\n     app-dir: ~/jest\n \n orbs:\n-  node: circleci/node@5.1.0\n+  node: circleci/node@5.1.1\n \n jobs:\n   test-node:"}, {"role": "assistant", "content": "chore(deps): update node orb to v5.1.1 (#14756)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 36f4de5d..3c546880 100644\n--- a/package.json\n+++ b/package.json\n@@ -173,7 +173,7 @@\n     \"globals\": \"^16.2.0\",\n     \"got\": \"^11.8.3\",\n     \"gray-matter\": \"^4.0.3\",\n-    \"jiti\": \"2.4.2\",\n+    \"jiti\": \"^2.5.1\",\n     \"jiti-v2.0\": \"npm:jiti@2.0.x\",\n     \"jiti-v2.1\": \"npm:jiti@2.1.x\",\n     \"knip\": \"^5.60.2\","}, {"role": "assistant", "content": "ci: unpin `jiti` to version `^2.5.1` (#19970)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commits format: type(scope): description\n\nValid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore\n\nRules:\n- Keep the subject line under 72 characters\n- Start description with lowercase\n- Do not end with a period\n- Be concise and specific", "input": " vscode-ng-language-service/CHANGELOG.md | 6 ++++++\n 1 file changed, 6 insertions(+)\n\ndiff --git a/vscode-ng-language-service/CHANGELOG.md b/vscode-ng-language-service/CHANGELOG.md\nindex c4e83534..9de2d943 100644\n--- a/vscode-ng-language-service/CHANGELOG.md\n+++ b/vscode-ng-language-service/CHANGELOG.md\n@@ -1,3 +1,9 @@\n+## 21.1.0 (2026-01-12)\n+\n+- fix(vscode-extension): convert enum member kind in completions correctly ([50674f8c28](https://github.com/angular/angular/commit/50674f8c28c970e6a9cfe222f9f55bace4e16321))\n+\n+<!-- CHANGELOG SPLIT MARKER -->\n+\n ## 21.0.1 (2025-12-17)\n \n - fix(language-service): Prevent language service from crashing on suggestion diagnostic errors ([5047be4bc1](https://github.com/angular/angular/commit/5047be4bc1c6f6016263703c743f8033f669f0ee))", "output": "docs: release notes for the vscode extension 21.1.0 release", "metadata": {"id": "angular-e45f8afd", "repository": "angular", "commit_hash": "e45f8afdab1ad26128a2f3865eafd52db7cd4265", "author": "Andrew Scott <atscott@google.com>", "type": "docs", "quality_score": 80}}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " CHANGELOG.md | 18 ++++++++++++++++++\n 1 file changed, 18 insertions(+)\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 85d8f54..5953faf 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -1,3 +1,9 @@\n+## 19.2.1 (Dec 3, 2025)\n+\n+### React Server Components\n+\n+- Bring React Server Component fixes to Server Actions (@sebmarkbage [#35277](https://github.com/facebook/react/pull/35277))\n+\n ## 19.2.0 (October 1st, 2025)\n \n Below is a list of all new features, APIs, and bug fixes.\n@@ -71,6 +77,12 @@ Read the [React 19.2 release post](https://react.dev/blog/2025/10/01/react-19-2)\n \n - [createContainer](https://github.com/facebook/react/blob/v19.2.0/packages/react-reconciler/src/ReactFiberReconciler.js#L255-L261) and [createHydrationContainer](https://github.com/facebook/react/blob/v19.2.0/packages/react-reconciler/src/ReactFiberReconciler.js#L305-L312) had their parameter order adjusted after `on*` handlers to account for upcoming experimental APIs\n \n+## 19.1.2 (Dec 3, 2025)\n+\n+### React Server Components\n+\n+- Bring React Server Component fixes to Server Actions (@sebmarkbage [#35277](https://github.com/facebook/react/pull/35277))\n+\n ## 19.1.1 (July 28, 2025)\n \n ### React\n@@ -123,6 +135,12 @@ An Owner Stack is a string representing the components that are directly respons\n * Exposed `registerServerReference` in client builds to handle server references in different environments. [#32534](https://github.com/facebook/react/pull/32534)\n * Added react-server-dom-parcel package which integrates Server Components with the [Parcel bundler](https://parceljs.org/) [#31725](https://github.com/facebook/react/pull/31725), [#32132](https://github.com/facebook/react/pull/32132), [#31799](https://github.com/facebook/react/pull/31799), [#32294](https://github.com/facebook/react/pull/32294), [#31741](https://github.com/facebook/react/pull/31741)\n \n+## 19.0.1 (Dec 3, 2025)\n+\n+### React Server Components\n+\n+- Bring React Server Component fixes to Server Actions (@sebmarkbage [#35277](https://github.com/facebook/react/pull/35277))\n+\n ## 19.0.0 (December 5, 2024)\n \n Below is a list of all new features, APIs, deprecations, and breaking changes. Read [React 19 release post](https://react.dev/blog/2024/04/25/react-19) and [React 19 upgrade guide](https://react.dev/blog/2024/04/25/react-19-upgrade-guide) for more information.", "output": "docs: update changelog with patch releases", "metadata": {"id": "react-0526c799", "repository": "react", "commit_hash": "0526c799d4df2815aed73912bfbd26fc0102ffc3"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n examples/persistent-caching/README.md\n\ndiff --git a/examples/persistent-caching/README.md b/examples/persistent-caching/README.md\nindex 4b41137da..0f58ef15f 100644\n--- a/examples/persistent-caching/README.md\n+++ b/examples/persistent-caching/README.md\n@@ -61,10 +61,10 @@ module.exports = config;\n ## Unoptimized\n \n ```\n-asset output.js 3.61 MiB [emitted] (name: main)\n+asset output.js 3.62 MiB [emitted] (name: main)\n chunk (runtime: main) output.js (main) 2.25 MiB (javascript) 1.29 KiB (runtime) [entry]\n   > ./example.js main\n-  cached modules 2.25 MiB (javascript) 1.29 KiB (runtime) [cached] 1523 modules\n+  cached modules 2.25 MiB (javascript) 1.29 KiB (runtime) [cached] 1526 modules\n webpack X.X.X compiled successfully\n ```\n \n@@ -74,7 +74,7 @@ webpack X.X.X compiled successfully\n asset output.js 549 KiB [emitted] [minimized] [big] (name: main) 1 related asset\n chunk (runtime: main) output.js (main) 2.19 MiB (javascript) 1.29 KiB (runtime) [entry]\n   > ./example.js main\n-  cached modules 2.19 MiB (javascript) 1.29 KiB (runtime) [cached] 900 modules\n+  cached modules 2.19 MiB (javascript) 1.29 KiB (runtime) [cached] 903 modules\n \n WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\n This can impact web performance."}, {"role": "assistant", "content": "docs: update examples (#20152)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n types/test/v3/define-component-test.tsx\n\ndiff --git a/types/test/v3/define-component-test.tsx b/types/test/v3/define-component-test.tsx\nindex 9b01e3e4..1b0847a3 100644\n--- a/types/test/v3/define-component-test.tsx\n+++ b/types/test/v3/define-component-test.tsx\n@@ -1079,3 +1079,39 @@ export default {\n     }\n   })\n }\n+\n+describe('functional w/ array props', () => {\n+  const Foo = defineComponent({\n+    functional: true,\n+    props: ['foo'],\n+    render(h, ctx) {\n+      ctx.props.foo\n+      // @ts-expect-error\n+      ctx.props.bar\n+    }\n+  })\n+\n+  ;<Foo foo=\"hi\" />\n+  // @ts-expect-error\n+  ;<Foo bar={123} />\n+})\n+\n+describe('functional w/ object props', () => {\n+  const Foo = defineComponent({\n+    functional: true,\n+    props: {\n+      foo: String\n+    },\n+    render(h, ctx) {\n+      ctx.props.foo\n+      // @ts-expect-error\n+      ctx.props.bar\n+    }\n+  })\n+\n+  ;<Foo foo=\"hi\" />\n+  // @ts-expect-error\n+  ;<Foo foo={123} />\n+  // @ts-expect-error\n+  ;<Foo bar={123} />\n+})\ndiff --git a/types/v3-define-component.d.ts b/types/v3-define-component.d.ts\nindex f2d3ab16..30f7046e 100644\n--- a/types/v3-define-component.d.ts\n+++ b/types/v3-define-component.d.ts\n@@ -18,6 +18,7 @@ import {\n } from './v3-component-public-instance'\n import { Data, HasDefined } from './common'\n import { EmitsOptions } from './v3-setup-context'\n+import { CreateElement, RenderContext } from './umd'\n \n type DefineComponent<\n   PropsOrPropOptions = {},\n@@ -66,6 +67,30 @@ type DefineComponent<\n     props: PropsOrPropOptions\n   }\n \n+/**\n+ * overload 0.0: functional component with array props\n+ */\n+export function defineComponent<\n+  PropNames extends string,\n+  Props = Readonly<{ [key in PropNames]?: any }>\n+>(options: {\n+  functional: true\n+  props?: PropNames[]\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<Props>\n+\n+/**\n+ * overload 0.1: functional component with object props\n+ */\n+export function defineComponent<\n+  PropsOptions extends ComponentPropsOptions = ComponentPropsOptions,\n+  Props = ExtractPropTypes<PropsOptions>\n+>(options: {\n+  functional: true\n+  props?: PropsOptions\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<PropsOptions>\n+\n /**\n  * overload 1: object format with no props\n  */"}, {"role": "assistant", "content": "feat: support functional components in defineComponent"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n CHANGELOG.md\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 5e2b22fd..010d1482 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -22,6 +22,7 @@\n - `[@jest/fake-timers]` Exposing new modern timers function `advanceTimersToFrame()` which advances all timers by the needed milliseconds to execute callbacks currently scheduled with `requestAnimationFrame` ([#14598](https://github.com/jestjs/jest/pull/14598))\n - `[jest-matcher-utils]` Add `SERIALIZABLE_PROPERTIES` to allow custom serialization of objects ([#14893](https://github.com/jestjs/jest/pull/14893))\n - `[jest-mock]` Add support for the Explicit Resource Management proposal to use the `using` keyword with `jest.spyOn(object, methodName)` ([#14895](https://github.com/jestjs/jest/pull/14895))\n+- `[jest-reporters]` Add support for [DEC mode 2026](https://gist.github.com/christianparpart/d8a62cc1ab659194337d73e399004036)\n - `[jest-runtime]` Exposing new modern timers function `jest.advanceTimersToFrame()` from `@jest/fake-timers` ([#14598](https://github.com/jestjs/jest/pull/14598))\n - `[jest-runtime]` Support `import.meta.filename` and `import.meta.dirname` (available from [Node 20.11](https://nodejs.org/en/blog/release/v20.11.0)) ([#14854](https://github.com/jestjs/jest/pull/14854))\n - `[jest-runtime]` Support `import.meta.resolve` ([#14930](https://github.com/jestjs/jest/pull/14930))\ndiff --git a/packages/jest-reporters/src/BaseReporter.ts b/packages/jest-reporters/src/BaseReporter.ts\nindex 1e9f12a0..90216767 100644\n--- a/packages/jest-reporters/src/BaseReporter.ts\n+++ b/packages/jest-reporters/src/BaseReporter.ts\n@@ -5,6 +5,7 @@\n  * LICENSE file in the root directory of this source tree.\n  */\n \n+import type {WriteStream} from 'tty';\n import type {\n   AggregatedResult,\n   Test,\n@@ -12,7 +13,7 @@ import type {\n   TestContext,\n   TestResult,\n } from '@jest/test-result';\n-import {preRunMessage} from 'jest-util';\n+import {isInteractive, preRunMessage} from 'jest-util';\n import type {Reporter, ReporterOnStartOptions} from './types';\n \n const {remove: preRunMessageRemove} = preRunMessage;\n@@ -57,4 +58,16 @@ export default class BaseReporter implements Reporter {\n   getLastError(): Error | undefined {\n     return this._error;\n   }\n+\n+  protected __beginSynchronizedUpdate(write: WriteStream['write']): void {\n+    if (isInteractive) {\n+      write('\\u001B[?2026h');\n+    }\n+  }\n+\n+  protected __endSynchronizedUpdate(write: WriteStream['write']): void {\n+    if (isInteractive) {\n+      write('\\u001B[?2026l');\n+    }\n+  }\n }\ndiff --git a/packages/jest-reporters/src/DefaultReporter.ts b/packages/jest-reporters/src/DefaultReporter.ts\nindex 288aafb2..f0f3f0bf 100644\n--- a/packages/jest-reporters/src/DefaultReporter.ts\n+++ b/packages/jest-reporters/src/DefaultReporter.ts\n@@ -53,8 +53,14 @@ export default class DefaultReporter extends BaseReporter {\n     this.__wrapStdio(process.stdout);\n     this.__wrapStdio(process.stderr);\n     this._status.onChange(() => {\n+      this.__beginSynchronizedUpdate(\n+        this._globalConfig.useStderr ? this._err : this._out,\n+      );\n       this.__clearStatus();\n       this.__printStatus();\n+      this.__endSynchronizedUpdate(\n+        this._globalConfig.useStderr ? this._err : this._out,\n+      );\n     });\n   }\n \n@@ -69,11 +75,17 @@ export default class DefaultReporter extends BaseReporter {\n       buffer = [];\n \n       // This is to avoid conflicts between random output and status text\n+      this.__beginSynchronizedUpdate(\n+        this._globalConfig.useStderr ? this._err : this._out,\n+      );\n       this.__clearStatus();\n       if (string) {\n         write(string);\n       }\n       this.__printStatus();\n+      this.__endSynchronizedUpdate(\n+        this._globalConfig.useStderr ? this._err : this._out,\n+      );\n \n       this._bufferedOutput.delete(flushBufferedOutput);\n     };\n@@ -194,9 +206,7 @@ export default class DefaultReporter extends BaseReporter {\n       const testRetryReasons = testResult.retryReasons;\n       if (testRetryReasons && testRetryReasons.length > 0) {\n         this.log(\n-          `${chalk.reset.inverse.bold.yellow(\n-            ' LOGGING RETRY ERRORS ',\n-          )} ${chalk.bold(testResult.fullName)}`,\n+          `${chalk.reset.inverse.bold.yellow(' LOGGING RETRY ERRORS ')} ${chalk.bold(testResult.fullName)}`,\n         );\n         for (const [index, retryReasons] of testRetryReasons.entries()) {\n           let {message, stack} = separateMessageFromStack(retryReasons);\n@@ -219,11 +229,7 @@ export default class DefaultReporter extends BaseReporter {\n     this.log(getResultHeader(result, this._globalConfig, config));\n     if (result.console) {\n       this.log(\n-        `  ${TITLE_BULLET}Console\\n\\n${getConsoleOutput(\n-          result.console,\n-          config,\n-          this._globalConfig,\n-        )}`,\n+        `  ${TITLE_BULLET}Console\\n\\n${getConsoleOutput(result.console, config, this._globalConfig)}`,\n       );\n     }\n   }"}, {"role": "assistant", "content": "feat: Add DEC mode 2026 support (Synchronized Output) to Jest (#15008)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/api/environment-variables.md\n\ndiff --git a/docs/api/environment-variables.md b/docs/api/environment-variables.md\nindex c033676a..5b6305ed 100644\n--- a/docs/api/environment-variables.md\n+++ b/docs/api/environment-variables.md\n@@ -186,3 +186,14 @@ the one downloaded by `npm install`. Usage:\n ```sh\n export ELECTRON_OVERRIDE_DIST_PATH=/Users/username/projects/electron/out/Testing\n ```\n+\n+### `ELECTRON_SKIP_BINARY_DOWNLOAD`\n+\n+If you want to install your project's dependencies but don't need to use Electron functionality,\n+you can set the `ELECTRON_SKIP_BINARY_DOWNLOAD` environment variable to prevent the binary from being\n+downloaded. For instance, this feature can be useful in continuous integration environments when\n+running unit tests that mock out the `electron` module.\n+\n+```sh\n+ELECTRON_SKIP_BINARY_DOWNLOAD=1 npm install\n+```"}, {"role": "assistant", "content": "docs: document `ELECTRON_SKIP_BINARY_DOWNLOAD` (#49320)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/compiler-sfc/src/parseComponent.ts\n\ndiff --git a/packages/compiler-sfc/src/parseComponent.ts b/packages/compiler-sfc/src/parseComponent.ts\nindex aed55fd0..d17345df 100644\n--- a/packages/compiler-sfc/src/parseComponent.ts\n+++ b/packages/compiler-sfc/src/parseComponent.ts\n@@ -125,6 +125,11 @@ export function parseComponent(\n           return cumulated\n         }, {})\n       }\n+\n+      if (typeof currentBlock.attrs.src === 'string') {\n+        currentBlock.src = currentBlock.attrs.src\n+      }\n+\n       if (isSpecialTag(tag)) {\n         checkAttrs(currentBlock, attrs)\n         if (tag === 'script') {\n@@ -162,9 +167,6 @@ export function parseComponent(\n       if (attr.name === 'module') {\n         block.module = attr.value || true\n       }\n-      if (attr.name === 'src') {\n-        block.src = attr.value\n-      }\n     }\n   }\n \ndiff --git a/packages/compiler-sfc/test/parseComponent.spec.ts b/packages/compiler-sfc/test/parseComponent.spec.ts\nindex 206e5567..4624bb20 100644\n--- a/packages/compiler-sfc/test/parseComponent.spec.ts\n+++ b/packages/compiler-sfc/test/parseComponent.spec.ts\n@@ -202,10 +202,11 @@ describe('Single File Component parser', () => {\n         }))\n       }\n       </test>\n+      <custom src=\"./x.json\"></custom>\n     `,\n       { deindent: true }\n     )\n-    expect(res.customBlocks.length).toBe(3)\n+    expect(res.customBlocks.length).toBe(4)\n \n     const simpleExample = res.customBlocks[0]\n     expect(simpleExample.type).toBe('example')\n@@ -233,6 +234,9 @@ describe('Single File Component parser', () => {\n }`)\n     expect(simpleTest.attrs.name).toBe('simple')\n     expect(simpleTest.attrs.foo).toBe('bar')\n+\n+    const customWithSrc = res.customBlocks[3]\n+    expect(customWithSrc.src).toBe('./x.json')\n   })\n \n   // Regression #4289"}, {"role": "assistant", "content": "fix(compiler-sfc): expose src on custom blocks as well"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n examples/asset/README.md\n\ndiff --git a/examples/asset/README.md b/examples/asset/README.md\nindex 17203c724..e70c66f73 100644\n--- a/examples/asset/README.md\n+++ b/examples/asset/README.md\n@@ -300,7 +300,7 @@ module.exports = __webpack_require__.tb(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmc\n /******/ \t\n /******/ \t/* webpack/runtime/jsonp chunk loading */\n /******/ \t(() => {\n-/******/ \t\t__webpack_require__.b = (document && document.baseURI) || self.location.href;\n+/******/ \t\t__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n /******/ \t\t\n /******/ \t\t// object to store loaded and loading chunks\n /******/ \t\t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n@@ -476,10 +476,10 @@ files.forEach(item => {\n asset output.js 19.2 KiB [emitted] (name: main)\n asset images/89a353e9c515885abd8e.png 14.6 KiB [emitted] [immutable] [from: images/file.png] (auxiliary name: main)\n asset images/afc10c70ed4ce2b33593.svg 656 bytes [emitted] [immutable] [from: images/url.svg] (auxiliary name: main)\n-chunk (runtime: main) output.js (main) 12.4 KiB (javascript) 15.2 KiB (asset) 1.46 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) output.js (main) 12.4 KiB (javascript) 15.2 KiB (asset) 1.48 KiB (runtime) [entry] [rendered]\n   > ./example.js main\n   dependent modules 9.59 KiB (javascript) 15.2 KiB (asset) [dependent] 6 modules\n-  runtime modules 1.46 KiB 5 modules\n+  runtime modules 1.48 KiB 5 modules\n   ./example.js 2.85 KiB [built] [code generated]\n     [no exports]\n     [used exports unknown]\ndiff --git a/examples/worker/README.md b/examples/worker/README.md\nindex 94a04d9f4..a20a30ed0 100644\n--- a/examples/worker/README.md\n+++ b/examples/worker/README.md\n@@ -286,7 +286,7 @@ export const add = (content, from) => {\n /******/ \t\n /******/ \t/* webpack/runtime/jsonp chunk loading */\n /******/ \t(() => {\n-/******/ \t\t__webpack_require__.b = (document && document.baseURI) || self.location.href;\n+/******/ \t\t__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n /******/ \t\t\n /******/ \t\t// object to store loaded and loading chunks\n /******/ \t\t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n@@ -722,7 +722,7 @@ function fibonacci(n) {\n ## Unoptimized\n \n ```\n-asset main.js 11.8 KiB [emitted] (name: main)\n+asset main.js 11.9 KiB [emitted] (name: main)\n asset workers/fibonacci.js 4.99 KiB [emitted] (name: fibonacci)\n asset chat.js 839 bytes [emitted] (name: chat)\n asset 129.js 741 bytes [emitted]\n@@ -746,9 +746,9 @@ chunk (runtime: 9a81d90cfd0dfd13d748) workers/fibonacci.js (fibonacci) 176 bytes\n   ./fib-worker.js 176 bytes [built] [code generated]\n     [no exports used]\n     new Worker() ./fib-worker.js ./example.js 80:18-84:2\n-chunk (runtime: main) main.js (main) 2.25 KiB (javascript) 5.4 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) main.js (main) 2.25 KiB (javascript) 5.42 KiB (runtime) [entry] [rendered]\n   > ./example.js main\n-  runtime modules 5.4 KiB 7 modules\n+  runtime modules 5.42 KiB 7 modules\n   ./example.js 2.25 KiB [built] [code generated]\n     [no exports used]\n     entry ./example.js main\n@@ -758,7 +758,7 @@ webpack X.X.X compiled successfully\n ## Production mode\n \n ```\n-asset main.js 3.27 KiB [emitted] [minimized] (name: main)\n+asset main.js 3.29 KiB [emitted] [minimized] (name: main)\n asset workers/fibonacci.js 776 bytes [emitted] [minimized] (name: fibonacci)\n asset chat.js 270 bytes [emitted] [minimized] (name: chat)\n asset 129.js 159 bytes [emitted] [minimized]\n@@ -782,9 +782,9 @@ chunk (runtime: 9a81d90cfd0dfd13d748) workers/fibonacci.js (fibonacci) 176 bytes\n   ./fib-worker.js 176 bytes [built] [code generated]\n     [no exports used]\n     new Worker() ./fib-worker.js ./example.js 80:18-84:2\n-chunk (runtime: main) main.js (main) 2.25 KiB (javascript) 5.4 KiB (runtime) [entry] [rendered]\n+chunk (runtime: main) main.js (main) 2.25 KiB (javascript) 5.42 KiB (runtime) [entry] [rendered]\n   > ./example.js main\n-  runtime modules 5.4 KiB 7 modules\n+  runtime modules 5.42 KiB 7 modules\n   ./example.js 2.25 KiB [built] [code generated]\n     [no exports used]\n     entry ./example.js main"}, {"role": "assistant", "content": "docs: update examples (#19982)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " packages/runtime-dom/src/index.ts | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/packages/runtime-dom/src/index.ts b/packages/runtime-dom/src/index.ts\nindex 9b87827..7407ed7 100644\n--- a/packages/runtime-dom/src/index.ts\n+++ b/packages/runtime-dom/src/index.ts\n@@ -17,6 +17,7 @@ import {\n } from '@vue/runtime-core'\n import { nodeOps } from './nodeOps'\n import { patchProp } from './patchProp'\n+export { nodeOps, patchProp }\n // Importing from the compiler, will be tree-shaken in prod\n import {\n   NOOP,", "output": "feat(runtime-dom): export nodeOps and patchProp", "metadata": {"id": "vue-e9c676ff", "repository": "vue", "commit_hash": "e9c676ff2b64724ad74f017bd280d623e8d72e6b"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n website/docusaurus.config.js\n\ndiff --git a/website/docusaurus.config.js b/website/docusaurus.config.js\nindex 9715ead8..bfe4627e 100755\n--- a/website/docusaurus.config.js\n+++ b/website/docusaurus.config.js\n@@ -118,7 +118,7 @@ module.exports = {\n                 <a href=\"https://www.netlify.com\">\n                   <img\n                     src=\"https://www.netlify.com/img/global/badges/netlify-color-accent.svg\"\n-                    alt=\"Deploys by Netlify\"\n+                    alt=\"Deployed by Netlify\"\n                   />\n                 </a>\n               `"}, {"role": "assistant", "content": "docs: fixing grammatical typo"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex 0016ec32..4a9edc76 100644\n--- a/README.md\n+++ b/README.md\n@@ -277,6 +277,11 @@ Nitin Kumar\n The people who review and fix bugs and help triage issues.\n \n <table><tbody><tr><td align=\"center\" valign=\"top\" width=\"11%\">\n+<a href=\"https://github.com/DMartens\">\n+<img src=\"https://github.com/DMartens.png?s=75\" width=\"75\" height=\"75\" alt=\"fnx's Avatar\"><br />\n+fnx\n+</a>\n+</td><td align=\"center\" valign=\"top\" width=\"11%\">\n <a href=\"https://github.com/JoshuaKGoldberg\">\n <img src=\"https://github.com/JoshuaKGoldberg.png?s=75\" width=\"75\" height=\"75\" alt=\"Josh Goldberg ✨'s Avatar\"><br />\n Josh Goldberg ✨"}, {"role": "assistant", "content": "docs: Update README"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/next/src/bin/next.ts\n\ndiff --git a/packages/next/src/bin/next.ts b/packages/next/src/bin/next.ts\nindex 540f3fcc2..cfcb4b5b3 100755\n--- a/packages/next/src/bin/next.ts\n+++ b/packages/next/src/bin/next.ts\n@@ -395,8 +395,10 @@ program\n     )}`\n   )\n   .action((directory: string, options: NextTypegenOptions) =>\n+    // ensure process exits after typegen completes so open handles/connections\n+    // don't cause process to hang\n     import('../cli/next-typegen.js').then((mod) =>\n-      mod.nextTypegen(options, directory)\n+      mod.nextTypegen(options, directory).then(() => process.exit(0))\n     )\n   )\n   .usage('[directory] [options]')\ndiff --git a/test/e2e/app-dir/typed-routes/next.config.js b/test/e2e/app-dir/typed-routes/next.config.js\nindex d4e974530..6ede7e5b1 100644\n--- a/test/e2e/app-dir/typed-routes/next.config.js\n+++ b/test/e2e/app-dir/typed-routes/next.config.js\n@@ -1,3 +1,6 @@\n+// intervals/open connections shouldn't block typegen from exiting\n+setInterval(() => {}, 250)\n+\n /**\n  * @type {import('next').NextConfig}\n  */\ndiff --git a/test/e2e/app-dir/typed-routes/typed-routes.test.ts b/test/e2e/app-dir/typed-routes/typed-routes.test.ts\nindex 2e73585cf..3e291f01f 100644\n--- a/test/e2e/app-dir/typed-routes/typed-routes.test.ts\n+++ b/test/e2e/app-dir/typed-routes/typed-routes.test.ts\n@@ -1,4 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n+import { runNextCommand } from 'next-test-utils'\n \n const expectedDts = `\n type AppRoutes = \"/\" | \"/_shop/[[...category]]\" | \"/dashboard\" | \"/dashboard/settings\" | \"/docs/[...slug]\" | \"/gallery/photo/[id]\" | \"/project/[slug]\"\n@@ -90,4 +91,12 @@ type InvalidRoute = RouteContext<'/api/users/invalid'>`\n       )\n     })\n   }\n+\n+  it('should exit typegen successfully', async () => {\n+    const { code } = await runNextCommand(['typegen'], {\n+      cwd: next.testDir,\n+    })\n+\n+    expect(code).toBe(0)\n+  })\n })"}, {"role": "assistant", "content": "fix: Ensure typegen CLI command doesn't hang due to open handles (#83966)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/ci.yml\n\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex f647cd188..5fb7f4adc 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -66,7 +66,7 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node-version: [24, 22]\n+        node-version: [latest, 24, 22]\n     steps:\n       - name: Checkout code\n         uses: actions/checkout@v4\n@@ -229,7 +229,7 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node-version: [22, 20, 18, 16, 14, 12, 10, 8, 6]\n+        node-version: [24, 22, 20, 18, 16, 14, 12, 10, 8, 6]\n     steps:\n       - name: Checkout code\n         uses: actions/checkout@v4\ndiff --git a/packages/babel-node/data/node-flags-with-value.json b/packages/babel-node/data/node-flags-with-value.json\nindex 5e810556f..09e9f96e6 100644\n--- a/packages/babel-node/data/node-flags-with-value.json\n+++ b/packages/babel-node/data/node-flags-with-value.json\n@@ -63,6 +63,7 @@\n   \"--test-name-pattern\",\n   \"--test-reporter\",\n   \"--test-reporter-destination\",\n+  \"--test-rerun-failures\",\n   \"--test-shard\",\n   \"--test-skip-pattern\",\n   \"--test-timeout\","}, {"role": "assistant", "content": "chore: add node 24 to the matrix (#17607)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/JestObjectAPI.md\n\ndiff --git a/docs/JestObjectAPI.md b/docs/JestObjectAPI.md\nindex bcf1cab9..fa7771c7 100644\n--- a/docs/JestObjectAPI.md\n+++ b/docs/JestObjectAPI.md\n@@ -761,7 +761,7 @@ If your codebase is set up to transpile the [\"explicit resource management\"](htt\n \n ```js\n test('logs a warning', () => {\n-  using spy = jest.spyOn(console.warn);\n+  using spy = jest.spyOn(console, 'warn');\n   doSomeThingWarnWorthy();\n   expect(spy).toHaveBeenCalled();\n });\n@@ -773,7 +773,7 @@ That code is semantically equal to\n test('logs a warning', () => {\n   let spy;\n   try {\n-    spy = jest.spyOn(console.warn);\n+    spy = jest.spyOn(console, 'warn');\n     doSomeThingWarnWorthy();\n     expect(spy).toHaveBeenCalled();\n   } finally {\n@@ -789,7 +789,7 @@ You can even go a step further and use a code block to restrict your mock to onl\n ```js\n test('testing something', () => {\n   {\n-    using spy = jest.spyOn(console.warn);\n+    using spy = jest.spyOn(console, 'warn');\n     setupStepThatWillLogAWarning();\n   }\n   // here, console.warn is already restored to the original value"}, {"role": "assistant", "content": "docs: fix documentation (#14294) (#15649)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n CHANGELOG.md\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 60d0cb5a..aeece37c 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -22,6 +22,7 @@\n - `[@jest/environment-jsdom-abstract]` Introduce new package which abstracts over the `jsdom` environment, allowing usage of custom versions of JSDOM ([#14717](https://github.com/jestjs/jest/pull/14717))\n - `[jest-environment-node]` Update jest environment with dispose symbols `Symbol` ([#14888](https://github.com/jestjs/jest/pull/14888) & [#14909](https://github.com/jestjs/jest/pull/14909))\n - `[expect, @jest/expect]` [**BREAKING**] Add type inference for function parameters in `CalledWith` assertions ([#15129](https://github.com/facebook/jest/pull/15129))\n+- `[@jest/expect-utils]` Properly compare all types of `TypedArray`s ([#15178](https://github.com/facebook/jest/pull/15178))\n - `[@jest/fake-timers]` [**BREAKING**] Upgrade `@sinonjs/fake-timers` to v11 ([#14544](https://github.com/jestjs/jest/pull/14544))\n - `[@jest/fake-timers]` Exposing new modern timers function `advanceTimersToFrame()` which advances all timers by the needed milliseconds to execute callbacks currently scheduled with `requestAnimationFrame` ([#14598](https://github.com/jestjs/jest/pull/14598))\n - `[jest-matcher-utils]` Add `SERIALIZABLE_PROPERTIES` to allow custom serialization of objects ([#14893](https://github.com/jestjs/jest/pull/14893))\ndiff --git a/packages/expect-utils/src/__tests__/utils.test.ts b/packages/expect-utils/src/__tests__/utils.test.ts\nindex e762d593..336f762f 100644\n--- a/packages/expect-utils/src/__tests__/utils.test.ts\n+++ b/packages/expect-utils/src/__tests__/utils.test.ts\n@@ -670,37 +670,55 @@ describe('arrayBufferEquality', () => {\n   test('returns false when given non-matching buffers', () => {\n     const a = Uint8Array.from([2, 4]).buffer;\n     const b = Uint16Array.from([1, 7]).buffer;\n-    expect(arrayBufferEquality(a, b)).not.toBeTruthy();\n+    expect(arrayBufferEquality(a, b)).toBe(false);\n+  });\n+\n+  test('returns false when given matching buffers of different byte length', () => {\n+    const a = Uint8Array.from([1, 2]).buffer;\n+    const b = Uint16Array.from([1, 2]).buffer;\n+    expect(arrayBufferEquality(a, b)).toBe(false);\n   });\n \n   test('returns true when given matching buffers', () => {\n     const a = Uint8Array.from([1, 2]).buffer;\n     const b = Uint8Array.from([1, 2]).buffer;\n-    expect(arrayBufferEquality(a, b)).toBeTruthy();\n+    expect(arrayBufferEquality(a, b)).toBe(true);\n   });\n \n   test('returns true when given matching DataView', () => {\n     const a = new DataView(Uint8Array.from([1, 2, 3]).buffer);\n     const b = new DataView(Uint8Array.from([1, 2, 3]).buffer);\n-    expect(arrayBufferEquality(a, b)).toBeTruthy();\n+    expect(arrayBufferEquality(a, b)).toBe(true);\n   });\n \n   test('returns false when given non-matching DataView', () => {\n     const a = new DataView(Uint8Array.from([1, 2, 3]).buffer);\n     const b = new DataView(Uint8Array.from([3, 2, 1]).buffer);\n-    expect(arrayBufferEquality(a, b)).toBeFalsy();\n+    expect(arrayBufferEquality(a, b)).toBe(false);\n+  });\n+\n+  test('returns true when given matching Float64Array', () => {\n+    const a = Float64Array.from(Array.from({length: 10}));\n+    const b = Float64Array.from(Array.from({length: 10}));\n+    expect(arrayBufferEquality(a, b)).toBe(true);\n+  });\n+\n+  test('returns false when given non-matching Float64Array', () => {\n+    const a = Float64Array.from(Array.from({length: 10}));\n+    const b = Float64Array.from(Array.from({length: 100}));\n+    expect(arrayBufferEquality(a, b)).toBe(false);\n   });\n \n   test('returns true when given matching URL', () => {\n     const a = new URL('https://jestjs.io/');\n     const b = new URL('https://jestjs.io/');\n-    expect(equals(a, b)).toBeTruthy();\n+    expect(equals(a, b)).toBe(true);\n   });\n \n   test('returns false when given non-matching URL', () => {\n     const a = new URL('https://jestjs.io/docs/getting-started');\n     const b = new URL('https://jestjs.io/docs/getting-started#using-babel');\n-    expect(equals(a, b)).toBeFalsy();\n+    expect(equals(a, b)).toBe(false);\n   });\n });\n \ndiff --git a/packages/expect-utils/src/utils.ts b/packages/expect-utils/src/utils.ts\nindex 0b8b53d3..7455c096 100644\n--- a/packages/expect-utils/src/utils.ts\n+++ b/packages/expect-utils/src/utils.ts\n@@ -183,6 +183,8 @@ export const iterableEquality = (\n     typeof b !== 'object' ||\n     Array.isArray(a) ||\n     Array.isArray(b) ||\n+    ArrayBuffer.isView(a) ||\n+    ArrayBuffer.isView(b) ||\n     !hasIterator(a) ||\n     !hasIterator(b)\n   ) {\n@@ -413,9 +415,12 @@ export const arrayBufferEquality = (\n   let dataViewA = a;\n   let dataViewB = b;\n \n-  if (a instanceof ArrayBuffer && b instanceof ArrayBuffer) {\n+  if (isArrayBuffer(a) && isArrayBuffer(b)) {\n     dataViewA = new DataView(a);\n     dataViewB = new DataView(b);\n+  } else if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n+    dataViewA = new DataView(a.buffer, a.byteOffset, a.byteLength);\n+    dataViewB = new DataView(b.buffer, b.byteOffset, b.byteLength);\n   }\n \n   if (!(dataViewA instanceof DataView && dataViewB instanceof DataView)) {\n@@ -437,6 +442,10 @@ export const arrayBufferEquality = (\n   return true;\n };\n \n+function isArrayBuffer(obj: unknown): obj is ArrayBuffer {\n+  return Object.prototype.toString.call(obj) === '[object ArrayBuffer]';\n+}\n+\n export const sparseArrayEquality = (\n   a: unknown,\n   b: unknown,"}, {"role": "assistant", "content": "feat: properly compare `TypedArray`s of all types (#15178)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/services/completions.ts\n\ndiff --git a/src/services/completions.ts b/src/services/completions.ts\nindex 0becb6030..d39b35777 100644\n--- a/src/services/completions.ts\n+++ b/src/services/completions.ts\n@@ -2439,7 +2439,7 @@ export function getCompletionEntriesFromSymbols(\n     includeSymbol = false\n ): UniqueNameSet {\n     const start = timestamp();\n-    const variableOrParameterDeclaration = getVariableOrParameterDeclaration(contextToken);\n+    const variableOrParameterDeclaration = getVariableOrParameterDeclaration(contextToken, location);\n     const useSemicolons = probablyUsesSemicolons(sourceFile);\n     const typeChecker = program.getTypeChecker();\n     // Tracks unique names.\n@@ -5516,14 +5516,20 @@ function isModuleSpecifierMissingOrEmpty(specifier: ModuleReference | Expression\n     return !tryCast(isExternalModuleReference(specifier) ? specifier.expression : specifier, isStringLiteralLike)?.text;\n }\n \n-function getVariableOrParameterDeclaration(contextToken: Node | undefined) {\n+function getVariableOrParameterDeclaration(contextToken: Node | undefined, location: Node) {\n     if (!contextToken) return;\n \n-    const declaration = findAncestor(contextToken, node =>\n+    const possiblyParameterDeclaration = findAncestor(contextToken, node =>\n         isFunctionBlock(node) || isArrowFunctionBody(node) || isBindingPattern(node)\n             ? \"quit\"\n-            : isVariableDeclaration(node) || ((isParameter(node) || isTypeParameterDeclaration(node)) && !isIndexSignatureDeclaration(node.parent)));\n-    return declaration as ParameterDeclaration | TypeParameterDeclaration | VariableDeclaration | undefined;\n+            : ((isParameter(node) || isTypeParameterDeclaration(node)) && !isIndexSignatureDeclaration(node.parent)));\n+\n+    const possiblyVariableDeclaration = findAncestor(location, node =>\n+        isFunctionBlock(node) || isArrowFunctionBody(node) || isBindingPattern(node)\n+            ? \"quit\"\n+            : isVariableDeclaration(node));\n+\n+    return (possiblyParameterDeclaration || possiblyVariableDeclaration) as ParameterDeclaration | TypeParameterDeclaration | VariableDeclaration | undefined;\n }\n \n function isArrowFunctionBody(node: Node) {\ndiff --git a/tests/cases/fourslash/completionEntryForConst.ts b/tests/cases/fourslash/completionEntryForConst.ts\nindex c89dd8212..39d85df6d 100644\n--- a/tests/cases/fourslash/completionEntryForConst.ts\n+++ b/tests/cases/fourslash/completionEntryForConst.ts\n@@ -1,6 +1,12 @@\n ///<reference path=\"fourslash.ts\" />\n \n ////const c = \"s\";\n-/////**/\n+/////*1*/\n+////const d = 1\n+////d/*2*/\n+////const e = 1\n+/////*3*/\n \n-verify.completions({ marker: \"\", includes: { name: \"c\", text: 'const c: \"s\"', kind: \"const\" } });\n+verify.completions({ marker: [\"1\"], includes: { name: \"c\", text: 'const c: \"s\"', kind: \"const\" } });\n+verify.completions({ marker: [\"2\"], includes: { name: \"d\", text: 'const d: 1', kind: \"const\" } });\n+verify.completions({ marker: [\"3\"], includes: { name: \"e\", text: 'const e: 1', kind: \"const\" } });"}, {"role": "assistant", "content": "fix: no variable suggestions without semicolon (#54656)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n Makefile\n\ndiff --git a/Makefile b/Makefile\nindex 46dcb4df7..1e20d6175 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -16,6 +16,9 @@ MAKEJS := node Makefile.js\n \n .PHONY: build build-dist watch lint fix clean test-clean test-only test test-ci publish bootstrap use-esm use-cjs\n \n+Makefile.js: Makefile.source.mjs yarn.lock\n+\t$(NODE) ./scripts/pack-script.js\n+\n build:\n \t$(MAKEJS) build\n \ndiff --git a/eslint/babel-eslint-parser/package.json b/eslint/babel-eslint-parser/package.json\nindex da8f6feeb..3a9c2c64d 100644\n--- a/eslint/babel-eslint-parser/package.json\n+++ b/eslint/babel-eslint-parser/package.json\n@@ -41,7 +41,7 @@\n     \"@types/eslint\": \"^8.56.2\",\n     \"@types/estree\": \"^1.0.5\",\n     \"@typescript-eslint/scope-manager\": \"^6.19.0\",\n-    \"dedent\": \"^0.7.0\",\n+    \"dedent\": \"^1.5.3\",\n     \"eslint\": \"^9.0.0\"\n   },\n   \"conditions\": {\ndiff --git a/eslint/babel-eslint-tests/package.json b/eslint/babel-eslint-tests/package.json\nindex 49cc29ce4..665e61a11 100644\n--- a/eslint/babel-eslint-tests/package.json\n+++ b/eslint/babel-eslint-tests/package.json\n@@ -7,7 +7,7 @@\n     \"@babel/core\": \"workspace:^\",\n     \"@babel/eslint-parser\": \"workspace:^\",\n     \"@babel/preset-react\": \"workspace:^\",\n-    \"dedent\": \"^0.7.0\",\n+    \"dedent\": \"^1.5.3\",\n     \"eslint\": \"^8.22.0\",\n     \"eslint-plugin-import\": \"^2.25.4\",\n     \"npm-babel-parser\": \"npm:@babel/parser@^7.14.0\"\ndiff --git a/renovate.json b/renovate.json\nindex 2e820e61b..265eeba34 100644\n--- a/renovate.json\n+++ b/renovate.json\n@@ -46,7 +46,7 @@\n         \"@babel/helper-validator-identifier-baseline\"\n       ],\n       \"postUpgradeTasks\": {\n-        \"commands\": [\"node ./scripts/pack-script.js\"]\n+        \"commands\": [\"make\"]\n       }\n     },\n     {\ndiff --git a/yarn.lock b/yarn.lock\nindex 6c9801f66..bb2b0d0fb 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -422,7 +422,7 @@ __metadata:\n     \"@types/eslint\": \"npm:^8.56.2\"\n     \"@types/estree\": \"npm:^1.0.5\"\n     \"@typescript-eslint/scope-manager\": \"npm:^6.19.0\"\n-    dedent: \"npm:^0.7.0\"\n+    dedent: \"npm:^1.5.3\"\n     eslint: \"npm:^9.0.0\"\n     eslint-scope: \"condition:BABEL_8_BREAKING ? ^7.1.1 : \"\n     eslint-visitor-keys: \"condition:BABEL_8_BREAKING ? ^3.3.0 : ^2.1.0\"\n@@ -492,7 +492,7 @@ __metadata:\n     \"@babel/core\": \"workspace:^\"\n     \"@babel/eslint-parser\": \"workspace:^\"\n     \"@babel/preset-react\": \"workspace:^\"\n-    dedent: \"npm:^0.7.0\"\n+    dedent: \"npm:^1.5.3\"\n     eslint: \"npm:^8.22.0\"\n     eslint-plugin-import: \"npm:^2.25.4\"\n     npm-babel-parser: \"npm:@babel/parser@^7.14.0\"\n@@ -8571,22 +8571,15 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"dedent@npm:^0.7.0\":\n-  version: 0.7.0\n-  resolution: \"dedent@npm:0.7.0\"\n-  checksum: 10/87de191050d9a40dd70cad01159a0bcf05ecb59750951242070b6abf9569088684880d00ba92a955b4058804f16eeaf91d604f283929b4f614d181cd7ae633d2\n-  languageName: node\n-  linkType: hard\n-\n-\"dedent@npm:^1.0.0\":\n-  version: 1.5.1\n-  resolution: \"dedent@npm:1.5.1\"\n+\"dedent@npm:^1.0.0, dedent@npm:^1.5.3\":\n+  version: 1.5.3\n+  resolution: \"dedent@npm:1.5.3\"\n   peerDependencies:\n     babel-plugin-macros: ^3.1.0\n   peerDependenciesMeta:\n     babel-plugin-macros:\n       optional: true\n-  checksum: 10/fc00a8bc3dfb7c413a778dc40ee8151b6c6ff35159d641f36ecd839c1df5c6e0ec5f4992e658c82624a1a62aaecaffc23b9c965ceb0bbf4d698bfc16469ac27d\n+  checksum: 10/e5277f6268f288649503125b781a7b7a2c9b22d011139688c0b3619fe40121e600eb1f077c891938d4b2428bdb6326cc3c77a763e4b1cc681bd9666ab1bad2a1\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "fix(deps): update dependency dedent to v1 (#16673)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_resolve/src/imports.rs         |  6 +++---\n tests/ui/imports/overwrite-deep-glob.rs       | 22 ++++++++++++++++++++++\n tests/ui/imports/overwrite-deep-glob.stderr   | 12 ++++++++++++\n tests/ui/imports/overwrite-different-ambig.rs | 25 +++++++++++++++++++++++++\n tests/ui/imports/overwrite-different-vis.rs   | 21 +++++++++++++++++++++\n 5 files changed, 83 insertions(+), 3 deletions(-)\n\ndiff --git a/compiler/rustc_resolve/src/imports.rs b/compiler/rustc_resolve/src/imports.rs\nindex e525abd00f9..7c0cbcf1d52 100644\n--- a/compiler/rustc_resolve/src/imports.rs\n+++ b/compiler/rustc_resolve/src/imports.rs\n@@ -300,13 +300,13 @@ fn remove_same_import<'ra>(d1: Decl<'ra>, d2: Decl<'ra>) -> (Decl<'ra>, Decl<'ra\n     if let DeclKind::Import { import: import1, source_decl: d1_next } = d1.kind\n         && let DeclKind::Import { import: import2, source_decl: d2_next } = d2.kind\n         && import1 == import2\n-        && d1.warn_ambiguity.get() == d2.warn_ambiguity.get()\n     {\n         assert_eq!(d1.ambiguity.get(), d2.ambiguity.get());\n-        assert!(!d1.warn_ambiguity.get());\n         assert_eq!(d1.expansion, d2.expansion);\n         assert_eq!(d1.span, d2.span);\n-        assert_eq!(d1.vis(), d2.vis());\n+        // Visibility of the new import declaration may be different,\n+        // because it already incorporates the visibility of the source binding.\n+        // `warn_ambiguity` of a re-fetched glob can also change in both directions.\n         remove_same_import(d1_next, d2_next)\n     } else {\n         (d1, d2)\ndiff --git a/tests/ui/imports/overwrite-deep-glob.rs b/tests/ui/imports/overwrite-deep-glob.rs\nnew file mode 100644\nindex 00000000000..261b22f6e0a\n--- /dev/null\n+++ b/tests/ui/imports/overwrite-deep-glob.rs\n@@ -0,0 +1,22 @@\n+//@ check-pass\n+\n+mod openssl {\n+    pub use self::handwritten::*;\n+\n+    mod handwritten {\n+        mod m1 {\n+            pub struct S {}\n+        }\n+        mod m2 {\n+            #[derive(Default)]\n+            pub struct S {}\n+        }\n+\n+        pub use self::m1::*; //~ WARN ambiguous glob re-exports\n+        pub use self::m2::*;\n+    }\n+}\n+\n+pub use openssl::*;\n+\n+fn main() {}\ndiff --git a/tests/ui/imports/overwrite-deep-glob.stderr b/tests/ui/imports/overwrite-deep-glob.stderr\nnew file mode 100644\nindex 00000000000..093478c57c9\n--- /dev/null\n+++ b/tests/ui/imports/overwrite-deep-glob.stderr\n@@ -0,0 +1,12 @@\n+warning: ambiguous glob re-exports\n+  --> $DIR/overwrite-deep-glob.rs:15:17\n+   |\n+LL |         pub use self::m1::*;\n+   |                 ^^^^^^^^^^^ the name `S` in the type namespace is first re-exported here\n+LL |         pub use self::m2::*;\n+   |                 ----------- but the name `S` in the type namespace is also re-exported here\n+   |\n+   = note: `#[warn(ambiguous_glob_reexports)]` on by default\n+\n+warning: 1 warning emitted\n+\ndiff --git a/tests/ui/imports/overwrite-different-ambig.rs b/tests/ui/imports/overwrite-different-ambig.rs\nnew file mode 100644\nindex 00000000000..9aee63e1897\n--- /dev/null\n+++ b/tests/ui/imports/overwrite-different-ambig.rs\n@@ -0,0 +1,25 @@\n+//@ check-pass\n+//@ edition:2024\n+\n+mod a {\n+    mod b {\n+        mod c {\n+            pub struct E;\n+        }\n+        mod d {\n+            mod c {\n+                pub struct E;\n+            }\n+            mod d {\n+                #[derive(Debug)]\n+                pub struct E;\n+            }\n+            pub use c::*;\n+            use d::*;\n+        }\n+        use c::*;\n+        use d::*;\n+    }\n+}\n+\n+fn main() {}\ndiff --git a/tests/ui/imports/overwrite-different-vis.rs b/tests/ui/imports/overwrite-different-vis.rs\nnew file mode 100644\nindex 00000000000..edcc441bcb7\n--- /dev/null\n+++ b/tests/ui/imports/overwrite-different-vis.rs\n@@ -0,0 +1,21 @@\n+//@ check-pass\n+\n+mod b {\n+    pub mod http {\n+        pub struct HeaderMap;\n+    }\n+\n+    pub(crate) use self::http::*;\n+    #[derive(Debug)]\n+    pub struct HeaderMap;\n+}\n+\n+mod a {\n+    pub use crate::b::*;\n+\n+    fn check_type() {\n+        let _: HeaderMap = crate::b::HeaderMap;\n+    }\n+}\n+\n+fn main() {}", "output": "fix(resolve): relax assertions in import deduplication", "metadata": {"id": "rust-8b52c73b", "repository": "rust", "commit_hash": "8b52c73b3ec29dadf5df8dc02aeea5aeea778fd7"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n examples/harmony-interop/README.md\n\ndiff --git a/examples/harmony-interop/README.md b/examples/harmony-interop/README.md\nindex 03707cc12..d1aa817db 100644\n--- a/examples/harmony-interop/README.md\n+++ b/examples/harmony-interop/README.md\n@@ -121,7 +121,7 @@ __webpack_require__.r(__webpack_exports__);\n   \\*********************/\n /*! unknown exports (runtime-defined) */\n /*! runtime requirements: __webpack_require__ */\n-/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n+/***/ ((__unused_webpack___webpack_module__, __unused_webpack_exports, __webpack_require__) => {\n \n // CommonJs module\n \n@@ -283,7 +283,7 @@ _fs__WEBPACK_IMPORTED_MODULE_0__.readFile(\"file\");\n ## Unoptimized\n \n ```\n-asset output.js 7.38 KiB [emitted] (name: main)\n+asset output.js 7.39 KiB [emitted] (name: main)\n chunk (runtime: main) output.js (main) 1.13 KiB (javascript) 937 bytes (runtime) [entry] [rendered]\n   > ./example.js main\n   dependent modules 785 bytes [dependent] 4 modules"}, {"role": "assistant", "content": "docs: update examples (#20274)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex f1c9133ff..a1e1d4606 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -2781,10 +2781,10 @@ commander@^12.1.0:\n   resolved \"https://registry.yarnpkg.com/commander/-/commander-12.1.0.tgz#01423b36f501259fdaac4d0e4d60c96c991585d3\"\n   integrity sha512-Vw8qHK3bZM9y/P10u3Vib8o/DdkvA2OtPtZvD871QKjy74Wj1WSKFILMPRPSdUSx5RFK1arlJzEtA4PkFgnbuA==\n \n-commander@^14.0.0, commander@^14.0.1:\n-  version \"14.0.1\"\n-  resolved \"https://registry.yarnpkg.com/commander/-/commander-14.0.1.tgz#2f9225c19e6ebd0dc4404dd45821b2caa17ea09b\"\n-  integrity sha512-2JkV3gUZUVrbNA+1sjBOYLsMZ5cEEl8GTFP2a4AVz5hvasAMCQ1D2l2le/cX+pV4N6ZU17zjUahLpIXRrnWL8A==\n+commander@^14.0.0, commander@^14.0.2:\n+  version \"14.0.2\"\n+  resolved \"https://registry.yarnpkg.com/commander/-/commander-14.0.2.tgz#b71fd37fe4069e4c3c7c13925252ada4eba14e8e\"\n+  integrity sha512-TywoWNNRbhoD0BXs1P3ZEScW8W5iKrnbithIl0YH+uCmBd0QpPOA8yc82DS3BIE5Ma6FnBVUsJ7wVUDz4dvOWQ==\n \n commander@^2.20.0:\n   version \"2.20.3\"\n@@ -3571,9 +3571,9 @@ eslint-plugin-import@^2.32.0:\n     tsconfig-paths \"^3.15.0\"\n \n eslint-plugin-jest@^29.0.1:\n-  version \"29.1.0\"\n-  resolved \"https://registry.yarnpkg.com/eslint-plugin-jest/-/eslint-plugin-jest-29.1.0.tgz#ba59f94bb303fe72417d54232842148f305ab6be\"\n-  integrity sha512-LabxXbASXVjguqL+kBHTPMf3gUeSqwH4fsrEyHTY/MCs42I/p9+ctg09SJpYiD8eGaIsP6GwYr5xW6xWS9XgZg==\n+  version \"29.2.0\"\n+  resolved \"https://registry.yarnpkg.com/eslint-plugin-jest/-/eslint-plugin-jest-29.2.0.tgz#284859d7a9650c823fe91a13cf2e707ca34dee1b\"\n+  integrity sha512-IeRNZN5FTRfWwxPuUlAeShUisPVHTQ+xqHRswxiiRjdH8o44xrwp2eluPjPWEwEE3UeLcsgihAB40ZOrzbudAg==\n   dependencies:\n     \"@typescript-eslint/utils\" \"^8.0.0\"\n \n@@ -5553,11 +5553,11 @@ lines-and-columns@^1.1.6:\n   integrity sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==\n \n lint-staged@^16.2.3:\n-  version \"16.2.6\"\n-  resolved \"https://registry.yarnpkg.com/lint-staged/-/lint-staged-16.2.6.tgz#760675e80f4b53337083d3f8bdecdd1f88079bf5\"\n-  integrity sha512-s1gphtDbV4bmW1eylXpVMk2u7is7YsrLl8hzrtvC70h4ByhcMLZFY01Fx05ZUDNuv1H8HO4E+e2zgejV1jVwNw==\n+  version \"16.2.7\"\n+  resolved \"https://registry.yarnpkg.com/lint-staged/-/lint-staged-16.2.7.tgz#c4a635960c17b52fe774f1f40aee8ce1bd86531f\"\n+  integrity sha512-lDIj4RnYmK7/kXMya+qJsmkRFkGolciXjrsZ6PC25GdTfWOAWetR0ZbsNXRAj1EHHImRSalc+whZFg56F5DVow==\n   dependencies:\n-    commander \"^14.0.1\"\n+    commander \"^14.0.2\"\n     listr2 \"^9.0.5\"\n     micromatch \"^4.0.8\"\n     nano-spawn \"^2.0.0\"\n@@ -8046,9 +8046,9 @@ thingies@^2.5.0:\n   integrity sha512-s+2Bwztg6PhWUD7XMfeYm5qliDdSiZm7M7n8KjTkIsm3l/2lgVRc2/Gx/v+ZX8lT4FMA+i8aQvhcWylldc+ZNw==\n \n three@^0.181.0:\n-  version \"0.181.1\"\n-  resolved \"https://registry.yarnpkg.com/three/-/three-0.181.1.tgz#7c33995f097b8d42eda209b8dd49e2fb648cc53f\"\n-  integrity sha512-bz9xZUQMw3pJbjKy7roiwXWgAp+oVUa+4k5o0oBAQ+IFJuru1xzvtk63h6k72XZanXS/SgoEhV6927Vgazyq2w==\n+  version \"0.181.2\"\n+  resolved \"https://registry.yarnpkg.com/three/-/three-0.181.2.tgz#d54a8c8b4a409e346cbc60fed58244f1b382d6ea\"\n+  integrity sha512-k/CjiZ80bYss6Qs7/ex1TBlPD11whT9oKfT8oTGiHa34W4JRd1NiH/Tr1DbHWQ2/vMUypxksLnF2CfmlmM5XFQ==\n \n timers-ext@^0.1.7:\n   version \"0.1.8\""}, {"role": "assistant", "content": "chore(deps-dev): bump the dependencies group across 1 directory with 3 updates (#20147)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/02-guides/upgrading/version-16.mdx\n\ndiff --git a/docs/01-app/02-guides/upgrading/version-16.mdx b/docs/01-app/02-guides/upgrading/version-16.mdx\nindex 408905a25..f76bee581 100644\n--- a/docs/01-app/02-guides/upgrading/version-16.mdx\n+++ b/docs/01-app/02-guides/upgrading/version-16.mdx\n@@ -322,12 +322,11 @@ export default function Image({ params, id }) {\n }\n ```\n \n-Starting with **Next.js 16**, to align with the [Async Request APIs](#async-request-apis-breaking-change) change, these are also asynchronous.\n+Starting with **Next.js 16**, to align with the [Async Request APIs](#async-request-apis-breaking-change) change, the image generating function now receives `params` and `id` as promises. The `generateImageMetadata` function continues to receive synchronous `params`.\n \n ```js filename=\"app/shop/[slug]/opengraph-image.js\"\n-// Next.js 16 - asynchronous params access\n export async function generateImageMetadata({ params }) {\n-  const { slug } = await params\n+  const { slug } = params\n   return [{ id: '1' }, { id: '2' }]\n }"}, {"role": "assistant", "content": "docs: fix generateImageMetadata example to use normal params object (#85658)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " scripts/translate.py | 8 ++++++--\n 1 file changed, 6 insertions(+), 2 deletions(-)\n\ndiff --git a/scripts/translate.py b/scripts/translate.py\nindex 6ebd24f..66da46a 100644\n--- a/scripts/translate.py\n+++ b/scripts/translate.py\n@@ -1036,9 +1036,13 @@ def make_pr(\n     print(\"Creating PR\")\n     g = Github(github_token)\n     gh_repo = g.get_repo(github_repository)\n-    pr = gh_repo.create_pull(\n-        title=message, body=message, base=\"master\", head=branch_name\n+    body = (\n+        message\n+        + \"\\n\\nThis PR was created automatically using LLMs.\"\n+        + f\"\\n\\nIt uses the prompt file https://github.com/fastapi/fastapi/blob/master/docs/{language}/llm-prompt.md.\"\n+        + \"\\n\\nIn most cases, it's better to make PRs updating that file so that the LLM can do a better job generating the translations than suggesting changes in this PR.\"\n     )\n+    pr = gh_repo.create_pull(title=message, body=body, base=\"master\", head=branch_name)\n     print(f\"Created PR: {pr.number}\")\n     print(\"Finished\")\n ", "output": "feat(translate): add detailed body to auto-generated PRs", "metadata": {"id": "fastapi-3b1b4f03", "repository": "fastapi", "commit_hash": "3b1b4f034bebddb873d4bd8c1bb5f52aaae17240"}}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " docs/en/docs/release-notes.md | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/docs/en/docs/release-notes.md b/docs/en/docs/release-notes.md\nindex 08bc292..5498039 100644\n--- a/docs/en/docs/release-notes.md\n+++ b/docs/en/docs/release-notes.md\n@@ -13,6 +13,7 @@ hide:\n \n ### Translations\n \n+* 🌐 Update translations for es (update-outdated). PR [#14686](https://github.com/fastapi/fastapi/pull/14686) by [@tiangolo](https://github.com/tiangolo).\n * 🔧 Add LLM prompt file for Turkish, generated from the existing translations. PR [#14547](https://github.com/fastapi/fastapi/pull/14547) by [@tiangolo](https://github.com/tiangolo).\n * 🔧 Add LLM prompt file for Traditional Chinese, generated from the existing translations. PR [#14550](https://github.com/fastapi/fastapi/pull/14550) by [@tiangolo](https://github.com/tiangolo).\n * 🔧 Add LLM prompt file for Simplified Chinese, generated from the existing translations. PR [#14549](https://github.com/fastapi/fastapi/pull/14549) by [@tiangolo](https://github.com/tiangolo).", "output": "docs: update release notes with spanish translation", "metadata": {"id": "fastapi-f03a1502", "repository": "fastapi", "commit_hash": "f03a1502a0a72d466cf4b08c900b886bdda146c8"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/v3/reactivity/readonly.ts\n\ndiff --git a/src/v3/reactivity/readonly.ts b/src/v3/reactivity/readonly.ts\nindex 19179e02..933f910b 100644\n--- a/src/v3/reactivity/readonly.ts\n+++ b/src/v3/reactivity/readonly.ts\n@@ -69,7 +69,7 @@ function createReadonly(target: any, shallow: boolean) {\n     return existingProxy\n   }\n \n-  const proxy = {}\n+  const proxy = Object.create(Object.getPrototypeOf(target))\n   def(target, existingFlag, proxy)\n \n   def(proxy, ReactiveFlags.IS_READONLY, true)\ndiff --git a/test/unit/features/v3/reactivity/readonly.spec.ts b/test/unit/features/v3/reactivity/readonly.spec.ts\nindex ab4c52f7..11550ab5 100644\n--- a/test/unit/features/v3/reactivity/readonly.spec.ts\n+++ b/test/unit/features/v3/reactivity/readonly.spec.ts\n@@ -499,4 +499,25 @@ describe('reactivity/readonly', () => {\n     expect(obj.ror).toBe(true)\n     expect(toRaw(obj).ror).not.toBe(ror) // ref successfully replaced\n   })\n+\n+  test('compatiblity with classes', () => {\n+    const spy = vi.fn()\n+    class Foo {\n+      x = 1\n+      log() {\n+        spy(this.x)\n+      }\n+      change() {\n+        this.x++\n+      }\n+    }\n+    const foo = new Foo()\n+    const readonlyFoo = readonly(foo)\n+    readonlyFoo.log()\n+    expect(spy).toHaveBeenCalledWith(1)\n+\n+    readonlyFoo.change()\n+    expect(readonlyFoo.x).toBe(1)\n+    expect(`et operation on key \"x\" failed`).toHaveBeenWarned()\n+  })\n })"}, {"role": "assistant", "content": "fix(reactivity): readonly() compat with classes"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/compiler/parser.ts\n\ndiff --git a/src/compiler/parser.ts b/src/compiler/parser.ts\nindex c232999a4..59c96ecc5 100644\n--- a/src/compiler/parser.ts\n+++ b/src/compiler/parser.ts\n@@ -7498,8 +7498,9 @@ namespace Parser {\n         return nextToken() === SyntaxKind.StringLiteral;\n     }\n \n-    function nextTokenIsFromKeyword() {\n-        return nextToken() === SyntaxKind.FromKeyword;\n+    function nextTokenIsFromKeywordOrEqualsToken() {\n+        nextToken();\n+        return token() === SyntaxKind.FromKeyword || token() === SyntaxKind.EqualsToken;\n     }\n \n     function nextTokenIsIdentifierOrStringLiteralOnSameLine() {\n@@ -8335,7 +8336,7 @@ namespace Parser {\n         let isTypeOnly = false;\n         if (\n             identifier?.escapedText === \"type\" &&\n-            (token() !== SyntaxKind.FromKeyword || isIdentifier() && lookAhead(nextTokenIsFromKeyword)) &&\n+            (token() !== SyntaxKind.FromKeyword || isIdentifier() && lookAhead(nextTokenIsFromKeywordOrEqualsToken)) &&\n             (isIdentifier() || tokenAfterImportDefinitelyProducesImportDeclaration())\n         ) {\n             isTypeOnly = true;\ndiff --git a/tests/baselines/reference/importDefaultNamedType3.js b/tests/baselines/reference/importDefaultNamedType3.js\nnew file mode 100644\nindex 000000000..cd26f18e8\n--- /dev/null\n+++ b/tests/baselines/reference/importDefaultNamedType3.js\n@@ -0,0 +1,22 @@\n+//// [tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts] ////\n+\n+//// [a.ts]\n+export class A {}\n+\n+//// [b.ts]\n+import type from = require('./a');\n+\n+\n+//// [a.js]\n+\"use strict\";\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+exports.A = void 0;\n+var A = /** @class */ (function () {\n+    function A() {\n+    }\n+    return A;\n+}());\n+exports.A = A;\n+//// [b.js]\n+\"use strict\";\n+Object.defineProperty(exports, \"__esModule\", { value: true });\ndiff --git a/tests/baselines/reference/importDefaultNamedType3.symbols b/tests/baselines/reference/importDefaultNamedType3.symbols\nnew file mode 100644\nindex 000000000..285c4db25\n--- /dev/null\n+++ b/tests/baselines/reference/importDefaultNamedType3.symbols\n@@ -0,0 +1,10 @@\n+//// [tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts] ////\n+\n+=== /b.ts ===\n+import type from = require('./a');\n+>from : Symbol(from, Decl(b.ts, 0, 0))\n+\n+=== /a.ts ===\n+export class A {}\n+>A : Symbol(A, Decl(a.ts, 0, 0))\n+\ndiff --git a/tests/baselines/reference/importDefaultNamedType3.types b/tests/baselines/reference/importDefaultNamedType3.types\nnew file mode 100644\nindex 000000000..8dc3ddbfd\n--- /dev/null\n+++ b/tests/baselines/reference/importDefaultNamedType3.types\n@@ -0,0 +1,10 @@\n+//// [tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts] ////\n+\n+=== /b.ts ===\n+import type from = require('./a');\n+>from : typeof from\n+\n+=== /a.ts ===\n+export class A {}\n+>A : A\n+\ndiff --git a/tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts b/tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts\nnew file mode 100644\nindex 000000000..6a8602668\n--- /dev/null\n+++ b/tests/cases/conformance/externalModules/typeOnly/importDefaultNamedType3.ts\n@@ -0,0 +1,5 @@\n+// @Filename: /a.ts\n+export class A {}\n+\n+// @Filename: /b.ts\n+import type from = require('./a');"}, {"role": "assistant", "content": "fix(56567): import type from = require('foo') fails to parse (#56568)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " packages/react-server/src/ReactFlightReplyServer.js | 8 +++++++-\n 1 file changed, 7 insertions(+), 1 deletion(-)\n\ndiff --git a/packages/react-server/src/ReactFlightReplyServer.js b/packages/react-server/src/ReactFlightReplyServer.js\nindex 4d5a6da..88781cc 100644\n--- a/packages/react-server/src/ReactFlightReplyServer.js\n+++ b/packages/react-server/src/ReactFlightReplyServer.js\n@@ -133,14 +133,20 @@ ReactPromise.prototype.then = function <T>(\n         // Recursively check if the value is itself a ReactPromise and if so if it points\n         // back to itself. This helps catch recursive thenables early error.\n         let cycleProtection = 0;\n+        const visited = new Set<typeof ReactPromise>();\n         while (inspectedValue instanceof ReactPromise) {\n           cycleProtection++;\n-          if (inspectedValue === chunk || cycleProtection > 1000) {\n+          if (\n+            inspectedValue === chunk ||\n+            visited.has(inspectedValue) ||\n+            cycleProtection > 1000\n+          ) {\n             if (typeof reject === 'function') {\n               reject(new Error('Cannot have cyclic thenables.'));\n             }\n             return;\n           }\n+          visited.add(inspectedValue);\n           if (inspectedValue.status === INITIALIZED) {\n             inspectedValue = inspectedValue.value;\n           } else {", "output": "fix(react-server): improve cyclic thenable detection", "metadata": {"id": "react-b731fe28", "repository": "react", "commit_hash": "b731fe28cc492cb36c51c89866f5b63a3ffae2aa"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/recipes/WritingTests.md\n\ndiff --git a/docs/recipes/WritingTests.md b/docs/recipes/WritingTests.md\nindex ff59466c..67ba7e54 100644\n--- a/docs/recipes/WritingTests.md\n+++ b/docs/recipes/WritingTests.md\n@@ -354,6 +354,7 @@ export default connect(mapStateToProps)(App)\n To test it, we can use the `wrapper` option in React Testing Library's `render` function and export our own `render` function as explained in React Testing Library's [setup docs](https://testing-library.com/docs/react-testing-library/setup).\n \n Our `render` function can look like this:\n+\n ```js\n // test-utils.js\n import React from 'react'\n@@ -367,12 +368,12 @@ function render(\n     initialState,\n     store = createStore(reducer, initialState),\n     ...renderOptions\n-  } = {},\n+  } = {}\n ) {\n-  function Wrapper({children}) {\n+  function Wrapper({ children }) {\n     return <Provider store={store}>{children}</Provider>\n   }\n-  return rtlRender(ui, {wrapper: Wrapper, ...renderOptions})\n+  return rtlRender(ui, { wrapper: Wrapper, ...renderOptions })\n }\n \n // re-export everything\n@@ -382,6 +383,7 @@ export { render }\n ```\n \n And our test can use our exported `render` function:\n+\n ```js\n import React from 'react'\n // We're using our own custom render function and not RTL's render"}, {"role": "assistant", "content": "docs: Fix formatting for WritingTests (#3800)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .eslintrc.cjs\n\ndiff --git a/.eslintrc.cjs b/.eslintrc.cjs\nindex 512d5025..92431eb6 100644\n--- a/.eslintrc.cjs\n+++ b/.eslintrc.cjs\n@@ -34,6 +34,7 @@ module.exports = {\n     'plugin:import/errors',\n     'plugin:eslint-comments/recommended',\n     'plugin:prettier/recommended',\n+    'plugin:unicorn/recommended',\n   ],\n   globals: {\n     console: 'readonly',\n@@ -417,7 +418,7 @@ module.exports = {\n   parserOptions: {\n     sourceType: 'module',\n   },\n-  plugins: ['import', 'jsdoc', 'unicorn'],\n+  plugins: ['import', 'jsdoc'],\n   rules: {\n     'accessor-pairs': ['warn', {setWithoutGet: true}],\n     'block-scoped-var': 'off',\n@@ -625,13 +626,110 @@ module.exports = {\n     'wrap-regex': 'off',\n     yoda: 'off',\n \n-    'unicorn/explicit-length-check': 'error',\n-    'unicorn/no-array-for-each': 'error',\n-    'unicorn/no-negated-condition': 'error',\n-    'unicorn/numeric-separators-style': 'error',\n-    'unicorn/prefer-default-parameters': 'error',\n-    'unicorn/prefer-includes': 'error',\n-    'unicorn/template-indent': 'error',\n+    // TODO: turn most of these rules on at some point\n+    'unicorn/better-regex': 'off',\n+    'unicorn/catch-error-name': 'off',\n+    'unicorn/consistent-destructuring': 'off',\n+    'unicorn/consistent-function-scoping': 'off',\n+    'unicorn/custom-error-definition': 'off',\n+    'unicorn/empty-brace-spaces': 'off',\n+    'unicorn/error-message': 'off',\n+    'unicorn/escape-case': 'off',\n+    'unicorn/expiring-todo-comments': 'off',\n+    'unicorn/filename-case': 'off',\n+    'unicorn/import-style': 'off',\n+    'unicorn/new-for-builtins': 'off',\n+    'unicorn/no-abusive-eslint-disable': 'off',\n+    'unicorn/no-array-callback-reference': 'off',\n+    'unicorn/no-array-method-this-argument': 'off',\n+    'unicorn/no-array-push-push': 'off',\n+    'unicorn/no-array-reduce': 'off',\n+    'unicorn/no-await-expression-member': 'off',\n+    'unicorn/no-console-spaces': 'off',\n+    'unicorn/no-document-cookie': 'off',\n+    'unicorn/no-empty-file': 'off',\n+    'unicorn/no-for-loop': 'off',\n+    'unicorn/no-hex-escape': 'off',\n+    'unicorn/no-instanceof-array': 'off',\n+    'unicorn/no-invalid-remove-event-listener': 'off',\n+    'unicorn/no-keyword-prefix': 'off',\n+    'unicorn/no-lonely-if': 'off',\n+    'unicorn/no-nested-ternary': 'off',\n+    'unicorn/no-new-array': 'off',\n+    'unicorn/no-new-buffer': 'off',\n+    'unicorn/no-null': 'off',\n+    'unicorn/no-object-as-default-parameter': 'off',\n+    'unicorn/no-process-exit': 'off',\n+    'unicorn/no-static-only-class': 'off',\n+    'unicorn/no-thenable': 'off',\n+    'unicorn/no-this-assignment': 'off',\n+    'unicorn/no-typeof-undefined': 'off',\n+    'unicorn/no-unnecessary-await': 'off',\n+    'unicorn/no-unnecessary-polyfills': 'off',\n+    'unicorn/no-unreadable-array-destructuring': 'off',\n+    'unicorn/no-unreadable-iife': 'off',\n+    'unicorn/no-unused-properties': 'off',\n+    'unicorn/no-useless-fallback-in-spread': 'off',\n+    'unicorn/no-useless-length-check': 'off',\n+    'unicorn/no-useless-promise-resolve-reject': 'off',\n+    'unicorn/no-useless-spread': 'off',\n+    'unicorn/no-useless-switch-case': 'off',\n+    'unicorn/no-useless-undefined': 'off',\n+    'unicorn/no-zero-fractions': 'off',\n+    'unicorn/number-literal-case': 'off',\n+    'unicorn/prefer-add-event-listener': 'off',\n+    'unicorn/prefer-array-find': 'off',\n+    'unicorn/prefer-array-flat': 'off',\n+    'unicorn/prefer-array-flat-map': 'off',\n+    'unicorn/prefer-array-index-of': 'off',\n+    'unicorn/prefer-array-some': 'off',\n+    'unicorn/prefer-at': 'off',\n+    'unicorn/prefer-blob-reading-methods': 'off',\n+    'unicorn/prefer-code-point': 'off',\n+    'unicorn/prefer-date-now': 'off',\n+    'unicorn/prefer-dom-node-append': 'off',\n+    'unicorn/prefer-dom-node-dataset': 'off',\n+    'unicorn/prefer-dom-node-remove': 'off',\n+    'unicorn/prefer-dom-node-text-content': 'off',\n+    'unicorn/prefer-event-target': 'off',\n+    'unicorn/prefer-export-from': 'off',\n+    'unicorn/prefer-json-parse-buffer': 'off',\n+    'unicorn/prefer-keyboard-event-key': 'off',\n+    'unicorn/prefer-logical-operator-over-ternary': 'off',\n+    'unicorn/prefer-math-trunc': 'off',\n+    'unicorn/prefer-modern-dom-apis': 'off',\n+    'unicorn/prefer-modern-math-apis': 'off',\n+    'unicorn/prefer-module': 'off',\n+    'unicorn/prefer-native-coercion-functions': 'off',\n+    'unicorn/prefer-negative-index': 'off',\n+    'unicorn/prefer-node-protocol': 'off',\n+    'unicorn/prefer-number-properties': 'off',\n+    'unicorn/prefer-object-from-entries': 'off',\n+    'unicorn/prefer-optional-catch-binding': 'off',\n+    'unicorn/prefer-prototype-methods': 'off',\n+    'unicorn/prefer-query-selector': 'off',\n+    'unicorn/prefer-reflect-apply': 'off',\n+    'unicorn/prefer-regexp-test': 'off',\n+    'unicorn/prefer-set-has': 'off',\n+    'unicorn/prefer-set-size': 'off',\n+    'unicorn/prefer-spread': 'off',\n+    'unicorn/prefer-string-replace-all': 'off',\n+    'unicorn/prefer-string-slice': 'off',\n+    'unicorn/prefer-string-starts-ends-with': 'off',\n+    'unicorn/prefer-string-trim-start-end': 'off',\n+    'unicorn/prefer-switch': 'off',\n+    'unicorn/prefer-ternary': 'off',\n+    'unicorn/prefer-top-level-await': 'off',\n+    'unicorn/prefer-type-error': 'off',\n+    'unicorn/prevent-abbreviations': 'off',\n+    'unicorn/relative-url-style': 'off',\n+    'unicorn/require-array-join-separator': 'off',\n+    'unicorn/require-number-to-fixed-digits-argument': 'off',\n+    'unicorn/require-post-message-target-origin': 'off',\n+    'unicorn/string-content': 'off',\n+    'unicorn/switch-case-braces': 'off',\n+    'unicorn/text-encoding-identifier-case': 'off',\n+    'unicorn/throw-new-error': 'off',\n   },\n   settings: {\n     'import/ignore': ['react-native'],"}, {"role": "assistant", "content": "chore: opt out of unused unicorn ESLint rules (#14795)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_middle/src/mir/syntax.rs            | 25 +++---\n .../src/builder/matches/match_pair.rs              | 93 ++++++++++++----------\n 2 files changed, 67 insertions(+), 51 deletions(-)", "output": "refactor(mir): restructure match pair builder", "metadata": {"id": "rust-69f0a498", "repository": "rust", "commit_hash": "69f0a498ba504c42a3dedf0431c2b2b40c4e86f4"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n shell/renderer/electron_ipc_native.cc\n\ndiff --git a/shell/renderer/electron_ipc_native.cc b/shell/renderer/electron_ipc_native.cc\nindex 36396ad2..7fac851f 100644\n--- a/shell/renderer/electron_ipc_native.cc\n+++ b/shell/renderer/electron_ipc_native.cc\n@@ -4,6 +4,8 @@\n \n #include \"electron/shell/renderer/electron_ipc_native.h\"\n \n+#include <optional>\n+\n #include \"base/trace_event/trace_event.h\"\n #include \"shell/common/gin_converters/blink_converter.h\"\n #include \"shell/common/gin_converters/value_converter.h\"\n@@ -45,10 +47,9 @@ void InvokeIpcCallback(v8::Isolate* const isolate,\n \n   // Only set up the node::CallbackScope if there's a node environment.\n   // Sandboxed renderers don't have a node environment.\n-  std::unique_ptr<node::CallbackScope> callback_scope;\n-  if (node::Environment::GetCurrent(context)) {\n-    callback_scope = std::make_unique<node::CallbackScope>(\n-        isolate, ipcNative, node::async_context{0, 0});\n+  std::optional<node::CallbackScope> callback_scope;\n+  if (auto* env = node::Environment::GetCurrent(context)) {\n+    callback_scope.emplace(env, ipcNative, node::async_context{0, 0});\n   }\n \n   auto callback_key = gin::ConvertToV8(isolate, callback_name)"}, {"role": "assistant", "content": "perf: avoid a little extra work in `InvokeIpcCallback()` (#48456)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/stale.yml\n\ndiff --git a/.github/workflows/stale.yml b/.github/workflows/stale.yml\nindex 498489c0..9c387461 100644\n--- a/.github/workflows/stale.yml\n+++ b/.github/workflows/stale.yml\n@@ -17,7 +17,7 @@ jobs:\n         id: generate-token\n         with:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n-      - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # tag: v10.1.0\n+      - uses: actions/stale@997185467fa4f803885201cee163a9f38240193d # tag: v10.1.1\n         with:\n           repo-token: ${{ steps.generate-token.outputs.token }}\n           days-before-stale: 90\n@@ -41,7 +41,7 @@ jobs:\n         id: generate-token\n         with:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n-      - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # tag: v10.1.0\n+      - uses: actions/stale@997185467fa4f803885201cee163a9f38240193d # tag: v10.1.1\n         with:\n           repo-token: ${{ steps.generate-token.outputs.token }}\n           days-before-stale: -1"}, {"role": "assistant", "content": "build(deps): bump actions/stale from 10.1.0 to 10.1.1 (#49159)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/services/codefixes/requireInTs.ts\n\ndiff --git a/src/services/codefixes/requireInTs.ts b/src/services/codefixes/requireInTs.ts\nindex f087722db..500a88aad 100644\n--- a/src/services/codefixes/requireInTs.ts\n+++ b/src/services/codefixes/requireInTs.ts\n@@ -10,10 +10,12 @@ import {\n     factory,\n     first,\n     getAllowSyntheticDefaultImports,\n+    getQuotePreference,\n     getTokenAtPosition,\n     Identifier,\n     ImportSpecifier,\n     isIdentifier,\n+    isNoSubstitutionTemplateLiteral,\n     isObjectBindingPattern,\n     isRequireCall,\n     isVariableDeclaration,\n@@ -21,10 +23,12 @@ import {\n     NamedImports,\n     ObjectBindingPattern,\n     Program,\n+    QuotePreference,\n     SourceFile,\n     StringLiteralLike,\n     textChanges,\n     tryCast,\n+    UserPreferences,\n     VariableStatement,\n } from \"../_namespaces/ts.js\";\n \n@@ -33,7 +37,7 @@ const errorCodes = [Diagnostics.require_call_may_be_converted_to_an_import.code]\n registerCodeFix({\n     errorCodes,\n     getCodeActions(context) {\n-        const info = getInfo(context.sourceFile, context.program, context.span.start);\n+        const info = getInfo(context.sourceFile, context.program, context.span.start, context.preferences);\n         if (!info) {\n             return undefined;\n         }\n@@ -43,7 +47,7 @@ registerCodeFix({\n     fixIds: [fixId],\n     getAllCodeActions: context =>\n         codeFixAll(context, errorCodes, (changes, diag) => {\n-            const info = getInfo(diag.file, context.program, diag.start);\n+            const info = getInfo(diag.file, context.program, diag.start, context.preferences);\n             if (info) {\n                 doChange(changes, context.sourceFile, info);\n             }\n@@ -51,13 +55,13 @@ registerCodeFix({\n });\n \n function doChange(changes: textChanges.ChangeTracker, sourceFile: SourceFile, info: Info) {\n-    const { allowSyntheticDefaults, defaultImportName, namedImports, statement, required } = info;\n+    const { allowSyntheticDefaults, defaultImportName, namedImports, statement, moduleSpecifier } = info;\n     changes.replaceNode(\n         sourceFile,\n         statement,\n         defaultImportName && !allowSyntheticDefaults\n-            ? factory.createImportEqualsDeclaration(/*modifiers*/ undefined, /*isTypeOnly*/ false, defaultImportName, factory.createExternalModuleReference(required))\n-            : factory.createImportDeclaration(/*modifiers*/ undefined, factory.createImportClause(/*isTypeOnly*/ false, defaultImportName, namedImports), required, /*attributes*/ undefined),\n+            ? factory.createImportEqualsDeclaration(/*modifiers*/ undefined, /*isTypeOnly*/ false, defaultImportName, factory.createExternalModuleReference(moduleSpecifier))\n+            : factory.createImportDeclaration(/*modifiers*/ undefined, factory.createImportClause(/*isTypeOnly*/ false, defaultImportName, namedImports), moduleSpecifier, /*attributes*/ undefined),\n     );\n }\n \n@@ -66,25 +70,27 @@ interface Info {\n     readonly defaultImportName: Identifier | undefined;\n     readonly namedImports: NamedImports | undefined;\n     readonly statement: VariableStatement;\n-    readonly required: StringLiteralLike;\n+    readonly moduleSpecifier: StringLiteralLike;\n }\n \n-function getInfo(sourceFile: SourceFile, program: Program, pos: number): Info | undefined {\n+function getInfo(sourceFile: SourceFile, program: Program, pos: number, preferences: UserPreferences): Info | undefined {\n     const { parent } = getTokenAtPosition(sourceFile, pos);\n     if (!isRequireCall(parent, /*requireStringLiteralLikeArgument*/ true)) {\n         Debug.failBadSyntaxKind(parent);\n     }\n \n     const decl = cast(parent.parent, isVariableDeclaration);\n+    const quotePreference = getQuotePreference(sourceFile, preferences);\n     const defaultImportName = tryCast(decl.name, isIdentifier);\n     const namedImports = isObjectBindingPattern(decl.name) ? tryCreateNamedImportsFromObjectBindingPattern(decl.name) : undefined;\n     if (defaultImportName || namedImports) {\n+        const moduleSpecifier = first(parent.arguments);\n         return {\n             allowSyntheticDefaults: getAllowSyntheticDefaultImports(program.getCompilerOptions()),\n             defaultImportName,\n             namedImports,\n             statement: cast(decl.parent.parent, isVariableStatement),\n-            required: first(parent.arguments),\n+            moduleSpecifier: isNoSubstitutionTemplateLiteral(moduleSpecifier) ? factory.createStringLiteral(moduleSpecifier.text, quotePreference === QuotePreference.Single) : moduleSpecifier,\n         };\n     }\n }\ndiff --git a/tests/cases/fourslash/codeFixRequireInTs4.ts b/tests/cases/fourslash/codeFixRequireInTs4.ts\nnew file mode 100644\nindex 000000000..85a7ccb2a\n--- /dev/null\n+++ b/tests/cases/fourslash/codeFixRequireInTs4.ts\n@@ -0,0 +1,10 @@\n+/// <reference path='fourslash.ts' />\n+\n+// @Filename: /a.ts\n+////const foo = require(`foo`);\n+\n+verify.codeFix({\n+    description: ts.Diagnostics.Convert_require_to_import.message,\n+    newFileContent: 'import foo = require(\"foo\");',\n+});\n+\ndiff --git a/tests/cases/fourslash/codeFixRequireInTs5.ts b/tests/cases/fourslash/codeFixRequireInTs5.ts\nnew file mode 100644\nindex 000000000..8a45cf9a1\n--- /dev/null\n+++ b/tests/cases/fourslash/codeFixRequireInTs5.ts\n@@ -0,0 +1,8 @@\n+/// <reference path='fourslash.ts' />\n+\n+// @Filename: /a.ts\n+////const a = 1;\n+////const b = 2;\n+////const foo = require(`foo${a}${b}`);\n+\n+verify.not.codeFixAvailable();"}, {"role": "assistant", "content": "fix(59304): Convert to ESM uses template strings instead of string literals (#59306)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-core/src/errors/rewrite-stack-trace.ts\n\ndiff --git a/packages/babel-core/src/errors/rewrite-stack-trace.ts b/packages/babel-core/src/errors/rewrite-stack-trace.ts\nindex e47dc9ea0..20388e910 100644\n--- a/packages/babel-core/src/errors/rewrite-stack-trace.ts\n+++ b/packages/babel-core/src/errors/rewrite-stack-trace.ts\n@@ -44,12 +44,14 @@\n \n const ErrorToString = Function.call.bind(Error.prototype.toString);\n \n-const SUPPORTED = !!Error.captureStackTrace;\n+const SUPPORTED =\n+  !!Error.captureStackTrace &&\n+  Object.getOwnPropertyDescriptor(Error, \"stackTraceLimit\")?.writable === true;\n \n const START_HIDING = \"startHiding - secret - don't use this - v1\";\n const STOP_HIDING = \"stopHiding - secret - don't use this - v1\";\n \n-type CallSite = Parameters<typeof Error.prepareStackTrace>[1][number];\n+type CallSite = NodeJS.CallSite;\n \n const expectedErrors = new WeakSet<Error>();\n const virtualFrames = new WeakMap<Error, CallSite[]>();\ndiff --git a/packages/babel-core/test/errors-stacks.js b/packages/babel-core/test/errors-stacks.js\nindex aaca924b5..157688fe6 100644\n--- a/packages/babel-core/test/errors-stacks.js\n+++ b/packages/babel-core/test/errors-stacks.js\n@@ -1,7 +1,10 @@\n import * as babel from \"../lib/index.js\";\n \n-import { fileURLToPath } from \"url\";\n+import { commonJS, itGte } from \"$repo-utils\";\n import path from \"path\";\n+import { spawnSync } from \"child_process\";\n+\n+const { __dirname } = commonJS(import.meta.url);\n \n const replaceAll = \"\".replaceAll\n   ? Function.call.bind(\"\".replaceAll)\n@@ -70,12 +73,7 @@ function expectError(run) {\n   throw new Error(\"It should have thrown an error.\");\n }\n \n-const fixture = name =>\n-  path.join(\n-    path.dirname(fileURLToPath(import.meta.url)),\n-    \"fixtures/errors\",\n-    name,\n-  );\n+const fixture = name => path.join(__dirname, \"fixtures/errors\", name);\n \n describe(\"@babel/core errors\", function () {\n   it(\"error inside config function\", function () {\n@@ -283,4 +281,28 @@ describe(\"@babel/core errors\", function () {\n           at ... internal jest frames ...\"\n     `);\n   });\n+\n+  itGte(\"12.0.0\")(\n+    \"should not throw in `node --frozen-intrinsics`\",\n+    function () {\n+      expect(\n+        spawnSync(\n+          process.execPath,\n+          [\n+            \"--frozen-intrinsics\",\n+            \"--input-type=module\",\n+            \"-e\",\n+            `\n+        import * as babel from \"../lib/index.js\";\n+        babel.parseSync(\"foo;\", {\n+          root: String.raw\\`${fixture(\"valid\")}\\`,\n+        });\n+        console.log(\"%done%\");\n+        `,\n+          ],\n+          { cwd: __dirname },\n+        ).output + \"\",\n+      ).toContain(\"%done%\");\n+    },\n+  );\n });"}, {"role": "assistant", "content": "fix: Works correctly with `--frozen-intrinsics` (#15626)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/basics/Reducers.md\n\ndiff --git a/docs/basics/Reducers.md b/docs/basics/Reducers.md\nindex e59fcdff..4fa88b3f 100644\n--- a/docs/basics/Reducers.md\n+++ b/docs/basics/Reducers.md\n@@ -158,7 +158,7 @@ case COMPLETE_TODO:\n   })\n ```\n \n-Because we want to update a specific item in the array without resorting to mutations, we have to slice it before and after the item. If you find yourself often writing such operations, it’s a good idea to use a helper like [react-addons-update](https://facebook.github.io/react/docs/update.html), [updeep](https://github.com/substantial/updeep), or even a library like [Immutable](http://facebook.github.io/immutable-js/) that has native support for deep updates. Just remember to never assign to anything inside the `state` unless you clone it first.\n+Because we want to update a specific item in the array without resorting to mutations, we have to create a new array with the same items except the item at the index. If you find yourself often writing such operations, it’s a good idea to use a helper like [react-addons-update](https://facebook.github.io/react/docs/update.html), [updeep](https://github.com/substantial/updeep), or even a library like [Immutable](http://facebook.github.io/immutable-js/) that has native support for deep updates. Just remember to never assign to anything inside the `state` unless you clone it first.\n \n ## Splitting Reducers"}, {"role": "assistant", "content": "docs: fix surrounding text after changes in #1477"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n dist/vue.runtime.mjs\n\ndiff --git a/dist/vue.runtime.mjs b/dist/vue.runtime.mjs\nnew file mode 100644\nindex 00000000..3ac875cd\n--- /dev/null\n+++ b/dist/vue.runtime.mjs\n@@ -0,0 +1,75 @@\n+import Vue from './vue.runtime.common.js'\n+export default Vue\n+\n+// this should be kept in sync with src/v3/index.ts\n+export const {\n+  version,\n+\n+  // refs\n+  ref,\n+  shallowRef,\n+  isRef,\n+  toRef,\n+  toRefs,\n+  unref,\n+  proxyRefs,\n+  customRef,\n+  triggerRef,\n+  computed,\n+\n+  // reactive\n+  reactive,\n+  isReactive,\n+  isReadonly,\n+  isShallow,\n+  isProxy,\n+  shallowReactive,\n+  markRaw,\n+  toRaw,\n+  readonly,\n+  shallowReadonly,\n+\n+  // watch\n+  watch,\n+  watchEffect,\n+  watchPostEffect,\n+  watchSyncEffect,\n+\n+  // effectScope\n+  effectScope,\n+  onScopeDispose,\n+  getCurrentScope,\n+\n+  // provide / inject\n+  provide,\n+  inject,\n+\n+  // lifecycle\n+  onBeforeMount,\n+  onMounted,\n+  onBeforeUpdate,\n+  onUpdated,\n+  onUnmounted,\n+  onErrorCaptured,\n+  onActivated,\n+  onDeactivated,\n+  onServerPrefetch,\n+  onRenderTracked,\n+  onRenderTriggered,\n+\n+  // v2 only\n+  set,\n+  del,\n+\n+  // v3 compat\n+  h,\n+  getCurrentInstance,\n+  useSlots,\n+  useAttrs,\n+  mergeDefaults,\n+  nextTick,\n+  useCssModule,\n+  useCssVars,\n+  defineComponent,\n+  defineAsyncComponent\n+} = Vue\ndiff --git a/scripts/config.js b/scripts/config.js\nindex 851dc229..27a31849 100644\n--- a/scripts/config.js\n+++ b/scripts/config.js\n@@ -71,13 +71,6 @@ const builds = {\n     format: 'es',\n     banner\n   },\n-  // Runtime only ES modules build (for Node)\n-  'runtime-mjs': {\n-    entry: resolve('web/entry-runtime-esm.ts'),\n-    dest: resolve('dist/vue.runtime.mjs'),\n-    format: 'es',\n-    banner\n-  },\n   // Runtime+compiler ES modules build (for bundlers)\n   'full-esm': {\n     entry: resolve('web/entry-runtime-with-compiler-esm.ts'),\ndiff --git a/src/v3/index.ts b/src/v3/index.ts\nindex ec9d59e5..30b89c31 100644\n--- a/src/v3/index.ts\n+++ b/src/v3/index.ts\n@@ -1,3 +1,7 @@\n+/**\n+ * Note: also update dist/vue.runtime.mjs when adding new exports to this file.\n+ */\n+\n export const version: string = '__VERSION__'\n \n export {"}, {"role": "assistant", "content": "fix(build): fix mjs dual package hazard"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/02-guides/upgrading/codemods.mdx\n\ndiff --git a/docs/01-app/02-guides/upgrading/codemods.mdx b/docs/01-app/02-guides/upgrading/codemods.mdx\nindex dc4c166fc..cb2015aa3 100644\n--- a/docs/01-app/02-guides/upgrading/codemods.mdx\n+++ b/docs/01-app/02-guides/upgrading/codemods.mdx\n@@ -22,6 +22,43 @@ Replacing `<transform>` and `<path>` with appropriate values.\n - `--dry` Do a dry-run, no code will be edited\n - `--print` Prints the changed output for comparison\n \n+## Upgrade\n+\n+Upgrades your Next.js application, automatically running codemods and updating Next.js, React, and React DOM.\n+\n+```bash filename=\"Terminal\"\n+npx @next/codemod upgrade [revision]\n+```\n+\n+### Options\n+\n+- `revision` (optional): Specify the upgrade type (`patch`, `minor`, `major`), an NPM dist tag (e.g. `latest`, `canary`, `rc`), or an exact version (e.g. `15.0.0`). Defaults to `minor` for stable versions.\n+- `--verbose`: Show more detailed output during the upgrade process.\n+\n+For example:\n+\n+```bash filename=\"Terminal\"\n+# Upgrade to the latest patch (e.g. 16.0.7 -> 16.0.8)\n+npx @next/codemod upgrade patch\n+\n+# Upgrade to the latest minor (e.g. 15.3.7 -> 15.4.8). This is the default.\n+npx @next/codemod upgrade minor\n+\n+# Upgrade to the latest major (e.g. 15.5.7 -> 16.0.7)\n+npx @next/codemod upgrade major\n+\n+# Upgrade to a specific version\n+npx @next/codemod upgrade 16\n+\n+# Upgrade to the canary release\n+npx @next/codemod upgrade canary\n+```\n+\n+> **Good to know**:\n+>\n+> - If the target version is the same as or lower than your current version, the command exits without making changes.\n+> - During the upgrade, you may be prompted to choose which Next.js codemods to apply and run React 19 codemods if upgrading React.\n+\n ## Codemods\n \n ### 16.0\ndiff --git a/docs/01-app/03-api-reference/06-cli/next.mdx b/docs/01-app/03-api-reference/06-cli/next.mdx\nindex e83c9ba9e..002928a69 100644\n--- a/docs/01-app/03-api-reference/06-cli/next.mdx\n+++ b/docs/01-app/03-api-reference/06-cli/next.mdx\n@@ -187,7 +187,7 @@ To ensure `next-env.d.ts` is present before type-checking run `next typegen`. Th\n \n > **Good to know**: `next typegen` loads your Next.js config (`next.config.js`, `next.config.mjs`, or `next.config.ts`) using the production build phase. Ensure any required environment variables and dependencies are available so the config can load correctly.\n \n-## `next upgrade` options\n+### `next upgrade` options\n \n `next upgrade` upgrades your Next.js application to the latest version."}, {"role": "assistant", "content": "docs: codemode upgrade command (#87006)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n tooling/generate-runtime-code.js\n\ndiff --git a/tooling/generate-runtime-code.js b/tooling/generate-runtime-code.js\nindex 2804c7ce2..bf9a83216 100644\n--- a/tooling/generate-runtime-code.js\n+++ b/tooling/generate-runtime-code.js\n@@ -27,9 +27,29 @@ const files = [\"lib/util/semver.js\"];\n \t\twhile (match) {\n \t\t\tconst [fullMatch, name] = match;\n \t\t\tconst originalCode = exports[name].toString();\n+\t\t\t// NOTE: Runtime code exports must be written as arrow functions\n+\t\t\t// with a block body, in the form:\n+\t\t\t//\n+\t\t\t//   (args) => {\n+\t\t\t//     ...\n+\t\t\t//   }\n+\t\t\t//\n+\t\t\t// This constraint allows this script to reliably extract the\n+\t\t\t// function arguments and body for minification and runtime\n+\t\t\t// code generation. Do not use function declarations or\n+\t\t\t// expression-bodied arrows here.\n+\n \t\t\tconst header =\n \t\t\t\t/** @type {RegExpExecArray} */\n \t\t\t\t(/^\\(?([^=)]+)\\)?\\s=> \\{/.exec(originalCode));\n+\n+\t\t\tif (!header) {\n+\t\t\t\tthrow new Error(\n+\t\t\t\t\t`Runtime export \"${name}\" in ${file} must be an arrow function ` +\n+\t\t\t\t\t\t\"with a block body: (args) => { ... }\"\n+\t\t\t\t);\n+\t\t\t}\n+\n \t\t\tconst body = originalCode.slice(header[0].length, -1);\n \t\t\tconst result = await terser.minify(\n \t\t\t\t{"}, {"role": "assistant", "content": "refactor: clarify arrow-function requirement for runtime code exports (#20295)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/compiler-sfc/src/compileScript.ts\n\ndiff --git a/packages/compiler-sfc/src/compileScript.ts b/packages/compiler-sfc/src/compileScript.ts\nindex 8039b41e..abb6d8b1 100644\n--- a/packages/compiler-sfc/src/compileScript.ts\n+++ b/packages/compiler-sfc/src/compileScript.ts\n@@ -1125,7 +1125,7 @@ export function compileScript(\n       startOffset,\n       `\\nconst ${propsIdentifier} = __props${\n         propsTypeDecl ? ` as ${genSetupPropsType(propsTypeDecl)}` : ``\n-      }\\n`\n+      };\\n`\n     )\n   }\n   if (propsDestructureRestId) {\n@@ -1133,7 +1133,7 @@ export function compileScript(\n       startOffset,\n       `\\nconst ${propsDestructureRestId} = ${helper(\n         `createPropsRestProxy`\n-      )}(__props, ${JSON.stringify(Object.keys(propsDestructuredBindings))})\\n`\n+      )}(__props, ${JSON.stringify(Object.keys(propsDestructuredBindings))});\\n`\n     )\n   }\n \ndiff --git a/packages/compiler-sfc/test/__snapshots__/compileScript.spec.ts.snap b/packages/compiler-sfc/test/__snapshots__/compileScript.spec.ts.snap\nindex 594c909e..e9046ea3 100644\n--- a/packages/compiler-sfc/test/__snapshots__/compileScript.spec.ts.snap\n+++ b/packages/compiler-sfc/test/__snapshots__/compileScript.spec.ts.snap\n@@ -212,7 +212,7 @@ export default {\n   props: propsModel,\n   setup(__props) {\n \n-const props = __props\n+const props = __props;\n \n     \n     \n@@ -229,7 +229,7 @@ export default {\n   props: {},\n   setup(__props) {\n \n-const props = __props\n+const props = __props;\n \n     \n return { props, x }\n@@ -245,7 +245,7 @@ exports[`SFC compile <script setup> > defineProps() 1`] = `\n },\n   setup(__props) {\n \n-const props = __props\n+const props = __props;\n \n \n const bar = 1\n@@ -262,7 +262,7 @@ exports[`SFC compile <script setup> > defineProps/defineEmits in multi-variable\n   emits: ['a'],\n   setup(__props, { emit }) {\n \n-const props = __props\n+const props = __props;\n \n     \n     \n@@ -278,7 +278,7 @@ exports[`SFC compile <script setup> > defineProps/defineEmits in multi-variable\n   emits: ['a'],\n   setup(__props, { emit }) {\n \n-const props = __props\n+const props = __props;\n \n     const a = 1;\n     \n@@ -835,7 +835,7 @@ export default /*#__PURE__*/_defineComponent({\n   emits: ['a', 'b'],\n   setup(__props, { emit }) {\n \n-const props = __props\n+const props = __props;\n \n \n \n@@ -924,7 +924,7 @@ const props = __props as {\n         foo?: string\n         bar?: number\n         baz: boolean\n-      }\n+      };\n \n       \n       \n@@ -946,7 +946,7 @@ export default /*#__PURE__*/_defineComponent({\n   },\n   setup(__props: any) {\n \n-const props = __props as { foo: string, bar?: number, baz: boolean, qux(): number }\n+const props = __props as { foo: string, bar?: number, baz: boolean, qux(): number };"}, {"role": "assistant", "content": "fix(compiler-sfc): add semicolon after `defineProps` statement (#12879)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-preset-env/src/index.ts\n\ndiff --git a/packages/babel-preset-env/src/index.ts b/packages/babel-preset-env/src/index.ts\nindex 682f5fb1f..e6e6f7a63 100644\n--- a/packages/babel-preset-env/src/index.ts\n+++ b/packages/babel-preset-env/src/index.ts\n@@ -64,7 +64,7 @@ const pluginsListWithProposals = Object.assign(\n   pluginsList,\n   pluginsBugfixesList,\n );\n-const pluginsListWithuotProposals = filterStageFromList(\n+const pluginsListWithoutProposals = filterStageFromList(\n   pluginsListWithProposals,\n   proposalPlugins,\n );\n@@ -392,7 +392,7 @@ option \\`forceAllTransforms: true\\` instead.\n     process.env.BABEL_8_BREAKING || bugfixes\n       ? shippedProposals\n         ? pluginsListWithProposals\n-        : pluginsListWithuotProposals\n+        : pluginsListWithoutProposals\n       : shippedProposals\n         ? pluginsListNoBugfixesWithProposals\n         : pluginsListNoBugfixesWithoutProposals;"}, {"role": "assistant", "content": "chore: Fix typo in variable name (#17535)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .mailmap                                           |   1 +\n INSTALL.md                                         |   2 +-\n compiler/rustc_attr_parsing/src/attributes/cfg.rs  |   1 -\n compiler/rustc_attr_parsing/src/attributes/doc.rs  |   6 -\n compiler/rustc_attr_parsing/src/parser.rs          |   8 +-\n compiler/rustc_borrowck/src/type_check/mod.rs      |  67 +--\n compiler/rustc_builtin_macros/messages.ftl         |   2 +\n compiler/rustc_builtin_macros/src/eii.rs           |  94 ++--\n compiler/rustc_builtin_macros/src/errors.rs        |  10 +\n compiler/rustc_codegen_llvm/src/mono_item.rs       |   2 +-\n compiler/rustc_codegen_llvm/src/va_arg.rs          |   9 -\n compiler/rustc_hir_analysis/src/collect.rs         |   8 +-\n .../src/errors/wrong_number_of_generic_args.rs     |   3 +\n .../src/hir_ty_lowering/bounds.rs                  |  35 +-\n .../rustc_hir_analysis/src/hir_ty_lowering/mod.rs  | 136 +++--\n compiler/rustc_hir_analysis/src/lib.rs             |   6 +-\n compiler/rustc_hir_typeck/src/expr.rs              |   4 +-\n compiler/rustc_hir_typeck/src/fn_ctxt/_impl.rs     |  13 +-\n compiler/rustc_hir_typeck/src/method/confirm.rs    |   7 +-\n compiler/rustc_parse/src/parser/generics.rs        |  26 +-\n compiler/rustc_parse/src/parser/item.rs            |   1 +\n compiler/rustc_resolve/src/diagnostics.rs          |   4 +-\n compiler/rustc_resolve/src/imports.rs              |  23 +-\n compiler/rustc_span/src/symbol.rs                  |   1 -\n compiler/rustc_target/src/asm/mod.rs               |   2 +-\n compiler/rustc_target/src/callconv/mod.rs          |   2 +-\n compiler/rustc_target/src/spec/mod.rs              |   7 +-\n compiler/rustc_target/src/target_features.rs       |   8 +-\n library/std/src/sys/thread/unix.rs                 |   9 +\n src/bootstrap/Cargo.toml                           |   2 +-\n src/build_helper/Cargo.toml                        |   7 +-\n src/build_helper/src/lib.rs                        |   1 +\n src/ci/citool/Cargo.toml                           |   2 +-\n src/librustdoc/clean/mod.rs                        |  50 +-\n src/librustdoc/passes/collect_intra_doc_links.rs   | 624 +++++++++++----------\n src/tools/miri/src/shims/alloc.rs                  |   1 -\n src/tools/opt-dist/Cargo.toml                      |   2 +-\n tests/rustdoc-html/intra-doc/adt-through-alias.rs  |  71 +++\n tests/rustdoc-html/intra-doc/associated-items.rs   |   9 +-\n .../associated-const-bindings/ambiguity.stderr     |   6 +\n tests/ui/const-generics/incorrect-const-param.rs   |  45 ++\n .../ui/const-generics/incorrect-const-param.stderr |  70 +++\n .../mgca/tuple_expr_arg_bad-issue-151048.rs        |   8 +\n .../mgca/tuple_expr_arg_bad-issue-151048.stderr    |   8 +\n tests/ui/eii/error_statement_position.rs           |  15 +-\n tests/ui/eii/error_statement_position.stderr       |  13 +-\n tests/ui/generics/wrong-number-of-args-in-macro.rs |  15 +\n .../generics/wrong-number-of-args-in-macro.stderr  |  44 ++\n tests/ui/hygiene/cross-crate-redefine.rs           |   2 +-\n tests/ui/hygiene/cross-crate-redefine.stderr       |   7 +-\n tests/ui/imports/overwrite-deep-glob.rs            |  22 +\n tests/ui/imports/overwrite-deep-glob.stderr        |  12 +\n tests/ui/imports/overwrite-different-ambig-2.rs    |  24 +\n .../ui/imports/overwrite-different-ambig-2.stderr  |  49 ++\n tests/ui/imports/overwrite-different-ambig.rs      |  25 +\n tests/ui/imports/overwrite-different-vis.rs        |  21 +\n .../imports/overwrite-different-warn-ambiguity.rs  |  28 +\n .../macro/kw-in-const-item-pos-recovery-149692.rs  |  11 +\n .../kw-in-const-item-pos-recovery-149692.stderr    |  11 +\n .../parser/macro/kw-in-item-pos-recovery-149692.rs |  19 +\n .../macro/kw-in-item-pos-recovery-149692.stderr    |  29 +\n 61 files changed, 1140 insertions(+), 610 deletions(-)", "output": "refactor: update compiler internals and improve intra-doc links", "metadata": {"id": "rust-b6fdaf2a", "repository": "rust", "commit_hash": "b6fdaf2a15736cbccf248b532f48e33179614d40"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n eslint.config.js\n\ndiff --git a/eslint.config.js b/eslint.config.js\nindex 3f42ab3a..5671d604 100644\n--- a/eslint.config.js\n+++ b/eslint.config.js\n@@ -125,7 +125,7 @@ module.exports = defineConfig([\n \t\trules: {\n \t\t\t\"eslint-plugin/prefer-placeholders\": \"error\",\n \t\t\t\"eslint-plugin/prefer-replace-text\": \"error\",\n-\t\t\t\"eslint-plugin/report-message-format\": [\"error\", \"[^a-z].*\\\\.$\"],\n+\t\t\t\"eslint-plugin/report-message-format\": [\"error\", \"^[^a-z].*\\\\.$\"],\n \t\t\t\"eslint-plugin/require-meta-docs-description\": [\n \t\t\t\t\"error\",\n \t\t\t\t{ pattern: \"^(Enforce|Require|Disallow) .+[^. ]$\" },\ndiff --git a/lib/rules/no-eval.js b/lib/rules/no-eval.js\nindex 5d75097a..e8ae2092 100644\n--- a/lib/rules/no-eval.js\n+++ b/lib/rules/no-eval.js\n@@ -65,7 +65,7 @@ module.exports = {\n \t\t],\n \n \t\tmessages: {\n-\t\t\tunexpected: \"eval can be harmful.\",\n+\t\t\tunexpected: \"`eval` can be harmful.\",\n \t\t},\n \t},"}, {"role": "assistant", "content": "refactor: correct regex for `eslint-plugin/report-message-format` (#20300)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/rules/complexity.js\n\ndiff --git a/lib/rules/complexity.js b/lib/rules/complexity.js\nindex f31586e9..23a018b9 100644\n--- a/lib/rules/complexity.js\n+++ b/lib/rules/complexity.js\n@@ -68,6 +68,7 @@ module.exports = {\n \t},\n \n \tcreate(context) {\n+\t\tconst sourceCode = context.sourceCode;\n \t\tconst option = context.options[0];\n \t\tlet threshold = THRESHOLD_DEFAULT;\n \t\tlet VARIANT = \"classic\";\n@@ -177,12 +178,10 @@ module.exports = {\n \t\t\t\t\t\tname = \"class field initializer\";\n \t\t\t\t\t} else if (codePath.origin === \"class-static-block\") {\n \t\t\t\t\t\tname = \"class static block\";\n+\t\t\t\t\t\tloc = sourceCode.getFirstToken(node).loc;\n \t\t\t\t\t} else {\n \t\t\t\t\t\tname = astUtils.getFunctionNameWithKind(node);\n-\t\t\t\t\t\tloc = astUtils.getFunctionHeadLoc(\n-\t\t\t\t\t\t\tnode,\n-\t\t\t\t\t\t\tcontext.sourceCode,\n-\t\t\t\t\t\t);\n+\t\t\t\t\t\tloc = astUtils.getFunctionHeadLoc(node, sourceCode);\n \t\t\t\t\t}\n \n \t\t\t\t\tcontext.report({\ndiff --git a/tests/lib/rules/complexity.js b/tests/lib/rules/complexity.js\nindex ce16c77d..3b3bb61a 100644\n--- a/tests/lib/rules/complexity.js\n+++ b/tests/lib/rules/complexity.js\n@@ -805,7 +805,7 @@ ruleTester.run(\"complexity\", rule, {\n \t\t\t\t{\n \t\t\t\t\t...makeError(\"Class static block\", 4, 3),\n \t\t\t\t\tcolumn: 11,\n-\t\t\t\t\tendColumn: 39,\n+\t\t\t\t\tendColumn: 17,\n \t\t\t\t},\n \t\t\t],\n \t\t},\n@@ -817,7 +817,7 @@ ruleTester.run(\"complexity\", rule, {\n \t\t\t\t{\n \t\t\t\t\t...makeError(\"Class static block\", 4, 3),\n \t\t\t\t\tcolumn: 35,\n-\t\t\t\t\tendColumn: 63,\n+\t\t\t\t\tendColumn: 41,\n \t\t\t\t},\n \t\t\t],\n \t\t},\n@@ -829,12 +829,12 @@ ruleTester.run(\"complexity\", rule, {\n \t\t\t\t{\n \t\t\t\t\t...makeError(\"Class static block\", 4, 3),\n \t\t\t\t\tcolumn: 11,\n-\t\t\t\t\tendColumn: 39,\n+\t\t\t\t\tendColumn: 17,\n \t\t\t\t},\n \t\t\t\t{\n \t\t\t\t\t...makeError(\"Class static block\", 4, 3),\n \t\t\t\t\tcolumn: 40,\n-\t\t\t\t\tendColumn: 68,\n+\t\t\t\t\tendColumn: 46,\n \t\t\t\t},\n \t\t\t],\n \t\t},"}, {"role": "assistant", "content": "feat: update `complexity` rule to highlight only static block header (#20245)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/core/vdom/modules/directives.ts\n\ndiff --git a/src/core/vdom/modules/directives.ts b/src/core/vdom/modules/directives.ts\nindex 0dc61e92..7d475de1 100644\n--- a/src/core/vdom/modules/directives.ts\n+++ b/src/core/vdom/modules/directives.ts\n@@ -102,7 +102,10 @@ function normalizeDirectives(\n       dir.modifiers = emptyModifiers\n     }\n     res[getRawDirName(dir)] = dir\n-    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true)\n+    if (vm._setupState && vm._setupState.__sfc) {\n+      dir.def = resolveAsset(vm, '_setupState', 'v-' + dir.name)\n+    }\n+    dir.def = dir.def || resolveAsset(vm.$options, 'directives', dir.name, true)\n   }\n   // $flow-disable-line\n   return res\ndiff --git a/test/unit/features/v3/apiSetup.spec.ts b/test/unit/features/v3/apiSetup.spec.ts\nindex f3c152b4..44044ed2 100644\n--- a/test/unit/features/v3/apiSetup.spec.ts\n+++ b/test/unit/features/v3/apiSetup.spec.ts\n@@ -233,4 +233,18 @@ describe('api: setup context', () => {\n     await nextTick()\n     expect(vm.$el.outerHTML).toMatch(`<div>1</div>`)\n   })\n+\n+  it('directive resolution', () => {\n+    const spy = vi.fn()\n+    new Vue({\n+      setup: () => ({\n+        __sfc: true,\n+        vDir: {\n+          inserted: spy\n+        }\n+      }),\n+      template: `<div v-dir />`\n+    }).$mount()\n+    expect(spy).toHaveBeenCalled()\n+  })\n })"}, {"role": "assistant", "content": "feat: directive resolution for `<script setup>`"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/common/api/net-client-request.ts\n\ndiff --git a/lib/common/api/net-client-request.ts b/lib/common/api/net-client-request.ts\nindex a2682da6..057f0390 100644\n--- a/lib/common/api/net-client-request.ts\n+++ b/lib/common/api/net-client-request.ts\n@@ -427,9 +427,8 @@ export class ClientRequest extends Writable implements Electron.ClientRequest {\n     this._started = true;\n     const stringifyValues = (obj: Record<string, { name: string, value: string | string[] }>) => {\n       const ret: Record<string, string> = {};\n-      for (const k of Object.keys(obj)) {\n-        const kv = obj[k];\n-        ret[kv.name] = kv.value.toString();\n+      for (const { name, value } of Object.values(obj)) {\n+        ret[name] = value.toString();\n       }\n       return ret;\n     };"}, {"role": "assistant", "content": "refactor: use Object.values() instead of Object.keys() in stringifyValues() (#48741)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/compiler-sfc/package.json\n\ndiff --git a/packages/compiler-sfc/package.json b/packages/compiler-sfc/package.json\nindex d4081bd5..9565e724 100644\n--- a/packages/compiler-sfc/package.json\n+++ b/packages/compiler-sfc/package.json\n@@ -30,5 +30,8 @@\n     \"pug\": \"^3.0.2\",\n     \"sass\": \"^1.52.3\",\n     \"stylus\": \"^0.58.1\"\n+  },\n+  \"optionalDependencies\": {\n+    \"prettier\": \"^1.18.2 || ^2.0.0\"\n   }\n }\ndiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml\nindex 2cd29f99..d8f6b8a9 100644\n--- a/pnpm-lock.yaml\n+++ b/pnpm-lock.yaml\n@@ -150,6 +150,10 @@ importers:\n       source-map:\n         specifier: ^0.6.1\n         version: 0.6.1\n+    optionalDependencies:\n+      prettier:\n+        specifier: ^1.18.2 || ^2.0.0\n+        version: 2.7.1\n     devDependencies:\n       '@babel/types':\n         specifier: ^7.19.4\n@@ -5254,7 +5258,6 @@ packages:\n     resolution: {integrity: sha512-ujppO+MkdPqoVINuDFDRLClm7D78qbDt0/NR+wp5FqEZOoTNAjPHWj17QRhu7geIHJfcNhRk1XVQmF8Bp3ye+g==}\n     engines: {node: '>=10.13.0'}\n     hasBin: true\n-    dev: true\n \n   /pretty-format@29.7.0:\n     resolution: {integrity: sha512-Pdlw/oPxN+aXdmM9R00JVC9WVFoCLTKJvDVLgmJ+qAffBMxsV85l/Lu7sNx4zSzPyoL2euImuEwHhOXdEgNFZQ==}"}, {"role": "assistant", "content": "chore(compiler-sfc): specify prettier version (#13053)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-traverse/src/scope/index.ts\n\ndiff --git a/packages/babel-traverse/src/scope/index.ts b/packages/babel-traverse/src/scope/index.ts\nindex 60383bd91..ba69e126d 100644\n--- a/packages/babel-traverse/src/scope/index.ts\n+++ b/packages/babel-traverse/src/scope/index.ts\n@@ -242,6 +242,15 @@ function resetScope(scope: Scope) {\n   scope.globals = Object.create(null);\n }\n \n+function isAnonymousFunctionExpression(\n+  path: NodePath,\n+): path is NodePath<t.FunctionExpression | t.ArrowFunctionExpression> {\n+  return (\n+    (path.isFunctionExpression() && !path.node.id) ||\n+    path.isArrowFunctionExpression()\n+  );\n+}\n+\n interface CollectVisitorState {\n   assignments: NodePath<t.AssignmentExpression>[];\n   references: NodePath<t.Identifier | t.JSXIdentifier>[];\n@@ -1104,9 +1113,7 @@ class Scope {\n       !init &&\n       !unique &&\n       (kind === \"var\" || kind === \"let\") &&\n-      path.isFunction() &&\n-      // @ts-expect-error ArrowFunctionExpression never has a name\n-      !path.node.name &&\n+      isAnonymousFunctionExpression(path) &&\n       isCallExpression(path.parent, { callee: path.node }) &&\n       path.parent.arguments.length <= path.node.params.length &&\n       isIdentifier(id)\ndiff --git a/packages/babel-traverse/test/scope.js b/packages/babel-traverse/test/scope.js\nindex d6c96d5e6..5d41f1bff 100644\n--- a/packages/babel-traverse/test/scope.js\n+++ b/packages/babel-traverse/test/scope.js\n@@ -1039,6 +1039,85 @@ describe(\"scope\", () => {\n       `);\n       expect(program.scope.hasOwnBinding(\"ref\")).toBe(true);\n     });\n+    it(\"registers the new binding within IIFunctionExpression when it has no arguments\", () => {\n+      const program = getPath(\"(function(a, b) {})()\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(\n+        `\"(function (a, b, ref) {})();\"`,\n+      );\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+    it(\"registers the new binding within IIFunctionExpression when it has same arguments with parameters\", () => {\n+      const program = getPath(\"(function(a, b) {})(0, 0)\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(\n+        `\"(function (a, b, ref) {})(0, 0);\"`,\n+      );\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+    it(\"registers the new binding within IIArrowFunctionExpression when it has no arguments\", () => {\n+      const program = getPath(\"((a, b) => {})()\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(\n+        `\"((a, b, ref) => {})();\"`,\n+      );\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+    it(\"registers the new binding within IIArrowFunctionExpression when it has same arguments with parameters\", () => {\n+      const program = getPath(\"((a, b) => {})(0, 0)\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(\n+        `\"((a, b, ref) => {})(0, 0);\"`,\n+      );\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+\n+    it(\"should not register the new binding within IIFunctionExpression when it has a function name\", () => {\n+      const program = getPath(\"(function f(a, b = f.length) {})()\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(`\n+        \"(function f(a, b = f.length) {\n+          var ref;\n+        })();\"\n+      `);\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+    it(\"should not register the new binding within IIFunctionExpression when it has more arguments than parameters\", () => {\n+      const program = getPath(\"(function() { arguments.length })(0)\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(`\n+        \"(function () {\n+          var ref;\n+          arguments.length;\n+        })(0);\"\n+      `);\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n+    it(\"should not register the new binding within IIArrowFunctionExpression when it has more arguments than parameters\", () => {\n+      const program = getPath(\"(() => { arguments.length })(0)\");\n+      const functionBody = program.get(\"body.0.expression.callee.body\");\n+      functionBody.scope.push({ id: t.identifier(\"ref\") });\n+      expect(program.toString()).toMatchInlineSnapshot(`\n+        \"(() => {\n+          var ref;\n+          arguments.length;\n+        })(0);\"\n+      `);\n+      expect(functionBody.scope.hasOwnBinding(\"ref\")).toBe(true);\n+      expect(program.scope.hasOwnBinding(\"ref\")).toBe(false);\n+    });\n   });\n \n   describe(\"rename\", () => {"}, {"role": "assistant", "content": "fix: ensure scope.push register in anonymous fn (#17504)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n shell/browser/api/electron_api_service_worker_main.h\n\ndiff --git a/shell/browser/api/electron_api_service_worker_main.h b/shell/browser/api/electron_api_service_worker_main.h\nindex 9cd79653..c8e4ed59 100644\n--- a/shell/browser/api/electron_api_service_worker_main.h\n+++ b/shell/browser/api/electron_api_service_worker_main.h\n@@ -16,7 +16,6 @@\n #include \"mojo/public/cpp/bindings/associated_remote.h\"\n #include \"mojo/public/cpp/bindings/pending_receiver.h\"\n #include \"mojo/public/cpp/bindings/remote.h\"\n-#include \"shell/browser/event_emitter_mixin.h\"\n #include \"shell/common/api/api.mojom.h\"\n #include \"shell/common/gin_helper/constructible.h\"\n #include \"shell/common/gin_helper/pinnable.h\"\n@@ -80,7 +79,6 @@ struct ServiceWorkerKey {\n // the default StoragePartition for the associated BrowserContext.\n class ServiceWorkerMain final\n     : public gin_helper::DeprecatedWrappable<ServiceWorkerMain>,\n-      public gin_helper::EventEmitterMixin<ServiceWorkerMain>,\n       public gin_helper::Pinnable<ServiceWorkerMain>,\n       public gin_helper::Constructible<ServiceWorkerMain> {\n  public:"}, {"role": "assistant", "content": "refactor: avoid unused inheritance in ServiceWorkerMain (#48279)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/tutorial/security.md\n\ndiff --git a/docs/tutorial/security.md b/docs/tutorial/security.md\nindex 81b4ce3c..8cbb2623 100644\n--- a/docs/tutorial/security.md\n+++ b/docs/tutorial/security.md\n@@ -118,13 +118,6 @@ You should at least follow these steps to improve the security of your applicati\n 19. [Check which fuses you can change](#19-check-which-fuses-you-can-change)\n 20. [Do not expose Electron APIs to untrusted web content](#20-do-not-expose-electron-apis-to-untrusted-web-content)\n \n-To automate the detection of misconfigurations and insecure patterns, it is\n-possible to use\n-[Electronegativity](https://github.com/doyensec/electronegativity). For\n-additional details on potential weaknesses and implementation bugs when\n-developing applications using Electron, please refer to this\n-[guide for developers and auditors](https://doyensec.com/resources/us-17-Carettoni-Electronegativity-A-Study-Of-Electron-Security-wp.pdf).\n-\n ### 1. Only load secure content\n \n Any resources not included with your application should be loaded using a"}, {"role": "assistant", "content": "docs: remove electronegativity (#48878)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/01-getting-started/01-installation.mdx\n\ndiff --git a/docs/01-app/01-getting-started/01-installation.mdx b/docs/01-app/01-getting-started/01-installation.mdx\nindex 4d15522ac..d21cc60e0 100644\n--- a/docs/01-app/01-getting-started/01-installation.mdx\n+++ b/docs/01-app/01-getting-started/01-installation.mdx\n@@ -45,10 +45,21 @@ bun dev\n \n ## System requirements\n \n-Before you begin, make sure your system meets the following requirements:\n+Before you begin, make sure your development environment meets the following requirements:\n \n-- [Node.js 20.9](https://nodejs.org/) or later.\n-- macOS, Windows (including WSL), or Linux.\n+- Minimum Node.js version: [20.9](https://nodejs.org/)\n+- Operating systems: macOS, Windows (including WSL), and Linux.\n+\n+## Supported browsers\n+\n+Next.js supports modern browsers with zero configuration.\n+\n+- Chrome 111+\n+- Edge 111+\n+- Firefox 111+\n+- Safari 16.4+\n+\n+Learn more about [browser support](/docs/architecture/supported-browsers), including how to configure polyfills and target specific browsers.\n \n ## Create with the CLI"}, {"role": "assistant", "content": "docs: keywords in system reqs and add browserslist (#85838)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/cache/PackFileCacheStrategy.js\n\ndiff --git a/lib/cache/PackFileCacheStrategy.js b/lib/cache/PackFileCacheStrategy.js\nindex da7f7c9d6..779c54aec 100644\n--- a/lib/cache/PackFileCacheStrategy.js\n+++ b/lib/cache/PackFileCacheStrategy.js\n@@ -51,6 +51,7 @@ class PackContainer {\n \t\tresolveResults,\n \t\tresolveBuildDependenciesSnapshot\n \t) {\n+\t\t/** @type {Pack | (() => Pack) } */\n \t\tthis.data = data;\n \t\tthis.version = version;\n \t\tthis.buildSnapshot = buildSnapshot;\n@@ -1286,8 +1287,8 @@ class PackFileCacheStrategy {\n \t\t\t\t\t\tif (buildSnapshotValid && resolveValid) {\n \t\t\t\t\t\t\tlogger.time(\"restore cache content metadata\");\n \t\t\t\t\t\t\tconst d =\n-\t\t\t\t\t\t\t\t/** @type {PackContainer & { data: () => Pack }} */\n-\t\t\t\t\t\t\t\t(packContainer).data();\n+\t\t\t\t\t\t\t\t/** @type {() => Pack} */\n+\t\t\t\t\t\t\t\t(packContainer.data)();\n \t\t\t\t\t\t\tlogger.timeEnd(\"restore cache content metadata\");\n \t\t\t\t\t\t\treturn d;\n \t\t\t\t\t\t}"}, {"role": "assistant", "content": "fix: types"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-generator/src/generators/jsx.ts\n\ndiff --git a/packages/babel-generator/src/generators/jsx.ts b/packages/babel-generator/src/generators/jsx.ts\nindex 3237c115b..f816daf68 100644\n--- a/packages/babel-generator/src/generators/jsx.ts\n+++ b/packages/babel-generator/src/generators/jsx.ts\n@@ -32,7 +32,7 @@ export function JSXSpreadAttribute(this: Printer, node: t.JSXSpreadAttribute) {\n   this.token(\"{\");\n   this.token(\"...\");\n   this.print(node.argument);\n-  this.token(\"}\");\n+  this.rightBrace(node);\n }\n \n export function JSXExpressionContainer(\n@@ -41,14 +41,14 @@ export function JSXExpressionContainer(\n ) {\n   this.token(\"{\");\n   this.print(node.expression);\n-  this.token(\"}\");\n+  this.rightBrace(node);\n }\n \n export function JSXSpreadChild(this: Printer, node: t.JSXSpreadChild) {\n   this.token(\"{\");\n   this.token(\"...\");\n   this.print(node.expression);\n-  this.token(\"}\");\n+  this.rightBrace(node);\n }\n \n export function JSXText(this: Printer, node: t.JSXText) {\ndiff --git a/packages/babel-generator/test/fixtures/jsx/comments/options.json b/packages/babel-generator/test/fixtures/jsx/options.json\nsimilarity index 100%\nrename from packages/babel-generator/test/fixtures/jsx/comments/options.json\nrename to packages/babel-generator/test/fixtures/jsx/options.json\ndiff --git a/packages/babel-generator/test/fixtures/jsx/retainLines/input.js b/packages/babel-generator/test/fixtures/jsx/retainLines/input.js\nnew file mode 100644\nindex 000000000..b85843704\n--- /dev/null\n+++ b/packages/babel-generator/test/fixtures/jsx/retainLines/input.js\n@@ -0,0 +1,3 @@\n+<div>{\n+  \"hello\"\n+} space </div>;\ndiff --git a/packages/babel-generator/test/fixtures/jsx/retainLines/options.json b/packages/babel-generator/test/fixtures/jsx/retainLines/options.json\nnew file mode 100644\nindex 000000000..95b971bdd\n--- /dev/null\n+++ b/packages/babel-generator/test/fixtures/jsx/retainLines/options.json\n@@ -0,0 +1 @@\n+{ \"plugins\": [\"jsx\"], \"retainLines\": true }\ndiff --git a/packages/babel-generator/test/fixtures/jsx/retainLines/output.js b/packages/babel-generator/test/fixtures/jsx/retainLines/output.js\nnew file mode 100644\nindex 000000000..d4728adde\n--- /dev/null\n+++ b/packages/babel-generator/test/fixtures/jsx/retainLines/output.js\n@@ -0,0 +1,3 @@\n+<div>{\n+  \"hello\"\n+  } space </div>;\n\\ No newline at end of file"}, {"role": "assistant", "content": "fix: jsx whitespace is not properly preserved when retainLines (#16775)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/rules/no-empty.md\n\ndiff --git a/docs/src/rules/no-empty.md b/docs/src/rules/no-empty.md\nindex 64a9bc0a..de6ec6e3 100644\n--- a/docs/src/rules/no-empty.md\n+++ b/docs/src/rules/no-empty.md\n@@ -55,6 +55,10 @@ while (foo) {\n     /* empty */\n }\n \n+switch(foo) {\n+    /* empty */\n+}\n+\n try {\n     doSomething();\n } catch (ex) {\ndiff --git a/lib/rules/no-empty.js b/lib/rules/no-empty.js\nindex bcd23d0f..dd30e419 100644\n--- a/lib/rules/no-empty.js\n+++ b/lib/rules/no-empty.js\n@@ -104,10 +104,47 @@ module.exports = {\n \t\t\t\t\ttypeof node.cases === \"undefined\" ||\n \t\t\t\t\tnode.cases.length === 0\n \t\t\t\t) {\n+\t\t\t\t\tconst openingBrace = sourceCode.getTokenAfter(\n+\t\t\t\t\t\tnode.discriminant,\n+\t\t\t\t\t\tastUtils.isOpeningBraceToken,\n+\t\t\t\t\t);\n+\n+\t\t\t\t\tconst closingBrace = sourceCode.getLastToken(node);\n+\n+\t\t\t\t\tif (\n+\t\t\t\t\t\tsourceCode.commentsExistBetween(\n+\t\t\t\t\t\t\topeningBrace,\n+\t\t\t\t\t\t\tclosingBrace,\n+\t\t\t\t\t\t)\n+\t\t\t\t\t) {\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n+\n \t\t\t\t\tcontext.report({\n \t\t\t\t\t\tnode,\n+\t\t\t\t\t\tloc: {\n+\t\t\t\t\t\t\tstart: openingBrace.loc.start,\n+\t\t\t\t\t\t\tend: closingBrace.loc.end,\n+\t\t\t\t\t\t},\n \t\t\t\t\t\tmessageId: \"unexpected\",\n \t\t\t\t\t\tdata: { type: \"switch\" },\n+\t\t\t\t\t\tsuggest: [\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\t\tdata: { type: \"switch\" },\n+\t\t\t\t\t\t\t\tfix(fixer) {\n+\t\t\t\t\t\t\t\t\tconst range = [\n+\t\t\t\t\t\t\t\t\t\topeningBrace.range[1],\n+\t\t\t\t\t\t\t\t\t\tclosingBrace.range[0],\n+\t\t\t\t\t\t\t\t\t];\n+\n+\t\t\t\t\t\t\t\t\treturn fixer.replaceTextRange(\n+\t\t\t\t\t\t\t\t\t\trange,\n+\t\t\t\t\t\t\t\t\t\t\" /* empty */ \",\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t],\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t},\ndiff --git a/tests/lib/rules/no-empty.js b/tests/lib/rules/no-empty.js\nindex f48bde2d..c5efda81 100644\n--- a/tests/lib/rules/no-empty.js\n+++ b/tests/lib/rules/no-empty.js\n@@ -30,6 +30,7 @@ ruleTester.run(\"no-empty\", rule, {\n \t\t\"function foo() { }\",\n \t\t\"if (foo) {/* empty */}\",\n \t\t\"while (foo) {/* empty */}\",\n+\t\t\"switch (foo) {/* empty */}\",\n \t\t\"for (;foo;) {/* empty */}\",\n \t\t\"try { foo() } catch (ex) {/* empty */}\",\n \t\t\"try { foo() } catch (ex) {// empty\\n}\",\n@@ -159,18 +160,38 @@ ruleTester.run(\"no-empty\", rule, {\n \t\t\t\t\tmessageId: \"unexpected\",\n \t\t\t\t\tdata: { type: \"switch\" },\n \t\t\t\t\ttype: \"SwitchStatement\",\n-\t\t\t\t\tsuggestions: null,\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 13,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 15,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\tdata: { type: \"switch\" },\n+\t\t\t\t\t\t\toutput: \"switch(foo) { /* empty */ }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n \t\t\t\t},\n \t\t\t],\n \t\t},\n \t\t{\n-\t\t\tcode: \"switch (foo) { /* empty */ }\",\n+\t\t\tcode: \"switch /* empty */ (/* empty */ foo /* empty */) /* empty */ {} /* empty */\",\n \t\t\terrors: [\n \t\t\t\t{\n \t\t\t\t\tmessageId: \"unexpected\",\n \t\t\t\t\tdata: { type: \"switch\" },\n \t\t\t\t\ttype: \"SwitchStatement\",\n-\t\t\t\t\tsuggestions: null,\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 62,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 64,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\tdata: { type: \"switch\" },\n+\t\t\t\t\t\t\toutput: \"switch /* empty */ (/* empty */ foo /* empty */) /* empty */ { /* empty */ } /* empty */\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n \t\t\t\t},\n \t\t\t],\n \t\t},"}, {"role": "assistant", "content": "fix: ignore empty switch statements with comments in no-empty rule (#20045)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/api/structures/shared-texture-import-texture-info.md\n\ndiff --git a/docs/api/structures/shared-texture-import-texture-info.md b/docs/api/structures/shared-texture-import-texture-info.md\nindex 47c9338c..813aa70c 100644\n--- a/docs/api/structures/shared-texture-import-texture-info.md\n+++ b/docs/api/structures/shared-texture-import-texture-info.md\n@@ -4,6 +4,7 @@\n   * `bgra` - 32bpp BGRA (byte-order), 1 plane.\n   * `rgba` - 32bpp RGBA (byte-order), 1 plane.\n   * `rgbaf16` - Half float RGBA, 1 plane.\n+  * `nv12` - 12bpp with Y plane followed by a 2x2 interleaved UV plane.\n * `colorSpace` [ColorSpace](color-space.md) (optional) - The color space of the texture.\n * `codedSize` [Size](size.md) - The full dimensions of the shared texture.\n * `visibleRect` [Rectangle](rectangle.md) (optional) - A subsection of [0, 0, codedSize.width, codedSize.height]. In common cases, it is the full section area.\ndiff --git a/shell/common/api/electron_api_shared_texture.cc b/shell/common/api/electron_api_shared_texture.cc\nindex f8b825bb..626d4eb8 100644\n--- a/shell/common/api/electron_api_shared_texture.cc\n+++ b/shell/common/api/electron_api_shared_texture.cc\n@@ -126,6 +126,8 @@ std::string TransferVideoPixelFormatToString(media::VideoPixelFormat format) {\n       return \"rgba\";\n     case media::PIXEL_FORMAT_RGBAF16:\n       return \"rgbaf16\";\n+    case media::PIXEL_FORMAT_NV12:\n+      return \"nv12\";\n     default:\n       NOTREACHED();\n   }\n@@ -566,6 +568,8 @@ struct Converter<ImportSharedTextureInfo> {\n         out->pixel_format = media::PIXEL_FORMAT_ABGR;\n       else if (pixel_format_str == \"rgbaf16\")\n         out->pixel_format = media::PIXEL_FORMAT_RGBAF16;\n+      else if (pixel_format_str == \"nv12\")\n+        out->pixel_format = media::PIXEL_FORMAT_NV12;\n       else\n         return false;\n     }\n@@ -730,6 +734,14 @@ v8::Local<v8::Value> ImportSharedTexture(v8::Isolate* isolate,\n                               shared_image_usage, \"SharedTextureVideoFrame\"},\n                              std::move(gmb_handle));\n \n+  if (!si) {\n+    gin_helper::ErrorThrower(isolate).ThrowTypeError(\n+        \"Failed to create shared image from shared texture handle. Texture \"\n+        \"format or dimension might not be supported on current device or \"\n+        \"platform.\");\n+    return v8::Null(isolate);\n+  }\n+\n   ImportedSharedTexture* imported = new ImportedSharedTexture();\n   imported->pixel_format = shared_texture.pixel_format;\n   imported->coded_size = shared_texture.coded_size;"}, {"role": "assistant", "content": "feat: import shared texture supports nv12. (#48922)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/build.yml\n\ndiff --git a/.github/workflows/build.yml b/.github/workflows/build.yml\nindex f734ec32..3c41c5b1 100644\n--- a/.github/workflows/build.yml\n+++ b/.github/workflows/build.yml\n@@ -63,6 +63,10 @@ jobs:\n         filters: |\n           docs:\n             - 'docs/**'\n+            - README.md\n+            - SECURITY.md\n+            - CONTRIBUTING.md\n+            - CODE_OF_CONDUCT.md\n           src:\n             - '!docs/**'\n     - name: Set Outputs for Build Image SHA & Docs Only"}, {"role": "assistant", "content": "ci: exclude top-level docs files from full CI (#48872)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .changeset/poor-hotels-sort.md\n\ndiff --git a/.changeset/poor-hotels-sort.md b/.changeset/poor-hotels-sort.md\nnew file mode 100644\nindex 000000000..6498f4bdf\n--- /dev/null\n+++ b/.changeset/poor-hotels-sort.md\n@@ -0,0 +1,5 @@\n+---\n+\"@fake-scope/fake-pkg\": patch\n+---\n+\n+The speed of identifier parsing has been improved\ndiff --git a/lib/util/identifier.js b/lib/util/identifier.js\nindex 1bcdc51a0..149292faf 100644\n--- a/lib/util/identifier.js\n+++ b/lib/util/identifier.js\n@@ -321,6 +321,7 @@ const absolutify = makeCacheableWithContext(_absolutify);\n const PATH_QUERY_FRAGMENT_REGEXP =\n \t/^((?:\\0.|[^?#\\0])*)(\\?(?:\\0.|[^#\\0])*)?(#.*)?$/;\n const PATH_QUERY_REGEXP = /^((?:\\0.|[^?\\0])*)(\\?.*)?$/;\n+const ZERO_ESCAPE_REGEXP = /\\0(.)/g;\n \n /** @typedef {{ resource: string, path: string, query: string, fragment: string }} ParsedResource */\n /** @typedef {{ resource: string, path: string, query: string }} ParsedResourceWithoutFragment */\n@@ -330,15 +331,56 @@ const PATH_QUERY_REGEXP = /^((?:\\0.|[^?\\0])*)(\\?.*)?$/;\n  * @returns {ParsedResource} parsed parts\n  */\n const _parseResource = (str) => {\n-\tconst match =\n-\t\t/** @type {[string, string, string | undefined, string | undefined]} */\n-\t\t(/** @type {unknown} */ (PATH_QUERY_FRAGMENT_REGEXP.exec(str)));\n-\treturn {\n-\t\tresource: str,\n-\t\tpath: match[1].replace(/\\0(.)/g, \"$1\"),\n-\t\tquery: match[2] ? match[2].replace(/\\0(.)/g, \"$1\") : \"\",\n-\t\tfragment: match[3] || \"\"\n-\t};\n+\tconst firstEscape = str.indexOf(\"\\0\");\n+\n+\t// Handle `\\0`\n+\tif (firstEscape !== -1) {\n+\t\tconst match =\n+\t\t\t/** @type {[string, string, string | undefined, string | undefined]} */\n+\t\t\t(/** @type {unknown} */ (PATH_QUERY_FRAGMENT_REGEXP.exec(str)));\n+\n+\t\treturn {\n+\t\t\tresource: str,\n+\t\t\tpath: match[1].replace(ZERO_ESCAPE_REGEXP, \"$1\"),\n+\t\t\tquery: match[2] ? match[2].replace(ZERO_ESCAPE_REGEXP, \"$1\") : \"\",\n+\t\t\tfragment: match[3] || \"\"\n+\t\t};\n+\t}\n+\n+\t/** @type {ParsedResource} */\n+\tconst result = { resource: str, path: \"\", query: \"\", fragment: \"\" };\n+\tconst queryStart = str.indexOf(\"?\");\n+\tconst fragmentStart = str.indexOf(\"#\");\n+\n+\tif (fragmentStart < 0) {\n+\t\tif (queryStart < 0) {\n+\t\t\tresult.path = result.resource;\n+\n+\t\t\t// No fragment, no query\n+\t\t\treturn result;\n+\t\t}\n+\n+\t\tresult.path = str.slice(0, queryStart);\n+\t\tresult.query = str.slice(queryStart);\n+\n+\t\t// Query, no fragment\n+\t\treturn result;\n+\t}\n+\n+\tif (queryStart < 0 || fragmentStart < queryStart) {\n+\t\tresult.path = str.slice(0, fragmentStart);\n+\t\tresult.fragment = str.slice(fragmentStart);\n+\n+\t\t// Fragment, no query\n+\t\treturn result;\n+\t}\n+\n+\tresult.path = str.slice(0, queryStart);\n+\tresult.query = str.slice(queryStart, fragmentStart);\n+\tresult.fragment = str.slice(fragmentStart);\n+\n+\t// Query and fragment\n+\treturn result;\n };\n \n /**\n@@ -347,14 +389,37 @@ const _parseResource = (str) => {\n  * @returns {ParsedResourceWithoutFragment} parsed parts\n  */\n const _parseResourceWithoutFragment = (str) => {\n-\tconst match =\n-\t\t/** @type {[string, string, string | undefined]} */\n-\t\t(/** @type {unknown} */ (PATH_QUERY_REGEXP.exec(str)));\n-\treturn {\n-\t\tresource: str,\n-\t\tpath: match[1].replace(/\\0(.)/g, \"$1\"),\n-\t\tquery: match[2] ? match[2].replace(/\\0(.)/g, \"$1\") : \"\"\n-\t};\n+\tconst firstEscape = str.indexOf(\"\\0\");\n+\n+\t// Handle `\\0`\n+\tif (firstEscape !== -1) {\n+\t\tconst match =\n+\t\t\t/** @type {[string, string, string | undefined]} */\n+\t\t\t(/** @type {unknown} */ (PATH_QUERY_REGEXP.exec(str)));\n+\n+\t\treturn {\n+\t\t\tresource: str,\n+\t\t\tpath: match[1].replace(ZERO_ESCAPE_REGEXP, \"$1\"),\n+\t\t\tquery: match[2] ? match[2].replace(ZERO_ESCAPE_REGEXP, \"$1\") : \"\"\n+\t\t};\n+\t}\n+\n+\t/** @type {ParsedResourceWithoutFragment} */\n+\tconst result = { resource: str, path: \"\", query: \"\" };\n+\tconst queryStart = str.indexOf(\"?\");\n+\n+\tif (queryStart < 0) {\n+\t\tresult.path = result.resource;\n+\n+\t\t// No query\n+\t\treturn result;\n+\t}\n+\n+\tresult.path = str.slice(0, queryStart);\n+\tresult.query = str.slice(queryStart);\n+\n+\t// Query\n+\treturn result;\n };\n \n /**"}, {"role": "assistant", "content": "perf: improve parse identifiers (#20184)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 68be4014..2a7f3f41 100644\n--- a/package.json\n+++ b/package.json\n@@ -193,7 +193,7 @@\n     \"semver\": \"^7.5.3\",\n     \"shelljs\": \"^0.10.0\",\n     \"sinon\": \"^11.0.0\",\n-    \"typescript\": \"^5.3.3\",\n+    \"typescript\": \"^5.9.3\",\n     \"webpack\": \"^5.23.0\",\n     \"webpack-cli\": \"^4.5.0\",\n     \"yorkie\": \"^2.0.0\"\ndiff --git a/packages/eslint-config-eslint/package.json b/packages/eslint-config-eslint/package.json\nindex 1542243f..f4821486 100644\n--- a/packages/eslint-config-eslint/package.json\n+++ b/packages/eslint-config-eslint/package.json\n@@ -72,7 +72,7 @@\n   \"devDependencies\": {\n     \"@arethetypeswrong/cli\": \"^0.18.0\",\n     \"eslint\": \">=10.0.0-alpha.0\",\n-    \"typescript\": \"^5.7.2\"\n+    \"typescript\": \"^5.9.3\"\n   },\n   \"peerDependencies\": {\n     \"eslint\": \">=10.0.0-alpha.0\"\ndiff --git a/tests/lib/types/tsconfig.json b/tests/lib/types/tsconfig.json\nindex 6ba84690..320af89e 100644\n--- a/tests/lib/types/tsconfig.json\n+++ b/tests/lib/types/tsconfig.json\n@@ -2,10 +2,7 @@\n   \"compilerOptions\": {\n     \"module\": \"node16\",\n     \"lib\": [\"dom\", \"es6\"],\n-    \"noImplicitAny\": true,\n-    \"noImplicitThis\": true,\n-    \"strictNullChecks\": true,\n-    \"strictFunctionTypes\": true,\n+    \"strict\": true,\n     \"types\": [],\n     \"noEmit\": true,\n     \"forceConsistentCasingInFileNames\": true,"}, {"role": "assistant", "content": "test: enable `strict` mode in type tests (#20398)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n test/hotCases/esm-output/node-prod/foo.js\n\ndiff --git a/test/hotCases/esm-output/node-prod/foo.js b/test/hotCases/esm-output/node-prod/foo.js\nnew file mode 100644\nindex 000000000..bce588606\n--- /dev/null\n+++ b/test/hotCases/esm-output/node-prod/foo.js\n@@ -0,0 +1,18 @@\n+import { greeting } from \"./module.js\";\n+import update from \"../../update.esm.js\";\n+\n+import.meta.webpackHot.accept([\"./module.js\"]);\n+\n+it(\"should update a simple ES module with HMR\", (done) => {\n+\texpect(greeting).toBe(\"Hello World!\");\n+\n+\tNEXT(update(done, true, () => {\n+\t\t// After HMR update, we need to re-import the module in ESM\n+\t\timport(\"./module.js\").then(updatedModule => {\n+\t\t\texpect(updatedModule.greeting).toBe(\"Hello HMR!\");\n+\t\t\tdone();\n+\t\t}).catch(done);\n+\t}));\n+});\n+\n+export default \"hello world\";\n\\ No newline at end of file\ndiff --git a/test/hotCases/esm-output/node-prod/index.js b/test/hotCases/esm-output/node-prod/index.js\nnew file mode 100644\nindex 000000000..0bacc6c20\n--- /dev/null\n+++ b/test/hotCases/esm-output/node-prod/index.js\n@@ -0,0 +1,5 @@\n+import test from \"./foo.js\";\n+\n+it(\"should test\", () => {\n+\texpect(test).toBe(\"hello world\");\n+});\n\\ No newline at end of file\ndiff --git a/test/hotCases/esm-output/node-prod/module.js b/test/hotCases/esm-output/node-prod/module.js\nnew file mode 100644\nindex 000000000..9ce42fc23\n--- /dev/null\n+++ b/test/hotCases/esm-output/node-prod/module.js\n@@ -0,0 +1,3 @@\n+export const greeting = \"Hello World!\";\n+---\n+export const greeting = \"Hello HMR!\";\ndiff --git a/test/hotCases/esm-output/node-prod/webpack.config.js b/test/hotCases/esm-output/node-prod/webpack.config.js\nnew file mode 100644\nindex 000000000..fbd05bd16\n--- /dev/null\n+++ b/test/hotCases/esm-output/node-prod/webpack.config.js\n@@ -0,0 +1,32 @@\n+\"use strict\";\n+\n+/** @type {import(\"../../../../types\").Configuration} */\n+module.exports = {\n+\ttarget: \"node\",\n+\tmode: \"production\",\n+\tentry: {\n+\t\tmain: {\n+\t\t\timport: \"./index.js\",\n+\t\t\tdependOn: \"foo\"\n+\t\t},\n+\t\tfoo: {\n+\t\t\timport: \"./foo.js\"\n+\t\t}\n+\t},\n+\toutput: {\n+\t\tclean: true,\n+\t\tmodule: true,\n+\t\tchunkFormat: \"module\",\n+\t\tfilename: \"[name].mjs\",\n+\t\tchunkFilename: \"[name].chunk.mjs\",\n+\t\tlibrary: {\n+\t\t\ttype: \"module\"\n+\t\t}\n+\t},\n+\texperiments: {\n+\t\toutputModule: true\n+\t},\n+\toptimization: {\n+\t\tminimize: true\n+\t}\n+};\ndiff --git a/test/hotCases/esm-output/runtime-and-split-chunks/common/shared.js b/test/hotCases/esm-output/runtime-and-split-chunks/common/shared.js\nnew file mode 100644\nindex 000000000..b97c6b020\n--- /dev/null\n+++ b/test/hotCases/esm-output/runtime-and-split-chunks/common/shared.js\n@@ -0,0 +1,16 @@\n+export function commonFunction(input) {\n+\treturn `Common function processed: ${input}`;\n+}\n+\n+export const commonData = {\n+\tshared: true\n+};\n+---\n+export function commonFunction(input) {\n+\treturn `Updated common function: ${input}`;\n+}\n+\n+export const commonData = {\n+\tshared: true,\n+\tupdated: true\n+};\ndiff --git a/test/hotCases/esm-output/runtime-and-split-chunks/index.js b/test/hotCases/esm-output/runtime-and-split-chunks/index.js\nnew file mode 100644\nindex 000000000..dcdbf928c\n--- /dev/null\n+++ b/test/hotCases/esm-output/runtime-and-split-chunks/index.js\n@@ -0,0 +1,24 @@\n+import update from \"../../update.esm\";\n+import.meta.webpackHot.accept([\"./common/shared\", \"vendor-lib\"]);\n+\n+it(\"should handle HMR with split chunks in ESM format\", (done) => {\n+\tPromise.all([\n+\t\timport(\"./common/shared\"),\n+\t\timport(\"vendor-lib\")\n+\t]).then(([commonModule, vendorModule]) => {\n+\t\texpect(commonModule.commonFunction(\"test\")).toBe(\"Common function processed: test\");\n+\t\texpect(vendorModule.default.version).toBe(\"1.0.0\");\n+\t}).catch(done);\n+\t\t\n+\tNEXT(update(done, true, () => {\n+\t\t// Re-import after HMR update\n+\t\tPromise.all([\n+\t\t\timport(\"./common/shared\"),\n+\t\t\timport(\"vendor-lib\")\n+\t\t]).then(([commonModule, vendorModule]) => {\n+\t\t\texpect(commonModule.commonFunction(\"test\")).toBe(\"Updated common function: test\");\n+\t\t\texpect(vendorModule.default.version).toBe(\"2.0.0\");\n+\t\t\tdone();\n+\t\t}).catch(done);\n+\t}));\n+});\ndiff --git a/test/hotCases/esm-output/runtime-and-split-chunks/node_modules/vendor-lib.js b/test/hotCases/esm-output/runtime-and-split-chunks/node_modules/vendor-lib.js\nnew file mode 100644\nindex 000000000..b686ed55c\n--- /dev/null\n+++ b/test/hotCases/esm-output/runtime-and-split-chunks/node_modules/vendor-lib.js\n@@ -0,0 +1,17 @@\n+const vendorLib = {\n+\tversion: \"1.0.0\",\n+\tinit: function() {\n+\t\tconsole.log(\"Vendor lib initialized\");\n+\t}\n+};\n+\n+export default vendorLib;\n+---\n+const vendorLib = {\n+\tversion: \"2.0.0\",\n+\tinit: function() {\n+\t\tconsole.log(\"Vendor lib initialized v2\");\n+\t}\n+};\n+\n+export default vendorLib;\ndiff --git a/test/hotCases/esm-output/runtime-and-split-chunks/webpack.config.js b/test/hotCases/esm-output/runtime-and-split-chunks/webpack.config.js\nnew file mode 100644\nindex 000000000..f55918589\n--- /dev/null\n+++ b/test/hotCases/esm-output/runtime-and-split-chunks/webpack.config.js\n@@ -0,0 +1,37 @@\n+\"use strict\";\n+\n+/** @type {import(\"../../../../types\").Configuration} */\n+module.exports = {\n+\tmode: \"production\",\n+\texperiments: {\n+\t\toutputModule: true\n+\t},\n+\toutput: {\n+\t\tmodule: true,\n+\t\tchunkFormat: \"module\",\n+\t\tfilename: \"[name].mjs\",\n+\t\tchunkFilename: \"[name].chunk.mjs\",\n+\t\tenabledLibraryTypes: [\"module\"]\n+\t},\n+\toptimization: {\n+\t\truntimeChunk: true,\n+\t\tminimize: true,\n+\t\tsplitChunks: {\n+\t\t\tchunks: \"all\",\n+\t\t\tminSize: 0,\n+\t\t\tcacheGroups: {\n+\t\t\t\tcommon: {\n+\t\t\t\t\ttest: /common/,\n+\t\t\t\t\tname: \"common\",\n+\t\t\t\t\tpriority: 10,\n+\t\t\t\t\tenforce: true\n+\t\t\t\t},\n+\t\t\t\tvendor: {\n+\t\t\t\t\ttest: /node_modules/,\n+\t\t\t\t\tname: \"vendor\",\n+\t\t\t\t\tpriority: 20\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+};"}, {"role": "assistant", "content": "test: add more esm test cases (#20174)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " src/simd/archsimd/internal/simd_test/simd_test.go | 77 +++++++++++++++++++++++\n 1 file changed, 77 insertions(+)\n\ndiff --git a/src/simd/archsimd/internal/simd_test/simd_test.go b/src/simd/archsimd/internal/simd_test/simd_test.go\nindex 76b296c9..671ec05e 100644\n--- a/src/simd/archsimd/internal/simd_test/simd_test.go\n+++ b/src/simd/archsimd/internal/simd_test/simd_test.go\n@@ -1296,3 +1296,80 @@ func TestAddSubPairs(t *testing.T) {\n \t\ttestFloat64x4Binary(t, archsimd.Float64x4.SubPairsGrouped, subPairsGroupedSlice[float64])\n \t}\n }\n+\n+func convConcatSlice[T, U number](a, b []T, conv func(T) U) []U {\n+\tr := make([]U, len(a)+len(b))\n+\tfor i, v := range a {\n+\t\tr[i] = conv(v)\n+\t}\n+\tfor i, v := range b {\n+\t\tr[len(a)+i] = conv(v)\n+\t}\n+\treturn r\n+}\n+\n+func convConcatGroupedSlice[T, U number](a, b []T, conv func(T) U) []U {\n+\tgroup := int(128 / unsafe.Sizeof(a[0]))\n+\tr := make([]U, 0, len(a)+len(b))\n+\tfor i := 0; i < len(a)/group; i++ {\n+\t\tr = append(r, convConcatSlice(a[i*group:(i+1)*group], b[i*group:(i+1)*group], conv)...)\n+\t}\n+\treturn r\n+}\n+\n+func TestSaturateConcat(t *testing.T) {\n+\t// Int32x4.SaturateToInt16Concat\n+\tforSlicePair(t, int32s, 4, func(x, y []int32) bool {\n+\t\ta, b := archsimd.LoadInt32x4Slice(x), archsimd.LoadInt32x4Slice(y)\n+\t\tvar out [8]int16\n+\t\ta.SaturateToInt16Concat(b).Store(&out)\n+\t\twant := convConcatSlice(x, y, satToInt16)\n+\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t})\n+\t// Int32x4.SaturateToUint16Concat\n+\tforSlicePair(t, int32s, 4, func(x, y []int32) bool {\n+\t\ta, b := archsimd.LoadInt32x4Slice(x), archsimd.LoadInt32x4Slice(y)\n+\t\tvar out [8]uint16\n+\t\ta.SaturateToUint16Concat(b).Store(&out)\n+\t\twant := convConcatSlice(x, y, satToUint16)\n+\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t})\n+\n+\tif archsimd.X86.AVX2() {\n+\t\t// Int32x8.SaturateToInt16ConcatGrouped\n+\t\tforSlicePair(t, int32s, 8, func(x, y []int32) bool {\n+\t\t\ta, b := archsimd.LoadInt32x8Slice(x), archsimd.LoadInt32x8Slice(y)\n+\t\t\tvar out [16]int16\n+\t\t\ta.SaturateToInt16ConcatGrouped(b).Store(&out)\n+\t\t\twant := convConcatGroupedSlice(x, y, satToInt16)\n+\t\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t\t})\n+\t\t// Int32x8.SaturateToUint16ConcatGrouped\n+\t\tforSlicePair(t, int32s, 8, func(x, y []int32) bool {\n+\t\t\ta, b := archsimd.LoadInt32x8Slice(x), archsimd.LoadInt32x8Slice(y)\n+\t\t\tvar out [16]uint16\n+\t\t\ta.SaturateToUint16ConcatGrouped(b).Store(&out)\n+\t\t\twant := convConcatGroupedSlice(x, y, satToUint16)\n+\t\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t\t})\n+\t}\n+\n+\tif archsimd.X86.AVX512() {\n+\t\t// Int32x16.SaturateToInt16ConcatGrouped\n+\t\tforSlicePair(t, int32s, 16, func(x, y []int32) bool {\n+\t\t\ta, b := archsimd.LoadInt32x16Slice(x), archsimd.LoadInt32x16Slice(y)\n+\t\t\tvar out [32]int16\n+\t\t\ta.SaturateToInt16ConcatGrouped(b).Store(&out)\n+\t\t\twant := convConcatGroupedSlice(x, y, satToInt16)\n+\t\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t\t})\n+\t\t// Int32x16.SaturateToUint16ConcatGrouped\n+\t\tforSlicePair(t, int32s, 16, func(x, y []int32) bool {\n+\t\t\ta, b := archsimd.LoadInt32x16Slice(x), archsimd.LoadInt32x16Slice(y)\n+\t\t\tvar out [32]uint16\n+\t\t\ta.SaturateToUint16ConcatGrouped(b).Store(&out)\n+\t\t\twant := convConcatGroupedSlice(x, y, satToUint16)\n+\t\t\treturn checkSlicesLogInput(t, out[:], want, 0, func() { t.Logf(\"x=%v, y=%v\", x, y) })\n+\t\t})\n+\t}\n+}", "output": "test(simd): add saturate concat tests", "metadata": {"id": "go-06eff0f7", "repository": "go", "commit_hash": "06eff0f7c3027a78088d45efdaec8ac3ed636481"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n CHANGELOG.md\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 5a095de1..179398c5 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -18,6 +18,7 @@\n - `[jest-environment-node]` Update jest environment with dispose symbols `Symbol` ([#14888](https://github.com/jestjs/jest/pull/14888) & [#14909](https://github.com/jestjs/jest/pull/14909))\n - `[@jest/fake-timers]` [**BREAKING**] Upgrade `@sinonjs/fake-timers` to v11 ([#14544](https://github.com/jestjs/jest/pull/14544))\n - `[@jest/fake-timers]` Exposing new modern timers function `advanceTimersToFrame()` which advances all timers by the needed milliseconds to execute callbacks currently scheduled with `requestAnimationFrame` ([#14598](https://github.com/jestjs/jest/pull/14598))\n+- `[jest-matcher-utils]` Add `SERIALIZABLE_PROPERTIES` to allow custom serialization of objects ([#14893](https://github.com/jestjs/jest/pull/14893))\n - `[jest-mock]` Add support for the Explicit Resource Management proposal to use the `using` keyword with `jest.spyOn(object, methodName)` ([#14895](https://github.com/jestjs/jest/pull/14895))\n - `[jest-runtime]` Exposing new modern timers function `jest.advanceTimersToFrame()` from `@jest/fake-timers` ([#14598](https://github.com/jestjs/jest/pull/14598))\n - `[jest-runtime]` Support `import.meta.filename` and `import.meta.dirname` (available from [Node 20.11](https://nodejs.org/en/blog/release/v20.11.0)) ([#14854](https://github.com/jestjs/jest/pull/14854))\ndiff --git a/docs/ExpectAPI.md b/docs/ExpectAPI.md\nindex 96128f0e..8de4fc18 100644\n--- a/docs/ExpectAPI.md\n+++ b/docs/ExpectAPI.md\n@@ -1757,3 +1757,39 @@ it('transitions as expected', () => {\n   expect(state).toMatchStateInlineSnapshot(`\"done\"`);\n });\n ```\n+\n+## Serializable properties\n+\n+### `SERIALIZABLE_PROPERTIES`\n+\n+Serializable properties is a set of properties that are considered serializable by Jest. This set is used to determine if a property should be serializable or not. If an object has a property that is not in this set, it is considered not serializable and will not be printed in error messages.\n+\n+You can add your own properties to this set to make sure that your objects are printed correctly. For example, if you have a `Volume` class, and you want to make sure that only the `amount` and `unit` properties are printed, you can add it to `SERIALIZABLE_PROPERTIES`:\n+\n+```js\n+import {SERIALIZABLE_PROPERTIES} from 'jest-matcher-utils';\n+\n+class Volume {\n+  constructor(amount, unit) {\n+    this.amount = amount;\n+    this.unit = unit;\n+  }\n+\n+  get label() {\n+    throw new Error('Not implemented');\n+  }\n+}\n+\n+Volume.prototype[SERIALIZABLE_PROPERTIES] = ['amount', 'unit'];\n+\n+expect(new Volume(1, 'L')).toEqual(new Volume(10, 'L'));\n+```\n+\n+This will print only the `amount` and `unit` properties in the error message, ignoring the `label` property.\n+\n+```bash\n+expect(received).toEqual(expected) // deep equality\n+\n+Expected: {\"amount\": 10, \"unit\": \"L\"}\n+Received: {\"amount\": 1, \"unit\": \"L\"}\n+```\ndiff --git a/packages/jest-matcher-utils/README.md b/packages/jest-matcher-utils/README.md\nindex 17e19c2b..ebb2fe24 100644\n--- a/packages/jest-matcher-utils/README.md\n+++ b/packages/jest-matcher-utils/README.md\n@@ -21,4 +21,4 @@ To add this package as a dependency of a project, run either of the following co\n \n ### Constants\n \n-`EXPECTED_COLOR` `RECEIVED_COLOR` `INVERTED_COLOR` `BOLD_WEIGHT` `DIM_COLOR` `SUGGEST_TO_CONTAIN_EQUAL`\n+`EXPECTED_COLOR` `RECEIVED_COLOR` `INVERTED_COLOR` `BOLD_WEIGHT` `DIM_COLOR` `SUGGEST_TO_CONTAIN_EQUAL` `SERIALIZABLE_PROPERTIES`\ndiff --git a/packages/jest-matcher-utils/src/__tests__/deepCyclicCopyReplaceable.test.ts b/packages/jest-matcher-utils/src/__tests__/deepCyclicCopyReplaceable.test.ts\nindex 79e6054b..1607ea39 100644\n--- a/packages/jest-matcher-utils/src/__tests__/deepCyclicCopyReplaceable.test.ts\n+++ b/packages/jest-matcher-utils/src/__tests__/deepCyclicCopyReplaceable.test.ts\n@@ -6,7 +6,9 @@\n  *\n  */\n \n-import deepCyclicCopyReplaceable from '../deepCyclicCopyReplaceable';\n+import deepCyclicCopyReplaceable, {\n+  SERIALIZABLE_PROPERTIES,\n+} from '../deepCyclicCopyReplaceable';\n \n test('returns the same value for primitive or function values', () => {\n   const fn = () => {};\n@@ -151,3 +153,24 @@ test('should set writable, configurable to true', () => {\n     key: {configurable: true, enumerable: true, value: 1, writable: true},\n   });\n });\n+\n+test('should only copy the properties mapped to be serializable', () => {\n+  class Foo {\n+    foo = 'foo';\n+    bar = ['bar'];\n+    get baz() {\n+      throw new Error('should not call getter');\n+    }\n+  }\n+\n+  // @ts-expect-error: Testing purpose\n+  Foo.prototype[SERIALIZABLE_PROPERTIES] = ['foo', 'bar'];\n+\n+  const obj = new Foo();\n+\n+  const copied = deepCyclicCopyReplaceable(obj);\n+  expect(Object.getOwnPropertyDescriptors(copied)).toEqual({\n+    bar: {configurable: true, enumerable: true, value: ['bar'], writable: true},\n+    foo: {configurable: true, enumerable: true, value: 'foo', writable: true},\n+  });\n+});\ndiff --git a/packages/jest-matcher-utils/src/deepCyclicCopyReplaceable.ts b/packages/jest-matcher-utils/src/deepCyclicCopyReplaceable.ts\nindex 73b9ce0b..236dbfce 100644\n--- a/packages/jest-matcher-utils/src/deepCyclicCopyReplaceable.ts\n+++ b/packages/jest-matcher-utils/src/deepCyclicCopyReplaceable.ts\n@@ -28,6 +28,10 @@ if (typeof Buffer !== 'undefined') {\n   builtInObject.push(Buffer);\n }\n \n+export const SERIALIZABLE_PROPERTIES = Symbol.for(\n+  '@jest/serializableProperties',\n+);\n+\n const isBuiltInObject = (object: any) =>\n   builtInObject.includes(object.constructor);\n \n@@ -57,14 +61,27 @@ export default function deepCyclicCopyReplaceable<T>(\n \n function deepCyclicCopyObject<T>(object: T, cycles: WeakMap<any, unknown>): T {\n   const newObject = Object.create(Object.getPrototypeOf(object));\n-  let descriptors: Record<string, PropertyDescriptor> = {};\n+  let descriptors: Record<string | symbol, PropertyDescriptor> = {};\n   let obj = object;\n   do {\n-    descriptors = Object.assign(\n-      {},\n-      Object.getOwnPropertyDescriptors(obj),\n-      descriptors,\n-    );\n+    const serializableProperties = getSerializableProperties(obj);\n+\n+    if (serializableProperties === undefined) {\n+      descriptors = Object.assign(\n+        {},\n+        Object.getOwnPropertyDescriptors(obj),\n+        descriptors,\n+      );\n+    } else {\n+      for (const property of serializableProperties) {\n+        if (!descriptors[property]) {\n+          descriptors[property] = Object.getOwnPropertyDescriptor(\n+            obj,\n+            property,\n+          )!;\n+        }\n+      }\n+    }\n   } while (\n     (obj = Object.getPrototypeOf(obj)) &&\n     obj !== Object.getPrototypeOf({})\n@@ -131,3 +148,24 @@ function deepCyclicCopyMap<T>(\n \n   return newMap as any;\n }\n+\n+function getSerializableProperties<T>(\n+  obj: T,\n+): Array<string | symbol> | undefined {\n+  if (typeof obj !== 'object' || obj === null) {\n+    return;\n+  }\n+\n+  const serializableProperties: unknown = (obj as Record<string | symbol, any>)[\n+    SERIALIZABLE_PROPERTIES\n+  ];\n+\n+  if (!Array.isArray(serializableProperties)) {\n+    return;\n+  }\n+\n+  return serializableProperties.filter(\n+    (key): key is string | symbol =>\n+      typeof key === 'string' || typeof key === 'symbol',\n+  );\n+}\ndiff --git a/packages/jest-matcher-utils/src/index.ts b/packages/jest-matcher-utils/src/index.ts\nindex 5af1c587..3e90b1eb 100644\n--- a/packages/jest-matcher-utils/src/index.ts\n+++ b/packages/jest-matcher-utils/src/index.ts\n@@ -24,7 +24,11 @@ import {\n   plugins as prettyFormatPlugins,\n } from 'pretty-format';\n import Replaceable from './Replaceable';\n-import deepCyclicCopyReplaceable from './deepCyclicCopyReplaceable';\n+import deepCyclicCopyReplaceable, {\n+  SERIALIZABLE_PROPERTIES,\n+} from './deepCyclicCopyReplaceable';\n+\n+export {SERIALIZABLE_PROPERTIES};\n \n const {\n   AsymmetricMatcher,"}, {"role": "assistant", "content": "feat: allow to customize the serializable properties during error report (#14893)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " CHANGELOG.md | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 3c6ea89..ed950e2 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -415,7 +415,7 @@\n ### Bug Fixes\n \n * **compile-dom:** should be able to stringify mathML ([#11891](https://github.com/vuejs/core/issues/11891)) ([85c138c](https://github.com/vuejs/core/commit/85c138ced108268f7656b568dfd3036a1e0aae34))\n-* **compiler-sfc:** preserve old behavior when using withDefaults with desutructure ([8492c3c](https://github.com/vuejs/core/commit/8492c3c49a922363d6c77ef192c133a8fbce6514)), closes [#11930](https://github.com/vuejs/core/issues/11930)\n+* **compiler-sfc:** preserve old behavior when using withDefaults with destructure ([8492c3c](https://github.com/vuejs/core/commit/8492c3c49a922363d6c77ef192c133a8fbce6514)), closes [#11930](https://github.com/vuejs/core/issues/11930)\n * **reactivity:** avoid exponential perf cost and reduce call stack depth for deeply chained computeds ([#11944](https://github.com/vuejs/core/issues/11944)) ([c74bb8c](https://github.com/vuejs/core/commit/c74bb8c2dd9e82aaabb0a2a2b368e900929b513b)), closes [#11928](https://github.com/vuejs/core/issues/11928)\n * **reactivity:** rely on dirty check only when computed has deps ([#11931](https://github.com/vuejs/core/issues/11931)) ([aa5dafd](https://github.com/vuejs/core/commit/aa5dafd2b55d42d6a29316a3bc91aea85c676a0b)), closes [#11929](https://github.com/vuejs/core/issues/11929)\n * **watch:** `once` option should be ignored by watchEffect ([#11884](https://github.com/vuejs/core/issues/11884)) ([49fa673](https://github.com/vuejs/core/commit/49fa673493d93b77ddba2165ab6545bae84fd1ae))\n@@ -716,7 +716,7 @@\n \n * **build:** enable SSR branches in esm-browser builds ([b14cd9a](https://github.com/vuejs/core/commit/b14cd9a68bab082332b0169be075be357be076ca))\n * **compiler-core:** change node hoisting to caching per instance ([#11067](https://github.com/vuejs/core/issues/11067)) ([cd0ea0d](https://github.com/vuejs/core/commit/cd0ea0d479a276583fa181d8ecbc97fb0e4a9dce)), closes [#5256](https://github.com/vuejs/core/issues/5256) [#9219](https://github.com/vuejs/core/issues/9219) [#10959](https://github.com/vuejs/core/issues/10959)\n-* **compiler-sfc:** should properly walk desutructured props when reactive destructure is not enabled ([0fd6193](https://github.com/vuejs/core/commit/0fd6193def2380916eb51a118f37f2d9ec2ace23)), closes [#11325](https://github.com/vuejs/core/issues/11325)\n+* **compiler-sfc:** should properly walk destructured props when reactive destructure is not enabled ([0fd6193](https://github.com/vuejs/core/commit/0fd6193def2380916eb51a118f37f2d9ec2ace23)), closes [#11325](https://github.com/vuejs/core/issues/11325)\n * **types:** respect props with default on instance type when using __typeProps ([96e4738](https://github.com/vuejs/core/commit/96e473833422342c5ca371ae1aeb186dec9a55e3))\n \n ", "output": "docs: fix typo in changelog", "metadata": {"id": "vue-623bfb29", "repository": "vue", "commit_hash": "623bfb29a23c36bf935e7faefa64d1baa69d465c"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 70de7fa7..85420c19 100644\n--- a/package.json\n+++ b/package.json\n@@ -36,7 +36,7 @@\n     \"eslint-import-resolver-typescript\": \"^3.2.5\",\n     \"eslint-plugin-eslint-comments\": \"^3.1.2\",\n     \"eslint-plugin-import\": \"^2.6.0\",\n-    \"eslint-plugin-jest\": \"^27.1.0\",\n+    \"eslint-plugin-jest\": \"^28.0.0\",\n     \"eslint-plugin-jsdoc\": \"^48.0.0\",\n     \"eslint-plugin-local\": \"link:./.eslintplugin\",\n     \"eslint-plugin-markdown\": \"^3.0.0\",\ndiff --git a/yarn.lock b/yarn.lock\nindex 7d1e4939..be41f487 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -3048,7 +3048,7 @@ __metadata:\n     eslint-import-resolver-typescript: ^3.2.5\n     eslint-plugin-eslint-comments: ^3.1.2\n     eslint-plugin-import: ^2.6.0\n-    eslint-plugin-jest: ^27.1.0\n+    eslint-plugin-jest: ^28.0.0\n     eslint-plugin-jsdoc: ^48.0.0\n     eslint-plugin-local: \"link:./.eslintplugin\"\n     eslint-plugin-markdown: ^3.0.0\n@@ -5586,7 +5586,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@types/semver@npm:^7.1.0, @types/semver@npm:^7.3.12, @types/semver@npm:^7.5.0\":\n+\"@types/semver@npm:^7.1.0, @types/semver@npm:^7.5.0\":\n   version: 7.5.8\n   resolution: \"@types/semver@npm:7.5.8\"\n   checksum: ea6f5276f5b84c55921785a3a27a3cd37afee0111dfe2bcb3e03c31819c197c782598f17f0b150a69d453c9584cd14c4c4d7b9a55d2c5e6cacd4d66fdb3b3663\n@@ -5783,16 +5783,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@typescript-eslint/scope-manager@npm:5.62.0\":\n-  version: 5.62.0\n-  resolution: \"@typescript-eslint/scope-manager@npm:5.62.0\"\n-  dependencies:\n-    \"@typescript-eslint/types\": 5.62.0\n-    \"@typescript-eslint/visitor-keys\": 5.62.0\n-  checksum: 6062d6b797fe1ce4d275bb0d17204c827494af59b5eaf09d8a78cdd39dadddb31074dded4297aaf5d0f839016d601032857698b0e4516c86a41207de606e9573\n-  languageName: node\n-  linkType: hard\n-\n \"@typescript-eslint/scope-manager@npm:6.21.0\":\n   version: 6.21.0\n   resolution: \"@typescript-eslint/scope-manager@npm:6.21.0\"\n@@ -5820,13 +5810,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@typescript-eslint/types@npm:5.62.0\":\n-  version: 5.62.0\n-  resolution: \"@typescript-eslint/types@npm:5.62.0\"\n-  checksum: 48c87117383d1864766486f24de34086155532b070f6264e09d0e6139449270f8a9559cfef3c56d16e3bcfb52d83d42105d61b36743626399c7c2b5e0ac3b670\n-  languageName: node\n-  linkType: hard\n-\n \"@typescript-eslint/types@npm:6.21.0\":\n   version: 6.21.0\n   resolution: \"@typescript-eslint/types@npm:6.21.0\"\n@@ -5834,24 +5817,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@typescript-eslint/typescript-estree@npm:5.62.0\":\n-  version: 5.62.0\n-  resolution: \"@typescript-eslint/typescript-estree@npm:5.62.0\"\n-  dependencies:\n-    \"@typescript-eslint/types\": 5.62.0\n-    \"@typescript-eslint/visitor-keys\": 5.62.0\n-    debug: ^4.3.4\n-    globby: ^11.1.0\n-    is-glob: ^4.0.3\n-    semver: ^7.3.7\n-    tsutils: ^3.21.0\n-  peerDependenciesMeta:\n-    typescript:\n-      optional: true\n-  checksum: 3624520abb5807ed8f57b1197e61c7b1ed770c56dfcaca66372d584ff50175225798bccb701f7ef129d62c5989070e1ee3a0aa2d84e56d9524dcf011a2bb1a52\n-  languageName: node\n-  linkType: hard\n-\n \"@typescript-eslint/typescript-estree@npm:6.21.0\":\n   version: 6.21.0\n   resolution: \"@typescript-eslint/typescript-estree@npm:6.21.0\"\n@@ -5871,7 +5836,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@typescript-eslint/utils@npm:6.21.0\":\n+\"@typescript-eslint/utils@npm:6.21.0, @typescript-eslint/utils@npm:^6.0.0\":\n   version: 6.21.0\n   resolution: \"@typescript-eslint/utils@npm:6.21.0\"\n   dependencies:\n@@ -5888,34 +5853,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@typescript-eslint/utils@npm:^5.10.0\":\n-  version: 5.62.0\n-  resolution: \"@typescript-eslint/utils@npm:5.62.0\"\n-  dependencies:\n-    \"@eslint-community/eslint-utils\": ^4.2.0\n-    \"@types/json-schema\": ^7.0.9\n-    \"@types/semver\": ^7.3.12\n-    \"@typescript-eslint/scope-manager\": 5.62.0\n-    \"@typescript-eslint/types\": 5.62.0\n-    \"@typescript-eslint/typescript-estree\": 5.62.0\n-    eslint-scope: ^5.1.1\n-    semver: ^7.3.7\n-  peerDependencies:\n-    eslint: ^6.0.0 || ^7.0.0 || ^8.0.0\n-  checksum: ee9398c8c5db6d1da09463ca7bf36ed134361e20131ea354b2da16a5fdb6df9ba70c62a388d19f6eebb421af1786dbbd79ba95ddd6ab287324fc171c3e28d931\n-  languageName: node\n-  linkType: hard\n-\n-\"@typescript-eslint/visitor-keys@npm:5.62.0\":\n-  version: 5.62.0\n-  resolution: \"@typescript-eslint/visitor-keys@npm:5.62.0\"\n-  dependencies:\n-    \"@typescript-eslint/types\": 5.62.0\n-    eslint-visitor-keys: ^3.3.0\n-  checksum: 976b05d103fe8335bef5c93ad3f76d781e3ce50329c0243ee0f00c0fcfb186c81df50e64bfdd34970148113f8ade90887f53e3c4938183afba830b4ba8e30a35\n-  languageName: node\n-  linkType: hard\n-\n \"@typescript-eslint/visitor-keys@npm:6.21.0\":\n   version: 6.21.0\n   resolution: \"@typescript-eslint/visitor-keys@npm:6.21.0\"\n@@ -9554,21 +9491,21 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"eslint-plugin-jest@npm:^27.1.0\":\n-  version: 27.9.0\n-  resolution: \"eslint-plugin-jest@npm:27.9.0\"\n+\"eslint-plugin-jest@npm:^28.0.0\":\n+  version: 28.0.0\n+  resolution: \"eslint-plugin-jest@npm:28.0.0\"\n   dependencies:\n-    \"@typescript-eslint/utils\": ^5.10.0\n+    \"@typescript-eslint/utils\": ^6.0.0\n   peerDependencies:\n-    \"@typescript-eslint/eslint-plugin\": ^5.0.0 || ^6.0.0 || ^7.0.0\n-    eslint: ^7.0.0 || ^8.0.0\n+    \"@typescript-eslint/eslint-plugin\": ^6.0.0 || ^7.0.0\n+    eslint: ^7.0.0 || ^8.0.0 || ^9.0.0\n     jest: \"*\"\n   peerDependenciesMeta:\n     \"@typescript-eslint/eslint-plugin\":\n       optional: true\n     jest:\n       optional: true\n-  checksum: e2a4b415105408de28ad146818fcc6f4e122f6a39c6b2216ec5c24a80393f1390298b20231b0467bc5fd730f6e24b05b89e1a6a3ce651fc159aa4174ecc233d0\n+  checksum: 4685a6fccd74364c0f03101215c9e80d95124dd43ed4786b6fcbe978f6a3dfd133cd79fe890d957a613083a34825b1f86a8f8b565ca24a053fe2457ef093959c\n   languageName: node\n   linkType: hard\n \n@@ -9663,7 +9600,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"eslint-scope@npm:5.1.1, eslint-scope@npm:^5.1.1\":\n+\"eslint-scope@npm:5.1.1\":\n   version: 5.1.1\n   resolution: \"eslint-scope@npm:5.1.1\"\n   dependencies:\n@@ -20326,13 +20263,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"tslib@npm:^1.8.1\":\n-  version: 1.14.1\n-  resolution: \"tslib@npm:1.14.1\"\n-  checksum: dbe628ef87f66691d5d2959b3e41b9ca0045c3ee3c7c7b906cc1e328b39f199bb1ad9e671c39025bd56122ac57dfbf7385a94843b1cc07c60a4db74795829acd\n-  languageName: node\n-  linkType: hard\n-\n \"tslib@npm:^2.0.0, tslib@npm:^2.0.1, tslib@npm:^2.0.3, tslib@npm:^2.1.0, tslib@npm:^2.2.0, tslib@npm:^2.3.0, tslib@npm:^2.6.0, tslib@npm:^2.6.2\":\n   version: 2.6.2\n   resolution: \"tslib@npm:2.6.2\"\n@@ -20354,17 +20284,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"tsutils@npm:^3.21.0\":\n-  version: 3.21.0\n-  resolution: \"tsutils@npm:3.21.0\"\n-  dependencies:\n-    tslib: ^1.8.1\n-  peerDependencies:\n-    typescript: \">=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\"\n-  checksum: 1843f4c1b2e0f975e08c4c21caa4af4f7f65a12ac1b81b3b8489366826259323feb3fc7a243123453d2d1a02314205a7634e048d4a8009921da19f99755cdc48\n-  languageName: node\n-  linkType: hard\n-\n \"tuf-js@npm:^2.2.0\":\n   version: 2.2.0\n   resolution: \"tuf-js@npm:2.2.0\""}, {"role": "assistant", "content": "chore: upgrade to new Jest ESLint plugin (#15013)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/input.js\n\ndiff --git a/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/input.js b/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/input.js\nnew file mode 100644\nindex 000000000..80e5d6eab\n--- /dev/null\n+++ b/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/input.js\n@@ -0,0 +1 @@\n+function f(void) { \"use strict\"; }\ndiff --git a/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/output.json b/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/output.json\nnew file mode 100644\nindex 000000000..3daad11c1\n--- /dev/null\n+++ b/packages/babel-parser/test/fixtures/experimental/discard-binding/invalid-function-parameter-local-use-strict/output.json\n@@ -0,0 +1,54 @@\n+{\n+  \"type\": \"File\",\n+  \"start\":0,\"end\":34,\"loc\":{\"start\":{\"line\":1,\"column\":0,\"index\":0},\"end\":{\"line\":1,\"column\":34,\"index\":34}},\n+  \"errors\": [\n+    \"SyntaxError: Illegal 'use strict' directive in function with non-simple parameter list. (1:0)\"\n+  ],\n+  \"program\": {\n+    \"type\": \"Program\",\n+    \"start\":0,\"end\":34,\"loc\":{\"start\":{\"line\":1,\"column\":0,\"index\":0},\"end\":{\"line\":1,\"column\":34,\"index\":34}},\n+    \"sourceType\": \"script\",\n+    \"interpreter\": null,\n+    \"body\": [\n+      {\n+        \"type\": \"FunctionDeclaration\",\n+        \"start\":0,\"end\":34,\"loc\":{\"start\":{\"line\":1,\"column\":0,\"index\":0},\"end\":{\"line\":1,\"column\":34,\"index\":34}},\n+        \"id\": {\n+          \"type\": \"Identifier\",\n+          \"start\":9,\"end\":10,\"loc\":{\"start\":{\"line\":1,\"column\":9,\"index\":9},\"end\":{\"line\":1,\"column\":10,\"index\":10},\"identifierName\":\"f\"},\n+          \"name\": \"f\"\n+        },\n+        \"generator\": false,\n+        \"async\": false,\n+        \"params\": [\n+          {\n+            \"type\": \"VoidPattern\",\n+            \"start\":11,\"end\":15,\"loc\":{\"start\":{\"line\":1,\"column\":11,\"index\":11},\"end\":{\"line\":1,\"column\":15,\"index\":15}}\n+          }\n+        ],\n+        \"body\": {\n+          \"type\": \"BlockStatement\",\n+          \"start\":17,\"end\":34,\"loc\":{\"start\":{\"line\":1,\"column\":17,\"index\":17},\"end\":{\"line\":1,\"column\":34,\"index\":34}},\n+          \"body\": [],\n+          \"directives\": [\n+            {\n+              \"type\": \"Directive\",\n+              \"start\":19,\"end\":32,\"loc\":{\"start\":{\"line\":1,\"column\":19,\"index\":19},\"end\":{\"line\":1,\"column\":32,\"index\":32}},\n+              \"value\": {\n+                \"type\": \"DirectiveLiteral\",\n+                \"start\":19,\"end\":31,\"loc\":{\"start\":{\"line\":1,\"column\":19,\"index\":19},\"end\":{\"line\":1,\"column\":31,\"index\":31}},\n+                \"extra\": {\n+                  \"rawValue\": \"use strict\",\n+                  \"raw\": \"\\\"use strict\\\"\",\n+                  \"expressionValue\": \"use strict\"\n+                },\n+                \"value\": \"use strict\"\n+              }\n+            }\n+          ]\n+        }\n+      }\n+    ],\n+    \"directives\": []\n+  }\n+}"}, {"role": "assistant", "content": "test: add invalid local use strict test (#17293)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/examples.yml\n\ndiff --git a/.github/workflows/examples.yml b/.github/workflows/examples.yml\nindex 4c808d452..22a3deb51 100644\n--- a/.github/workflows/examples.yml\n+++ b/.github/workflows/examples.yml\n@@ -33,7 +33,7 @@ jobs:\n       - run: yarn build:examples\n \n       - name: Create Pull Request\n-        uses: peter-evans/create-pull-request@84ae59a2cdc2258d6fa0732dd66352dddae2a412 # v7.0.9\n+        uses: peter-evans/create-pull-request@98357b18bf14b5342f975ff684046ec3b2a07725 # v8.0.0\n         with:\n           token: ${{ secrets.GITHUB_TOKEN }}\n           delete-branch: true"}, {"role": "assistant", "content": "chore(deps): bump peter-evans/create-pull-request from 7.0.9 to 8.0.0 (#20218)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/archaeologist-dig.yml\n\ndiff --git a/.github/workflows/archaeologist-dig.yml b/.github/workflows/archaeologist-dig.yml\nindex b527446a..78775ecd 100644\n--- a/.github/workflows/archaeologist-dig.yml\n+++ b/.github/workflows/archaeologist-dig.yml\n@@ -41,7 +41,7 @@ jobs:\n           sha-file: .dig-old\n           filename: electron.old.d.ts\n       - name: Upload artifacts\n-        uses: actions/upload-artifact@ea165f8d65b6e75b540449e92b4886f43607fa02 #v4.6.2\n+        uses: actions/upload-artifact@330a01c490aca151604b8cf639adc76d48f6c5d4 #v5.0.0\n         with:\n           name: artifacts\n           path: electron/artifacts\ndiff --git a/.github/workflows/pipeline-segment-electron-test.yml b/.github/workflows/pipeline-segment-electron-test.yml\nindex cde43774..80b11005 100644\n--- a/.github/workflows/pipeline-segment-electron-test.yml\n+++ b/.github/workflows/pipeline-segment-electron-test.yml\n@@ -262,7 +262,7 @@ jobs:\n       if: always() && !cancelled()\n     - name: Upload Test Artifacts\n       if: always() && !cancelled()\n-      uses: actions/upload-artifact@ea165f8d65b6e75b540449e92b4886f43607fa02\n+      uses: actions/upload-artifact@330a01c490aca151604b8cf639adc76d48f6c5d4\n       with:\n         name: test_artifacts_${{ env.ARTIFACT_KEY }}_${{ matrix.shard }}\n         path: src/electron/spec/artifacts\ndiff --git a/.github/workflows/scorecards.yml b/.github/workflows/scorecards.yml\nindex 4176d529..d72ac359 100644\n--- a/.github/workflows/scorecards.yml\n+++ b/.github/workflows/scorecards.yml\n@@ -42,7 +42,7 @@ jobs:\n       # Upload the results as artifacts (optional). Commenting out will disable uploads of run results in SARIF\n       # format to the repository Actions tab.\n       - name: \"Upload artifact\"\n-        uses: actions/upload-artifact@ea165f8d65b6e75b540449e92b4886f43607fa02 # v4.6.2\n+        uses: actions/upload-artifact@330a01c490aca151604b8cf639adc76d48f6c5d4 # v5.0.0\n         with:\n           name: SARIF file\n           path: results.sarif"}, {"role": "assistant", "content": "build(deps): bump actions/upload-artifact from 4.6.2 to 5.0.0 (#48691)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n Makefile.js\n\ndiff --git a/Makefile.js b/Makefile.js\nindex 4360f4f6..09080d00 100644\n--- a/Makefile.js\n+++ b/Makefile.js\n@@ -19,7 +19,6 @@ const checker = require(\"npm-license\"),\n \tpath = require(\"node:path\"),\n \tsemver = require(\"semver\"),\n \tejs = require(\"ejs\"),\n-\t{ CLIEngine } = require(\"./lib/cli-engine\"),\n \tbuiltinRules = require(\"./lib/rules\"),\n \tchildProcess = require(\"node:child_process\");\n \n@@ -154,24 +153,19 @@ function generateBlogPost(releaseInfo, prereleaseMajorVersion) {\n \n /**\n  * Generates a doc page with formatter result examples\n- * @param {Object} formatterInfo Linting results from each formatter\n  * @returns {void}\n  */\n-function generateFormatterExamples(formatterInfo) {\n-\tconst output = ejs.render(\n-\t\tcat(\"./templates/formatter-examples.md.ejs\"),\n-\t\tformatterInfo,\n-\t);\n-\tconst outputDir = path.join(DOCS_SRC_DIR, \"use/formatters/\"),\n-\t\tfilename = path.join(outputDir, \"index.md\"),\n-\t\thtmlFilename = path.join(outputDir, \"html-formatter-example.html\");\n-\n-\tif (!test(\"-d\", outputDir)) {\n-\t\tmkdir(outputDir);\n+function generateFormatterExamples() {\n+\t// We don't need the stack trace of execFileSync if the command fails.\n+\ttry {\n+\t\tchildProcess.execFileSync(\n+\t\t\tprocess.execPath,\n+\t\t\t[\"tools/generate-formatter-examples.js\"],\n+\t\t\t{ stdio: \"inherit\" },\n+\t\t);\n+\t} catch {\n+\t\texit(1);\n \t}\n-\n-\toutput.to(filename);\n-\tformatterInfo.formatterResults.html.result.to(htmlFilename);\n }\n \n /**\n@@ -523,70 +517,6 @@ function getFirstVersionOfDeletion(filePath) {\n \t\t.sort(semver.compare)[0];\n }\n \n-/**\n- * Gets linting results from every formatter, based on a hard-coded snippet and config\n- * @returns {Object} Output from each formatter\n- */\n-function getFormatterResults() {\n-\tconst util = require(\"node:util\");\n-\tconst formattersMetadata = require(\"./lib/cli-engine/formatters/formatters-meta.json\");\n-\n-\tconst formatterFiles = fs\n-\t\t\t.readdirSync(\"./lib/cli-engine/formatters/\")\n-\t\t\t.filter(fileName => !fileName.includes(\"formatters-meta.json\")),\n-\t\trules = {\n-\t\t\t\"no-else-return\": \"warn\",\n-\t\t\tindent: [\"warn\", 4],\n-\t\t\t\"space-unary-ops\": \"error\",\n-\t\t\tsemi: [\"warn\", \"always\"],\n-\t\t\t\"consistent-return\": \"error\",\n-\t\t},\n-\t\tcli = new CLIEngine({\n-\t\t\tuseEslintrc: false,\n-\t\t\tbaseConfig: { extends: \"eslint:recommended\" },\n-\t\t\trules,\n-\t\t}),\n-\t\tcodeString = [\n-\t\t\t\"function addOne(i) {\",\n-\t\t\t\"    if (i != NaN) {\",\n-\t\t\t\"        return i ++\",\n-\t\t\t\"    } else {\",\n-\t\t\t\"      return\",\n-\t\t\t\"    }\",\n-\t\t\t\"};\",\n-\t\t].join(\"\\n\"),\n-\t\trawMessages = cli.executeOnText(codeString, \"fullOfProblems.js\", true),\n-\t\trulesMap = cli.getRules(),\n-\t\trulesMeta = {};\n-\n-\tObject.keys(rules).forEach(ruleId => {\n-\t\trulesMeta[ruleId] = rulesMap.get(ruleId).meta;\n-\t});\n-\n-\treturn formatterFiles.reduce(\n-\t\t(data, filename) => {\n-\t\t\tconst fileExt = path.extname(filename),\n-\t\t\t\tname = path.basename(filename, fileExt);\n-\n-\t\t\tif (fileExt === \".js\") {\n-\t\t\t\tconst formattedOutput = cli.getFormatter(name)(\n-\t\t\t\t\trawMessages.results,\n-\t\t\t\t\t{ rulesMeta },\n-\t\t\t\t);\n-\n-\t\t\t\tdata.formatterResults[name] = {\n-\t\t\t\t\tresult: util.stripVTControlCharacters(formattedOutput),\n-\t\t\t\t\tdescription: formattersMetadata.find(\n-\t\t\t\t\t\tformatter => formatter.name === name,\n-\t\t\t\t\t).description,\n-\t\t\t\t};\n-\t\t\t}\n-\t\t\treturn data;\n-\t\t},\n-\t\t{ formatterResults: {} },\n-\t);\n-}\n-\n /**\n  * Gets a path to an executable in node_modules/.bin\n  * @param {string} command The executable name\n@@ -745,7 +675,7 @@ target.gensite = function () {\n \n \t// 3. Create Example Formatter Output Page\n \techo(\"> Creating the formatter examples (Step 3)\");\n-\tgenerateFormatterExamples(getFormatterResults());\n+\tgenerateFormatterExamples();\n \n \techo(\"Done generating documentation\");\n };\ndiff --git a/knip.jsonc b/knip.jsonc\nindex 9bc7e052..e065fb33 100644\n--- a/knip.jsonc\n+++ b/knip.jsonc\n@@ -21,6 +21,8 @@\n         \"tests/performance/jshint.js\",\n         // Many are required using dynamic paths such as `fs.readFileSync(path.join())`:\n         \"tests/fixtures/**\",\n+        // Run from Makefile.js\n+        \"tools/generate-formatter-examples.js\",\n       ],\n       \"ignoreDependencies\": [\n         \"c8\",\ndiff --git a/tools/generate-formatter-examples.js b/tools/generate-formatter-examples.js\nnew file mode 100644\nindex 00000000..868dca1b\n--- /dev/null\n+++ b/tools/generate-formatter-examples.js\n@@ -0,0 +1,114 @@\n+/**\n+ * @fileoverview Generates documentation files for formatters:\n+ *    - docs/src/use/formatters/index.md\n+ *    - docs/src/use/formatters/html-formatter-example.html\n+ * @author Milos Djermanovic\n+ */\n+\n+\"use strict\";\n+\n+//-----------------------------------------------------------------------------\n+// Requirements\n+//-----------------------------------------------------------------------------\n+\n+const fs = require(\"node:fs/promises\");\n+const path = require(\"node:path\");\n+const util = require(\"node:util\");\n+\n+const ejs = require(\"ejs\");\n+\n+const { ESLint } = require(\"../lib/api\");\n+const { defineConfig } = require(\"../lib/config-api\");\n+const js = require(\"../packages/js\");\n+\n+const formattersMetadata = require(\"../lib/cli-engine/formatters/formatters-meta.json\");\n+\n+//-----------------------------------------------------------------------------\n+// Helpers\n+//-----------------------------------------------------------------------------\n+\n+const FORMATTERS_DOCS_DIR = path.join(__dirname, \"../docs/src/use/formatters\");\n+const INDEX_FILENAME = path.resolve(FORMATTERS_DOCS_DIR, \"index.md\");\n+const HTML_FORMATTER_FILENAME = path.resolve(\n+\tFORMATTERS_DOCS_DIR,\n+\t\"html-formatter-example.html\",\n+);\n+\n+const TEMPLATE_FILENAME = path.resolve(\n+\t__dirname,\n+\t\"../templates/formatter-examples.md.ejs\",\n+);\n+\n+const exampleCode = [\n+\t\"function addOne(i) {\",\n+\t\"    if (i != NaN) {\",\n+\t\"        return i ++\",\n+\t\"    } else {\",\n+\t\"      return\",\n+\t\"    }\",\n+\t\"};\",\n+].join(\"\\n\");\n+\n+const exampleConfig = defineConfig([\n+\tjs.configs.recommended,\n+\t{\n+\t\trules: {\n+\t\t\t\"consistent-return\": 2,\n+\t\t\tindent: [1, 4],\n+\t\t\t\"no-else-return\": 1,\n+\t\t\tsemi: [1, \"always\"],\n+\t\t\t\"space-unary-ops\": 2,\n+\t\t},\n+\t},\n+]);\n+\n+/**\n+ * Gets linting results from every formatter, based on a hard-coded snippet and config\n+ * @returns {Promise<Object>} Output from each formatter\n+ */\n+async function getFormatterResults() {\n+\tconst eslint = new ESLint({\n+\t\tignore: false,\n+\t\toverrideConfigFile: true,\n+\t\tbaseConfig: exampleConfig,\n+\t});\n+\n+\tconst lintResults = await eslint.lintText(exampleCode, {\n+\t\tfilePath: \"fullOfProblems.js\",\n+\t});\n+\n+\treturn Object.fromEntries(\n+\t\tawait Promise.all(\n+\t\t\tformattersMetadata.map(async ({ name, description }) => {\n+\t\t\t\tconst formatter = await eslint.loadFormatter(name);\n+\n+\t\t\t\treturn [\n+\t\t\t\t\tname,\n+\t\t\t\t\t{\n+\t\t\t\t\t\tresult: util.stripVTControlCharacters(\n+\t\t\t\t\t\t\tformatter.format(lintResults),\n+\t\t\t\t\t\t),\n+\t\t\t\t\t\tdescription,\n+\t\t\t\t\t},\n+\t\t\t\t];\n+\t\t\t}),\n+\t\t),\n+\t);\n+}\n+\n+//-----------------------------------------------------------------------------\n+// CLI\n+//-----------------------------------------------------------------------------\n+\n+(async () => {\n+\tconst formatterResults = await getFormatterResults();\n+\tconst indexFileContent = ejs.render(\n+\t\tawait fs.readFile(TEMPLATE_FILENAME, \"utf8\"),\n+\t\t{ formatterResults },\n+\t);\n+\n+\tawait Promise.all([\n+\t\tfs.writeFile(INDEX_FILENAME, indexFileContent),\n+\t\tfs.writeFile(HTML_FORMATTER_FILENAME, formatterResults.html.result),\n+\t]);\n+})();"}, {"role": "assistant", "content": "build: use `ESLint` class to generate formatter examples (#19972)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 3ca58e354..190507eac 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -1003,13 +1003,6 @@\n     \"@types/node\" \"*\"\n     jest-mock \"30.0.5\"\n \n-\"@jest/expect-utils@30.0.5\":\n-  version \"30.0.5\"\n-  resolved \"https://registry.yarnpkg.com/@jest/expect-utils/-/expect-utils-30.0.5.tgz#9d42e4b8bc80367db30abc6c42b2cb14073f66fc\"\n-  integrity sha512-F3lmTT7CXWYywoVUGTCmom0vXq3HTTkaZyTAzIy+bXSBizB7o5qzlC9VCtq0arOa8GqmNsbg/cE9C6HLn7Szew==\n-  dependencies:\n-    \"@jest/get-type\" \"30.0.1\"\n-\n \"@jest/expect-utils@30.1.2\":\n   version \"30.1.2\"\n   resolved \"https://registry.yarnpkg.com/@jest/expect-utils/-/expect-utils-30.1.2.tgz#88ea18040f707c9fadb6fd9e77568cae5266cee8\"\n@@ -1037,11 +1030,6 @@\n     jest-mock \"30.0.5\"\n     jest-util \"30.0.5\"\n \n-\"@jest/get-type@30.0.1\":\n-  version \"30.0.1\"\n-  resolved \"https://registry.yarnpkg.com/@jest/get-type/-/get-type-30.0.1.tgz#0d32f1bbfba511948ad247ab01b9007724fc9f52\"\n-  integrity sha512-AyYdemXCptSRFirI5EPazNxyPwAL0jXt3zceFjaj8NFiKP9pOi0bfXonf6qkf82z2t3QWPeLCWWw4stPBzctLw==\n-\n \"@jest/get-type@30.1.0\":\n   version \"30.1.0\"\n   resolved \"https://registry.yarnpkg.com/@jest/get-type/-/get-type-30.1.0.tgz#4fcb4dc2ebcf0811be1c04fd1cb79c2dba431cbc\"\n@@ -1351,12 +1339,12 @@\n     \"@sinonjs/commons\" \"^3.0.1\"\n \n \"@stylistic/eslint-plugin@^5.2.2\":\n-  version \"5.2.3\"\n-  resolved \"https://registry.yarnpkg.com/@stylistic/eslint-plugin/-/eslint-plugin-5.2.3.tgz#f2be5d25e768f5ef4bb72d339bb71c500accef61\"\n-  integrity sha512-oY7GVkJGVMI5benlBDCaRrSC1qPasafyv5dOBLLv5MTilMGnErKhO6ziEfodDDIZbo5QxPUNW360VudJOFODMw==\n+  version \"5.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@stylistic/eslint-plugin/-/eslint-plugin-5.3.1.tgz#1aead935023b708ca6a27d079b1a96b726a38fe2\"\n+  integrity sha512-Ykums1VYonM0TgkD0VteVq9mrlO2FhF48MDJnPyv3MktIB2ydtuhlO0AfWm7xnW1kyf5bjOqA6xc7JjviuVTxg==\n   dependencies:\n     \"@eslint-community/eslint-utils\" \"^4.7.0\"\n-    \"@typescript-eslint/types\" \"^8.38.0\"\n+    \"@typescript-eslint/types\" \"^8.41.0\"\n     eslint-visitor-keys \"^4.2.1\"\n     espree \"^10.4.0\"\n     estraverse \"^5.3.0\"\n@@ -1564,10 +1552,10 @@\n   resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-8.36.0.tgz#d3d184adc2899e2912c13b17c1590486ef37c7ac\"\n   integrity sha512-xGms6l5cTJKQPZOKM75Dl9yBfNdGeLRsIyufewnxT4vZTrjC0ImQT4fj8QmtJK84F58uSh5HVBSANwcfiXxABQ==\n \n-\"@typescript-eslint/types@^8.34.1\", \"@typescript-eslint/types@^8.36.0\", \"@typescript-eslint/types@^8.38.0\":\n-  version \"8.39.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-8.39.0.tgz#80f010b7169d434a91cd0529d70a528dbc9c99c6\"\n-  integrity sha512-ArDdaOllnCj3yn/lzKn9s0pBQYmmyme/v1HbGIGB0GB/knFI3fWMHloC+oYTJW46tVbYnGKTMDK4ah1sC2v0Kg==\n+\"@typescript-eslint/types@^8.34.1\", \"@typescript-eslint/types@^8.36.0\", \"@typescript-eslint/types@^8.41.0\":\n+  version \"8.41.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-8.41.0.tgz#9935afeaae65e535abcbcee95383fa649c64d16d\"\n+  integrity sha512-9EwxsWdVqh42afLbHP90n2VdHaWU/oWgbH2P0CfcNfdKL7CuKpwMQGjwev56vWu9cSKU7FWSu6r9zck6CVfnag==\n \n \"@typescript-eslint/typescript-estree@8.36.0\":\n   version \"8.36.0\"\n@@ -2401,7 +2389,7 @@ camelcase@^6.3.0:\n   resolved \"https://registry.yarnpkg.com/camelcase/-/camelcase-6.3.0.tgz#5685b95eb209ac9c0c177467778c9c84df58ba9a\"\n   integrity sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==\n \n-caniuse-lite@^1.0.30001735, caniuse-lite@^1.0.30001737:\n+caniuse-lite@^1.0.30001737:\n   version \"1.0.30001739\"\n   resolved \"https://registry.yarnpkg.com/caniuse-lite/-/caniuse-lite-1.0.30001739.tgz#b34ce2d56bfc22f4352b2af0144102d623a124f4\"\n   integrity sha512-y+j60d6ulelrNSwpPyrHdl+9mJnQzHBr08xm48Qno0nSk4h3Qojh+ziv2qE6rXf4k3tadF4o1J/1tAbVm1NtnA==\n@@ -3042,7 +3030,7 @@ eastasianwidth@^0.2.0:\n   resolved \"https://registry.yarnpkg.com/eastasianwidth/-/eastasianwidth-0.2.0.tgz#696ce2ec0aa0e6ea93a397ffcf24aa7840c827cb\"\n   integrity sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==\n \n-electron-to-chromium@^1.5.204, electron-to-chromium@^1.5.211:\n+electron-to-chromium@^1.5.211:\n   version \"1.5.211\"\n   resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.211.tgz#749317bf9cf894c06f67980940cf8074e5eb08ca\"\n   integrity sha512-IGBvimJkotaLzFnwIVgW9/UD/AOJ2tByUmeOrtqBfACSbAw5b1G0XpvdaieKyc7ULmbwXVx+4e4Be8pOPBrYkw==\n@@ -4856,16 +4844,6 @@ jest-config@30.1.2:\n     slash \"^3.0.0\"\n     strip-json-comments \"^3.1.1\"\n \n-jest-diff@30.0.5:\n-  version \"30.0.5\"\n-  resolved \"https://registry.yarnpkg.com/jest-diff/-/jest-diff-30.0.5.tgz#b40f81e0c0d13e5b81c4d62b0d0dfa6a524ee0fd\"\n-  integrity sha512-1UIqE9PoEKaHcIKvq2vbibrCog4Y8G0zmOxgQUVEiTqwR5hJVMCoDsN1vFvI5JvwD37hjueZ1C4l2FyGnfpE0A==\n-  dependencies:\n-    \"@jest/diff-sequences\" \"30.0.1\"\n-    \"@jest/get-type\" \"30.0.1\"\n-    chalk \"^4.1.2\"\n-    pretty-format \"30.0.5\"\n-\n jest-diff@30.1.2, jest-diff@^30.1.2:\n   version \"30.1.2\"\n   resolved \"https://registry.yarnpkg.com/jest-diff/-/jest-diff-30.1.2.tgz#8ff4217e5b63fef49a5b37462999d8f5299a4eb4\"\n@@ -4943,16 +4921,6 @@ jest-leak-detector@30.1.0:\n     \"@jest/get-type\" \"30.1.0\"\n     pretty-format \"30.0.5\"\n \n-jest-matcher-utils@30.0.5:\n-  version \"30.0.5\"\n-  resolved \"https://registry.yarnpkg.com/jest-matcher-utils/-/jest-matcher-utils-30.0.5.tgz#dff3334be58faea4a5e1becc228656fbbfc2467d\"\n-  integrity sha512-uQgGWt7GOrRLP1P7IwNWwK1WAQbq+m//ZY0yXygyfWp0rJlksMSLQAA4wYQC3b6wl3zfnchyTx+k3HZ5aPtCbQ==\n-  dependencies:\n-    \"@jest/get-type\" \"30.0.1\"\n-    chalk \"^4.1.2\"\n-    jest-diff \"30.0.5\"\n-    pretty-format \"30.0.5\"\n-\n jest-matcher-utils@30.1.2:\n   version \"30.1.2\"\n   resolved \"https://registry.yarnpkg.com/jest-matcher-utils/-/jest-matcher-utils-30.1.2.tgz#3f1b63949f740025aff740c6c6a1b653ae370fbb\"\n@@ -4963,21 +4931,6 @@ jest-matcher-utils@30.1.2:\n     jest-diff \"30.1.2\"\n     pretty-format \"30.0.5\"\n \n-jest-message-util@30.0.5:\n-  version \"30.0.5\"\n-  resolved \"https://registry.yarnpkg.com/jest-message-util/-/jest-message-util-30.0.5.tgz#dd12ffec91dd3fa6a59cbd538a513d8e239e070c\"\n-  integrity sha512-NAiDOhsK3V7RU0Aa/HnrQo+E4JlbarbmI3q6Pi4KcxicdtjV82gcIUrejOtczChtVQR4kddu1E1EJlW6EN9IyA==\n-  dependencies:\n-    \"@babel/code-frame\" \"^7.27.1\"\n-    \"@jest/types\" \"30.0.5\"\n-    \"@types/stack-utils\" \"^2.0.3\"\n-    chalk \"^4.1.2\"\n-    graceful-fs \"^4.2.11\"\n-    micromatch \"^4.0.8\"\n-    pretty-format \"30.0.5\"\n-    slash \"^3.0.0\"\n-    stack-utils \"^2.0.6\"\n-\n jest-message-util@30.1.0:\n   version \"30.1.0\"\n   resolved \"https://registry.yarnpkg.com/jest-message-util/-/jest-message-util-30.1.0.tgz#653a9bb1a33306eddf13455ce0666ba621b767c4\""}, {"role": "assistant", "content": "chore(deps-dev): bump @stylistic/eslint-plugin (#19864)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-generator/src/source-map.ts\n\ndiff --git a/packages/babel-generator/src/source-map.ts b/packages/babel-generator/src/source-map.ts\nindex 634b41fb6..fa27a87cf 100644\n--- a/packages/babel-generator/src/source-map.ts\n+++ b/packages/babel-generator/src/source-map.ts\n@@ -58,7 +58,7 @@ export default class SourceMap {\n           setSourceContent(\n             map,\n             resolvedSources[i],\n-            this._inputMap.sourcesContent[i],\n+            this._inputMap.sourcesContent?.[i],\n           );\n         }\n       }\ndiff --git a/packages/babel-generator/test/index.js b/packages/babel-generator/test/index.js\nindex ab84ce99e..b5816f24b 100644\n--- a/packages/babel-generator/test/index.js\n+++ b/packages/babel-generator/test/index.js\n@@ -880,6 +880,40 @@ describe(\"generation\", function () {\n       });\"\n     `);\n   });\n+\n+  it(\"inputSourceMap without sourcesContent\", () => {\n+    const ast = parse(\"var t = x => x * x;\");\n+\n+    expect(\n+      generate(ast, {\n+        sourceMaps: true,\n+        inputSourceMap: {\n+          version: 3,\n+          names: [\"t\", \"x\"],\n+          sources: [\"source-maps/arrow-function/input.js\"],\n+          mappings:\n+            \"AAAA,IAAIA,CAAC,GAAG,SAAJA,CAACA,CAAGC,CAAC;EAAA,OAAIA,CAAC,GAAGA,CAAC;AAAA\",\n+        },\n+      }).map,\n+    ).toMatchInlineSnapshot(`\n+      Object {\n+        \"file\": undefined,\n+        \"mappings\": \"AAAA,IAAIA,CAAC,GAAGC,CAAA,IAAAA,CAAA,GAAJA,CAAC\",\n+        \"names\": Array [\n+          \"t\",\n+          \"x\",\n+        ],\n+        \"sourceRoot\": undefined,\n+        \"sources\": Array [\n+          \"source-maps/arrow-function/input.js\",\n+        ],\n+        \"sourcesContent\": Array [\n+          undefined,\n+        ],\n+        \"version\": 3,\n+      }\n+    `);\n+  });\n });\n \n describe(\"programmatic generation\", function () {"}, {"role": "assistant", "content": "fix: Handling source maps without `sourcesContent` (#15445)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/issue-labeled.yml\n\ndiff --git a/.github/workflows/issue-labeled.yml b/.github/workflows/issue-labeled.yml\nindex 80066a10..e9c4195d 100644\n--- a/.github/workflows/issue-labeled.yml\n+++ b/.github/workflows/issue-labeled.yml\n@@ -72,7 +72,7 @@ jobs:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n       - name: Create comment\n         if: ${{ steps.check-for-comment.outputs.SHOULD_COMMENT }}\n-        uses: actions-cool/issues-helper@50068f49b7b2b3857270ead65e2d02e4459b022c # v3.6.2\n+        uses: actions-cool/issues-helper@564cd9b1baacd7a9cd634e8039a149901ee5f600 # v3.7.1\n         with:\n           actions: 'create-comment'\n           token: ${{ steps.generate-token.outputs.token }}\ndiff --git a/.github/workflows/issue-opened.yml b/.github/workflows/issue-opened.yml\nindex d01349b2..323df66a 100644\n--- a/.github/workflows/issue-opened.yml\n+++ b/.github/workflows/issue-opened.yml\n@@ -134,7 +134,7 @@ jobs:\n             }\n       - name: Create unsupported major comment\n         if: ${{ steps.add-labels.outputs.unsupportedMajor }}\n-        uses: actions-cool/issues-helper@50068f49b7b2b3857270ead65e2d02e4459b022c # v3.6.2\n+        uses: actions-cool/issues-helper@564cd9b1baacd7a9cd634e8039a149901ee5f600 # v3.7.1\n         with:\n           actions: 'create-comment'\n           token: ${{ steps.generate-token.outputs.token }}"}, {"role": "assistant", "content": "build(deps): bump actions-cool/issues-helper from 3.6.2 to 3.7.1 (#48763)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/NormalModule.js\n\ndiff --git a/lib/NormalModule.js b/lib/NormalModule.js\nindex 34134ba9a..5153d0c39 100644\n--- a/lib/NormalModule.js\n+++ b/lib/NormalModule.js\n@@ -435,6 +435,13 @@ class NormalModule extends Module {\n \t\treturn /** @type {string} */ (requestShortener.shorten(this.userRequest));\n \t}\n \n+\t/**\n+\t * @returns {string | null} return the resource path\n+\t */\n+\tgetResource() {\n+\t\treturn this.matchResource || this.resource;\n+\t}\n+\n \t/**\n \t * @param {LibIdentOptions} options options\n \t * @returns {string | null} an identifier for library inclusion\n@@ -453,7 +460,7 @@ class NormalModule extends Module {\n \t * @returns {string | null} absolute path which should be used for condition matching (usually the resource path)\n \t */\n \tnameForCondition() {\n-\t\tconst resource = this.matchResource || this.resource;\n+\t\tconst resource = /** @type {string} */ (this.getResource());\n \t\tconst idx = resource.indexOf(\"?\");\n \t\tif (idx >= 0) return resource.slice(0, idx);\n \t\treturn resource;\ndiff --git a/lib/asset/AssetGenerator.js b/lib/asset/AssetGenerator.js\nindex b551e33df..77badcfa9 100644\n--- a/lib/asset/AssetGenerator.js\n+++ b/lib/asset/AssetGenerator.js\n@@ -219,7 +219,8 @@ class AssetGenerator extends Generator {\n \tstatic getSourceFileName(module, runtimeTemplate) {\n \t\treturn makePathsRelative(\n \t\t\truntimeTemplate.compilation.compiler.context,\n-\t\t\tmodule.matchResource || module.resource,\n+\t\t\t/** @type {string} */\n+\t\t\t(module.getResource()),\n \t\t\truntimeTemplate.compilation.compiler.root\n \t\t).replace(/^\\.\\//, \"\");\n \t}\n@@ -461,7 +462,7 @@ class AssetGenerator extends Generator {\n \n \t\tif (typeof this.dataUrlOptions === \"function\") {\n \t\t\tencodedSource = this.dataUrlOptions.call(null, source.source(), {\n-\t\t\t\tfilename: module.matchResource || module.resource,\n+\t\t\t\tfilename: /** @type {string} */ (module.getResource()),\n \t\t\t\tmodule\n \t\t\t});\n \t\t} else {\ndiff --git a/lib/asset/AssetParser.js b/lib/asset/AssetParser.js\nindex b4f1d5349..0659a992a 100644\n--- a/lib/asset/AssetParser.js\n+++ b/lib/asset/AssetParser.js\n@@ -33,15 +33,19 @@ class AssetParser extends Parser {\n \t\t\tthrow new Error(\"AssetParser doesn't accept preparsed AST\");\n \t\t}\n \n-\t\tconst buildInfo = /** @type {BuildInfo} */ (state.module.buildInfo);\n+\t\tconst buildInfo =\n+\t\t\t/** @type {BuildInfo} */\n+\t\t\t(state.module.buildInfo);\n \t\tbuildInfo.strict = true;\n-\t\tconst buildMeta = /** @type {BuildMeta} */ (state.module.buildMeta);\n+\t\tconst buildMeta =\n+\t\t\t/** @type {BuildMeta} */\n+\t\t\t(state.module.buildMeta);\n \t\tbuildMeta.exportsType = \"default\";\n \t\tbuildMeta.defaultObject = false;\n \n \t\tif (typeof this.dataUrlCondition === \"function\") {\n \t\t\tbuildInfo.dataUrl = this.dataUrlCondition(source, {\n-\t\t\t\tfilename: state.module.matchResource || state.module.resource,\n+\t\t\t\tfilename: /** @type {string} */ (state.module.getResource()),\n \t\t\t\tmodule: state.module\n \t\t\t});\n \t\t} else if (typeof this.dataUrlCondition === \"boolean\") {\ndiff --git a/lib/css/CssParser.js b/lib/css/CssParser.js\nindex b8b430bc7..9a57256eb 100644\n--- a/lib/css/CssParser.js\n+++ b/lib/css/CssParser.js\n@@ -355,7 +355,7 @@ class CssParser extends Parser {\n \t\t\tmode === \"auto\" &&\n \t\t\tmodule.type === CSS_MODULE_TYPE_AUTO &&\n \t\t\tIS_MODULES.test(\n-\t\t\t\tparseResource(module.matchResource || module.resource).path\n+\t\t\t\tparseResource(/** @type {string} */ (module.getResource())).path\n \t\t\t)\n \t\t) {\n \t\t\tmode = \"local\";\ndiff --git a/lib/dependencies/CssLocalIdentifierDependency.js b/lib/dependencies/CssLocalIdentifierDependency.js\nindex 74ea31175..1c760ce34 100644\n--- a/lib/dependencies/CssLocalIdentifierDependency.js\n+++ b/lib/dependencies/CssLocalIdentifierDependency.js\n@@ -47,7 +47,8 @@ const getLocalIdent = (local, module, chunkGraph, runtimeTemplate) => {\n \tconst relativeResourcePath = makePathsRelative(\n \t\t/** @type {string} */\n \t\t(module.context),\n-\t\tmodule.matchResource || module.resource,\n+\t\t/** @type {string} */\n+\t\t(module.getResource()),\n \t\truntimeTemplate.compilation.compiler.root\n \t);\n \tconst { hashFunction, hashDigest, hashDigestLength, hashSalt, uniqueName } =\ndiff --git a/types.d.ts b/types.d.ts\nindex 65e617859..c6220f736 100644\n--- a/types.d.ts\n+++ b/types.d.ts\n@@ -11052,6 +11052,7 @@ declare class NormalModule extends Module {\n \tloaders: LoaderItem[];\n \textractSourceMap?: boolean;\n \terror: null | WebpackError;\n+\tgetResource(): null | string;\n \n \t/**\n \t * restore unsafe cache data"}, {"role": "assistant", "content": "refactor: code (#19853)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/UpgradingToJest30.md\n\ndiff --git a/docs/UpgradingToJest30.md b/docs/UpgradingToJest30.md\nindex 37c7a47a..8c453f2c 100644\n--- a/docs/UpgradingToJest30.md\n+++ b/docs/UpgradingToJest30.md\n@@ -188,19 +188,23 @@ const mockFs = jest.createMockFromModule('fs');\n \n ### Removed Mock Function Types\n \n+:::info\n+\n+The type changes are only applicable if you explicitly import Jest APIs:\n+\n+```ts\n+import {expect, jest, test} from '@jest/globals';\n+```\n+\n+:::\n+\n Some TypeScript types related to mock functions have been removed from the public API.\n \n - `MockFunctionMetadata`\n - `MockFunctionMetadataType`\n - `SpyInstance`\n \n-If you were using `jest.SpyInstance` in your TypeScript code (for instance, to annotate the return of `jest.spyOn`), you should update to using `jest.Mock` or the more specific `jest.MockedFunction` types.\n-\n-:::note\n-\n-These type removals do not affect runtime behavior – they are only relevant for TypeScript users. JavaScript users or tests will not notice any difference.\n-\n-:::\n+If you were using `jest.SpyInstance` (for instance, to annotate the return of `jest.spyOn`), you should update to using [`jest.Spied`](./MockFunctionAPI.md#jestspiedsource).\n \n ## Module & Runtime Changes"}, {"role": "assistant", "content": "docs: update the type removal notes (#15639)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .../__tests__/components/KeepAlive.spec.ts         | 49 ++++++++++++++++++++++\n packages/runtime-core/src/components/KeepAlive.ts  |  8 +++-\n 2 files changed, 56 insertions(+), 1 deletion(-)\n\ndiff --git a/packages/runtime-core/__tests__/components/KeepAlive.spec.ts b/packages/runtime-core/__tests__/components/KeepAlive.spec.ts\nindex 1e4176b..3309ca0 100644\n--- a/packages/runtime-core/__tests__/components/KeepAlive.spec.ts\n+++ b/packages/runtime-core/__tests__/components/KeepAlive.spec.ts\n@@ -1173,4 +1173,53 @@ describe('KeepAlive', () => {\n     expect(deactivatedHome).toHaveBeenCalledTimes(0)\n     expect(unmountedHome).toHaveBeenCalledTimes(1)\n   })\n+\n+  test('should work with async component when update `include` props', async () => {\n+    let resolve: (comp: Component) => void\n+    const AsyncComp = defineAsyncComponent(\n+      () =>\n+        new Promise(r => {\n+          resolve = r as any\n+        }),\n+    )\n+\n+    const toggle = ref(true)\n+    const instanceRef = ref<any>(null)\n+    const keepaliveInclude = ref(['Foo'])\n+    const App = {\n+      render: () => {\n+        return h(KeepAlive, { include: keepaliveInclude.value }, () =>\n+          toggle.value ? h(AsyncComp, { ref: instanceRef }) : null,\n+        )\n+      },\n+    }\n+\n+    render(h(App), root)\n+    // async component has not been resolved\n+    expect(serializeInner(root)).toBe('<!---->')\n+\n+    resolve!({\n+      name: 'Foo',\n+      data: () => ({ count: 0 }),\n+      render() {\n+        return h('p', this.count)\n+      },\n+    })\n+\n+    await timeout()\n+    // resolved\n+    expect(serializeInner(root)).toBe('<p>0</p>')\n+\n+    // change state + toggle out + update `include` props\n+    instanceRef.value.count++\n+    toggle.value = false\n+    keepaliveInclude.value = ['Foo']\n+    await nextTick()\n+    expect(serializeInner(root)).toBe('<!---->')\n+\n+    // toggle in, state should be maintained\n+    toggle.value = true\n+    await nextTick()\n+    expect(serializeInner(root)).toBe('<p>1</p>')\n+  })\n })\ndiff --git a/packages/runtime-core/src/components/KeepAlive.ts b/packages/runtime-core/src/components/KeepAlive.ts\nindex f2b7bdf..55eaf86 100644\n--- a/packages/runtime-core/src/components/KeepAlive.ts\n+++ b/packages/runtime-core/src/components/KeepAlive.ts\n@@ -202,7 +202,13 @@ const KeepAliveImpl: ComponentOptions = {\n \n     function pruneCache(filter: (name: string) => boolean) {\n       cache.forEach((vnode, key) => {\n-        const name = getComponentName(vnode.type as ConcreteComponent)\n+        // for async components, name check should be based in its loaded\n+        // inner component if available\n+        const name = getComponentName(\n+          isAsyncWrapper(vnode)\n+            ? (vnode.type as ComponentOptions).__asyncResolved || {}\n+            : (vnode.type as ConcreteComponent),\n+        )\n         if (name && !filter(name)) {\n           pruneCacheEntry(key)\n         }", "output": "fix(keep-alive): handle async component name in include/exclude matching", "metadata": {"id": "vue-dfe667c8", "repository": "vue", "commit_hash": "dfe667c8567d48167c250062483d2d2cfc7bdc03"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n compiler-sfc/index.mjs\n\ndiff --git a/compiler-sfc/index.mjs b/compiler-sfc/index.mjs\nnew file mode 100644\nindex 00000000..3c30abc8\n--- /dev/null\n+++ b/compiler-sfc/index.mjs\n@@ -0,0 +1 @@\n+export * from '@vue/compiler-sfc'\ndiff --git a/compiler-sfc/package.json b/compiler-sfc/package.json\nindex d7ccd0a7..778c7ebf 100644\n--- a/compiler-sfc/package.json\n+++ b/compiler-sfc/package.json\n@@ -1,4 +1,5 @@\n {\n   \"main\": \"index.js\",\n+  \"module\": \"index.mjs\",\n   \"types\": \"index.d.ts\"\n }\ndiff --git a/package.json b/package.json\nindex 6b0049d5..8b9e71fb 100644\n--- a/package.json\n+++ b/package.json\n@@ -15,6 +15,22 @@\n     \"compiler-sfc\",\n     \"packages/compiler-sfc\"\n   ],\n+  \"exports\": {\n+    \".\": {\n+      \"import\": {\n+        \"node\": \"./dist/vue.runtime.mjs\",\n+        \"default\": \"./dist/vue.runtime.esm.js\"\n+      },\n+      \"require\": \"./dist/vue.runtime.common.js\",\n+      \"types\": \"./types/index.d.ts\"\n+    },\n+    \"./compiler-sfc\": {\n+      \"import\": \"./compiler-sfc/index.mjs\",\n+      \"require\": \"./compiler-sfc/index.js\"\n+    },\n+    \"./dist/*\": \"./dist/*\",\n+    \"./types/*\": \"./types/*\"\n+  },\n   \"sideEffects\": false,\n   \"scripts\": {\n     \"dev\": \"rollup -w -c scripts/config.js --environment TARGET:full-dev\",\ndiff --git a/scripts/config.js b/scripts/config.js\nindex 2360c802..610e8d0a 100644\n--- a/scripts/config.js\n+++ b/scripts/config.js\n@@ -65,6 +65,13 @@ const builds = {\n     format: 'es',\n     banner\n   },\n+  // Runtime only ES modules build (for Node)\n+  'runtime-mjs': {\n+    entry: resolve('web/entry-runtime-esm.ts'),\n+    dest: resolve('dist/vue.runtime.mjs'),\n+    format: 'es',\n+    banner\n+  },\n   // Runtime+compiler ES modules build (for bundlers)\n   'full-esm': {\n     entry: resolve('web/entry-runtime-with-compiler-esm.ts'),"}, {"role": "assistant", "content": "feat: add exports field + mjs build"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex b3fc161d..70b5181b 100644\n--- a/README.md\n+++ b/README.md\n@@ -333,7 +333,7 @@ to get your logo on our READMEs and [website](https://eslint.org/sponsors).\n <p><a href=\"https://automattic.com\"><img src=\"https://images.opencollective.com/automattic/d0ef3e1/logo.png\" alt=\"Automattic\" height=\"128\"></a> <a href=\"https://www.airbnb.com/\"><img src=\"https://images.opencollective.com/airbnb/d327d66/logo.png\" alt=\"Airbnb\" height=\"128\"></a></p><h3>Gold Sponsors</h3>\n <p><a href=\"https://qlty.sh/\"><img src=\"https://images.opencollective.com/qltysh/33d157d/logo.png\" alt=\"Qlty Software\" height=\"96\"></a> <a href=\"https://trunk.io/\"><img src=\"https://images.opencollective.com/trunkio/fb92d60/avatar.png\" alt=\"trunk.io\" height=\"96\"></a> <a href=\"https://shopify.engineering/\"><img src=\"https://avatars.githubusercontent.com/u/8085\" alt=\"Shopify\" height=\"96\"></a></p><h3>Silver Sponsors</h3>\n <p><a href=\"https://vite.dev/\"><img src=\"https://images.opencollective.com/vite/e6d15e1/logo.png\" alt=\"Vite\" height=\"64\"></a> <a href=\"https://liftoff.io/\"><img src=\"https://images.opencollective.com/liftoff/5c4fa84/logo.png\" alt=\"Liftoff\" height=\"64\"></a> <a href=\"https://americanexpress.io\"><img src=\"https://avatars.githubusercontent.com/u/3853301\" alt=\"American Express\" height=\"64\"></a> <a href=\"https://stackblitz.com\"><img src=\"https://avatars.githubusercontent.com/u/28635252\" alt=\"StackBlitz\" height=\"64\"></a></p><h3>Bronze Sponsors</h3>\n-<p><a href=\"https://syntax.fm\"><img src=\"https://github.com/syntaxfm.png\" alt=\"Syntax\" height=\"32\"></a> <a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://sentry.io\"><img src=\"https://github.com/getsentry.png\" alt=\"Sentry\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n+<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n <h3>Technology Sponsors</h3>\n Technology sponsors allow us to use their products and services for free as part of a contribution to the open source ecosystem and our work.\n <p><a href=\"https://netlify.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/netlify-icon.svg\" alt=\"Netlify\" height=\"32\"></a> <a href=\"https://algolia.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/algolia-icon.svg\" alt=\"Algolia\" height=\"32\"></a> <a href=\"https://1password.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/1password-icon.svg\" alt=\"1Password\" height=\"32\"></a></p>"}, {"role": "assistant", "content": "docs: Update README"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n e2e/native-esm/yarn.lock\n\ndiff --git a/e2e/native-esm/yarn.lock b/e2e/native-esm/yarn.lock\nindex f2e5a936..2fa76517 100644\n--- a/e2e/native-esm/yarn.lock\n+++ b/e2e/native-esm/yarn.lock\n@@ -341,13 +341,13 @@ __metadata:\n   linkType: hard\n \n \"cross-spawn@npm:^7.0.0\":\n-  version: 7.0.3\n-  resolution: \"cross-spawn@npm:7.0.3\"\n+  version: 7.0.6\n+  resolution: \"cross-spawn@npm:7.0.6\"\n   dependencies:\n     path-key: ^3.1.0\n     shebang-command: ^2.0.0\n     which: ^2.0.1\n-  checksum: 671cc7c7288c3a8406f3c69a3ae2fc85555c04169e9d611def9a675635472614f1c0ed0ef80955d5b6d4e724f6ced67f0ad1bb006c2ea643488fcfef994d7f52\n+  checksum: 8d306efacaf6f3f60e0224c287664093fa9185680b2d195852ba9a863f85d02dcc737094c6e512175f8ee0161f9b87c73c6826034c2422e39de7d6569cf4503b\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "chore(deps): bump cross-spawn from 7.0.3 to 7.0.6 in /e2e/native-esm (#15397)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex be58e62d1..b76dcde33 100644\n--- a/README.md\n+++ b/README.md\n@@ -312,16 +312,9 @@ For information about the governance of the webpack project, see [GOVERNANCE.md]\n - [thelarkinn](https://github.com/thelarkinn) -\n   **Sean Larkin** <<selarkin@microsoft.com>> (he/him)\n \n-<h3>Core Collaborators</h3>\n-\n-- [jhnns](https://github.com/jhnns) -\n-  **Johannes Ewald** <<mail@johannesewald.de>>\n-- [sokra](https://github.com/sokra) -\n-  **Tobias Koppers** <<jackworks@protonmail.co>>\n-- [spacek33z](https://github.com/spacek33z) -\n-  **Kees Kluskens** <<kees@webduck.nl>>\n-- [TheLarkInn](https://github.com/TheLarkInn) -\n-  **Sean T. Larkin** <<selarkin@microsoft.com>>\n+<h3>Maintenance</h3>\n+\n+This webpack repository is maintained by the [`Core Working Group`](./WORKING_GROUP.md).\n \n <h2>Sponsoring</h2>\n \ndiff --git a/WORKING_GROUP.md b/WORKING_GROUP.md\nnew file mode 100644\nindex 000000000..3578afb92\n--- /dev/null\n+++ b/WORKING_GROUP.md\n@@ -0,0 +1,48 @@\n+# Webpack Core Working Group\n+\n+This document outlines the webpack core working group.\n+\n+---\n+\n+## Working Group Name\n+\n+Webpack Core Working Group\n+\n+## Purpose and Responsibilities\n+\n+The purpose of this working group is to facilitate, implement and fix problems and features within the core of webpack. This core includes tasking such as bugfixes, feature implementation and in general maintaining the main logic of webpack.\n+\n+Each member of the working group is required to adhere to the [governance model of webpack](https://github.com/webpack/governance). In addition to having responsibility of the main part of webpack, the working group will manage other parts of the webpack organization repositories in such way they see fit.\n+\n+## Goals & Objectives\n+\n+- Develop features within the webpack organization and core areas.\n+- Fix bugs within webpack organization and core areas.\n+- Maintain and steer webpack in general together with the Technical Steering Committee.\n+- Ensure performance and code coverage is sustained and top-notch.\n+\n+## Members\n+\n+- [snitin315](https://github.com/snitin315) -\n+  **Nitin Kumar** <<snitin315@gmail.com>> (he/him)\n+- [thelarkinn](https://github.com/thelarkinn) -\n+  **Sean Larkin** <<selarkin@microsoft.com>> (he/him)\n+- [jhnns](https://github.com/jhnns) -\n+  **Johannes Ewald** <<mail@johannesewald.de>>\n+- [sokra](https://github.com/sokra) -\n+  **Tobias Koppers** <<jackworks@protonmail.co>>\n+- [spacek33z](https://github.com/spacek33z) -\n+  **Kees Kluskens** <<kees@webduck.nl>>\n+\n+## Communication\n+\n+Meetings are hosted on an as-needed basis and private discussions are held in the #core-wg channel. For public feedback and communication, please use an appropriate channel within the webpack discord (e.g `#development-general`).\n+\n+## Resources\n+\n+- https://github.com/webpack\n+- https://github.com/webpack/governance\n+\n+## Reporting & Updates\n+\n+- The working group can choose to involve the webpack TSC for feedback and updates, but has full autonomy of making changes to any codebase within webpack."}, {"role": "assistant", "content": "docs: add working group charter (#19911)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/api/applyMiddleware.md\n\ndiff --git a/docs/api/applyMiddleware.md b/docs/api/applyMiddleware.md\nindex b40d13d7..40643947 100644\n--- a/docs/api/applyMiddleware.md\n+++ b/docs/api/applyMiddleware.md\n@@ -14,7 +14,7 @@ Middleware is not baked into [`createStore`](createStore.md) and is not a fundam\n \n #### Returns\n \n-(_Function_) A store enhancer that applies the given middleware. The store enhancer signature is `createStore => createStore'` but the easiest way to apply it is to pass it to [`createStore()`](./createStore.md) as the last `enhancer` argument.\n+(_Function_) A store enhancer that applies the given middleware. The store enhancer signature is `createStore => createStore` but the easiest way to apply it is to pass it to [`createStore()`](./createStore.md) as the last `enhancer` argument.\n \n #### Example: Custom Logger Middleware"}, {"role": "assistant", "content": "docs(api): update applyMiddleware (#3225)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " packages/react-server/src/ReactFlightReplyServer.js | 17 ++++++++++++++++-\n 1 file changed, 16 insertions(+), 1 deletion(-)\n\ndiff --git a/packages/react-server/src/ReactFlightReplyServer.js b/packages/react-server/src/ReactFlightReplyServer.js\nindex 39734da..742cae6 100644\n--- a/packages/react-server/src/ReactFlightReplyServer.js\n+++ b/packages/react-server/src/ReactFlightReplyServer.js\n@@ -437,6 +437,11 @@ function loadServerReference<A: Iterable<any>, T>(\n   if (typeof id !== 'string') {\n     return (null: any);\n   }\n+  if (key === 'then') {\n+    // This should never happen because we always serialize objects with then-functions\n+    // as \"thenable\" which reduces to ReactPromise with no other fields.\n+    return (null: any);\n+  }\n   const serverReference: ServerReference<T> =\n     resolveServerReference<$FlowFixMe>(response._bundlerConfig, id);\n   // We expect most servers to not really need this because you'd just have all\n@@ -976,7 +981,17 @@ function extractIterator(response: Response, model: Array<any>): Iterator<any> {\n   return model[Symbol.iterator]();\n }\n \n-function createModel(response: Response, model: any): any {\n+function createModel(\n+  response: Response,\n+  model: any,\n+  parentObject: Object,\n+  key: string,\n+): any {\n+  if (key === 'then' && typeof model === 'function') {\n+    // This should never happen because we always serialize objects with then-functions\n+    // as \"thenable\" which reduces to ReactPromise with no other fields.\n+    return null;\n+  }\n   return model;\n }\n ", "output": "fix(react-server): guard against then property in server reference", "metadata": {"id": "react-3016ff87", "repository": "react", "commit_hash": "3016ff87d87aeff5181d95348d609039fdcad94a"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/compiler-sfc/src/parseComponent.ts\n\ndiff --git a/packages/compiler-sfc/src/parseComponent.ts b/packages/compiler-sfc/src/parseComponent.ts\nindex 38b2d088..13e580a4 100644\n--- a/packages/compiler-sfc/src/parseComponent.ts\n+++ b/packages/compiler-sfc/src/parseComponent.ts\n@@ -14,7 +14,7 @@ export interface SFCCustomBlock {\n   content: string\n   attrs: { [key: string]: string | true }\n   start: number\n-  end?: number\n+  end: number\n   map?: RawSourceMap\n }\n \n@@ -115,6 +115,7 @@ export function parseComponent(\n         type: tag,\n         content: '',\n         start: end,\n+        end: 0, // will be set on tag close\n         attrs: attrs.reduce((cumulated, { name, value }) => {\n           cumulated[name] = value || true\n           return cumulated\n@@ -122,7 +123,15 @@ export function parseComponent(\n       }\n       if (isSpecialTag(tag)) {\n         checkAttrs(currentBlock, attrs)\n-        if (tag === 'style') {\n+        if (tag === 'script') {\n+          const block = currentBlock as SFCScriptBlock\n+          if (block.attrs.setup) {\n+            block.setup = currentBlock.attrs.setup\n+            sfc.scriptSetup = block\n+          } else {\n+            sfc.script = block\n+          }\n+        } else if (tag === 'style') {\n           sfc.styles.push(currentBlock)\n         } else {\n           sfc[tag] = currentBlock\ndiff --git a/src/compiler/parser/html-parser.ts b/src/compiler/parser/html-parser.ts\nindex 15c3d81f..ab24cb52 100644\n--- a/src/compiler/parser/html-parser.ts\n+++ b/src/compiler/parser/html-parser.ts\n@@ -12,6 +12,7 @@\n import { makeMap, no } from 'shared/util'\n import { isNonPhrasingTag } from 'web/compiler/util'\n import { unicodeRegExp } from 'core/util/lang'\n+import { ASTAttr, CompilerOptions } from 'types/compiler'\n \n // Regular Expressions for parsing tags and attributes\n const attribute =\n@@ -54,7 +55,20 @@ function decodeAttr(value, shouldDecodeNewlines) {\n   return value.replace(re, match => decodingMap[match])\n }\n \n-export function parseHTML(html, options) {\n+export interface HTMLParserOptions extends CompilerOptions {\n+  start?: (\n+    tag: string,\n+    attrs: ASTAttr[],\n+    unary: boolean,\n+    start: number,\n+    end: number\n+  ) => void\n+  end?: (tag: string, start: number, end: number) => void\n+  chars?: (text: string, start?: number, end?: number) => void\n+  comment?: (content: string, start: number, end: number) => void\n+}\n+\n+export function parseHTML(html, options: HTMLParserOptions) {\n   const stack: any[] = []\n   const expectHTML = options.expectHTML\n   const isUnaryTag = options.isUnaryTag || no\n@@ -72,7 +86,7 @@ export function parseHTML(html, options) {\n           const commentEnd = html.indexOf('-->')\n \n           if (commentEnd >= 0) {\n-            if (options.shouldKeepComment) {\n+            if (options.shouldKeepComment && options.comment) {\n               options.comment(\n                 html.substring(4, commentEnd),\n                 index,\n@@ -242,7 +256,7 @@ export function parseHTML(html, options) {\n     const unary = isUnaryTag(tagName) || !!unarySlash\n \n     const l = match.attrs.length\n-    const attrs = new Array(l)\n+    const attrs: ASTAttr[] = new Array(l)\n     for (let i = 0; i < l; i++) {\n       const args = match.attrs[i]\n       const value = args[3] || args[4] || args[5] || ''\ndiff --git a/src/compiler/parser/index.ts b/src/compiler/parser/index.ts\nindex fed00089..c02379d0 100644\n--- a/src/compiler/parser/index.ts\n+++ b/src/compiler/parser/index.ts\n@@ -252,10 +252,12 @@ export function parse(template: string, options: CompilerOptions): ASTElement {\n             warn(\n               `Invalid dynamic argument expression: attribute names cannot contain ` +\n                 `spaces, quotes, <, >, / or =.`,\n-              {\n-                start: attr.start + attr.name.indexOf(`[`),\n-                end: attr.start + attr.name.length\n-              }\n+              options.outputSourceRange\n+                ? {\n+                    start: attr.start! + attr.name.indexOf(`[`),\n+                    end: attr.start! + attr.name.length\n+                  }\n+                : undefined\n             )\n           }\n         })\n@@ -322,7 +324,7 @@ export function parse(template: string, options: CompilerOptions): ASTElement {\n       closeElement(element)\n     },\n \n-    chars(text: string, start: number, end: number) {\n+    chars(text: string, start?: number, end?: number) {\n       if (!currentParent) {\n         if (__DEV__) {\n           if (text === template) {\ndiff --git a/src/types/compiler.ts b/src/types/compiler.ts\nindex 639809ed..faa28758 100644\n--- a/src/types/compiler.ts\n+++ b/src/types/compiler.ts\n@@ -20,6 +20,7 @@ export type CompilerOptions = {\n   shouldDecodeNewlines?: boolean\n   shouldDecodeNewlinesForHref?: boolean\n   outputSourceRange?: boolean\n+  shouldKeepComment?: boolean\n \n   // runtime user-configurable\n   delimiters?: [string, string] // template delimiters\n@@ -47,13 +48,13 @@ export type CompiledResult = {\n export type ModuleOptions = {\n   // transform an AST node before any attributes are processed\n   // returning an ASTElement from pre/transforms replaces the element\n-  preTransformNode: (el: ASTElement) => ASTElement | null\n+  preTransformNode?: (el: ASTElement) => ASTElement | null | void\n   // transform an AST node after built-ins like v-if, v-for are processed\n-  transformNode: (el: ASTElement) => ASTElement | null\n+  transformNode?: (el: ASTElement) => ASTElement | null | void\n   // transform an AST node after its children have been processed\n   // cannot return replacement in postTransform because tree is already finalized\n-  postTransformNode: (el: ASTElement) => void\n-  genData: (el: ASTElement) => string // generate extra data string for an element\n+  postTransformNode?: (el: ASTElement) => void\n+  genData?: (el: ASTElement) => string // generate extra data string for an element\n   transformCode?: (el: ASTElement, code: string) => string // further transform generated code for an element\n   staticKeys?: Array<string> // AST properties to be considered static\n }"}, {"role": "assistant", "content": "refactor: add types for html parser options"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/03-api-reference/01-directives/use-cache.mdx\n\ndiff --git a/docs/01-app/03-api-reference/01-directives/use-cache.mdx b/docs/01-app/03-api-reference/01-directives/use-cache.mdx\nindex bf2cd1ad9..124df2817 100644\n--- a/docs/01-app/03-api-reference/01-directives/use-cache.mdx\n+++ b/docs/01-app/03-api-reference/01-directives/use-cache.mdx\n@@ -19,8 +19,8 @@ The `use cache` directive allows you to mark a route, React component, or a func\n > **Good to know:**\n >\n > - To use cookies or headers, read them outside cached scopes and pass values as arguments. This is the preferred pattern.\n-> - If the in-memory cache isn't sufficient for runtime data, [`'use cache: remote'`](/docs/app/api-reference/directives/use-cache-remote) allows platforms to provide a dedicated cache handler, though it may come with its own costs.\n-> - For compliance requirements where data must never be cached on the server, or when a deeply nested component needs to access runtime APIs and restructuring would be disruptive, see [`'use cache: private'`](/docs/app/api-reference/directives/use-cache-private).\n+> - If the in-memory cache isn't sufficient for runtime data, [`'use cache: remote'`](/docs/app/api-reference/directives/use-cache-remote) allows platforms to provide a dedicated cache handler, though it requires a network roundtrip to check the cache and typically incurs platform fees.\n+> - For compliance requirements or when you can't refactor to pass runtime data as arguments to a `use cache` scope, see [`'use cache: private'`](/docs/app/api-reference/directives/use-cache-private).\n \n ## Usage\n \n@@ -199,12 +199,12 @@ Runtime cache behavior depends on your hosting environment:\n \n | Environment     | Runtime Caching Behavior                                                                                                                                          |\n | --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n-| **Serverless**  | Cache entries may not persist across requests (each request can be a different instance). Build-time caching works normally.                                      |\n+| **Serverless**  | Cache entries typically don't persist across requests (each request can be a different instance). Build-time caching works normally.                              |\n | **Self-hosted** | Cache entries persist across requests. Control cache size with [`cacheMaxMemorySize`](/docs/app/api-reference/config/next-config-js/incrementalCacheHandlerPath). |\n \n If the default in-memory cache isn't enough, consider **[`use cache: remote`](/docs/app/api-reference/directives/use-cache-remote)** which allows platforms to provide a dedicated cache handler (like Redis or KV database). This helps reduce hits against data sources not scaled to your total traffic, though it comes with costs (storage, network latency, platform fees).\n \n-Very rarely, for compliance requirements where certain data must never be cached on the server (even ephemerally), or when a component within a `use cache` scope needs to access runtime APIs like `cookies()` and restructuring the component tree is impractical, you might need **[`use cache: private`](/docs/app/api-reference/directives/use-cache-private)**.\n+Very rarely, for compliance requirements or when you can't refactor your code to pass runtime data as arguments to a `use cache` scope, you might need [`use cache: private`](/docs/app/api-reference/directives/use-cache-private).\n \n ## `use cache` at runtime"}, {"role": "assistant", "content": "docs: serverless deploy feedback (#86357)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/api/system-preferences.md\n\ndiff --git a/docs/api/system-preferences.md b/docs/api/system-preferences.md\nindex 8af85f75..ce5f4bf8 100644\n--- a/docs/api/system-preferences.md\n+++ b/docs/api/system-preferences.md\n@@ -14,7 +14,7 @@ console.log(systemPreferences.getEffectiveAppearance())\n \n The `systemPreferences` object emits the following events:\n \n-### Event: 'accent-color-changed' _Windows_\n+### Event: 'accent-color-changed' _Windows_ _Linux_\n \n Returns:\n \n@@ -182,7 +182,7 @@ Some popular `key` and `type`s are:\n Removes the `key` in `NSUserDefaults`. This can be used to restore the default\n or global value of a `key` previously set with `setUserDefault`.\n \n-### `systemPreferences.getAccentColor()` _Windows_ _macOS_\n+### `systemPreferences.getAccentColor()`\n \n Returns `string` - The users current system wide accent color preference in RGBA\n hexadecimal form.\ndiff --git a/shell/browser/api/electron_api_system_preferences.cc b/shell/browser/api/electron_api_system_preferences.cc\nindex 053cd897..52ac57ac 100644\n--- a/shell/browser/api/electron_api_system_preferences.cc\n+++ b/shell/browser/api/electron_api_system_preferences.cc\n@@ -10,6 +10,12 @@\n #include \"shell/common/gin_helper/handle.h\"\n #include \"shell/common/node_includes.h\"\n #include \"ui/gfx/animation/animation.h\"\n+#if BUILDFLAG(IS_LINUX)\n+#include \"content/public/browser/browser_task_traits.h\"\n+#include \"content/public/browser/browser_thread.h\"\n+#include \"shell/browser/api/electron_api_system_preferences.h\"\n+#include \"shell/common/color_util.h\"\n+#endif\n \n namespace electron::api {\n \n@@ -20,6 +26,11 @@ gin::DeprecatedWrapperInfo SystemPreferences::kWrapperInfo = {\n SystemPreferences::SystemPreferences() {\n   InitializeWindow();\n }\n+#elif BUILDFLAG(IS_LINUX)\n+SystemPreferences::SystemPreferences()\n+    : ui_theme_(ui::NativeTheme::GetInstanceForNativeUi()) {\n+  ui_theme_->AddObserver(this);\n+}\n #else\n SystemPreferences::SystemPreferences() = default;\n #endif\n@@ -44,6 +55,29 @@ v8::Local<v8::Value> SystemPreferences::GetAnimationSettings(\n   return dict.GetHandle();\n }\n \n+#if BUILDFLAG(IS_LINUX)\n+std::string SystemPreferences::GetAccentColor() {\n+  auto const color = ui_theme_->user_color();\n+  if (!color.has_value())\n+    return \"\";\n+  return ToRGBAHex(*color);\n+}\n+\n+void SystemPreferences::OnNativeThemeUpdatedOnUI() {\n+  auto const new_accent_color = GetAccentColor();\n+  if (current_accent_color_ == new_accent_color)\n+    return;\n+  Emit(\"accent-color-changed\", new_accent_color);\n+  current_accent_color_ = new_accent_color;\n+}\n+\n+void SystemPreferences::OnNativeThemeUpdated(ui::NativeTheme* theme) {\n+  content::GetUIThreadTaskRunner({})->PostTask(\n+      FROM_HERE, base::BindOnce(&SystemPreferences::OnNativeThemeUpdatedOnUI,\n+                                base::Unretained(this)));\n+}\n+#endif\n+\n // static\n gin_helper::Handle<SystemPreferences> SystemPreferences::Create(\n     v8::Isolate* isolate) {\n@@ -54,9 +88,9 @@ gin::ObjectTemplateBuilder SystemPreferences::GetObjectTemplateBuilder(\n     v8::Isolate* isolate) {\n   return gin_helper::EventEmitterMixin<\n              SystemPreferences>::GetObjectTemplateBuilder(isolate)\n+      .SetMethod(\"getAccentColor\", &SystemPreferences::GetAccentColor)\n #if BUILDFLAG(IS_WIN) || BUILDFLAG(IS_MAC)\n       .SetMethod(\"getColor\", &SystemPreferences::GetColor)\n-      .SetMethod(\"getAccentColor\", &SystemPreferences::GetAccentColor)\n       .SetMethod(\"getMediaAccessStatus\",\n                  &SystemPreferences::GetMediaAccessStatus)\n #endif\ndiff --git a/shell/browser/api/electron_api_system_preferences.h b/shell/browser/api/electron_api_system_preferences.h\nindex 5cf6632a..442f2e2c 100644\n--- a/shell/browser/api/electron_api_system_preferences.h\n+++ b/shell/browser/api/electron_api_system_preferences.h\n@@ -18,6 +18,11 @@\n #include \"shell/browser/browser.h\"\n #include \"shell/browser/browser_observer.h\"\n #endif\n+#if BUILDFLAG(IS_LINUX)\n+#include \"base/memory/raw_ptr.h\"\n+#include \"ui/native_theme/native_theme.h\"\n+#include \"ui/native_theme/native_theme_observer.h\"\n+#endif\n \n namespace gin_helper {\n template <typename T>\n@@ -44,6 +49,9 @@ class SystemPreferences final\n #if BUILDFLAG(IS_WIN)\n     ,\n       public BrowserObserver\n+#elif BUILDFLAG(IS_LINUX)\n+    ,\n+      public ui::NativeThemeObserver\n #endif\n {\n  public:\n@@ -55,8 +63,8 @@ class SystemPreferences final\n       v8::Isolate* isolate) override;\n   const char* GetTypeName() override;\n \n+  std::string GetAccentColor();\n #if BUILDFLAG(IS_WIN) || BUILDFLAG(IS_MAC)\n-  static std::string GetAccentColor();\n   std::string GetColor(gin_helper::ErrorThrower thrower,\n                        const std::string& color);\n   std::string GetMediaAccessStatus(gin_helper::ErrorThrower thrower,\n@@ -117,6 +125,10 @@ class SystemPreferences final\n   // TODO(MarshallOfSound): Write tests for these methods once we\n   // are running tests on a Mojave machine\n   v8::Local<v8::Value> GetEffectiveAppearance(v8::Isolate* isolate);\n+\n+#elif BUILDFLAG(IS_LINUX)\n+  // ui::NativeThemeObserver:\n+  void OnNativeThemeUpdated(ui::NativeTheme* theme) override;\n #endif\n   v8::Local<v8::Value> GetAnimationSettings(v8::Isolate* isolate);\n \n@@ -162,6 +174,12 @@ class SystemPreferences final\n   // Color/high contrast mode change observer.\n   base::CallbackListSubscription hwnd_subscription_;\n #endif\n+#if BUILDFLAG(IS_LINUX)\n+  void OnNativeThemeUpdatedOnUI();\n+\n+  raw_ptr<ui::NativeTheme> ui_theme_;\n+  std::string current_accent_color_;\n+#endif\n };\n \n }  // namespace electron::api\ndiff --git a/spec/api-system-preferences-spec.ts b/spec/api-system-preferences-spec.ts\nindex 05de0b91..5c10b433 100644\n--- a/spec/api-system-preferences-spec.ts\n+++ b/spec/api-system-preferences-spec.ts\n@@ -2,11 +2,17 @@ import { systemPreferences } from 'electron/main';\n \n import { expect } from 'chai';\n \n-import { ifdescribe } from './lib/spec-helpers';\n+import { ifdescribe, ifit } from './lib/spec-helpers';\n \n describe('systemPreferences module', () => {\n-  ifdescribe(process.platform === 'win32')('systemPreferences.getAccentColor', () => {\n-    it('should return a non-empty string', () => {\n+  ifdescribe(['win32', 'linux'].includes(process.platform))('systemPreferences.getAccentColor', () => {\n+    ifit(process.platform === 'linux')('should return a string', () => {\n+      // Testing this properly (i.e. non-empty string) requires\n+      // some tricky D-Bus mock setup.\n+      const accentColor = systemPreferences.getAccentColor();\n+      expect(accentColor).to.be.a('string');\n+    });\n+    ifit(process.platform === 'win32')('should return a non-empty string', () => {\n       const accentColor = systemPreferences.getAccentColor();\n       expect(accentColor).to.be.a('string').that.is.not.empty('accent color');\n     });"}, {"role": "assistant", "content": "feat: Add `getAccentColor` on Linux (#48027)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " docs/en/docs/release-notes.md | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/docs/en/docs/release-notes.md b/docs/en/docs/release-notes.md\nindex 5bd1b03..19efeec 100644\n--- a/docs/en/docs/release-notes.md\n+++ b/docs/en/docs/release-notes.md\n@@ -13,6 +13,7 @@ hide:\n \n ### Translations\n \n+* 🌐 Update translations for ko (update-outdated). PR [#14589](https://github.com/fastapi/fastapi/pull/14589) by [@tiangolo](https://github.com/tiangolo).\n * 🌐 Update translations for uk (update-outdated). PR [#14587](https://github.com/fastapi/fastapi/pull/14587) by [@tiangolo](https://github.com/tiangolo).\n * 🌐 Update translations for es (update-outdated). PR [#14686](https://github.com/fastapi/fastapi/pull/14686) by [@tiangolo](https://github.com/tiangolo).\n * 🔧 Add LLM prompt file for Turkish, generated from the existing translations. PR [#14547](https://github.com/fastapi/fastapi/pull/14547) by [@tiangolo](https://github.com/tiangolo).", "output": "docs: update korean translation release notes", "metadata": {"id": "fastapi-16e58341", "repository": "fastapi", "commit_hash": "16e583413c678f36e3f2204675c384bc884ecbd1"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n shell/browser/api/electron_api_app.cc\n\ndiff --git a/shell/browser/api/electron_api_app.cc b/shell/browser/api/electron_api_app.cc\nindex b103a424..777f64be 100644\n--- a/shell/browser/api/electron_api_app.cc\n+++ b/shell/browser/api/electron_api_app.cc\n@@ -870,28 +870,33 @@ void App::SetAppPath(const base::FilePath& app_path) {\n   app_path_ = app_path;\n }\n \n+void App::SetAppLogsPath(gin::Arguments* const args) {\n+  base::FilePath path;\n+\n+  // if caller provided a path, it must be absolute\n+  if (args->GetNext(&path) && !path.IsAbsolute()) {\n+    args->ThrowTypeError(\"Path must be absolute\");\n+    return;\n+  }\n+\n+  // if caller did not provide a path, then use a default one\n+  if (path.empty()) {\n+    path = GetDefaultAppLogPath();\n+  }\n+\n+  ScopedAllowBlockingForElectron allow_blocking;\n+  base::PathService::Override(DIR_APP_LOGS, path);\n+}\n+\n #if !BUILDFLAG(IS_MAC)\n-void App::SetAppLogsPath(gin_helper::ErrorThrower thrower,\n-                         std::optional<base::FilePath> custom_path) {\n-  if (custom_path.has_value()) {\n-    if (!custom_path->IsAbsolute()) {\n-      thrower.ThrowError(\"Path must be absolute\");\n-      return;\n-    }\n-    {\n-      ScopedAllowBlockingForElectron allow_blocking;\n-      base::PathService::Override(DIR_APP_LOGS, custom_path.value());\n-    }\n-  } else {\n-    base::FilePath path;\n-    if (base::PathService::Get(chrome::DIR_USER_DATA, &path)) {\n-      path = path.Append(base::FilePath::FromUTF8Unsafe(\"logs\"));\n-      {\n-        ScopedAllowBlockingForElectron allow_blocking;\n-        base::PathService::Override(DIR_APP_LOGS, path);\n-      }\n-    }\n+// static\n+// default to `${DIR_USER_DATA}/logs`\n+base::FilePath App::GetDefaultAppLogPath() {\n+  base::FilePath path;\n+  if (base::PathService::Get(chrome::DIR_USER_DATA, &path)) {\n+    path = path.Append(base::FilePath::FromUTF8Unsafe(\"logs\"));\n   }\n+  return path;\n }\n #endif\n \ndiff --git a/shell/browser/api/electron_api_app.h b/shell/browser/api/electron_api_app.h\nindex b1e40ced..066790f4 100644\n--- a/shell/browser/api/electron_api_app.h\n+++ b/shell/browser/api/electron_api_app.h\n@@ -178,6 +178,8 @@ class App final : public gin::Wrappable<App>,\n       const content::ChildProcessTerminationInfo& info) override;\n \n  private:\n+  [[nodiscard]] static base::FilePath GetDefaultAppLogPath();\n+\n   void BrowserChildProcessCrashedOrKilled(\n       const content::ChildProcessData& data,\n       const content::ChildProcessTerminationInfo& info);\n@@ -190,8 +192,7 @@ class App final : public gin::Wrappable<App>,\n                             const std::string& name = std::string());\n   void ChildProcessDisconnected(content::ChildProcessId pid);\n \n-  void SetAppLogsPath(gin_helper::ErrorThrower thrower,\n-                      std::optional<base::FilePath> custom_path);\n+  void SetAppLogsPath(gin::Arguments* args);\n \n   // Get/Set the pre-defined path in PathService.\n   base::FilePath GetPath(gin_helper::ErrorThrower thrower,\ndiff --git a/shell/browser/api/electron_api_app_mac.mm b/shell/browser/api/electron_api_app_mac.mm\nindex 37bf7342..b7d9228a 100644\n--- a/shell/browser/api/electron_api_app_mac.mm\n+++ b/shell/browser/api/electron_api_app_mac.mm\n@@ -17,30 +17,14 @@\n \n namespace electron::api {\n \n-void App::SetAppLogsPath(gin_helper::ErrorThrower thrower,\n-                         std::optional<base::FilePath> custom_path) {\n-  if (custom_path.has_value()) {\n-    if (!custom_path->IsAbsolute()) {\n-      thrower.ThrowError(\"Path must be absolute\");\n-      return;\n-    }\n-    {\n-      ScopedAllowBlockingForElectron allow_blocking;\n-      base::PathService::Override(DIR_APP_LOGS, custom_path.value());\n-    }\n-  } else {\n-    NSString* bundle_name =\n-        [[[NSBundle mainBundle] infoDictionary] objectForKey:@\"CFBundleName\"];\n-    NSString* logs_path =\n-        [NSString stringWithFormat:@\"Library/Logs/%@\", bundle_name];\n-    NSString* library_path =\n-        [NSHomeDirectory() stringByAppendingPathComponent:logs_path];\n-    {\n-      ScopedAllowBlockingForElectron allow_blocking;\n-      base::PathService::Override(DIR_APP_LOGS,\n-                                  base::FilePath([library_path UTF8String]));\n-    }\n-  }\n+base::FilePath App::GetDefaultAppLogPath() {\n+  NSString* bundle_name =\n+      [[[NSBundle mainBundle] infoDictionary] objectForKey:@\"CFBundleName\"];\n+  NSString* logs_path =\n+      [NSString stringWithFormat:@\"Library/Logs/%@\", bundle_name];\n+  NSString* library_path =\n+      [NSHomeDirectory() stringByAppendingPathComponent:logs_path];\n+  return base::FilePath{[library_path UTF8String]};\n }\n \n void App::SetActivationPolicy(gin_helper::ErrorThrower thrower,"}, {"role": "assistant", "content": "refactor: DRY in App::SetAppLogPath() (#48452)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/rules/no-plusplus.md\n\ndiff --git a/docs/src/rules/no-plusplus.md b/docs/src/rules/no-plusplus.md\nindex 456cbc3a..576d4687 100644\n--- a/docs/src/rules/no-plusplus.md\n+++ b/docs/src/rules/no-plusplus.md\n@@ -42,7 +42,7 @@ foo++;\n let bar = 42;\n bar--;\n \n-for (i = 0; i < l; i++) {\n+for (let i = 0; i < l; i++) {\n     doSomething(i);\n }\n ```\n@@ -62,7 +62,7 @@ foo += 1;\n let bar = 42;\n bar -= 1;\n \n-for (i = 0; i < l; i += 1) {\n+for (let i = 0; i < l; i += 1) {\n     doSomething(i);\n }\n ```\n@@ -84,15 +84,15 @@ Examples of **correct** code for this rule with the `{ \"allowForLoopAfterthought\n ```js\n /*eslint no-plusplus: [\"error\", { \"allowForLoopAfterthoughts\": true }]*/\n \n-for (i = 0; i < l; i++) {\n+for (let i = 0; i < l; i++) {\n     doSomething(i);\n }\n \n-for (i = l; i >= 0; i--) {\n+for (let i = l; i >= 0; i--) {\n     doSomething(i);\n }\n \n-for (i = 0, j = l; i < l; i++, j--) {\n+for (let i = 0, j = l; i < l; i++, j--) {\n     doSomething(i, j);\n }\n ```\n@@ -106,15 +106,15 @@ Examples of **incorrect** code for this rule with the `{ \"allowForLoopAfterthoug\n ```js\n /*eslint no-plusplus: [\"error\", { \"allowForLoopAfterthoughts\": true }]*/\n \n-for (i = 0; i < l; j = i++) {\n+for (let i = 0; i < l; j = i++) {\n     doSomething(i, j);\n }\n \n-for (i = l; i--;) {\n+for (let i = l; i--;) {\n     doSomething(i);\n }\n \n-for (i = 0; i < l;) i++;\n+for (let i = 0; i < l;) i++;\n ```\n \n :::"}, {"role": "assistant", "content": "docs: add missing let declarations in `no-plusplus` (#19980)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 235f9f5ba..50def7da9 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -5678,9 +5678,9 @@ memfs@^3.4.1:\n     fs-monkey \"^1.0.4\"\n \n memfs@^4.14.0:\n-  version \"4.38.3\"\n-  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.38.3.tgz#d5eaced44c746a81ca2f3f59f031cb0f5bdb3fcf\"\n-  integrity sha512-2s0E1tj016MQL6Eo6en0rNJnEWppbTAytbK7P0VPLtB9zA0xU7B522A1A0Tyz9usEkkWrSEDxIa/N7SdJWWAYg==\n+  version \"4.39.0\"\n+  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.39.0.tgz#fa3bea08ba4eb736bbb024eced25859cb1d0e13a\"\n+  integrity sha512-tFRr2IkSXl2B6IAJsxjHIMTOsfLt9W+8+t2uNxCeQcz4tFqgQR8DYk8hlLH2HsucTctLuoHq3U0G08atyBE3yw==\n   dependencies:\n     \"@jsonjoy.com/json-pack\" \"^1.11.0\"\n     \"@jsonjoy.com/util\" \"^1.9.0\""}, {"role": "assistant", "content": "chore(deps-dev): bump memfs in the dependencies group (#19900)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n scripts/integration-tests/e2e-angular-cli.sh\n\ndiff --git a/scripts/integration-tests/e2e-angular-cli.sh b/scripts/integration-tests/e2e-angular-cli.sh\nindex 05b909eb1..f248bd46a 100755\n--- a/scripts/integration-tests/e2e-angular-cli.sh\n+++ b/scripts/integration-tests/e2e-angular-cli.sh\n@@ -7,6 +7,8 @@\n # Start in scripts/integration-tests/ even if run from root directory\n cd \"$(dirname \"$0\")\" || exit\n \n+dir=\"$PWD\"\n+\n source utils/local-registry.sh\n source utils/cleanup.sh\n \n@@ -21,8 +23,13 @@ startLocalRegistry \"$PWD\"/verdaccio-config.yml\n \n # Create and build a new angular project\n mkdir tmp && cd tmp\n-npx -p @angular/cli ng new --defaults ngx\n+npx -p @angular/cli ng new --defaults ngx --package-manager yarn --skip-git --skip-install\n cd ngx\n-npm run build\n+node \"$dir\"/utils/bump-babel-dependencies.js resolutions\n+touch yarn.lock\n+yarn set version stable\n+YARN_ENABLE_IMMUTABLE_INSTALLS=false yarn\n+yarn run build\n+yarn run ng test --watch=false --browsers ChromeHeadless\n \n cleanup\ndiff --git a/scripts/integration-tests/e2e-create-react-app.sh b/scripts/integration-tests/e2e-create-react-app.sh\nindex d7461ddaa..caee1ccd9 100755\n--- a/scripts/integration-tests/e2e-create-react-app.sh\n+++ b/scripts/integration-tests/e2e-create-react-app.sh\n@@ -34,10 +34,10 @@ fi\n sed -i 's/useBuiltIns: true/runtime: \"classic\"/' packages/babel-preset-react-app/create.js\n \n bump_deps=\"$PWD/../../utils/bump-babel-dependencies.js\"\n-node \"$bump_deps\"\n+node \"$bump_deps\" resolutions\n for d in ./packages/*/\n do\n-  (cd \"$d\"; node \"$bump_deps\")\n+  (cd \"$d\"; node \"$bump_deps\" resolutions)\n done\n \n if [[ \"$(node --version)\" == v17.* ]]; then\ndiff --git a/scripts/integration-tests/e2e-jest.sh b/scripts/integration-tests/e2e-jest.sh\nindex 0dedba87e..34a3dbdbc 100755\n--- a/scripts/integration-tests/e2e-jest.sh\n+++ b/scripts/integration-tests/e2e-jest.sh\n@@ -20,10 +20,10 @@ cd /tmp/jest || exit\n \n # Update @babel/* dependencies\n bump_deps=\"$root/utils/bump-babel-dependencies.js\"\n-node \"$bump_deps\"\n+node \"$bump_deps\" resolutions\n for d in ./packages/*/\n do\n-  (cd \"$d\"; node \"$bump_deps\")\n+  (cd \"$d\"; node \"$bump_deps\" resolutions)\n done\n \n #==============================================================================#\ndiff --git a/scripts/integration-tests/e2e-prettier.sh b/scripts/integration-tests/e2e-prettier.sh\nindex 5fcb76496..b6c3fa209 100755\n--- a/scripts/integration-tests/e2e-prettier.sh\n+++ b/scripts/integration-tests/e2e-prettier.sh\n@@ -19,8 +19,7 @@ git clone --depth=1 https://github.com/prettier/prettier tmp/prettier\n cd tmp/prettier || exit\n \n # Update @babel/* dependencies\n-bump_deps=\"$root/utils/bump-babel-dependencies.js\"\n-node \"$bump_deps\"\n+node \"$root/utils/bump-babel-dependencies.js\"\n \n if [ \"$BABEL_8_BREAKING\" = true ] ; then\n   # Based on https://github.com/prettier/prettier/pull/15157\ndiff --git a/scripts/integration-tests/e2e-react-native.sh b/scripts/integration-tests/e2e-react-native.sh\nindex 352b00a75..ea334fb3c 100755\n--- a/scripts/integration-tests/e2e-react-native.sh\n+++ b/scripts/integration-tests/e2e-react-native.sh\n@@ -41,6 +41,8 @@ if [ \"$BABEL_8_BREAKING\" = true ] ; then\n   npx replace '(?=plugins:.*?flow-strip-types)' 'exclude: [isTypeScriptSource, isTSXSource],' node_modules/metro-react-native-babel-preset/src/configs/main.js\n fi\n \n+node \"$root\"/utils/bump-babel-dependencies.js resolutions\n+\n # Build the project\n npx react-native bundle --entry-file index.js --bundle-output output.js\n \ndiff --git a/scripts/integration-tests/e2e-vue-cli.sh b/scripts/integration-tests/e2e-vue-cli.sh\nindex 7807ff3d1..15385704b 100755\n--- a/scripts/integration-tests/e2e-vue-cli.sh\n+++ b/scripts/integration-tests/e2e-vue-cli.sh\n@@ -26,8 +26,8 @@ export YARN_IGNORE_PATH=1\n \n startLocalRegistry \"$PWD\"/../../verdaccio-config.yml\n yarn install --ignore-engines # Remove --ignore-engines when vue-cli upgrades their lockfile to eslint-import-resolver-webpack@0.13.2\n-node \"$PWD\"/../../utils/bump-babel-dependencies.js\n-yarn lerna exec -- node \"$PWD\"/../../utils/bump-babel-dependencies.js\n+node \"$PWD\"/../../utils/bump-babel-dependencies.js resolutions\n+yarn lerna exec -- node \"$PWD\"/../../utils/bump-babel-dependencies.js resolutions\n yarn install --ignore-engines # Remove --ignore-engines when vue-cli upgrades their lockfile to eslint-import-resolver-webpack@0.13.2\n \n if [[ \"$(node --version)\" == v17.* ]]; then\ndiff --git a/scripts/integration-tests/utils/bump-babel-dependencies.js b/scripts/integration-tests/utils/bump-babel-dependencies.js\nindex 5bf6fbf13..54008813f 100644\n--- a/scripts/integration-tests/utils/bump-babel-dependencies.js\n+++ b/scripts/integration-tests/utils/bump-babel-dependencies.js\n@@ -1,32 +1,41 @@\n import fs from \"fs\";\n import path from \"path\";\n+import { fileURLToPath } from \"url\";\n \n-const cwd = process.cwd();\n-const packageJSONPath = path.resolve(cwd, \"./package.json\");\n+const __dirname = path.dirname(fileURLToPath(import.meta.url));\n+\n+const packageJSONPath = path.resolve(process.cwd(), \"./package.json\");\n const content = JSON.parse(fs.readFileSync(packageJSONPath));\n \n-let bumped = false;\n function bumpBabelDependency(type, version) {\n   const dependencies = content[type];\n   for (const dep of Object.keys(dependencies)) {\n     if (dep.startsWith(\"@babel/\") && !dependencies[dep].includes(\":\")) {\n       dependencies[dep] = version;\n       console.log(`Bumped ${type}:${dep} to ${version}`);\n-      bumped = true;\n     }\n   }\n }\n \n-if (\"peerDependencies\" in content) {\n-  bumpBabelDependency(\"peerDependencies\", \"*\");\n-}\n-if (\"devDependencies\" in content) {\n-  bumpBabelDependency(\"devDependencies\", \"latest\");\n-}\n-if (\"dependencies\" in content) {\n-  bumpBabelDependency(\"dependencies\", \"latest\");\n+if (process.argv[2] === \"resolutions\") {\n+  const resolutions = content.resolutions || {};\n+  for (const name of fs.readdirSync(\n+    path.join(__dirname, \"../../../packages\")\n+  )) {\n+    if (!name.startsWith(\"babel-\")) continue;\n+    resolutions[name.replace(\"babel-\", \"@babel/\")] = \"*\";\n+  }\n+  content.resolutions = resolutions;\n+} else {\n+  if (\"peerDependencies\" in content) {\n+    bumpBabelDependency(\"peerDependencies\", \"*\");\n+  }\n+  if (\"devDependencies\" in content) {\n+    bumpBabelDependency(\"devDependencies\", \"latest\");\n+  }\n+  if (\"dependencies\" in content) {\n+    bumpBabelDependency(\"dependencies\", \"latest\");\n+  }\n }\n \n-if (bumped) {\n-  fs.writeFileSync(packageJSONPath, JSON.stringify(content, undefined, 2));\n-}\n+fs.writeFileSync(packageJSONPath, JSON.stringify(content, undefined, 2));"}, {"role": "assistant", "content": "chore: Improve `angular-cli` test (#16012)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_hir_typeck/src/pat.rs               | 13 +--\n compiler/rustc_lint_defs/src/builtin.rs            |  2 +-\n compiler/rustc_middle/src/mir/syntax.rs            | 25 +++---\n compiler/rustc_middle/src/thir.rs                  | 14 +---\n compiler/rustc_middle/src/thir/visit.rs            |  8 +-\n compiler/rustc_mir_build/src/builder/block.rs      | 13 +--\n .../src/builder/expr/as_constant.rs                |  2 +-\n .../rustc_mir_build/src/builder/expr/as_operand.rs |  9 ++-\n .../rustc_mir_build/src/builder/expr/as_place.rs   |  5 +-\n .../rustc_mir_build/src/builder/expr/as_rvalue.rs  |  9 ++-\n .../rustc_mir_build/src/builder/expr/as_temp.rs    | 12 +--\n compiler/rustc_mir_build/src/builder/expr/into.rs  |  5 +-\n compiler/rustc_mir_build/src/builder/expr/stmt.rs  | 10 +--\n .../src/builder/matches/match_pair.rs              | 93 ++++++++++++----------\n .../rustc_mir_build/src/builder/matches/mod.rs     |  8 +-\n compiler/rustc_mir_build/src/builder/mod.rs        |  4 +-\n compiler/rustc_mir_build/src/builder/scope.rs      | 10 ++-\n compiler/rustc_mir_build/src/check_unsafety.rs     |  2 +-\n compiler/rustc_mir_build/src/thir/cx/block.rs      |  2 +-\n compiler/rustc_mir_build/src/thir/cx/expr.rs       |  4 +-\n .../src/thir/pattern/check_match.rs                | 66 +++++++--------\n compiler/rustc_mir_build/src/thir/print.rs         | 12 +--\n tests/ui/imports/ambiguous-10.rs                   |  4 +-\n tests/ui/imports/ambiguous-10.stderr               | 10 +--\n tests/ui/imports/ambiguous-12.rs                   |  4 +-\n tests/ui/imports/ambiguous-12.stderr               | 10 +--\n tests/ui/imports/ambiguous-13.rs                   |  4 +-\n tests/ui/imports/ambiguous-13.stderr               | 10 +--\n tests/ui/imports/ambiguous-14.rs                   |  4 +-\n tests/ui/imports/ambiguous-14.stderr               | 10 +--\n tests/ui/imports/ambiguous-15.rs                   |  4 +-\n tests/ui/imports/ambiguous-15.stderr               | 10 +--\n tests/ui/imports/ambiguous-16.rs                   |  4 +-\n tests/ui/imports/ambiguous-16.stderr               | 10 +--\n tests/ui/imports/ambiguous-17.rs                   |  4 +-\n tests/ui/imports/ambiguous-17.stderr               | 10 +--\n tests/ui/imports/ambiguous-2.rs                    |  4 +-\n tests/ui/imports/ambiguous-2.stderr                | 10 +--\n tests/ui/imports/ambiguous-3.rs                    |  4 +-\n tests/ui/imports/ambiguous-3.stderr                | 10 +--\n tests/ui/imports/ambiguous-4.rs                    |  4 +-\n tests/ui/imports/ambiguous-4.stderr                | 10 +--\n tests/ui/imports/ambiguous-5.rs                    |  4 +-\n tests/ui/imports/ambiguous-5.stderr                | 10 +--\n tests/ui/imports/ambiguous-6.rs                    |  4 +-\n tests/ui/imports/ambiguous-6.stderr                | 10 +--\n tests/ui/imports/ambiguous-9.rs                    |  6 +-\n tests/ui/imports/ambiguous-9.stderr                | 16 ++--\n tests/ui/imports/ambiguous-panic-globvsglob.rs     |  4 +-\n tests/ui/imports/ambiguous-panic-globvsglob.stderr | 10 +--\n tests/ui/imports/duplicate.rs                      |  2 +-\n tests/ui/imports/duplicate.stderr                  | 10 +--\n tests/ui/imports/glob-conflict-cross-crate-1.rs    |  6 +-\n .../ui/imports/glob-conflict-cross-crate-1.stderr  | 16 ++--\n tests/ui/imports/glob-conflict-cross-crate-2.rs    |  4 +-\n .../ui/imports/glob-conflict-cross-crate-2.stderr  | 10 +--\n tests/ui/imports/glob-conflict-cross-crate-3.rs    |  6 +-\n .../ui/imports/glob-conflict-cross-crate-3.stderr  | 16 ++--\n tests/ui/imports/issue-114682-2.rs                 |  6 +-\n tests/ui/imports/issue-114682-2.stderr             | 16 ++--\n tests/ui/imports/issue-114682-4.rs                 |  2 +-\n tests/ui/imports/issue-114682-4.stderr             | 10 +--\n tests/ui/imports/issue-114682-5.rs                 |  2 +-\n tests/ui/imports/issue-114682-5.stderr             | 10 +--\n tests/ui/imports/issue-114682-6.rs                 |  4 +-\n tests/ui/imports/issue-114682-6.stderr             | 10 +--\n tests/ui/imports/overwrite-different-ambig-2.rs    |  4 +-\n .../ui/imports/overwrite-different-ambig-2.stderr  | 22 ++---\n tests/ui/imports/unresolved-seg-after-ambiguous.rs |  2 +-\n .../imports/unresolved-seg-after-ambiguous.stderr  | 10 +--\n tests/ui/pattern/type_mismatch.rs                  | 63 ++++++++++++++-\n tests/ui/pattern/type_mismatch.stderr              | 61 +++++++++++++-\n tests/ui/thir-print/c-variadic.stdout              |  2 +-\n tests/ui/thir-print/offset_of.stdout               | 76 +++++++++---------\n tests/ui/thir-print/thir-flat-const-variant.stdout | 36 +++------\n tests/ui/thir-print/thir-flat.stdout               |  4 +-\n tests/ui/thir-print/thir-tree-loop-match.stdout    | 24 +++---\n tests/ui/thir-print/thir-tree-match.stdout         | 20 ++---\n tests/ui/thir-print/thir-tree.stdout               |  2 +-\n tests/ui/unpretty/box.stdout                       |  8 +-\n 80 files changed, 557 insertions(+), 439 deletions(-)", "output": "refactor: restructure thir pattern matching and fix import ambiguity", "metadata": {"id": "rust-7704328b", "repository": "rust", "commit_hash": "7704328ba5ae8d6ce0ac303c9d5a1a1605906766"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/issue-labeled.yml\n\ndiff --git a/.github/workflows/issue-labeled.yml b/.github/workflows/issue-labeled.yml\nindex e9c4195d..fbc8d12b 100644\n--- a/.github/workflows/issue-labeled.yml\n+++ b/.github/workflows/issue-labeled.yml\n@@ -72,7 +72,7 @@ jobs:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n       - name: Create comment\n         if: ${{ steps.check-for-comment.outputs.SHOULD_COMMENT }}\n-        uses: actions-cool/issues-helper@564cd9b1baacd7a9cd634e8039a149901ee5f600 # v3.7.1\n+        uses: actions-cool/issues-helper@9861779a695cf1898bd984c727f685f351cfc372 # v3.7.2\n         with:\n           actions: 'create-comment'\n           token: ${{ steps.generate-token.outputs.token }}\ndiff --git a/.github/workflows/issue-opened.yml b/.github/workflows/issue-opened.yml\nindex 323df66a..05fb8a3d 100644\n--- a/.github/workflows/issue-opened.yml\n+++ b/.github/workflows/issue-opened.yml\n@@ -134,7 +134,7 @@ jobs:\n             }\n       - name: Create unsupported major comment\n         if: ${{ steps.add-labels.outputs.unsupportedMajor }}\n-        uses: actions-cool/issues-helper@564cd9b1baacd7a9cd634e8039a149901ee5f600 # v3.7.1\n+        uses: actions-cool/issues-helper@9861779a695cf1898bd984c727f685f351cfc372 # v3.7.2\n         with:\n           actions: 'create-comment'\n           token: ${{ steps.generate-token.outputs.token }}"}, {"role": "assistant", "content": "build(deps): bump actions-cool/issues-helper from 3.7.1 to 3.7.2 (#48884)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/eslint-config-next/package.json\n\ndiff --git a/packages/eslint-config-next/package.json b/packages/eslint-config-next/package.json\nindex 294bbfc0c..cd5e94d18 100644\n--- a/packages/eslint-config-next/package.json\n+++ b/packages/eslint-config-next/package.json\n@@ -39,7 +39,7 @@\n   \"scripts\": {\n     \"dev\": \"pnpm build\",\n     \"build\": \"swc -d dist src && pnpm types\",\n-    \"types\": \"tsc --skipLibCheck --declaration --emitDeclarationOnly --esModuleInterop --outDir dist\",\n+    \"types\": \"tsc --skipLibCheck --declaration --emitDeclarationOnly --esModuleInterop --declarationDir dist --rootDir src\",\n     \"prepublishOnly\": \"cd ../../ && turbo run build\"\n   },\n   \"exports\": {"}, {"role": "assistant", "content": "fix: eslint-config-next types was exporting to dist/src (#85768)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/tutorials/essentials/part-5-async-logic.md\n\ndiff --git a/docs/tutorials/essentials/part-5-async-logic.md b/docs/tutorials/essentials/part-5-async-logic.md\nindex a2e2fcf7..4b8f11f3 100644\n--- a/docs/tutorials/essentials/part-5-async-logic.md\n+++ b/docs/tutorials/essentials/part-5-async-logic.md\n@@ -785,8 +785,6 @@ We can have our component logic wait for the async thunk to finish, and check th\n ```js title=\"features/posts/AddPostForm.js\"\n import React, { useState } from 'react'\n import { useDispatch, useSelector } from 'react-redux'\n-// highlight-next-line\n-import { unwrapResult } from '@reduxjs/toolkit'\n \n // highlight-next-line\n import { addNewPost } from './postsSlice'"}, {"role": "assistant", "content": "docs: Remove redundant line from Redux Essentials Tutorial (#4176)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/tutorials/fundamentals/part-3-state-actions-reducers.md\n\ndiff --git a/docs/tutorials/fundamentals/part-3-state-actions-reducers.md b/docs/tutorials/fundamentals/part-3-state-actions-reducers.md\nindex 2d738f96..f50cff0c 100644\n--- a/docs/tutorials/fundamentals/part-3-state-actions-reducers.md\n+++ b/docs/tutorials/fundamentals/part-3-state-actions-reducers.md\n@@ -221,7 +221,7 @@ Based on that list of things that can happen, we can create a list of actions th\n \n - `{type: 'todos/todoAdded', payload: todoText}`\n - `{type: 'todos/todoToggled', payload: todoId}`\n-- `{type: 'todos/colorSelected, payload: {todoId, color}}`\n+- `{type: 'todos/colorSelected', payload: {todoId, color}}`\n - `{type: 'todos/todoDeleted', payload: todoId}`\n - `{type: 'todos/allCompleted'}`\n - `{type: 'todos/completedCleared'}`"}, {"role": "assistant", "content": "docs: Missing a single quote"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n GOVERNANCE.md\n\ndiff --git a/GOVERNANCE.md b/GOVERNANCE.md\nnew file mode 100644\nindex 00000000..5e982405\n--- /dev/null\n+++ b/GOVERNANCE.md\n@@ -0,0 +1,17 @@\n+# `jest` Project Governance\n+\n+## Maintainers\n+\n+- [@SimenB](https://github.com/SimenB)\n+\n+Maintainers are responsible for issue/PR triage, feature additions, maintenance, bugfixes, security fixes, releases, promoting existing contributors to maintainers, managing repo and CI configuration, etc.\n+\n+Promoting contributors to maintainers is done by a maintainer after a significant number of high-quality PRs.\n+\n+## Contributors\n+\n+Anyone who contributes code or content or time, via issues or pull requests or otherwise. Contributors have access to triaging issues/PRs and commit access to the repository.\n+\n+## Outside Contributors\n+\n+Anyone who contributes code or content or time, via issues or pull requests or otherwise. Outside Contributors do not have any additional permissions on the project.\ndiff --git a/PROJECT_CHARTER.md b/PROJECT_CHARTER.md\nnew file mode 100644\nindex 00000000..2a7ef622\n--- /dev/null\n+++ b/PROJECT_CHARTER.md\n@@ -0,0 +1,49 @@\n+# `jest` Charter\n+\n+Jest is a modular test runner and framework for JavaScript, designed for running using Node.js on all of its supported platforms. It is a modular runner than can run and test any JavaScript, TypeScript, or other language that compiles to JavaScript. It is designed to be easy to use and to have a low barrier to entry, while still being flexible and powerful.\n+\n+## Section 0: Guiding Principles\n+\n+The `jest` project is part of the [OpenJS Foundation][openjs foundation]. The project operates transparently, openly, collaboratively, and ethically. Project proposals, timelines, and status must not merely be open, but also easily visible to outsiders.\n+\n+## Section 1: Scope\n+\n+`jest` is primarily a test framework and test runner, focused on making it easy to test any JS code, either written for the server, the client or both. The Jest project consists of many different smaller modules, such as the assertion library, test runner, diffing algorithm, object serializer, task manager, and more. The project is designed to be modular, so that it can be used in a variety of different environments and for different purposes.\n+\n+## Section 2: Relationship with OpenJS Foundation CPC.\n+\n+Technical leadership for the projects within the [OpenJS Foundation][openjs foundation] is delegated to the projects through their project charters by the [OpenJS Foundation Cross-Project Council](https://openjsf.org/about/governance/) (CPC). In the case of the `jest` project, it is delegated to the [`jest` Maintainers](GOVERNANCE.md#maintainers) (the “Maintainers”). The OpenJS Foundation's business leadership is the Board of Directors (the “Board”).\n+\n+This `jest` Charter reflects a carefully constructed balanced role for the Maintainers and the CPC in the governance of the OpenJS Foundation. The charter amendment process is for the Maintainers to propose changes using simple majority of the full Maintainers, the proposed changes being subject to review and approval by the CPC. The CPC may additionally make amendments to the project charter at any time, though the CPC will not interfere with day-to-day discussions, votes, or meetings of the Maintainers.\n+\n+### 2.1 Other Formal Project Relationships\n+\n+Section Intentionally Left Blank\n+\n+## Section 3: `jest`'s Maintainers Governing Body\n+\n+`jest` is governed by its [maintainers](GOVERNANCE.md#maintainers).\n+\n+## Section 4: Roles & Responsibilities\n+\n+The roles and responsibilities of `jest`'s Maintainers are described in [GOVERNANCE.md](./GOVERNANCE.md).\n+\n+### Section 4.1 Project Operations & Management\n+\n+Section Intentionally Left Blank\n+\n+### Section 4.2: Decision-making, Voting, and/or Elections\n+\n+The project will define a consensus-driven governance model in GOVERNANCE.md as need arises.\n+\n+### Section 4.3: Other Project Roles\n+\n+Section Intentionally Left Blank\n+\n+## Section 5: Definitions\n+\n+_Maintainers_: responsible for the technical direction of the project and for release management.\n+\n+_Core contributors_: Maintainers delegate project responsibilities to core contributors, as documented in [GOVERNANCE.md](./GOVERNANCE.md).\n+\n+[openjs foundation]: https://openjsf.org"}, {"role": "assistant", "content": "chore: add charter (#14948)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_builtin_macros/src/eii.rs | 3 +++\n 1 file changed, 3 insertions(+)", "output": "feat(eii): add builtin macro support", "metadata": {"id": "rust-daae6601", "repository": "rust", "commit_hash": "daae6601be4eca73dd75ccb983a15485d4515196"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/jest-circus/src/__mocks__/testUtils.ts\n\ndiff --git a/packages/jest-circus/src/__mocks__/testUtils.ts b/packages/jest-circus/src/__mocks__/testUtils.ts\nindex cca172c8..48cce0b2 100644\n--- a/packages/jest-circus/src/__mocks__/testUtils.ts\n+++ b/packages/jest-circus/src/__mocks__/testUtils.ts\n@@ -36,7 +36,7 @@ export const runTest = (\n     global.afterAll = circus.afterAll;\n \n     const testEventHandler = require('${TEST_EVENT_HANDLER_PATH}').default;\n-    const {addEventHandler, getState} = require('${CIRCUS_STATE_PATH}');\n+    const {addEventHandler, removeEventHandler, getState} = require('${CIRCUS_STATE_PATH}');\n     getState().randomize = ${opts?.randomize};\n     getState().seed = ${opts?.seed ?? 0};\n     addEventHandler(testEventHandler);\ndiff --git a/packages/jest-circus/src/__tests__/eventHandler.test.ts b/packages/jest-circus/src/__tests__/eventHandler.test.ts\nnew file mode 100644\nindex 00000000..07fd8e65\n--- /dev/null\n+++ b/packages/jest-circus/src/__tests__/eventHandler.test.ts\n@@ -0,0 +1,25 @@\n+/**\n+ * Copyright (c) Meta Platforms, Inc. and affiliates.\n+ *\n+ * This source code is licensed under the MIT license found in the\n+ * LICENSE file in the root directory of this source tree.\n+ */\n+\n+// addEventHandler and removeEventHandler are provided in the ./index\n+import {addEventHandler, removeEventHandler} from '../index';\n+// dispatch comes from the ./state\n+import {dispatch} from '../state';\n+\n+test('addEventHandler and removeEventHandler control handlers', async () => {\n+  const spy: any = jest.fn();\n+\n+  addEventHandler(spy);\n+  expect(spy).not.toHaveBeenCalledWith({name: 'unknown1'}, expect.anything());\n+  await dispatch({name: 'unknown1' as any});\n+  expect(spy).toHaveBeenCalledWith({name: 'unknown1'}, expect.anything());\n+\n+  removeEventHandler(spy);\n+  expect(spy).not.toHaveBeenCalledWith({name: 'unknown2'}, expect.anything());\n+  await dispatch({name: 'unknown2' as any});\n+  expect(spy).not.toHaveBeenCalledWith({name: 'unknown2'}, expect.anything());\n+});\ndiff --git a/packages/jest-circus/src/index.ts b/packages/jest-circus/src/index.ts\nindex eba48fbf..9b4990b0 100644\n--- a/packages/jest-circus/src/index.ts\n+++ b/packages/jest-circus/src/index.ts\n@@ -10,7 +10,13 @@ import {bind as bindEach} from 'jest-each';\n import {ErrorWithStack, convertDescriptorToString, isPromise} from 'jest-util';\n import {dispatchSync} from './state';\n \n-export {setState, getState, resetState} from './state';\n+export {\n+  setState,\n+  getState,\n+  resetState,\n+  addEventHandler,\n+  removeEventHandler,\n+} from './state';\n export {default as run} from './run';\n \n type THook = (fn: Circus.HookFn, timeout?: number) => void;\ndiff --git a/packages/jest-circus/src/state.ts b/packages/jest-circus/src/state.ts\nindex 2b7376bf..794545cf 100644\n--- a/packages/jest-circus/src/state.ts\n+++ b/packages/jest-circus/src/state.ts\n@@ -8,13 +8,14 @@\n import type {Circus, Global} from '@jest/types';\n import eventHandler from './eventHandler';\n import formatNodeAssertErrors from './formatNodeAssertErrors';\n-import {STATE_SYM} from './types';\n+import {EVENT_HANDLERS, STATE_SYM} from './types';\n import {makeDescribe} from './utils';\n \n-const eventHandlers: Array<Circus.EventHandler> = [\n-  eventHandler,\n-  formatNodeAssertErrors,\n-];\n+const handlers: Array<Circus.EventHandler> = ((globalThis as Global.Global)[\n+  EVENT_HANDLERS\n+] = ((globalThis as Global.Global)[\n+  EVENT_HANDLERS\n+] as Array<Circus.EventHandler>) || [eventHandler, formatNodeAssertErrors]);\n \n export const ROOT_DESCRIBE_BLOCK_NAME = 'ROOT_DESCRIBE_BLOCK';\n \n@@ -50,17 +51,24 @@ export const setState = (state: Circus.State): Circus.State =>\n   ((globalThis as Global.Global)[STATE_SYM] = state);\n \n export const dispatch = async (event: Circus.AsyncEvent): Promise<void> => {\n-  for (const handler of eventHandlers) {\n+  for (const handler of handlers) {\n     await handler(event, getState());\n   }\n };\n \n export const dispatchSync = (event: Circus.SyncEvent): void => {\n-  for (const handler of eventHandlers) {\n+  for (const handler of handlers) {\n     handler(event, getState());\n   }\n };\n \n export const addEventHandler = (handler: Circus.EventHandler): void => {\n-  eventHandlers.push(handler);\n+  handlers.push(handler);\n+};\n+\n+export const removeEventHandler = (handler: Circus.EventHandler): void => {\n+  const index = handlers.lastIndexOf(handler);\n+  if (index !== -1) {\n+    handlers.splice(index, 1);\n+  }\n };\ndiff --git a/packages/jest-circus/src/types.ts b/packages/jest-circus/src/types.ts\nindex 4b2a6a76..6604121a 100644\n--- a/packages/jest-circus/src/types.ts\n+++ b/packages/jest-circus/src/types.ts\n@@ -11,4 +11,5 @@ export const RETRY_IMMEDIATELY = Symbol.for('RETRY_IMMEDIATELY');\n export const WAIT_BEFORE_RETRY = Symbol.for('WAIT_BEFORE_RETRY');\n // To pass this value from Runtime object to state we need to use global[sym]\n export const TEST_TIMEOUT_SYMBOL = Symbol.for('TEST_TIMEOUT_SYMBOL');\n+export const EVENT_HANDLERS = Symbol.for('EVENT_HANDLERS');\n export const LOG_ERRORS_BEFORE_RETRY = Symbol.for('LOG_ERRORS_BEFORE_RETRY');"}, {"role": "assistant", "content": "fix: jest-circus shares events among imports #11483 (#11529)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/services/codefixes/helpers.ts\n\ndiff --git a/src/services/codefixes/helpers.ts b/src/services/codefixes/helpers.ts\nindex 39215e718..18db6cf68 100644\n--- a/src/services/codefixes/helpers.ts\n+++ b/src/services/codefixes/helpers.ts\n@@ -481,7 +481,7 @@ export function createSignatureDeclarationFromCallExpression(\n         isIdentifier(arg) ? arg.text : isPropertyAccessExpression(arg) && isIdentifier(arg.name) ? arg.name.text : undefined);\n     const instanceTypes = isJs ? [] : map(args, arg => checker.getTypeAtLocation(arg));\n     const { argumentTypeNodes, argumentTypeParameters } = getArgumentTypesAndTypeParameters(\n-        checker, importAdder, instanceTypes, contextNode, scriptTarget, /*flags*/ undefined, tracker\n+        checker, importAdder, instanceTypes, contextNode, scriptTarget, NodeBuilderFlags.NoTruncation, tracker\n     );\n \n     const modifiers = modifierFlags\ndiff --git a/tests/cases/fourslash/codeFixAddMissingFunctionDeclaration28.ts b/tests/cases/fourslash/codeFixAddMissingFunctionDeclaration28.ts\nnew file mode 100644\nindex 000000000..ee2399168\n--- /dev/null\n+++ b/tests/cases/fourslash/codeFixAddMissingFunctionDeclaration28.ts\n@@ -0,0 +1,57 @@\n+/// <reference path='fourslash.ts' />\n+\n+////foo({\n+////    prop001: '',\n+////    prop002: '',\n+////    prop003: '',\n+////    prop004: '',\n+////    prop005: '',\n+////    prop006: '',\n+////    prop007: '',\n+////    prop008: '',\n+////    prop009: '',\n+////    prop010: '',\n+////    prop011: '',\n+////    prop012: '',\n+////    prop013: '',\n+////    prop014: '',\n+////    prop015: '',\n+////    prop016: '',\n+////    prop017: '',\n+////    prop018: '',\n+////    prop019: '',\n+////    prop020: '',\n+////});\n+\n+verify.codeFix({\n+    description: [ts.Diagnostics.Add_missing_function_declaration_0.message, \"foo\"],\n+    index: 0,\n+    newFileContent:\n+`foo({\n+    prop001: '',\n+    prop002: '',\n+    prop003: '',\n+    prop004: '',\n+    prop005: '',\n+    prop006: '',\n+    prop007: '',\n+    prop008: '',\n+    prop009: '',\n+    prop010: '',\n+    prop011: '',\n+    prop012: '',\n+    prop013: '',\n+    prop014: '',\n+    prop015: '',\n+    prop016: '',\n+    prop017: '',\n+    prop018: '',\n+    prop019: '',\n+    prop020: '',\n+});\n+\n+function foo(arg0: { prop001: string; prop002: string; prop003: string; prop004: string; prop005: string; prop006: string; prop007: string; prop008: string; prop009: string; prop010: string; prop011: string; prop012: string; prop013: string; prop014: string; prop015: string; prop016: string; prop017: string; prop018: string; prop019: string; prop020: string; }) {\n+    throw new Error(\"Function not implemented.\");\n+}\n+`,\n+});\ndiff --git a/tests/cases/fourslash/codeFixAddMissingMember30.ts b/tests/cases/fourslash/codeFixAddMissingMember30.ts\nnew file mode 100644\nindex 000000000..ff0e8aafb\n--- /dev/null\n+++ b/tests/cases/fourslash/codeFixAddMissingMember30.ts\n@@ -0,0 +1,75 @@\n+/// <reference path='fourslash.ts' />\n+\n+////class C {\n+////    constructor() {\n+////        this.foo({\n+////            'foo.a': '',\n+////            'foo.b': '',\n+////            'foo.c': '',\n+////            'foo.d': '',\n+////            'foo.e': '',\n+////            'foo.f': '',\n+////            'foo.g': '',\n+////            'foo.h': '',\n+////            'foo.i': '',\n+////            'foo.j': '',\n+////            'foo.k': '',\n+////            'foo.l': '',\n+////            'foo.m': '',\n+////            'foo.n': '',\n+////            'foo.o': '',\n+////            'foo.p': '',\n+////            'foo.q': '',\n+////            'foo.r': '',\n+////            'foo.s': '',\n+////            'foo.t': '',\n+////            'foo.u': '',\n+////            'foo.v': '',\n+////            'foo.w': '',\n+////            'foo.x': '',\n+////            'foo.y': '',\n+////            'foo.z': '',\n+////        });\n+////    }\n+////}\n+\n+verify.codeFix({\n+    description: [ts.Diagnostics.Declare_method_0.message, \"foo\"],\n+    index: 0,\n+    newFileContent:\n+`class C {\n+    constructor() {\n+        this.foo({\n+            'foo.a': '',\n+            'foo.b': '',\n+            'foo.c': '',\n+            'foo.d': '',\n+            'foo.e': '',\n+            'foo.f': '',\n+            'foo.g': '',\n+            'foo.h': '',\n+            'foo.i': '',\n+            'foo.j': '',\n+            'foo.k': '',\n+            'foo.l': '',\n+            'foo.m': '',\n+            'foo.n': '',\n+            'foo.o': '',\n+            'foo.p': '',\n+            'foo.q': '',\n+            'foo.r': '',\n+            'foo.s': '',\n+            'foo.t': '',\n+            'foo.u': '',\n+            'foo.v': '',\n+            'foo.w': '',\n+            'foo.x': '',\n+            'foo.y': '',\n+            'foo.z': '',\n+        });\n+    }\n+    foo(arg0: { 'foo.a': string; 'foo.b': string; 'foo.c': string; 'foo.d': string; 'foo.e': string; 'foo.f': string; 'foo.g': string; 'foo.h': string; 'foo.i': string; 'foo.j': string; 'foo.k': string; 'foo.l': string; 'foo.m': string; 'foo.n': string; 'foo.o': string; 'foo.p': string; 'foo.q': string; 'foo.r': string; 'foo.s': string; 'foo.t': string; 'foo.u': string; 'foo.v': string; 'foo.w': string; 'foo.x': string; 'foo.y': string; 'foo.z': string; }) {\n+        throw new Error(\"Method not implemented.\");\n+    }\n+}`,\n+});"}, {"role": "assistant", "content": "fix(54366): bug: getCodeFixesAtPosition fails when TS2339 diagnostic paired with large pojo; Debug Failure. False expression: Token end is child end (#54432)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/renovate.json5\n\ndiff --git a/.github/renovate.json5 b/.github/renovate.json5\nindex ba90fa33..952474f6 100644\n--- a/.github/renovate.json5\n+++ b/.github/renovate.json5\n@@ -1,29 +1,8 @@\n {\n   $schema: \"https://docs.renovatebot.com/renovate-schema.json\",\n-  extends: [\n-    \"config:recommended\",\n-    \":approveMajorUpdates\",\n-    \":semanticCommitScopeDisabled\",\n-  ],\n-  ignorePresets: [\":semanticPrefixFixDepsChoreOthers\"],\n-  labels: [\"dependencies\"],\n+  extends: [\"github>eslint/workflows//.github/renovate/base.json5\"],\n   ignoreDeps: [\"jiti-v2.0\", \"jiti-v2.1\"],\n-\n-  // Wait well over npm's three day window for any new package as a precaution against malicious publishes\n-  // https://docs.npmjs.com/policies/unpublish/#packages-published-less-than-72-hours-ago\n-  minimumReleaseAge: \"7 days\",\n-\n   packageRules: [\n-    {\n-      description: \"Use the deps:actions label for github-action manager updates (this means Renovate's github-action manager).\",\n-      addLabels: [\"deps:actions\"],\n-      matchManagers: [\"github-actions\"],\n-    },\n-    {\n-      description: \"Use the deps:npm label for npm manager packages (this means Renovate's npm manager).\",\n-      addLabels: [\"deps:npm\"],\n-      matchManagers: [\"npm\"],\n-    },\n     {\n       description: \"Group Babel packages into a single PR.\",\n       groupName: \"babel\","}, {"role": "assistant", "content": "ci: simplify renovate configuration (#19907)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/compiler/checker.ts\n\ndiff --git a/src/compiler/checker.ts b/src/compiler/checker.ts\nindex fa379549f..78d32f8fb 100644\n--- a/src/compiler/checker.ts\n+++ b/src/compiler/checker.ts\n@@ -19107,6 +19107,12 @@ export function createTypeChecker(host: TypeCheckerHost): TypeChecker {\n     }\n \n     function getESSymbolLikeTypeForNode(node: Node) {\n+        if (isInJSFile(node) && isJSDocTypeExpression(node)) {\n+            const host = getJSDocHost(node);\n+            if (host) {\n+                node = getSingleVariableOfVariableStatement(host) || host;\n+            }\n+        }\n         if (isValidESSymbolDeclaration(node)) {\n             const symbol = isCommonJsExportPropertyAssignment(node) ? getSymbolOfNode((node as BinaryExpression).left) : getSymbolOfNode(node);\n             if (symbol) {\ndiff --git a/tests/baselines/reference/quickInfoUniqueSymbolJsDoc.baseline b/tests/baselines/reference/quickInfoUniqueSymbolJsDoc.baseline\nnew file mode 100644\nindex 000000000..ddc8034c6\n--- /dev/null\n+++ b/tests/baselines/reference/quickInfoUniqueSymbolJsDoc.baseline\n@@ -0,0 +1,74 @@\n+// === QuickInfo ===\n+=== /tests/cases/fourslash/./a.js ===\n+// /** @type {unique symbol} */\n+// const foo = Symbol();\n+// foo\n+// ^^^\n+// | ----------------------------------------------------------------------\n+// | const foo: typeof foo\n+// | @type {unique symbol}\n+// | ----------------------------------------------------------------------\n+\n+[\n+  {\n+    \"marker\": {\n+      \"fileName\": \"/tests/cases/fourslash/./a.js\",\n+      \"position\": 54,\n+      \"name\": \"\"\n+    },\n+    \"item\": {\n+      \"kind\": \"const\",\n+      \"kindModifiers\": \"\",\n+      \"textSpan\": {\n+        \"start\": 51,\n+        \"length\": 3\n+      },\n+      \"displayParts\": [\n+        {\n+          \"text\": \"const\",\n+          \"kind\": \"keyword\"\n+        },\n+        {\n+          \"text\": \" \",\n+          \"kind\": \"space\"\n+        },\n+        {\n+          \"text\": \"foo\",\n+          \"kind\": \"localName\"\n+        },\n+        {\n+          \"text\": \":\",\n+          \"kind\": \"punctuation\"\n+        },\n+        {\n+          \"text\": \" \",\n+          \"kind\": \"space\"\n+        },\n+        {\n+          \"text\": \"typeof\",\n+          \"kind\": \"keyword\"\n+        },\n+        {\n+          \"text\": \" \",\n+          \"kind\": \"space\"\n+        },\n+        {\n+          \"text\": \"foo\",\n+          \"kind\": \"localName\"\n+        }\n+      ],\n+      \"documentation\": [],\n+      \"tags\": [\n+        {\n+          \"name\": \"type\",\n+          \"text\": [\n+            {\n+              \"text\": \"{unique symbol}\",\n+              \"kind\": \"text\"\n+            }\n+          ]\n+        }\n+      ]\n+    }\n+  }\n+]\n\\ No newline at end of file\ndiff --git a/tests/baselines/reference/uniqueSymbolJs.errors.txt b/tests/baselines/reference/uniqueSymbolJs.errors.txt\nnew file mode 100644\nindex 000000000..3304772c0\n--- /dev/null\n+++ b/tests/baselines/reference/uniqueSymbolJs.errors.txt\n@@ -0,0 +1,15 @@\n+a.js(5,18): error TS1337: An index signature parameter type cannot be a literal type or generic type. Consider using a mapped object type instead.\n+a.js(5,28): error TS1005: ';' expected.\n+\n+\n+==== ./a.js (2 errors) ====\n+    /** @type {unique symbol} */\n+    const foo = Symbol();\n+    \n+    /** @typedef {{ [foo]: boolean }} A */\n+    /** @typedef {{ [key: foo] boolean }} B */\n+                     ~~~\n+!!! error TS1337: An index signature parameter type cannot be a literal type or generic type. Consider using a mapped object type instead.\n+                               ~~~~~~~\n+!!! error TS1005: ';' expected.\n+    \n\\ No newline at end of file\ndiff --git a/tests/baselines/reference/uniqueSymbolJs.symbols b/tests/baselines/reference/uniqueSymbolJs.symbols\nnew file mode 100644\nindex 000000000..89f44c0c8\n--- /dev/null\n+++ b/tests/baselines/reference/uniqueSymbolJs.symbols\n@@ -0,0 +1,11 @@\n+//// [tests/cases/compiler/uniqueSymbolJs.ts] ////\n+\n+=== ./a.js ===\n+/** @type {unique symbol} */\n+const foo = Symbol();\n+>foo : Symbol(foo, Decl(a.js, 1, 5))\n+>Symbol : Symbol(Symbol, Decl(lib.es5.d.ts, --, --), Decl(lib.es2015.symbol.d.ts, --, --), Decl(lib.es2015.symbol.wellknown.d.ts, --, --), Decl(lib.es2019.symbol.d.ts, --, --))\n+\n+/** @typedef {{ [foo]: boolean }} A */\n+/** @typedef {{ [key: foo] boolean }} B */\n+\ndiff --git a/tests/baselines/reference/uniqueSymbolJs.types b/tests/baselines/reference/uniqueSymbolJs.types\nnew file mode 100644\nindex 000000000..0d36ae028\n--- /dev/null\n+++ b/tests/baselines/reference/uniqueSymbolJs.types\n@@ -0,0 +1,12 @@\n+//// [tests/cases/compiler/uniqueSymbolJs.ts] ////\n+\n+=== ./a.js ===\n+/** @type {unique symbol} */\n+const foo = Symbol();\n+>foo : unique symbol\n+>Symbol() : unique symbol\n+>Symbol : SymbolConstructor\n+\n+/** @typedef {{ [foo]: boolean }} A */\n+/** @typedef {{ [key: foo] boolean }} B */\n+\ndiff --git a/tests/baselines/reference/uniqueSymbolsDeclarationsInJs.types b/tests/baselines/reference/uniqueSymbolsDeclarationsInJs.types\nindex 9b449b032..e812b448a 100644\n--- a/tests/baselines/reference/uniqueSymbolsDeclarationsInJs.types\n+++ b/tests/baselines/reference/uniqueSymbolsDeclarationsInJs.types\n@@ -18,14 +18,14 @@ class C {\n      * @readonly\n      */\n     static readonlyStaticType;\n->readonlyStaticType : symbol\n+>readonlyStaticType : unique symbol\n \n     /**\n      * @type {unique symbol}\n      * @readonly\n      */\n     static readonlyStaticTypeAndCall = Symbol();\n->readonlyStaticTypeAndCall : symbol\n+>readonlyStaticTypeAndCall : unique symbol\n >Symbol() : unique symbol\n >Symbol : SymbolConstructor\n \n@@ -50,7 +50,7 @@ class C {\n \n /** @type {unique symbol} */\n const a = Symbol();\n->a : symbol\n+>a : unique symbol\n >Symbol() : unique symbol\n >Symbol : SymbolConstructor\n \ndiff --git a/tests/baselines/reference/uniqueSymbolsDeclarationsInJsErrors.types b/tests/baselines/reference/uniqueSymbolsDeclarationsInJsErrors.types\nindex b3827f6af..94045cdeb 100644\n--- a/tests/baselines/reference/uniqueSymbolsDeclarationsInJsErrors.types\n+++ b/tests/baselines/reference/uniqueSymbolsDeclarationsInJsErrors.types\n@@ -15,7 +15,7 @@ class C {\n      * @readonly\n      */\n     static readonlyType;\n->readonlyType : symbol\n+>readonlyType : unique symbol\n \n     /**\n      * @type {unique symbol}\ndiff --git a/tests/cases/compiler/uniqueSymbolJs.ts b/tests/cases/compiler/uniqueSymbolJs.ts\nnew file mode 100644\nindex 000000000..faa4bd5fc\n--- /dev/null\n+++ b/tests/cases/compiler/uniqueSymbolJs.ts\n@@ -0,0 +1,11 @@\n+// @target: esnext\n+// @checkJs: true\n+// @allowJs: true\n+// @noEmit: true\n+// @filename: ./a.js\n+\n+/** @type {unique symbol} */\n+const foo = Symbol();\n+\n+/** @typedef {{ [foo]: boolean }} A */\n+/** @typedef {{ [key: foo] boolean }} B */\ndiff --git a/tests/cases/fourslash/quickInfoUniqueSymbolJsDoc.ts b/tests/cases/fourslash/quickInfoUniqueSymbolJsDoc.ts\nnew file mode 100644\nindex 000000000..58f9feb62\n--- /dev/null\n+++ b/tests/cases/fourslash/quickInfoUniqueSymbolJsDoc.ts\n@@ -0,0 +1,10 @@\n+/// <reference path=\"fourslash.ts\" />\n+\n+// @checkJs: true\n+// @allowJs: true\n+// @filename: ./a.js\n+/////** @type {unique symbol} */\n+////const foo = Symbol();\n+////foo/**/\n+\n+verify.baselineQuickInfo();"}, {"role": "assistant", "content": "fix(56737): unique symbol quick info is different in JS than TS (#56743)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n test/Watch.test.js\n\ndiff --git a/test/Watch.test.js b/test/Watch.test.js\nindex bcd437edc..fb544f89e 100644\n--- a/test/Watch.test.js\n+++ b/test/Watch.test.js\n@@ -72,7 +72,7 @@ describe(\"Watch\", () => {\n \t\t\t\t\t// Ensure the second invalidation can occur during compiler running\n \t\t\t\t\tlet once = false;\n \t\t\t\t\tc.hooks.afterCompile.tapAsync(\"LongTask\", (_, cb) => {\n-\t\t\t\t\t\tif (once) cb();\n+\t\t\t\t\t\tif (once) return cb();\n \t\t\t\t\t\tonce = true;\n \t\t\t\t\t\tsetTimeout(() => {\n \t\t\t\t\t\t\tcb();"}, {"role": "assistant", "content": "ci: fix test (#19830)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-node/datnode-flags-with-value.json\n\ndiff --git a/packages/babel-node/data/node-flags-with-value.json b/packages/babel-node/data/node-flags-with-value.json\nindex 030fccfcc..1dcedae4d 100644\n--- a/packages/babel-node/data/node-flags-with-value.json\n+++ b/packages/babel-node/data/node-flags-with-value.json\n@@ -13,6 +13,7 @@\n   \"--env-file\",\n   \"--env-file-if-exists\",\n   \"--eval\",\n+  \"--experimental-config-file\",\n   \"--experimental-default-type\",\n   \"--experimental-loader\",\n   \"--experimental-policy\",\n@@ -56,6 +57,8 @@\n   \"--test-coverage-functions\",\n   \"--test-coverage-include\",\n   \"--test-coverage-lines\",\n+  \"--test-global-setup\",\n+  \"--test-isolation\",\n   \"--test-name-pattern\",\n   \"--test-reporter\",\n   \"--test-reporter-destination\","}, {"role": "assistant", "content": "chore: update node flags (#17337)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n UPGRADING.md\n\ndiff --git a/UPGRADING.md b/UPGRADING.md\nindex bc12f6a7b..85b27c379 100644\n--- a/UPGRADING.md\n+++ b/UPGRADING.md\n@@ -1 +1 @@\n-This document has been moved to [nextjs.org/docs/upgrading](https://nextjs.org/docs/upgrading). It's also available in this repository on [/docs/01-app/03-building-your-application/11-upgrading](/docs/01-app/03-building-your-application/11-upgrading).\n+This document has been moved to [nextjs.org/docs](https://nextjs.org/docs/app/getting-started/upgrading). It's also available in this repository on [/docs/01-app/02-guides/upgrading](/docs/01-app/02-guides/upgrading)."}, {"role": "assistant", "content": "fix(docs): Fix links in UPGRADING.md (#84114)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n errors/next-image-unconfigured-host.mdx\n\ndiff --git a/errors/next-image-unconfigured-host.mdx b/errors/next-image-unconfigured-host.mdx\nindex ea48348aa..a9005f5f9 100644\n--- a/errors/next-image-unconfigured-host.mdx\n+++ b/errors/next-image-unconfigured-host.mdx\n@@ -6,6 +6,28 @@ title: '`next/image` Un-configured Host'\n \n One of your pages that leverages the `next/image` component, passed a `src` value that uses a hostname in the URL that isn't defined in the `images.remotePatterns` in `next.config.js`.\n \n+Each part of the `src` value is strictly matched against your `images.remotePatterns` definitions. Matching is exact and case-sensitive, meaning a mismatch in any single part will fail the check.\n+\n+For a URL like `https://example.org/images/example?v=1234`, the following parts must match the pattern you configured:\n+\n+- **Protocol**: `http` vs `https` must match exactly.\n+- **Hostname**: `example.org` is different from `www.example.org` and from subdomains like `assets.example.org`.\n+- **Port**: If present (e.g. `:3000`), it must be included.\n+- **Pathname**: The path must be covered by your glob, e.g. `/**` or `/images/**`.\n+- **Search**: If specified in a pattern, it must match the full search string exactly (including the leading `?`). Globs are not supported for search.\n+\n+If any of these differ from the actual `src`, the image will be rejected.\n+\n+Common pitfalls that cause this error:\n+\n+- Using `https` in `src` but only allowing `http` (or vice‑versa).\n+- Loading from a subdomain like `assets.example.com` while only configuring `example.com`.\n+- Missing a port during local/dev usage, e.g. `http://localhost:3000`.\n+- A too‑narrow pathname pattern (e.g. `/images/` instead of `/images/**`).\n+- When using the `URL` constructor, if no `search` is specified, then the `search` property is set to an empty string `''`, which means search params are **NOT** allowed.\n+\n+See the [Remote Patterns](/docs/pages/api-reference/components/image#remotepatterns) reference for details.\n+\n ## Possible Ways to Fix It\n \n Add the protocol, hostname, port, and pathname to the `images.remotePatterns` config in `next.config.js`:\n@@ -18,6 +40,39 @@ module.exports = {\n }\n ```\n \n+### With specific search params\n+\n+To allow a single search param, `v=1234`:\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    remotePatterns: [\n+      new URL('https://assets.example.com/account123/**?v=1234'),\n+    ],\n+  },\n+}\n+```\n+\n+### Any search params\n+\n+To allow any search parameter, use the remote pattern object, omitting the `search` key.\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    remotePatterns: [\n+      {\n+        protocol: 'https',\n+        hostname: 'assets.example.com',\n+        port: '',\n+        pathname: '/account123/**',\n+      },\n+    ],\n+  },\n+}\n+```\n+\n ### Fixing older versions of Next.js\n \n <details>"}, {"role": "assistant", "content": "docs: Verbose troubleshooting for unconfigured hosts (#84271)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 95f5b3cea..0b8e84cc3 100644\n--- a/package.json\n+++ b/package.json\n@@ -104,7 +104,7 @@\n     \"schema-utils\": \"^4.3.2\",\n     \"tapable\": \"^2.2.3\",\n     \"terser-webpack-plugin\": \"^5.3.11\",\n-    \"watchpack\": \"^2.4.1\",\n+    \"watchpack\": \"^2.4.4\",\n     \"webpack-sources\": \"^3.3.3\"\n   },\n   \"devDependencies\": {\ndiff --git a/yarn.lock b/yarn.lock\nindex 91a5da329..f3249fa87 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -8155,7 +8155,7 @@ wast-loader@^1.12.1:\n   dependencies:\n     wabt \"1.0.0-nightly.20180421\"\n \n-watchpack@^2.4.1:\n+watchpack@^2.4.4:\n   version \"2.4.4\"\n   resolved \"https://registry.yarnpkg.com/watchpack/-/watchpack-2.4.4.tgz#473bda72f0850453da6425081ea46fc0d7602947\"\n   integrity sha512-c5EGNOiyxxV5qmTtAB7rbiXxi1ooX1pQKMLX/MIabJjRA0SJBQOjKF+KSVfHkr9U1cADPon0mRiVe/riyaiDUA=="}, {"role": "assistant", "content": "chore: bump watchpack (#19884)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/benchmarks.yml\n\ndiff --git a/.github/workflows/benchmarks.yml b/.github/workflows/benchmarks.yml\nindex c0296850d..3ae5aa42e 100644\n--- a/.github/workflows/benchmarks.yml\n+++ b/.github/workflows/benchmarks.yml\n@@ -39,7 +39,7 @@ jobs:\n       - run: yarn link webpack --frozen-lockfile\n \n       - name: Run benchmarks\n-        uses: CodSpeedHQ/action@6a8e2b874c338bf81cc5e8be715ada75908d3871 # v4.3.4\n+        uses: CodSpeedHQ/action@346a2d8a8d9d38909abd0bc3d23f773110f076ad # v4.4.1\n         with:\n           run: yarn benchmark --ci\n           mode: \"instrumentation\""}, {"role": "assistant", "content": "chore(deps): bump CodSpeedHQ/action from 4.3.4 to 4.4.1 (#20156)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/ci.yml\n\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 10be3c749..2410775e6 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -181,7 +181,7 @@ jobs:\n       - name: Extract artifacts\n         run: tar -xf babel-artifact.tar; rm babel-artifact.tar\n       - name: Lint\n-        run: make -j tscheck lint-ci\n+        run: make -j prepublish-prepare-dts lint-ci\n       - name: Ensure cwd does not contain uncommitted changes\n         run: |\n           node ./scripts/assert-dir-git-clean.js code-quality\ndiff --git a/Makefile b/Makefile\nindex 866ee67ec..42d02f0f8 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -86,6 +86,9 @@ test: lint test-only\n clone-license:\n \t$(MAKEJS) clone-license\n \n+prepublish-prepare-dts:\n+\t$(MAKEJS) prepublish-prepare-dts\n+\n prepublish-build:\n \t$(MAKEJS) prepublish-build"}, {"role": "assistant", "content": "chore: Check generated `dts` files in CI (#15470)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex 52cfc1f7..0016ec32 100644\n--- a/README.md\n+++ b/README.md\n@@ -328,7 +328,7 @@ to get your logo on our READMEs and [website](https://eslint.org/sponsors).\n <p><a href=\"https://automattic.com\"><img src=\"https://images.opencollective.com/automattic/d0ef3e1/logo.png\" alt=\"Automattic\" height=\"128\"></a> <a href=\"https://www.airbnb.com/\"><img src=\"https://images.opencollective.com/airbnb/d327d66/logo.png\" alt=\"Airbnb\" height=\"128\"></a></p><h3>Gold Sponsors</h3>\n <p><a href=\"https://qlty.sh/\"><img src=\"https://images.opencollective.com/qltysh/33d157d/logo.png\" alt=\"Qlty Software\" height=\"96\"></a> <a href=\"https://trunk.io/\"><img src=\"https://images.opencollective.com/trunkio/fb92d60/avatar.png\" alt=\"trunk.io\" height=\"96\"></a> <a href=\"https://shopify.engineering/\"><img src=\"https://avatars.githubusercontent.com/u/8085\" alt=\"Shopify\" height=\"96\"></a></p><h3>Silver Sponsors</h3>\n <p><a href=\"https://vite.dev/\"><img src=\"https://images.opencollective.com/vite/e6d15e1/logo.png\" alt=\"Vite\" height=\"64\"></a> <a href=\"https://liftoff.io/\"><img src=\"https://images.opencollective.com/liftoff/5c4fa84/logo.png\" alt=\"Liftoff\" height=\"64\"></a> <a href=\"https://americanexpress.io\"><img src=\"https://avatars.githubusercontent.com/u/3853301\" alt=\"American Express\" height=\"64\"></a> <a href=\"https://stackblitz.com\"><img src=\"https://avatars.githubusercontent.com/u/28635252\" alt=\"StackBlitz\" height=\"64\"></a></p><h3>Bronze Sponsors</h3>\n-<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n+<p><a href=\"https://syntax.fm\"><img src=\"https://github.com/syntaxfm.png\" alt=\"Syntax\" height=\"32\"></a> <a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://sentry.io\"><img src=\"https://github.com/getsentry.png\" alt=\"Sentry\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n <h3>Technology Sponsors</h3>\n Technology sponsors allow us to use their products and services for free as part of a contribution to the open source ecosystem and our work.\n <p><a href=\"https://netlify.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/netlify-icon.svg\" alt=\"Netlify\" height=\"32\"></a> <a href=\"https://algolia.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/algolia-icon.svg\" alt=\"Algolia\" height=\"32\"></a> <a href=\"https://1password.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/1password-icon.svg\" alt=\"1Password\" height=\"32\"></a></p>"}, {"role": "assistant", "content": "docs: Update README"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n SECURITY.md\n\ndiff --git a/SECURITY.md b/SECURITY.md\nindex 05967ffb6..d08f0115e 100644\n--- a/SECURITY.md\n+++ b/SECURITY.md\n@@ -8,6 +8,12 @@ bug report to the GitHub repository.\n \n Thanks for helping make webpack safe for everyone.\n \n+## Threat Model\n+\n+For an overview of the security assumptions, potential attack vectors, and areas\n+of concern relevant to webpack, please refer to the\n+[Threat Model](https://github.com/webpack/security-wg/blob/main/docs/threat-model.md).\n+\n ## Incident Response Plan\n \n In the event of a security incident, please refer to the"}, {"role": "assistant", "content": "docs(security): add reference to webpack threat model"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/SourceMapDevToolPlugin.js\n\ndiff --git a/lib/SourceMapDevToolPlugin.js b/lib/SourceMapDevToolPlugin.js\nindex 33def8c5c..f6a1779c8 100644\n--- a/lib/SourceMapDevToolPlugin.js\n+++ b/lib/SourceMapDevToolPlugin.js\n@@ -496,7 +496,12 @@ class SourceMapDevToolPlugin {\n \t\t\t\t\t\t\t\t\tif (options.debugIds) {\n \t\t\t\t\t\t\t\t\t\tconst debugId = generateDebugId(source, sourceMap.file);\n \t\t\t\t\t\t\t\t\t\tsourceMap.debugId = debugId;\n-\t\t\t\t\t\t\t\t\t\tcurrentSourceMappingURLComment = `\\n//# debugId=${debugId}${currentSourceMappingURLComment}`;\n+\n+\t\t\t\t\t\t\t\t\t\tconst debugIdComment = `\\n//# debugId=${debugId}`;\n+\t\t\t\t\t\t\t\t\t\tcurrentSourceMappingURLComment =\n+\t\t\t\t\t\t\t\t\t\t\tcurrentSourceMappingURLComment\n+\t\t\t\t\t\t\t\t\t\t\t\t? `${debugIdComment}${currentSourceMappingURLComment}`\n+\t\t\t\t\t\t\t\t\t\t\t\t: debugIdComment;\n \t\t\t\t\t\t\t\t\t}\n \n \t\t\t\t\t\t\t\t\tconst sourceMapString = JSON.stringify(sourceMap);\ndiff --git a/test/configCases/source-map/hidden-source-map-debugids/index.js b/test/configCases/source-map/hidden-source-map-debugids/index.js\nnew file mode 100644\nindex 000000000..61f6d76aa\n--- /dev/null\n+++ b/test/configCases/source-map/hidden-source-map-debugids/index.js\n@@ -0,0 +1,15 @@\n+const fs = require(\"fs\");\n+\n+it(\"source should include only debugId comment\", function() {\n+\tconst debugIdRegex = new RegExp('[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}', 'i');\n+\tconst debugIdCommentRegex = new RegExp(`\\n\\/\\/# debugId\\s*=\\s*${debugIdRegex.source}$`);\n+\n+\tconst source = fs.readFileSync(__filename, \"utf-8\");\n+\tconsole.log('SOURCE matches', source.match(debugIdCommentRegex));\n+\texpect(debugIdCommentRegex.test(source)).toBe(true);\n+\n+\tconst sourceMap = fs.readFileSync(__filename + \".map\", \"utf-8\");\n+\tconst map = JSON.parse(sourceMap);\n+\texpect(map.debugId).toBeDefined();\n+\texpect(debugIdRegex.test(map.debugId)).toBe(true);\n+});\ndiff --git a/test/configCases/source-map/hidden-source-map-debugids/webpack.config.js b/test/configCases/source-map/hidden-source-map-debugids/webpack.config.js\nnew file mode 100644\nindex 000000000..2b447ed43\n--- /dev/null\n+++ b/test/configCases/source-map/hidden-source-map-debugids/webpack.config.js\n@@ -0,0 +1,6 @@\n+\"use strict\";\n+\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tdevtool: \"hidden-source-map-debugids\"\n+};"}, {"role": "assistant", "content": "fix: injected debugId is corrupted if hidden-source-map is used (#20134)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " packages/compiler-core/src/tokenizer.ts | 28 ++++++++++++++++++++++------\n 1 file changed, 22 insertions(+), 6 deletions(-)\n\ndiff --git a/packages/compiler-core/src/tokenizer.ts b/packages/compiler-core/src/tokenizer.ts\nindex 48afe9d..c6084e1 100644\n--- a/packages/compiler-core/src/tokenizer.ts\n+++ b/packages/compiler-core/src/tokenizer.ts\n@@ -296,14 +296,30 @@ export default class Tokenizer {\n   public getPos(index: number): Position {\n     let line = 1\n     let column = index + 1\n-    for (let i = this.newlines.length - 1; i >= 0; i--) {\n-      const newlineIndex = this.newlines[i]\n-      if (index > newlineIndex) {\n-        line = i + 2\n-        column = index - newlineIndex\n-        break\n+    const length = this.newlines.length\n+    let j = -1\n+    if (length > 100) {\n+      let l = -1\n+      let r = length\n+      while (l + 1 < r) {\n+        const m = (l + r) >>> 1\n+        this.newlines[m] < index ? (l = m) : (r = m)\n+      }\n+      j = l\n+    } else {\n+      for (let i = length - 1; i >= 0; i--) {\n+        if (index > this.newlines[i]) {\n+          j = i\n+          break\n+        }\n       }\n     }\n+\n+    if (j >= 0) {\n+      line = j + 2\n+      column = index - this.newlines[j]\n+    }\n+\n     return {\n       column,\n       line,", "output": "refactor(compiler-core): optimize getPos with binary search", "metadata": {"id": "vue-1904053f", "repository": "vue", "commit_hash": "1904053f1f7986c2d6dbe858ee1b594b4b229c17"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/integrate/nodejs-api.md\n\ndiff --git a/docs/src/integrate/nodejs-api.md b/docs/src/integrate/nodejs-api.md\nindex 6c83ac55..5db95824 100644\n--- a/docs/src/integrate/nodejs-api.md\n+++ b/docs/src/integrate/nodejs-api.md\n@@ -259,6 +259,24 @@ This method calculates the configuration for a given file, which can be useful f\n - (`Promise<Object>`)<br>\n   The promise that will be fulfilled with a configuration object.\n \n+### ◆ eslint.findConfigFile(filePath)\n+\n+```js\n+const configFilePath = await eslint.findConfigFile(filePath);\n+```\n+\n+This method finds the configuration file that this `ESLint` instance would use based on the options passed to the constructor.\n+\n+#### Parameters\n+\n+- `filePath` (`string`)<br>\n+  Optional. The path of a file for which to find the associated config file. If omitted, ESLint determines the config file based on the current working directory of this instance.\n+\n+#### Return Value\n+\n+- (`Promise<string | undefined>`)<br>\n+  The promise that will be fulfilled with the absolute path to the config file being used, or `undefined` when no config file is used (for example, when `overrideConfigFile: true` is set).\n+\n ### ◆ eslint.isPathIgnored(filePath)\n \n ```js\ndiff --git a/lib/eslint/eslint.js b/lib/eslint/eslint.js\nindex e15ba2c2..7e68c893 100644\n--- a/lib/eslint/eslint.js\n+++ b/lib/eslint/eslint.js\n@@ -1299,7 +1299,7 @@ class ESLint {\n \t * @returns {Promise<string|undefined>} The path to the config file being used or\n \t *      `undefined` if no config file is being used.\n \t */\n-\tfindConfigFile(filePath) {\n+\tasync findConfigFile(filePath) {\n \t\tconst options = privateMembers.get(this).options;\n \n \t\t/*\ndiff --git a/tests/lib/eslint/eslint.js b/tests/lib/eslint/eslint.js\nindex 4eae4ac5..4cbb4b14 100644\n--- a/tests/lib/eslint/eslint.js\n+++ b/tests/lib/eslint/eslint.js\n@@ -10862,6 +10862,60 @@ describe(\"ESLint\", () => {\n \t\t\t\t\tconfigFilePath,\n \t\t\t\t);\n \t\t\t});\n+\n+\t\t\tit(\"should return undefined when overrideConfigFile is true even when filePath is provided\", async () => {\n+\t\t\t\tconst engine = new ESLint({\n+\t\t\t\t\tflags,\n+\t\t\t\t\toverrideConfigFile: true,\n+\t\t\t\t\tcwd: getFixturePath(\"lookup-from-file\"),\n+\t\t\t\t});\n+\n+\t\t\t\tconst filePath = path.join(\"subdir\", \"code.js\");\n+\t\t\t\tassert.strictEqual(\n+\t\t\t\t\tawait engine.findConfigFile(filePath),\n+\t\t\t\t\tvoid 0,\n+\t\t\t\t);\n+\t\t\t});\n+\n+\t\t\tit(\"should return custom config file path when overrideConfigFile is a nonempty string even when filePath is provided\", async () => {\n+\t\t\t\tconst engine = new ESLint({\n+\t\t\t\t\tflags,\n+\t\t\t\t\toverrideConfigFile: \"my-config.js\",\n+\t\t\t\t});\n+\n+\t\t\t\tconst configFilePath = path.resolve(\n+\t\t\t\t\t__dirname,\n+\t\t\t\t\t\"../../../my-config.js\",\n+\t\t\t\t);\n+\n+\t\t\t\tassert.strictEqual(\n+\t\t\t\t\tawait engine.findConfigFile(\"some/file.js\"),\n+\t\t\t\t\tconfigFilePath,\n+\t\t\t\t);\n+\t\t\t});\n+\n+\t\t\tit(\"should return the config file relative to the provided filePath when specified\", async () => {\n+\t\t\t\tconst engine = new ESLint({\n+\t\t\t\t\tflags,\n+\t\t\t\t\tcwd: getFixturePath(\"lookup-from-file\"),\n+\t\t\t\t});\n+\n+\t\t\t\tconst foundConfig = await engine.findConfigFile(\n+\t\t\t\t\tpath.join(\"subdir\", \"code.js\"),\n+\t\t\t\t);\n+\n+\t\t\t\tconst expectedConfig = flags.includes(\n+\t\t\t\t\t\"v10_config_lookup_from_file\",\n+\t\t\t\t)\n+\t\t\t\t\t? getFixturePath(\n+\t\t\t\t\t\t\t\"lookup-from-file\",\n+\t\t\t\t\t\t\t\"subdir\",\n+\t\t\t\t\t\t\t\"eslint.config.js\",\n+\t\t\t\t\t\t)\n+\t\t\t\t\t: getFixturePath(\"lookup-from-file\", \"eslint.config.js\");\n+\n+\t\t\t\tassert.strictEqual(foundConfig, expectedConfig);\n+\t\t\t});\n \t\t});\n \n \t\tdescribe(\"Use stats option\", () => {"}, {"role": "assistant", "content": "refactor: mark `ESLint.findConfigFile()` as `async`, add missing docs (#20157)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/understanding/history-and-design/PriorArt.md\n\ndiff --git a/docs/understanding/history-and-design/PriorArt.md b/docs/understanding/history-and-design/PriorArt.md\nindex c02f04f8..7bd4448c 100644\n--- a/docs/understanding/history-and-design/PriorArt.md\n+++ b/docs/understanding/history-and-design/PriorArt.md\n@@ -22,7 +22,7 @@ For what it's worth, Flux's creators [approve](https://twitter.com/jingc/status/\n \n ### Elm\n \n-[Elm](https://elm-lang.org/) is a functional programming language inspired by Haskell and created by [Evan Czaplicki](https://twitter.com/czaplic). It enforces [a “model view update” architecture](https://github.com/evancz/elm-architecture-tutorial/), where the update has the following signature: `(action, state) => state`. Elm “updaters” serve the same purpose as reducers in Redux.\n+[Elm](https://elm-lang.org/) is a functional programming language inspired by Haskell and created by [Evan Czaplicki](https://twitter.com/evancz). It enforces [a “model view update” architecture](https://github.com/evancz/elm-architecture-tutorial/), where the update has the following signature: `(action, state) => state`. Elm “updaters” serve the same purpose as reducers in Redux.\n \n Unlike Redux, Elm is a language, so it is able to benefit from many things like enforced purity, static typing, out of the box immutability, and pattern matching (using the `case` expression). Even if you don't plan to use Elm, you should read about the Elm architecture, and play with it. There is an interesting [JavaScript library playground implementing similar ideas](https://github.com/paldepind/noname-functional-frontend-framework). We should look there for inspiration on Redux! One way that we can get closer to the static typing of Elm is by [using a gradual typing solution like Flow](https://github.com/reduxjs/redux/issues/290)."}, {"role": "assistant", "content": "docs: Fix link to Elm creator's Twitter account"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-helper-create-regexp-features-plugin/src/util.ts\n\ndiff --git a/packages/babel-helper-create-regexp-features-plugin/src/util.ts b/packages/babel-helper-create-regexp-features-plugin/src/util.ts\nindex 4efdd60ee..e91b49cd0 100644\n--- a/packages/babel-helper-create-regexp-features-plugin/src/util.ts\n+++ b/packages/babel-helper-create-regexp-features-plugin/src/util.ts\n@@ -18,9 +18,14 @@ export function generateRegexpuOptions(\n     // However, it's such a rare occurrence that it's ok to compile\n     // the regexp even if we only need to compile regexps with\n     // duplicate named capturing groups.\n-    const regex = /\\(\\?<([^>]+)>/g;\n+    // The $ is to exit early for malicious input such as \\(?<\\(?<\\(?<...\n+    const regex = /\\(\\?<([^>]+)(>|$)/g;\n     const seen = new Set();\n-    for (let match; (match = regex.exec(pattern)); seen.add(match[1])) {\n+    for (\n+      let match;\n+      (match = regex.exec(pattern)) && match[2];\n+      seen.add(match[1])\n+    ) {\n       if (seen.has(match[1])) return \"transform\";\n     }\n     return false;\ndiff --git a/packages/babel-helper-create-regexp-features-plugin/test/util.skip-bundled.js b/packages/babel-helper-create-regexp-features-plugin/test/util.skip-bundled.js\nnew file mode 100644\nindex 000000000..34497ccd1\n--- /dev/null\n+++ b/packages/babel-helper-create-regexp-features-plugin/test/util.skip-bundled.js\n@@ -0,0 +1,14 @@\n+import { generateRegexpuOptions } from \"../lib/util.js\";\n+\n+describe(\"generateRegexpuOptions\", () => {\n+  describe(\"should handle maliciously crafted pattern\", () => {\n+    it(\"\\\\(?<\\\\(?<...\", () => {\n+      const pattern = \"\" + new RegExp(\"\\\\(?<\".repeat(4e4));\n+      const startTime = Date.now();\n+      const options = generateRegexpuOptions(pattern, 0);\n+      const timeTaken = Date.now() - startTime;\n+      expect(timeTaken).toBeLessThan(2000);\n+      expect(options).toHaveProperty(\"namedGroups\", false);\n+    });\n+  });\n+});"}, {"role": "assistant", "content": "fix: improve duplicate named groups check (#17176)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/eslint/eslint.js\n\ndiff --git a/lib/eslint/eslint.js b/lib/eslint/eslint.js\nindex 7e68c893..92e90b3e 100644\n--- a/lib/eslint/eslint.js\n+++ b/lib/eslint/eslint.js\n@@ -17,6 +17,7 @@ const { pathToFileURL } = require(\"node:url\");\n const { SHARE_ENV, Worker } = require(\"node:worker_threads\");\n const { version } = require(\"../../package.json\");\n const { defaultConfig } = require(\"../config/default-config\");\n+const timing = require(\"../linter/timing\");\n \n const {\n \tcreateDebug,\n@@ -503,6 +504,11 @@ async function runWorkers(\n \t\t\t\t\tworstNetLintingRatio,\n \t\t\t\t\tnetLintingRatio,\n \t\t\t\t);\n+\n+\t\t\t\tif (timing.enabled && indexedResults.timings) {\n+\t\t\t\t\ttiming.mergeData(indexedResults.timings);\n+\t\t\t\t}\n+\n \t\t\t\tfor (const result of indexedResults) {\n \t\t\t\t\tconst { index } = result;\n \t\t\t\t\tdelete result.index;\n@@ -522,7 +528,17 @@ async function runWorkers(\n \tfor (let index = 0; index < workerCount; ++index) {\n \t\tpromises[index] = new Promise(workerExecutor);\n \t}\n-\tawait Promise.all(promises);\n+\n+\ttry {\n+\t\tawait Promise.all(promises);\n+\t} catch (error) {\n+\t\t/*\n+\t\t * If any worker fails, suppress timing display in the main thread\n+\t\t * to avoid printing partial or misleading timing output.\n+\t\t */\n+\t\ttiming.disableDisplay();\n+\t\tthrow error;\n+\t}\n \n \tif (worstNetLintingRatio < LOW_NET_LINTING_RATIO) {\n \t\twarnOnLowNetLintingRatio();\ndiff --git a/lib/eslint/worker.js b/lib/eslint/worker.js\nindex 2741d752..7001bf21 100644\n--- a/lib/eslint/worker.js\n+++ b/lib/eslint/worker.js\n@@ -29,6 +29,7 @@ const {\n \tprocessOptions,\n } = require(\"./eslint-helpers\");\n const { WarningService } = require(\"../services/warning-service\");\n+const timing = require(\"../linter/timing\");\n \n const depsLoadedTime = hrtimeBigint();\n \n@@ -39,7 +40,7 @@ const depsLoadedTime = hrtimeBigint();\n /** @typedef {import(\"../types\").ESLint.LintResult} LintResult */\n /** @typedef {import(\"../types\").ESLint.Options} ESLintOptions */\n /** @typedef {LintResult & { index?: number; }} IndexedLintResult */\n-/** @typedef {IndexedLintResult[] & { netLintingDuration: bigint; }} WorkerLintResults */\n+/** @typedef {IndexedLintResult[] & { netLintingDuration: bigint; timings?: Record<string, number>; }} WorkerLintResults */\n /**\n  * @typedef {Object} WorkerData - Data passed to the worker thread.\n  * @property {ESLintOptions | string} eslintOptionsOrURL - The unprocessed ESLint options or the URL of the options module.\n@@ -57,6 +58,12 @@ const debug = createDebug(`eslint:worker:thread-${threadId}`);\n // Main\n //------------------------------------------------------------------------------\n \n+/*\n+ * Prevent timing module from printing profiling output from worker threads.\n+ * The main thread is responsible for displaying any aggregated timings.\n+ */\n+timing.disableDisplay();\n+\n debug(\"Dependencies loaded in %t\", depsLoadedTime - startTime);\n \n (async () => {\n@@ -158,5 +165,9 @@ debug(\"Dependencies loaded in %t\", depsLoadedTime - startTime);\n \tindexedResults.netLintingDuration =\n \t\tlintingDuration - loadConfigTotalDuration - readFileCounter.duration;\n \n+\tif (timing.enabled) {\n+\t\tindexedResults.timings = timing.getData();\n+\t}\n+\n \tparentPort.postMessage(indexedResults);\n })();\ndiff --git a/lib/linter/timing.js b/lib/linter/timing.js\nindex f0aa1d2e..1791f8fd 100644\n--- a/lib/linter/timing.js\n+++ b/lib/linter/timing.js\n@@ -131,6 +131,7 @@ function display(data) {\n /* c8 ignore next */\n module.exports = (function () {\n \tconst data = Object.create(null);\n+\tlet displayEnabled = true;\n \n \t/**\n \t * Time the run\n@@ -158,9 +159,42 @@ module.exports = (function () {\n \t\t};\n \t}\n \n+\t/**\n+\t * Returns a shallow copy of the collected timings data.\n+\t * @returns {Record<string, number>} mapping of ruleId to total time in ms\n+\t */\n+\tfunction getData() {\n+\t\treturn { ...data };\n+\t}\n+\n+\t/**\n+\t * Merges rule timing totals collected elsewhere into this process' totals.\n+\t * @param {Record<string, number>} dataToMerge mapping of ruleId to total time in ms\n+\t * @returns {void}\n+\t */\n+\tfunction mergeData(dataToMerge) {\n+\t\tfor (const [key, value] of Object.entries(dataToMerge)) {\n+\t\t\tif (typeof data[key] === \"undefined\") {\n+\t\t\t\tdata[key] = 0;\n+\t\t\t}\n+\t\t\tdata[key] += value;\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Disables printing of timing data on process exit.\n+\t * Intended for worker threads or non-main contexts.\n+\t * @returns {void}\n+\t */\n+\tfunction disableDisplay() {\n+\t\tdisplayEnabled = false;\n+\t}\n+\n \tif (enabled) {\n \t\tprocess.on(\"exit\", () => {\n-\t\t\tdisplay(data);\n+\t\t\tif (displayEnabled && Object.keys(data).length > 0) {\n+\t\t\t\tdisplay(data);\n+\t\t\t}\n \t\t});\n \t}\n \n@@ -168,5 +202,8 @@ module.exports = (function () {\n \t\ttime,\n \t\tenabled,\n \t\tgetListSize,\n+\t\tgetData,\n+\t\tmergeData,\n+\t\tdisableDisplay,\n \t};\n })();"}, {"role": "assistant", "content": "fix: unify timing report for concurrent linting (#20188)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n jest.config.js\n\ndiff --git a/jest.config.js b/jest.config.js\nindex b1219cbd5..9f81261a7 100644\n--- a/jest.config.js\n+++ b/jest.config.js\n@@ -7,6 +7,7 @@ const createJestConfig = nextJest()\n const customJestConfig = {\n   displayName: process.env.IS_WEBPACK_TEST ? 'webpack' : 'Turbopack',\n   testMatch: ['**/*.test.js', '**/*.test.ts', '**/*.test.jsx', '**/*.test.tsx'],\n+  globalSetup: '<rootDir>/jest-global-setup.ts',\n   setupFilesAfterEnv: ['<rootDir>/jest-setup-after-env.ts'],\n   verbose: true,\n   rootDir: 'test',\ndiff --git a/packages/next/taskfile.js b/packages/next/taskfile.js\nindex 225fb3b1f..01ac089ed 100644\n--- a/packages/next/taskfile.js\n+++ b/packages/next/taskfile.js\n@@ -2684,6 +2684,16 @@ export async function build(task, opts) {\n     ['precompile', 'compile', 'check_error_codes', 'generate_types'],\n     opts\n   )\n+  // Write git commit hash to dist for stale build detection during tests\n+  try {\n+    const { stdout: commitHash } = await execa('git', ['rev-parse', 'HEAD'])\n+    await fs.writeFile(\n+      join(__dirname, 'dist', '.build-commit'),\n+      commitHash.trim()\n+    )\n+  } catch (err) {\n+    console.warn(`Warning: Could not write build commit hash: ${err.message}`)\n+  }\n }\n \n export async function generate_types(task, opts) {\ndiff --git a/run-tests.js b/run-tests.js\nindex 6c776d119..da96dd179 100644\n--- a/run-tests.js\n+++ b/run-tests.js\n@@ -13,6 +13,7 @@ const glob = promisify(_glob)\n const exec = promisify(execOrig)\n const core = require('@actions/core')\n const { getTestFilter } = require('./test/get-test-filter')\n+const { checkBuildFreshness } = require('./test/lib/check-build-freshness')\n \n // Do not rename or format. sync-react script relies on this line.\n // prettier-ignore\n@@ -219,6 +220,9 @@ async function main() {\n   // Ensure we have the arguments awaited from yargs.\n   argv = await argv\n \n+  // Check for stale or missing build\n+  await checkBuildFreshness()\n+\n   // `.github/workflows/build_reusable.yml` sets this, we should use it unless\n   // it's overridden by an explicit `--concurrency` argument.\n   const envConcurrency =\ndiff --git a/test/jest-global-setup.ts b/test/jest-global-setup.ts\nnew file mode 100644\nindex 000000000..5b668053c\n--- /dev/null\n+++ b/test/jest-global-setup.ts\n@@ -0,0 +1,5 @@\n+import { checkBuildFreshness } from './lib/check-build-freshness'\n+\n+export default async function globalSetup() {\n+  await checkBuildFreshness()\n+}\ndiff --git a/test/lib/check-build-freshness.js b/test/lib/check-build-freshness.js\nnew file mode 100644\nindex 000000000..6b100e4d6\n--- /dev/null\n+++ b/test/lib/check-build-freshness.js\n@@ -0,0 +1,59 @@\n+const { existsSync } = require('fs')\n+const fsp = require('fs/promises')\n+const path = require('path')\n+const { execSync } = require('child_process')\n+\n+const YELLOW = '\\x1b[33m'\n+const RESET = '\\x1b[0m'\n+\n+/**\n+ * Check if the Next.js build is fresh (matches current git HEAD).\n+ * Prints warnings to console if build is missing or stale.\n+ * @returns {Promise<void>}\n+ */\n+async function checkBuildFreshness() {\n+  const distPath = path.join(__dirname, '../../packages/next/dist')\n+  const buildCommitPath = path.join(distPath, '.build-commit')\n+\n+  if (!existsSync(distPath)) {\n+    console.warn(`${YELLOW}⚠️  WARNING: No build found!${RESET}`)\n+    console.warn(\n+      `${YELLOW}   The packages/next/dist directory does not exist.${RESET}`\n+    )\n+    console.warn(\n+      `${YELLOW}   Run \\`pnpm build\\` before running tests.\\n${RESET}`\n+    )\n+    return\n+  }\n+\n+  if (!existsSync(buildCommitPath)) {\n+    console.warn(`${YELLOW}⚠️  WARNING: Build may be stale!${RESET}`)\n+    console.warn(\n+      `${YELLOW}   Unable to verify build freshness (no .build-commit marker).${RESET}`\n+    )\n+    console.warn(`${YELLOW}   Run \\`pnpm build\\` to rebuild.\\n${RESET}`)\n+    return\n+  }\n+\n+  try {\n+    const buildCommit = (await fsp.readFile(buildCommitPath, 'utf8')).trim()\n+    const currentCommit = execSync('git rev-parse HEAD', {\n+      encoding: 'utf8',\n+    }).trim()\n+\n+    if (buildCommit !== currentCommit) {\n+      console.warn(`${YELLOW}⚠️  WARNING: Build is stale!${RESET}`)\n+      console.warn(\n+        `${YELLOW}   Build was compiled at commit: ${buildCommit.slice(0, 8)}${RESET}`\n+      )\n+      console.warn(\n+        `${YELLOW}   Current HEAD is at commit:    ${currentCommit.slice(0, 8)}${RESET}`\n+      )\n+      console.warn(`${YELLOW}   Run \\`pnpm build\\` to rebuild.\\n${RESET}`)\n+    }\n+  } catch (err) {\n+    // Ignore errors (e.g., git not available)\n+  }\n+}\n+\n+module.exports = { checkBuildFreshness }"}, {"role": "assistant", "content": "chore: warn when running tests against stale build (#88001)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/ci.yml\n\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex caa2fdcd..6d46c236 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -67,7 +67,7 @@ jobs:\n       - name: Run transition tests\n         run: pnpm run test:transition\n \n-  lint-and-test-dts:\n+  type-test:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions/checkout@v2\n@@ -86,8 +86,5 @@ jobs:\n       - name: Run srouce type check\n         run: pnpm run ts-check\n \n-      - name: Run eslint\n-        run: pnpm run lint\n-\n       - name: Run type declaration tests\n         run: pnpm run test:types\ndiff --git a/scripts/config.js b/scripts/config.js\nindex c2bc0d7b..8cef33b6 100644\n--- a/scripts/config.js\n+++ b/scripts/config.js\n@@ -238,7 +238,8 @@ function genConfig(name) {\n \n   // built-in vars\n   const vars = {\n-    __VERSION__: version\n+    __VERSION__: version,\n+    __DEV__: `process.env.NODE_ENV !== 'production'`\n   }\n   // feature flags\n   Object.keys(featureFlags).forEach(key => {"}, {"role": "assistant", "content": "ci: fix ci"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-plugin-transform-typescript/src/namespace.ts\n\ndiff --git a/packages/babel-plugin-transform-typescript/src/namespace.ts b/packages/babel-plugin-transform-typescript/src/namespace.ts\nindex 3aaecc6cf..5a446dc6e 100644\n--- a/packages/babel-plugin-transform-typescript/src/namespace.ts\n+++ b/packages/babel-plugin-transform-typescript/src/namespace.ts\n@@ -23,7 +23,7 @@ export default function transpileNamespace(\n   }\n \n   const name = path.node.id.name;\n-  const value = handleNested(path, t.cloneNode(path.node, true));\n+  const value = handleNested(path, path.node);\n   if (value === null) {\n     // This means that `path` is a type-only namespace.\n     // We call `registerGlobalType` here to allow it to be stripped."}, {"role": "assistant", "content": "perf: Avoid extra cloning of namespaces (#16875)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/use/configure/ignore.md\n\ndiff --git a/docs/src/use/configure/ignore.md b/docs/src/use/configure/ignore.md\nindex 9aee7606..da260261 100644\n--- a/docs/src/use/configure/ignore.md\n+++ b/docs/src/use/configure/ignore.md\n@@ -34,6 +34,35 @@ export default defineConfig([globalIgnores([\".config/*\"])]);\n \n This configuration specifies that all of the files in the `.config` directory should be ignored. This pattern is added after the default patterns, which are `[\"**/node_modules/\", \".git/\"]`.\n \n+By default, ESLint lints files that match the patterns `**/*.js`, `**/*.cjs`, and `**/*.mjs`. You can ignore them with `globalIgnores()` if you don't want ESLint to lint these files:\n+\n+```js\n+// eslint.config.js\n+import { defineConfig, globalIgnores } from \"eslint/config\";\n+\n+export default defineConfig([\n+\tglobalIgnores([\"**/*.js\", \"**/*.cjs\", \"**/*.mjs\"]),\n+]);\n+```\n+\n+When non-JS files are specified in the `files` property, ESLint still lints files that match the default patterns. To lint only the files specified in the `files` property, you must ignore the default file patterns:\n+\n+```js\n+// eslint.config.js\n+import { defineConfig, globalIgnores } from \"eslint/config\";\n+\n+export default defineConfig([\n+\tglobalIgnores([\"**/*.js\", \"**/*.cjs\", \"**/*.mjs\"]),\n+\t{\n+\t\tfiles: [\"**/*.ts\"],\n+\t\tignores: [\".config/**\"],\n+\t\trules: {\n+\t\t\t/* ... */\n+\t\t},\n+\t},\n+]);\n+```\n+\n You can also ignore files on the command line using [`--ignore-pattern`](../command-line-interface#--ignore-pattern), such as:\n \n {{ npx_tabs({\n@@ -111,6 +140,19 @@ export default defineConfig([\n ]);\n ```\n \n+If you want to ignore ESLint's default file patterns (`**/*.js`, `**/*.cjs`, and `**/*.mjs`) while still linting specific files or directories, you can use negative patterns to unignore them:\n+\n+```js\n+// eslint.config.js\n+import { defineConfig, globalIgnores } from \"eslint/config\";\n+\n+export default defineConfig([\n+\tglobalIgnores([\"**/*.js\", \"**/*.cjs\", \"**/*.mjs\", \"!**/src/**/*.js\"]),\n+]);\n+```\n+\n+This configuration ignores all files matching the default patterns except for JavaScript files located within `src` directories.\n+\n ::: important\n Note that only global `ignores` patterns can match directories.\n `ignores` patterns that are specific to a configuration will only match file names."}, {"role": "assistant", "content": "docs: ignoring default file patterns (#20312)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .yarnrc.yml\n\ndiff --git a/.yarnrc.yml b/.yarnrc.yml\nindex c9bf295f0..8197d284a 100644\n--- a/.yarnrc.yml\n+++ b/.yarnrc.yml\n@@ -16,6 +16,8 @@ enableScripts: false\n \n enableTransparentWorkspaces: false\n \n+nmMode: hardlinks-local\n+\n nodeLinker: node-modules\n \n packageExtensions:\n@@ -86,6 +88,8 @@ plugins:\n     path: .yarn/plugins/@yarnpkg/plugin-conditions.cjs\n     spec: \"https://raw.githubusercontent.com/nicolo-ribaudo/yarn-plugin-conditions/main/bundles/%40yarnpkg/plugin-conditions.js\"\n \n+preferInteractive: true\n+\n releaseTool:\n   ignoreChanges:\n     - \"*.md\"\ndiff --git a/yarn.config.cjs b/yarn.config.cjs\nindex 9eed56332..cbb01bb28 100644\n--- a/yarn.config.cjs\n+++ b/yarn.config.cjs\n@@ -29,68 +29,29 @@ function enforceWorkspaceDependencies({ Yarn }) {\n }\n \n /**\n- * Enforces the license in all public workspaces while removing it from private workspaces\n- *\n-gen_enforced_field(WorkspaceCwd, 'license', 'MIT') :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'license', null) :-\n-  workspace_field(WorkspaceCwd, 'private', true).\n- * @param {Context} context\n- */\n-function enforceLicenseMITForPublicUnsetForPrivate({ Yarn }) {\n-  for (const workspace of Yarn.workspaces()) {\n-    if (workspace.manifest.private) {\n-      workspace.unset(\"license\");\n-    } else {\n-      workspace.set(\"license\", \"MIT\");\n-    }\n-  }\n-}\n-\n-/**\n- * Enforces the license in all public workspaces while removing it from private workspaces\n- *\n-gen_enforced_field(WorkspaceCwd, 'repository.type', 'git') :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'repository.url', 'https://github.com/babel/babel.git') :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'repository.directory', WorkspaceCwd) :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'repository', null) :-\n-  workspace_field(WorkspaceCwd, 'private', true).\n  * @param {Context} context\n  */\n-function enforceRepositoryForPublicUnsetForPrivate({ Yarn }) {\n+function enforcePackageInfo({ Yarn }) {\n   for (const workspace of Yarn.workspaces()) {\n-    if (workspace.manifest.private) {\n-      workspace.unset(\"repository\");\n-    } else {\n-      workspace.set(\"repository\", {\n+    const info = {\n+      license: \"MIT\",\n+      repository: {\n         type: \"git\",\n         url: \"https://github.com/babel/babel.git\",\n         directory: workspace.cwd,\n-      });\n-    }\n-  }\n-}\n-\n-/**\n- * Enforces 'publishConfig.access' is set to public for public workspaces while removing it from private workspaces\n- *\n-gen_enforced_field(WorkspaceCwd, 'publishConfig.access', 'public') :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'publishConfig.access', null) :-\n-  workspace_field(WorkspaceCwd, 'private', true).\n- * @param {Context} context\n- */\n-function enforcePublishConfigAccessForPublicUnsetForPrivate({ Yarn }) {\n-  for (const workspace of Yarn.workspaces()) {\n-    if (workspace.manifest.private) {\n-      workspace.unset(\"publishConfig\");\n-    } else {\n-      workspace.set(\"publishConfig\", {\n+      },\n+      publishConfig: {\n         access: \"public\",\n-      });\n+      },\n+      author: \"The Babel Team (https://babel.dev/team)\",\n+    };\n+\n+    for (const key of Object.keys(info)) {\n+      if (workspace.manifest.private) {\n+        workspace.unset(key);\n+      } else {\n+        workspace.set(key, info[key]);\n+      }\n     }\n   }\n }\n@@ -162,24 +123,6 @@ function enforceBothConditionsSetForBABEL_8_BREAKING({ Yarn }) {\n   }\n }\n \n-/**\n- * Enforces the author field to be consistent\n-gen_enforced_field(WorkspaceCwd, 'author', 'The Babel Team (https://babel.dev/team)') :-\n-  \\+ workspace_field(WorkspaceCwd, 'private', true).\n-gen_enforced_field(WorkspaceCwd, 'author', null) :-\n-  workspace_field(WorkspaceCwd, 'private', true).\n- * @param {Context} context\n- */\n-function enforceAuthor({ Yarn }) {\n-  for (const workspace of Yarn.workspaces()) {\n-    if (workspace.manifest.private) {\n-      workspace.unset(\"authors\");\n-    } else {\n-      workspace.set(\"author\", \"The Babel Team (https://babel.dev/team)\");\n-    }\n-  }\n-}\n-\n /**\n  * Enforces the main and types field to start with ./\n gen_enforced_field(WorkspaceCwd, FieldName, ExpectedValue) :-\n@@ -280,26 +223,7 @@ function enforceConditions({ Yarn }) {\n     }\n   }\n }\n-/**\n- * Enforces that @babel/helper-* must peer-depend on @babel/core if they depend on @babel/traverse\n-gen_enforced_dependency(WorkspaceCwd, '@babel/core', '^7.0.0', 'peerDependencies') :-\n-  % Get the workspace name\n-  workspace_ident(WorkspaceCwd, WorkspaceIdent),\n-  atom_concat('@babel/helper-', _, WorkspaceIdent),\n-  workspace_has_dependency(WorkspaceCwd, DependencyIdent, _, 'dependencies'),\n-  (DependencyIdent = '@babel/traverse').\n- * @param {Context} context\n- */\n-function enforeBabelHelperBabelTraveseDeps({ Yarn }) {\n-  for (const workspace of Yarn.workspaces()) {\n-    if (\n-      workspace.ident?.startsWith(\"@babel/helper-\") &&\n-      workspace.manifest.dependencies?.[\"@babel/traverse\"]\n-    ) {\n-      workspace.set(\"peerDependencies['@babel/core']\", \"^7.0.0\");\n-    }\n-  }\n-}\n+\n /**\n  * Enforces that @babel/helper-* must not depend on @babel/traverse, @babel/template, @babel/types if they peer-depend on @babel/core\n gen_enforced_dependency(WorkspaceCwd, DependencyIdent, null, 'dependencies') :-\n@@ -312,16 +236,17 @@ gen_enforced_dependency(WorkspaceCwd, DependencyIdent, null, 'dependencies') :-\n  */\n function enforceBabelHelperBabelDeps({ Yarn }) {\n   for (const workspace of Yarn.workspaces()) {\n-    if (\n-      workspace.ident?.startsWith(\"@babel/helper-\") &&\n-      workspace.pkg.peerDependencies.has(\"@babel/core\")\n-    ) {\n-      workspace.unset(\"dependencies['@babel/template']\");\n+    if (workspace.ident?.startsWith(\"@babel/helper-\")) {\n       workspace.unset(\"dependencies['@babel/traverse']\");\n-      workspace.unset(\"dependencies['@babel/types']\");\n+\n+      if (workspace.pkg.peerDependencies.has(\"@babel/core\")) {\n+        workspace.unset(\"dependencies['@babel/template']\");\n+        workspace.unset(\"dependencies['@babel/types']\");\n+      }\n     }\n   }\n }\n+\n /**\n  * Enforces that @babel/core must not be in dependency for most packages\n gen_enforced_dependency(WorkspaceCwd, '@babel/core', null, 'dependencies') :-\n@@ -405,22 +330,21 @@ function enforceExports({ Yarn }) {\n   }\n }\n \n+/**\n+ * @type {import('@yarnpkg/types').Yarn.Config}\n+ */\n module.exports = {\n   constraints: async ctx => {\n     enforceWorkspaceDependencies(ctx);\n-    enforceLicenseMITForPublicUnsetForPrivate(ctx);\n-    enforceRepositoryForPublicUnsetForPrivate(ctx);\n-    enforcePublishConfigAccessForPublicUnsetForPrivate(ctx);\n+    enforcePackageInfo(ctx);\n     enforceEnginesNodeForPublicUnsetForPrivate(ctx);\n     enforceBothConditionsSetForBABEL_8_BREAKING(ctx);\n-    enforceAuthor(ctx);\n     enforceMainAndTypes(ctx);\n     enforceType(ctx);\n     enforceExports(ctx);\n     enforceConditions(ctx);\n     enforceNoDualTypeDependencies(ctx);\n     enforceRuntimeCorejs2DependsOnCorejs2(ctx);\n-    enforeBabelHelperBabelTraveseDeps(ctx);\n     enforceBabelHelperBabelDeps(ctx);\n     enforceBabelCoreNotInDeps(ctx);\n   },"}, {"role": "assistant", "content": "chore: Simplify `yarn.config.cjs` (#16116)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n script/lib/git.py\n\ndiff --git a/script/lib/git.py b/script/lib/git.py\nindex 68789d8a..55a3a560 100644\n--- a/script/lib/git.py\n+++ b/script/lib/git.py\n@@ -52,7 +52,8 @@ def get_repo_root(path):\n \n def am(repo, patch_data, threeway=False, directory=None, exclude=None,\n     committer_name=None, committer_email=None, keep_cr=True):\n-  args = []\n+  # --keep-non-patch prevents stripping leading bracketed strings on the subject line\n+  args = ['--keep-non-patch']\n   if threeway:\n     args += ['--3way']\n   if directory is not None:"}, {"role": "assistant", "content": "build: use --keep-non-patch flag with git am (#48797)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n turbopack/crates/turbopack-ecmascript/src/transform/mod.rs\n\ndiff --git a/turbopack/crates/turbopack-ecmascript/src/transform/mod.rs b/turbopack/crates/turbopack-ecmascript/src/transform/mod.rs\nindex ed675561a..2a66ecf29 100644\n--- a/turbopack/crates/turbopack-ecmascript/src/transform/mod.rs\n+++ b/turbopack/crates/turbopack-ecmascript/src/transform/mod.rs\n@@ -8,7 +8,7 @@ use swc_core::{\n     common::{Mark, SourceMap, comments::Comments},\n     ecma::{\n         ast::{ExprStmt, ModuleItem, Pass, Program, Stmt},\n-        preset_env::{self, Targets},\n+        preset_env::{self, Feature, FeatureOrModule, Targets},\n         transforms::{\n             base::{\n                 assumptions::Assumptions,\n@@ -210,6 +210,13 @@ impl EcmascriptInputTransform {\n                     swc_core::ecma::preset_env::Config {\n                         targets: Some(Targets::Versions(*versions)),\n                         mode: None, // Don't insert core-js polyfills\n+                        // Disable some ancient ES3 transforms, ReservedWords breaks resolving of\n+                        // some idents references\n+                        exclude: vec![\n+                            FeatureOrModule::Feature(Feature::ReservedWords),\n+                            FeatureOrModule::Feature(Feature::MemberExpressionLiterals),\n+                            FeatureOrModule::Feature(Feature::PropertyLiterals),\n+                        ],\n                         ..Default::default()\n                     },\n                 );"}, {"role": "assistant", "content": "fix(turbopack): Disable ES3 transforms from preset-env (#86532)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/input.ts\n\ndiff --git a/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/input.ts b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/input.ts\nnew file mode 100644\nindex 000000000..311228b8e\n--- /dev/null\n+++ b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/input.ts\n@@ -0,0 +1,6 @@\n+function classDec(target, context) {}\n+\n+@classDec\n+abstract class C {\n+  static foo = false;\n+}\ndiff --git a/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/options.json b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/options.json\nnew file mode 100644\nindex 000000000..5e0f50a61\n--- /dev/null\n+++ b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/options.json\n@@ -0,0 +1,6 @@\n+{\n+  \"plugins\": [\n+    [\"proposal-decorators\", { \"version\": \"2023-11\" }],\n+    \"syntax-typescript\"\n+  ]\n+}\ndiff --git a/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/output.js b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/output.js\nnew file mode 100644\nindex 000000000..0a717923c\n--- /dev/null\n+++ b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/abstruct-class/output.js\n@@ -0,0 +1,14 @@\n+let _initClass;\n+function classDec(target, context) {}\n+let _C;\n+new class extends babelHelpers.identity {\n+  static [class C {\n+    static {\n+      [_C, _initClass] = babelHelpers.applyDecs2311(this, [classDec], []).c;\n+    }\n+  }];\n+  foo = false;\n+  constructor() {\n+    super(_C), _initClass();\n+  }\n+}();\ndiff --git a/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/options.json b/packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/computed-key-ts-as-expression/options.json\nsimilarity index 100%\nrename from packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/options.json\nrename to packages/babel-plugin-proposal-decorators/test/fixtures/2023-11-typescript/computed-key-ts-as-expression/options.json\ndiff --git a/packages/babel-types/src/converters/toExpression.ts b/packages/babel-types/src/converters/toExpression.ts\nindex 3bdae2eaf..5a9a98a4d 100644\n--- a/packages/babel-types/src/converters/toExpression.ts\n+++ b/packages/babel-types/src/converters/toExpression.ts\n@@ -37,6 +37,8 @@ function toExpression(\n   if (isClass(node)) {\n     // @ts-expect-error todo(flow->ts): avoid type unsafe mutations\n     node.type = \"ClassExpression\";\n+    // abstract modifiers are only allowed on class declarations\n+    node.abstract = false;\n   } else if (isFunction(node)) {\n     // @ts-expect-error todo(flow->ts): avoid type unsafe mutations\n     node.type = \"FunctionExpression\";\ndiff --git a/packages/babel-types/test/converters.js b/packages/babel-types/test/converters.js\nindex b85d60eef..c9a104e98 100644\n--- a/packages/babel-types/test/converters.js\n+++ b/packages/babel-types/test/converters.js\n@@ -241,5 +241,12 @@ describe(\"converters\", function () {\n       }).toThrow(Error);\n       t.assertProgram(node);\n     });\n+    it(\"strip class abstract\", function () {\n+      const node = t.classDeclaration(t.identifier(\"A\"), null, t.classBody([]));\n+      node.abstract = true;\n+      t.toExpression(node);\n+      t.assertClassExpression(node);\n+      expect(node.abstract).toBe(false);\n+    });\n   });\n });"}, {"role": "assistant", "content": "fix(converter): Remove `abstract` modifiers in class declaration to expression conversion (#17321)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-helper-module-transforms/src/normalize-and-load-metadata.ts\n\ndiff --git a/packages/babel-helper-module-transforms/src/normalize-and-load-metadata.ts b/packages/babel-helper-module-transforms/src/normalize-and-load-metadata.ts\nindex 4aba0c252..074eddcfc 100644\n--- a/packages/babel-helper-module-transforms/src/normalize-and-load-metadata.ts\n+++ b/packages/babel-helper-module-transforms/src/normalize-and-load-metadata.ts\n@@ -142,7 +142,7 @@ export default function normalizeModuleAndLoadMetadata(\n     stringSpecifiers,\n   );\n \n-  removeModuleDeclarations(programPath);\n+  removeImportExportDeclarations(programPath);\n \n   // Reuse the imported namespace name if there is one.\n   for (const [, metadata] of source) {\n@@ -558,7 +558,7 @@ function nameAnonymousExports(programPath: NodePath<t.Program>) {\n   });\n }\n \n-function removeModuleDeclarations(programPath: NodePath<t.Program>) {\n+function removeImportExportDeclarations(programPath: NodePath<t.Program>) {\n   programPath.get(\"body\").forEach(child => {\n     if (child.isImportDeclaration()) {\n       child.remove();\ndiff --git a/packages/babel-helpers/src/index.ts b/packages/babel-helpers/src/index.ts\nindex 64098b7c2..222eb618b 100644\n--- a/packages/babel-helpers/src/index.ts\n+++ b/packages/babel-helpers/src/index.ts\n@@ -89,7 +89,7 @@ function getHelperMetadata(file: File): HelperMetadata {\n       throw child.buildCodeFrameError(\"Helpers can only export default\");\n     },\n     Statement(child) {\n-      if (child.isModuleDeclaration()) return;\n+      if (child.isImportDeclaration() || child.isExportDeclaration()) return;\n \n       child.skip();\n     },\ndiff --git a/packages/babel-node/src/_babel-node.ts b/packages/babel-node/src/_babel-node.ts\nindex 0efb54077..f18ad9a08 100644\n--- a/packages/babel-node/src/_babel-node.ts\n+++ b/packages/babel-node/src/_babel-node.ts\n@@ -106,10 +106,6 @@ register(babelOptions);\n \n const replPlugin = ({ types: t }: PluginAPI): PluginObject => ({\n   visitor: {\n-    ModuleDeclaration(path) {\n-      throw path.buildCodeFrameError(\"Modules aren't supported in the REPL\");\n-    },\n-\n     VariableDeclaration(path) {\n       if (path.node.kind !== \"var\") {\n         throw path.buildCodeFrameError(\n@@ -119,7 +115,20 @@ const replPlugin = ({ types: t }: PluginAPI): PluginObject => ({\n     },\n \n     Program(path) {\n-      if (path.get(\"body\").some(child => child.isExpressionStatement())) return;\n+      let hasExpressionStatement: boolean;\n+      for (const bodyPath of path.get(\"body\")) {\n+        if (bodyPath.isExpressionStatement()) {\n+          hasExpressionStatement = true;\n+        } else if (\n+          bodyPath.isExportDeclaration() ||\n+          bodyPath.isImportDeclaration()\n+        ) {\n+          throw bodyPath.buildCodeFrameError(\n+            \"Modules aren't supported in the REPL\",\n+          );\n+        }\n+      }\n+      if (hasExpressionStatement) return;\n \n       // If the executed code doesn't evaluate to a value,\n       // prevent implicit strict mode from printing 'use strict'.\ndiff --git a/packages/babel-parser/ast/spec.md b/packages/babel-parser/ast/spec.md\nindex f233db2cd..78f681899 100644\n--- a/packages/babel-parser/ast/spec.md\n+++ b/packages/babel-parser/ast/spec.md\n@@ -108,7 +108,6 @@ These are the core @babel/parser (babylon) AST node types.\n   - [ClassExpression](#classexpression)\n   - [MetaProperty](#metaproperty)\n - [Modules](#modules)\n-  - [ModuleDeclaration](#moduledeclaration)\n   - [ModuleSpecifier](#modulespecifier)\n   - [Imports](#imports)\n     - [ImportDeclaration](#importdeclaration)\n@@ -117,6 +116,7 @@ These are the core @babel/parser (babylon) AST node types.\n     - [ImportNamespaceSpecifier](#importnamespacespecifier)\n     - [ImportAttribute](#importattribute)\n   - [Exports](#exports)\n+    - [ExportDeclaration](#exportdeclaration)\n     - [ExportNamedDeclaration](#exportnameddeclaration)\n     - [ExportSpecifier](#exportspecifier)\n     - [ExportNamespaceSpecifier](#exportnamespacespecifier)\n@@ -275,7 +275,7 @@ interface Program <: Node {\n   type: \"Program\";\n   interpreter: InterpreterDirective | null;\n   sourceType: \"script\" | \"module\";\n-  body: [ Statement | ModuleDeclaration ];\n+  body: [ Statement | ImportDeclaration | ExportDeclaration ];\n   directives: [ Directive ];\n }\n ```\n@@ -1265,14 +1265,6 @@ interface MetaProperty <: Expression {\n \n # Modules\n \n-## ModuleDeclaration\n-\n-```js\n-interface ModuleDeclaration <: Node { }\n-```\n-\n-A module `import` or `export` declaration.\n-\n ## ModuleSpecifier\n \n ```js\n@@ -1288,7 +1280,7 @@ A specifier in an import or export declaration.\n ### ImportDeclaration\n \n ```js\n-interface ImportDeclaration <: ModuleDeclaration {\n+interface ImportDeclaration <: Node {\n   type: \"ImportDeclaration\";\n   importKind: null | \"type\" | \"typeof\" | \"value\";\n   specifiers: [ ImportSpecifier | ImportDefaultSpecifier | ImportNamespaceSpecifier ];\n@@ -1346,10 +1338,18 @@ An attribute specified on the ImportDeclaration.\n \n ## Exports\n \n+### ExportDeclaration\n+\n+```js\n+interface ExportDeclaration <: Node {}\n+```\n+\n+An `export` declaration.\n+\n ### ExportNamedDeclaration\n \n ```js\n-interface ExportNamedDeclaration <: ModuleDeclaration {\n+interface ExportNamedDeclaration <: ExportDeclaration {\n   type: \"ExportNamedDeclaration\";\n   declaration: Declaration | null;\n   specifiers: [ ExportSpecifier | ExportNamespaceSpecifier ];\n@@ -1400,7 +1400,7 @@ interface OptClassDeclaration <: ClassDeclaration {\n   id: Identifier | null;\n }\n \n-interface ExportDefaultDeclaration <: ModuleDeclaration {\n+interface ExportDefaultDeclaration <: ExportDeclaration {\n   type: \"ExportDefaultDeclaration\";\n   declaration: OptFunctionDeclaration | OptClassDeclaration | Expression;\n }\n@@ -1411,7 +1411,7 @@ An export default declaration, e.g., `export default function () {};` or `export\n ### ExportAllDeclaration\n \n ```js\n-interface ExportAllDeclaration <: ModuleDeclaration {\n+interface ExportAllDeclaration <: ExportDeclaration {\n   type: \"ExportAllDeclaration\";\n   source: StringLiteral;\n   assertions?: [ ImportAttribute ];\ndiff --git a/packages/babel-plugin-transform-typescript/src/enum.ts b/packages/babel-plugin-transform-typescript/src/enum.ts\nindex 9a3234286..5c46c6e13 100644\n--- a/packages/babel-plugin-transform-typescript/src/enum.ts\n+++ b/packages/babel-plugin-transform-typescript/src/enum.ts\n@@ -27,7 +27,9 @@ export default function transpileEnum(\n       if (seen(path.parentPath)) {\n         path.remove();\n       } else {\n-        const isGlobal = t.isProgram(path.parent); // && !path.parent.body.some(t.isModuleDeclaration);\n+        // todo: Consider exclude program with import/export\n+        // && !path.parent.body.some(n => t.isImportDeclaration(n) || t.isExportDeclaration(n));\n+        const isGlobal = t.isProgram(path.parent);\n         path.scope.registerDeclaration(\n           path.replaceWith(makeVar(node.id, t, isGlobal ? \"var\" : \"let\"))[0],\n         );\ndiff --git a/packages/babel-traverse/src/scope/index.ts b/packages/babel-traverse/src/scope/index.ts\nindex 1019f398b..292eecfda 100644\n--- a/packages/babel-traverse/src/scope/index.ts\n+++ b/packages/babel-traverse/src/scope/index.ts\n@@ -24,7 +24,6 @@ import {\n   isImportDeclaration,\n   isLiteral,\n   isMethod,\n-  isModuleDeclaration,\n   isModuleSpecifier,\n   isNullLiteral,\n   isObjectExpression,\n@@ -50,6 +49,7 @@ import {\n   isTopicReference,\n   isMetaProperty,\n   isPrivateName,\n+  isExportDeclaration,\n } from \"@babel/types\";\n import type * as t from \"@babel/types\";\n import { scope as scopeCache } from \"../cache\";\n@@ -60,7 +60,7 @@ type NodePart = string | number | boolean;\n function gatherNodeParts(node: t.Node, parts: NodePart[]) {\n   switch (node?.type) {\n     default:\n-      if (isModuleDeclaration(node)) {\n+      if (isImportDeclaration(node) || isExportDeclaration(node)) {\n         if (\n           (isExportAllDeclaration(node) ||\n             isExportNamedDeclaration(node) ||"}, {"role": "assistant", "content": "refactor: remove ModuleDeclaration usage (#15236)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n CHANGELOG.md\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex 80c46242..25b5f57e 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -83,6 +83,7 @@\n - `[@jest/expect-utils]` Fix not addressing to Sets and Maps as objects without keys ([#14873](https://github.com/jestjs/jest/pull/14873))\n - `[jest-leak-detector]` Make leak-detector more aggressive when running GC ([#14526](https://github.com/jestjs/jest/pull/14526))\n - `[jest-runtime]` Properly handle re-exported native modules in ESM via CJS ([#14589](https://github.com/jestjs/jest/pull/14589))\n+- `[jest-runtime]` Refactor `_importCoreModel` so required core module is consistent if modified while loading ([#15077](https://github.com/jestjs/jest/issues/15077))\n - `[jest-schemas, jest-types]` [**BREAKING**] Fix type of `testFailureExitCode` config option([#15232](https://github.com/jestjs/jest/pull/15232))\n - `[jest-util]` Make sure `isInteractive` works in a browser ([#14552](https://github.com/jestjs/jest/pull/14552))\n - `[pretty-format]` [**BREAKING**] Print `ArrayBuffer` and `DataView` correctly ([#14290](https://github.com/jestjs/jest/pull/14290))\ndiff --git a/packages/jest-runtime/src/index.ts b/packages/jest-runtime/src/index.ts\nindex d66826c0..df54c27f 100644\n--- a/packages/jest-runtime/src/index.ts\n+++ b/packages/jest-runtime/src/index.ts\n@@ -1782,13 +1782,15 @@ export default class Runtime {\n \n   private _importCoreModule(moduleName: string, context: VMContext) {\n     const required = this._requireCoreModule(moduleName, true);\n+    const allExports = Object.entries(required);\n+    const exportNames = allExports.map(([key]) => key);\n \n     const module = new SyntheticModule(\n-      ['default', ...Object.keys(required)],\n+      ['default', ...exportNames],\n       function () {\n         // @ts-expect-error: TS doesn't know what `this` is\n         this.setExport('default', required);\n-        for (const [key, value] of Object.entries(required)) {\n+        for (const [key, value] of allExports) {\n           // @ts-expect-error: TS doesn't know what `this` is\n           this.setExport(key, value);\n         }"}, {"role": "assistant", "content": "fix: refactor _importCoreModule so required core module is consistent (#15517)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n default_app/main.ts\n\ndiff --git a/default_app/main.ts b/default_app/main.ts\nindex 38fb3b66..0ea84307 100644\n--- a/default_app/main.ts\n+++ b/default_app/main.ts\n@@ -110,11 +110,9 @@ async function loadApplicationPackage (packagePath: string) {\n       } else if (packageJson.name) {\n         app.name = packageJson.name;\n       }\n-      if (packageJson.desktopName) {\n-        app.setDesktopName(packageJson.desktopName);\n-      } else {\n-        app.setDesktopName(`${app.name}.desktop`);\n-      }\n+\n+      app.setDesktopName(packageJson.desktopName || `${app.name}.desktop`);\n+\n       // Set v8 flags, deliberately lazy load so that apps that do not use this\n       // feature do not pay the price\n       if (packageJson.v8Flags) {\ndiff --git a/lib/browser/init.ts b/lib/browser/init.ts\nindex 4a52cd02..d8a007c1 100644\n--- a/lib/browser/init.ts\n+++ b/lib/browser/init.ts\n@@ -126,11 +126,7 @@ if (packageJson.productName != null) {\n }\n \n // Set application's desktop name.\n-if (packageJson.desktopName != null) {\n-  app.setDesktopName(packageJson.desktopName);\n-} else {\n-  app.setDesktopName(`${app.name}.desktop`);\n-}\n+app.setDesktopName(packageJson.desktopName || `${app.name}.desktop`);\n \n // Set v8 flags, deliberately lazy load so that apps that do not use this\n // feature do not pay the price\ndiff --git a/shell/browser/native_window_views.cc b/shell/browser/native_window_views.cc\nindex 05e40ed6..1e37d646 100644\n--- a/shell/browser/native_window_views.cc\n+++ b/shell/browser/native_window_views.cc\n@@ -290,7 +290,9 @@ NativeWindowViews::NativeWindowViews(const gin_helper::Dictionary& options,\n   params.wm_class_name = base::ToLowerASCII(name);\n   params.wm_class_class = name;\n   // Set Wayland application ID.\n-  params.wayland_app_id = platform_util::GetXdgAppId();\n+  if (auto const app_id = platform_util::GetXdgAppId()) {\n+    params.wayland_app_id = *app_id;\n+  }\n \n   auto* native_widget = new views::DesktopNativeWidgetAura(widget());\n   params.native_widget = native_widget;\ndiff --git a/shell/browser/notifications/linux/libnotify_notification.cc b/shell/browser/notifications/linux/libnotify_notification.cc\nindex 5364f1d9..ecdceeab 100644\n--- a/shell/browser/notifications/linux/libnotify_notification.cc\n+++ b/shell/browser/notifications/linux/libnotify_notification.cc\n@@ -141,13 +141,15 @@ void LibnotifyNotification::Show(const NotificationOptions& options) {\n         notification_, \"x-canonical-append\", g_variant_new_string(\"true\"));\n   }\n \n-  // Send the desktop name to identify the application\n-  // The desktop-entry is the part before the .desktop\n-  std::string desktop_id = platform_util::GetXdgAppId();\n-  if (!desktop_id.empty()) {\n+  // https://specifications.freedesktop.org/notification/latest-single/#id-1.9.7\n+  // This specifies the name of the desktop filename representing the\n+  // calling program. This should be the same as the prefix used for the\n+  // application's .desktop file. An example would be \"rhythmbox\" from\n+  // \"rhythmbox.desktop\". This can be used by the daemon to retrieve the\n+  // correct icon for the application, for logging purposes, etc.\n+  if (const std::optional<std::string> name = platform_util::GetXdgAppId()) {\n     GetLibNotifyLoader().notify_notification_set_hint(\n-        notification_, \"desktop-entry\",\n-        g_variant_new_string(desktop_id.c_str()));\n+        notification_, \"desktop-entry\", g_variant_new_string(name->c_str()));\n   }\n \n   GetLibNotifyLoader().notify_notification_set_hint(\ndiff --git a/shell/common/platform_util.h b/shell/common/platform_util.h\nindex ccca2f77..51b4ac6b 100644\n--- a/shell/common/platform_util.h\n+++ b/shell/common/platform_util.h\n@@ -61,13 +61,16 @@ bool SetLoginItemEnabled(const std::string& type,\n #endif\n \n #if BUILDFLAG(IS_LINUX)\n-// Returns a desktop name if available.\n-// Unlike libgtkui, does *not* use \"chromium-browser.desktop\" as a fallback.\n+// Returns a desktop name (e.g. 'myapp.desktop') if available.\n+// Unlike libgtkui, this does *not* use \"chromium-browser.desktop\" as a\n+// fallback.\n+// https://specifications.freedesktop.org/desktop-entry/latest/file-naming.html\n std::optional<std::string> GetDesktopName();\n \n-// The XDG application ID must match the name of the desktop entry file without\n-// the .desktop extension.\n-std::string GetXdgAppId();\n+// Returns the app id (e.g. 'myapp') if available.\n+// This is equivalent to the basename of `GetDesktopName()`.\n+// https://developer.gnome.org/documentation/tutorials/application-id.html\n+std::optional<std::string> GetXdgAppId();\n #endif\n \n }  // namespace platform_util\ndiff --git a/shell/common/platform_util_linux.cc b/shell/common/platform_util_linux.cc\nindex b5cedcff..a35aa150 100644\n--- a/shell/common/platform_util_linux.cc\n+++ b/shell/common/platform_util_linux.cc\n@@ -413,18 +413,16 @@ std::optional<std::string> GetDesktopName() {\n   return base::Environment::Create()->GetVar(\"CHROME_DESKTOP\");\n }\n \n-std::string GetXdgAppId() {\n-  if (std::optional<std::string> desktop_file_name = GetDesktopName()) {\n-    constexpr std::string_view kDesktopExtension = \".desktop\";\n-    if (base::EndsWith(*desktop_file_name, kDesktopExtension,\n-                       base::CompareCase::INSENSITIVE_ASCII)) {\n-      desktop_file_name->resize(desktop_file_name->size() -\n-                                kDesktopExtension.size());\n-    }\n-    return *desktop_file_name;\n-  }\n+std::optional<std::string> GetXdgAppId() {\n+  auto name = GetDesktopName();\n+  if (!name)\n+    return {};\n+\n+  // remove '.desktop' file suffix, if present\n+  if (std::string_view suffix = \".desktop\"; name->ends_with(suffix))\n+    name->resize(std::size(*name) - std::size(suffix));\n \n-  return \"\";\n+  return *name;\n }\n \n }  // namespace platform_util"}, {"role": "assistant", "content": "refactor: have `GetXdgAppId()` return a `std::optional<std::string>` (#49318)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_borrowck/src/type_check/mod.rs | 67 ++++-----------------------\n 1 file changed, 9 insertions(+), 58 deletions(-)", "output": "refactor(borrowck): simplify type check module", "metadata": {"id": "rust-7cab6434", "repository": "rust", "commit_hash": "7cab6434610cb60a3861b2256d0e2d91b3fddc61"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/compiler/utilities.ts\n\ndiff --git a/src/compiler/utilities.ts b/src/compiler/utilities.ts\nindex bf3ea41be..4bbd3a809 100644\n--- a/src/compiler/utilities.ts\n+++ b/src/compiler/utilities.ts\n@@ -1762,7 +1762,7 @@ function canUseOriginalText(node: LiteralLikeNode, flags: GetLiteralTextFlags):\n \n /** @internal */\n export function getTextOfConstantValue(value: string | number) {\n-    return isString(value) ? '\"' + escapeNonAsciiString(value) + '\"' : \"\" + value;\n+    return isString(value) ? `\"${escapeString(value)}\"` : \"\" + value;\n }\n \n // Make an identifier from an external module name by extracting the string after the last \"/\" and replacing\ndiff --git a/tests/cases/fourslash/quickInfoEnumMembersAcceptNonAsciiStrings.ts b/tests/cases/fourslash/quickInfoEnumMembersAcceptNonAsciiStrings.ts\nnew file mode 100644\nindex 000000000..5f4f9423d\n--- /dev/null\n+++ b/tests/cases/fourslash/quickInfoEnumMembersAcceptNonAsciiStrings.ts\n@@ -0,0 +1,13 @@\n+/// <reference path='fourslash.ts' />\n+\n+//// enum Demo {\n+////     /*Emoji*/Emoji = '🍎',\n+////     /*Hebrew*/Hebrew = 'תפוח',\n+////     /*Chinese*/Chinese = '苹果',\n+////     /*Japanese*/Japanese = 'りんご',\n+//// }\n+\n+verify.quickInfoAt(\"Emoji\", '(enum member) Demo.Emoji = \"🍎\"');\n+verify.quickInfoAt(\"Hebrew\",'(enum member) Demo.Hebrew = \"תפוח\"');\n+verify.quickInfoAt(\"Chinese\", '(enum member) Demo.Chinese = \"苹果\"');\n+verify.quickInfoAt(\"Japanese\",'(enum member) Demo.Japanese = \"りんご\"');"}, {"role": "assistant", "content": "fix(58146): enum quick info can display non ascii strings (#58171)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/cache/PackFileCacheStrategy.js\n\ndiff --git a/lib/cache/PackFileCacheStrategy.js b/lib/cache/PackFileCacheStrategy.js\nindex 779c54aec..e88cee53a 100644\n--- a/lib/cache/PackFileCacheStrategy.js\n+++ b/lib/cache/PackFileCacheStrategy.js\n@@ -53,10 +53,15 @@ class PackContainer {\n \t) {\n \t\t/** @type {Pack | (() => Pack) } */\n \t\tthis.data = data;\n+\t\t/** @type {string} */\n \t\tthis.version = version;\n+\t\t/** @type {Snapshot} */\n \t\tthis.buildSnapshot = buildSnapshot;\n+\t\t/** @type {BuildDependencies} */\n \t\tthis.buildDependencies = buildDependencies;\n+\t\t/** @type {ResolveResults} */\n \t\tthis.resolveResults = resolveResults;\n+\t\t/** @type {Snapshot} */\n \t\tthis.resolveBuildDependenciesSnapshot = resolveBuildDependenciesSnapshot;\n \t}\n \n@@ -105,10 +110,15 @@ class PackItemInfo {\n \t * @param {Data} value fresh value of item\n \t */\n \tconstructor(identifier, etag, value) {\n+\t\t/** @type {string} */\n \t\tthis.identifier = identifier;\n+\t\t/** @type {string | null | undefined} */\n \t\tthis.etag = etag;\n+\t\t/** @type {number} */\n \t\tthis.location = -1;\n+\t\t/** @type {number} */\n \t\tthis.lastAccess = Date.now();\n+\t\t/** @type {Data} */\n \t\tthis.freshValue = value;\n \t}\n }\ndiff --git a/lib/serialization/SerializerMiddleware.js b/lib/serialization/SerializerMiddleware.js\nindex 91e8bdff9..4b2507c0e 100644\n--- a/lib/serialization/SerializerMiddleware.js\n+++ b/lib/serialization/SerializerMiddleware.js\n@@ -96,7 +96,6 @@ class SerializerMiddleware {\n \t * @template TLazyOutputValue\n \t * @template {LazyTarget} TLazyTarget\n \t * @template {Record<string, EXPECTED_ANY>} TLazyOptions\n-\t * @template TLazySerializedValue\n \t * @param {LazyFunction<TLazyInputValue, TLazyOutputValue, TLazyTarget, TLazyOptions>} fn lazy function\n \t * @returns {LazyOptions | undefined} options\n \t */\n@@ -123,7 +122,7 @@ class SerializerMiddleware {\n \t * @template TLazyOutputValue\n \t * @template {LazyTarget} TLazyTarget\n \t * @template {LazyOptions} TLazyOptions\n-\t * @param {LazyFunction<TLazyInputValue, TLazyOutputValue, LazyTarget, LazyOptions>} fn lazy function\n+\t * @param {LazyFunction<TLazyInputValue, TLazyOutputValue, TLazyTarget, TLazyOptions>} fn lazy function\n \t * @param {TLazyOutputValue} value serialized value\n \t * @returns {void}\n \t */\n@@ -168,7 +167,6 @@ class SerializerMiddleware {\n \t/**\n \t * @template TLazyInputValue SerializedValue\n \t * @template TLazyOutputValue DeserializedValue\n-\t * @template SerializedValue\n \t * @template {LazyTarget} TLazyTarget\n \t * @template {LazyOptions | undefined} TLazyOptions\n \t * @param {LazyFunction<TLazyInputValue, TLazyOutputValue, TLazyTarget, TLazyOptions>} lazy lazy function\ndiff --git a/lib/util/StackedCacheMap.js b/lib/util/StackedCacheMap.js\nindex 781aa86d6..ad7cc69c7 100644\n--- a/lib/util/StackedCacheMap.js\n+++ b/lib/util/StackedCacheMap.js\n@@ -5,8 +5,6 @@\n \n \"use strict\";\n \n-new Map().entries();\n-\n /**\n  * The StackedCacheMap is a data structure designed as an alternative to a Map\n  * in situations where you need to handle multiple item additions and"}, {"role": "assistant", "content": "fix: type (#19881)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex dc4e705d7..48d960a57 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -5678,9 +5678,9 @@ memfs@^3.4.1:\n     fs-monkey \"^1.0.4\"\n \n memfs@^4.14.0:\n-  version \"4.38.1\"\n-  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.38.1.tgz#43cc07ee74dc321dbd0cba778db6cd94a4648895\"\n-  integrity sha512-exfrOkkU3m0EpbQ0iQJP93HUbkprnIBU7IUnobSNAzHkBUzsklLwENGLEm8ZwJmMuLoFEfv1pYQ54wSpkay4kQ==\n+  version \"4.38.2\"\n+  resolved \"https://registry.yarnpkg.com/memfs/-/memfs-4.38.2.tgz#e3a3a0362032c3ab7093cc7c179bd5fa8abc94c3\"\n+  integrity sha512-FpWsVHpAkoSh/LfY1BgAl72BVd374ooMRtDi2VqzBycX4XEfvC0XKACCe0C9VRZoYq5viuoyTv6lYXZ/Q7TrLQ==\n   dependencies:\n     \"@jsonjoy.com/json-pack\" \"^1.11.0\"\n     \"@jsonjoy.com/util\" \"^1.9.0\"\n@@ -6216,9 +6216,9 @@ node-gyp-build@^4.6.0:\n   integrity sha512-LA4ZjwlnUblHVgq0oBF3Jl/6h/Nvs5fzBLwdEF4nuxnFdsfajde4WfxtJr3CaiH+F6ewcIB/q4jQ4UzPyid+CQ==\n \n node-gyp@^11.2.0:\n-  version \"11.4.1\"\n-  resolved \"https://registry.yarnpkg.com/node-gyp/-/node-gyp-11.4.1.tgz#b4ce9597e71d4e59efb3d4cdae2af8338151b2c4\"\n-  integrity sha512-GiVxQ1e4TdZSSVmFDYUn6uUsrEUP68pa8C/xBzCfL/FcLHa4reWrxxTP7tRGhNdviYrNsL5kRolBL5LNYEutCw==\n+  version \"11.4.2\"\n+  resolved \"https://registry.yarnpkg.com/node-gyp/-/node-gyp-11.4.2.tgz#bb74cc6a80a0cc301811c8efd755fac39efc7cd0\"\n+  integrity sha512-3gD+6zsrLQH7DyYOUIutaauuXrcyxeTPyQuZQCQoNPZMHMMS5m4y0xclNpvYzoK3VNzuyxT6eF4mkIL4WSZ1eQ==\n   dependencies:\n     env-paths \"^2.2.0\"\n     exponential-backoff \"^3.1.1\""}, {"role": "assistant", "content": "chore(deps-dev): bump the dependencies group with 2 updates (#19840)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .../src/errors/wrong_number_of_generic_args.rs     |  3 ++\n tests/ui/generics/wrong-number-of-args-in-macro.rs | 15 ++++++++\n .../generics/wrong-number-of-args-in-macro.stderr  | 44 ++++++++++++++++++++++\n 3 files changed, 62 insertions(+)", "output": "fix(generics): improve error handling for wrong number of generic args", "metadata": {"id": "rust-a496d1de", "repository": "rust", "commit_hash": "a496d1de668953f3374b7bf10b66c861acc91802"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 533554e6..0dfca023 100644\n--- a/package.json\n+++ b/package.json\n@@ -37,7 +37,7 @@\n     \"eslint-plugin-eslint-comments\": \"^3.1.2\",\n     \"eslint-plugin-import\": \"^2.6.0\",\n     \"eslint-plugin-jest\": \"^27.1.0\",\n-    \"eslint-plugin-jsdoc\": \"^47.0.0\",\n+    \"eslint-plugin-jsdoc\": \"^48.0.0\",\n     \"eslint-plugin-local\": \"link:./.eslintplugin\",\n     \"eslint-plugin-markdown\": \"^3.0.0\",\n     \"eslint-plugin-prettier\": \"^5.0.0\",\ndiff --git a/yarn.lock b/yarn.lock\nindex 5adf5709..dd4c4395 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -3033,7 +3033,7 @@ __metadata:\n     eslint-plugin-eslint-comments: ^3.1.2\n     eslint-plugin-import: ^2.6.0\n     eslint-plugin-jest: ^27.1.0\n-    eslint-plugin-jsdoc: ^47.0.0\n+    eslint-plugin-jsdoc: ^48.0.0\n     eslint-plugin-local: \"link:./.eslintplugin\"\n     eslint-plugin-markdown: ^3.0.0\n     eslint-plugin-prettier: ^5.0.0\n@@ -9528,9 +9528,9 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"eslint-plugin-jsdoc@npm:^47.0.0\":\n-  version: 47.0.0\n-  resolution: \"eslint-plugin-jsdoc@npm:47.0.0\"\n+\"eslint-plugin-jsdoc@npm:^48.0.0\":\n+  version: 48.0.1\n+  resolution: \"eslint-plugin-jsdoc@npm:48.0.1\"\n   dependencies:\n     \"@es-joy/jsdoccomment\": ~0.41.0\n     are-docs-informative: ^0.0.2\n@@ -9543,7 +9543,7 @@ __metadata:\n     spdx-expression-parse: ^4.0.0\n   peerDependencies:\n     eslint: ^7.0.0 || ^8.0.0 || ^9.0.0\n-  checksum: b998684c4ee97a307fdaac57e5f61ace2d9129a652de89dbe32fa4e3b097540eea033a52b75d93c1a0e5ac163b166a127a734a1bdb168c603926437e5fbb02c7\n+  checksum: 44bbe9ec2673b5069d674dfdec24eb0f5b7b83a6c41878baf7d2515f0bfa0a0955043cfff14d4c022e55b75d8a06b55d4c27c81521fb66336bcb3adc15a097aa\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "chore(deps): update dependency eslint-plugin-jsdoc to v48 (#14827)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/rules/no-empty-static-block.js\n\ndiff --git a/lib/rules/no-empty-static-block.js b/lib/rules/no-empty-static-block.js\nindex 5741ee3b..488b5ed7 100644\n--- a/lib/rules/no-empty-static-block.js\n+++ b/lib/rules/no-empty-static-block.js\n@@ -11,6 +11,7 @@\n /** @type {import('../types').Rule.RuleModule} */\n module.exports = {\n \tmeta: {\n+\t\thasSuggestions: true,\n \t\ttype: \"suggestion\",\n \n \t\tdocs: {\n@@ -23,6 +24,7 @@ module.exports = {\n \n \t\tmessages: {\n \t\t\tunexpected: \"Unexpected empty static block.\",\n+\t\t\tsuggestComment: \"Add comment inside empty static block.\",\n \t\t},\n \t},\n \n@@ -32,14 +34,36 @@ module.exports = {\n \t\treturn {\n \t\t\tStaticBlock(node) {\n \t\t\t\tif (node.body.length === 0) {\n+\t\t\t\t\tconst openingBrace = sourceCode.getFirstToken(node, {\n+\t\t\t\t\t\tskip: 1,\n+\t\t\t\t\t});\n \t\t\t\t\tconst closingBrace = sourceCode.getLastToken(node);\n \n \t\t\t\t\tif (\n \t\t\t\t\t\tsourceCode.getCommentsBefore(closingBrace).length === 0\n \t\t\t\t\t) {\n \t\t\t\t\t\tcontext.report({\n-\t\t\t\t\t\t\tnode,\n+\t\t\t\t\t\t\tloc: {\n+\t\t\t\t\t\t\t\tstart: openingBrace.loc.start,\n+\t\t\t\t\t\t\t\tend: closingBrace.loc.end,\n+\t\t\t\t\t\t\t},\n \t\t\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\t\t\tsuggest: [\n+\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\t\t\tfix(fixer) {\n+\t\t\t\t\t\t\t\t\t\tconst range = [\n+\t\t\t\t\t\t\t\t\t\t\topeningBrace.range[1],\n+\t\t\t\t\t\t\t\t\t\t\tclosingBrace.range[0],\n+\t\t\t\t\t\t\t\t\t\t];\n+\n+\t\t\t\t\t\t\t\t\t\treturn fixer.replaceTextRange(\n+\t\t\t\t\t\t\t\t\t\t\trange,\n+\t\t\t\t\t\t\t\t\t\t\t\" /* empty */ \",\n+\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t],\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t}\ndiff --git a/tests/lib/rules/no-empty-static-block.js b/tests/lib/rules/no-empty-static-block.js\nindex e9631a46..4b5d15b0 100644\n--- a/tests/lib/rules/no-empty-static-block.js\n+++ b/tests/lib/rules/no-empty-static-block.js\n@@ -29,23 +29,111 @@ ruleTester.run(\"no-empty-static-block\", rule, {\n \tinvalid: [\n \t\t{\n \t\t\tcode: \"class Foo { static {} }\",\n-\t\t\terrors: [{ messageId: \"unexpected\" }],\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 20,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 22,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static { /* empty */ } }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n \t\t},\n \t\t{\n \t\t\tcode: \"class Foo { static { } }\",\n-\t\t\terrors: [{ messageId: \"unexpected\" }],\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 20,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 23,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static { /* empty */ } }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n \t\t},\n \t\t{\n \t\t\tcode: \"class Foo { static { \\n\\n } }\",\n-\t\t\terrors: [{ messageId: \"unexpected\" }],\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 20,\n+\t\t\t\t\tendLine: 3,\n+\t\t\t\t\tendColumn: 3,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static { /* empty */ } }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n \t\t},\n \t\t{\n \t\t\tcode: \"class Foo { static { bar(); } static {} }\",\n-\t\t\terrors: [{ messageId: \"unexpected\" }],\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 38,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 40,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static { bar(); } static { /* empty */ } }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n \t\t},\n \t\t{\n \t\t\tcode: \"class Foo { static // comment\\n {} }\",\n-\t\t\terrors: [{ messageId: \"unexpected\" }],\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 2,\n+\t\t\t\t\tcolumn: 2,\n+\t\t\t\t\tendLine: 2,\n+\t\t\t\t\tendColumn: 4,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static // comment\\n { /* empty */ } }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n+\t\t},\n+\t\t{\n+\t\t\tcode: \"class Foo { static /* empty */ {} /* empty */ }\",\n+\t\t\terrors: [\n+\t\t\t\t{\n+\t\t\t\t\tmessageId: \"unexpected\",\n+\t\t\t\t\tline: 1,\n+\t\t\t\t\tcolumn: 32,\n+\t\t\t\t\tendLine: 1,\n+\t\t\t\t\tendColumn: 34,\n+\t\t\t\t\tsuggestions: [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmessageId: \"suggestComment\",\n+\t\t\t\t\t\t\toutput: \"class Foo { static /* empty */ { /* empty */ } /* empty */ }\",\n+\t\t\t\t\t\t},\n+\t\t\t\t\t],\n+\t\t\t\t},\n+\t\t\t],\n \t\t},\n \t],\n });"}, {"role": "assistant", "content": "feat: implement suggestions for no-empty-static-block (#20056)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n types/index.d.ts\n\ndiff --git a/types/index.d.ts b/types/index.d.ts\nindex 91807ae6..2b5d3a89 100644\n--- a/types/index.d.ts\n+++ b/types/index.d.ts\n@@ -42,7 +42,7 @@ export * from './v3-setup-helpers'\n export { Data } from './common'\n export { SetupContext } from './v3-setup-context'\n export { defineComponent } from './v3-define-component'\n-// export { defineAsyncComponent } from './defineAsyncComponent'\n+export { defineAsyncComponent } from './v3-define-async-component'\n export {\n   SetupFunction,\n   // v2 already has option with same name and it's for a single computed"}, {"role": "assistant", "content": "fix(types): export `defineAsyncComponent` type (#12684)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex 06c10918..d42f329f 100644\n--- a/README.md\n+++ b/README.md\n@@ -328,7 +328,7 @@ to get your logo on our READMEs and [website](https://eslint.org/sponsors).\n <p><a href=\"https://automattic.com\"><img src=\"https://images.opencollective.com/automattic/d0ef3e1/logo.png\" alt=\"Automattic\" height=\"128\"></a> <a href=\"https://www.airbnb.com/\"><img src=\"https://images.opencollective.com/airbnb/d327d66/logo.png\" alt=\"Airbnb\" height=\"128\"></a></p><h3>Gold Sponsors</h3>\n <p><a href=\"https://qlty.sh/\"><img src=\"https://images.opencollective.com/qltysh/33d157d/logo.png\" alt=\"Qlty Software\" height=\"96\"></a> <a href=\"https://trunk.io/\"><img src=\"https://images.opencollective.com/trunkio/fb92d60/avatar.png\" alt=\"trunk.io\" height=\"96\"></a> <a href=\"https://shopify.engineering/\"><img src=\"https://avatars.githubusercontent.com/u/8085\" alt=\"Shopify\" height=\"96\"></a></p><h3>Silver Sponsors</h3>\n <p><a href=\"https://vite.dev/\"><img src=\"https://images.opencollective.com/vite/e6d15e1/logo.png\" alt=\"Vite\" height=\"64\"></a> <a href=\"https://liftoff.io/\"><img src=\"https://images.opencollective.com/liftoff/5c4fa84/logo.png\" alt=\"Liftoff\" height=\"64\"></a> <a href=\"https://americanexpress.io\"><img src=\"https://avatars.githubusercontent.com/u/3853301\" alt=\"American Express\" height=\"64\"></a> <a href=\"https://stackblitz.com\"><img src=\"https://avatars.githubusercontent.com/u/28635252\" alt=\"StackBlitz\" height=\"64\"></a></p><h3>Bronze Sponsors</h3>\n-<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://www.crosswordsolver.org/anagram-solver/\"><img src=\"https://images.opencollective.com/anagram-solver/2666271/logo.png\" alt=\"Anagram Solver\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n+<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://sentry.io\"><img src=\"https://github.com/getsentry.png\" alt=\"Sentry\" height=\"32\"></a> <a href=\"https://www.fortunegames.com\"><img src=\"https://images.opencollective.com/fortunegames/657063f/logo.png\" alt=\"FORTUNE GAMES\" height=\"32\"></a> <a href=\"https://www.crosswordsolver.org/anagram-solver/\"><img src=\"https://images.opencollective.com/anagram-solver/2666271/logo.png\" alt=\"Anagram Solver\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n <h3>Technology Sponsors</h3>\n Technology sponsors allow us to use their products and services for free as part of a contribution to the open source ecosystem and our work.\n <p><a href=\"https://netlify.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/netlify-icon.svg\" alt=\"Netlify\" height=\"32\"></a> <a href=\"https://algolia.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/algolia-icon.svg\" alt=\"Algolia\" height=\"32\"></a> <a href=\"https://1password.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/1password-icon.svg\" alt=\"1Password\" height=\"32\"></a></p>"}, {"role": "assistant", "content": "docs: Update README"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/Configuration.md\n\ndiff --git a/docs/Configuration.md b/docs/Configuration.md\nindex e14fb57d..063c00f1 100644\n--- a/docs/Configuration.md\n+++ b/docs/Configuration.md\n@@ -938,6 +938,12 @@ const config: Config = {\n export default config;\n ```\n \n+:::caution\n+\n+It is discouraged to use `'.'` as one of the `moduleDirectories`, because this prevents scoped packages such as `@emotion/react` from accessing packages with the same subdirectory name (`react`). See [this issue](https://github.com/jestjs/jest/issues/10498) for more details. In most cases, it is preferable to use the [moduleNameMapper](#modulenamemapper-objectstring-string--arraystring) configuration instead.\n+\n+:::\n+\n ### `moduleFileExtensions` \\[array&lt;string&gt;]\n \n Default: `[\"js\", \"mjs\", \"cjs\", \"jsx\", \"ts\", \"mts\", \"cts\", \"tsx\", \"json\", \"node\"]`\ndiff --git a/website/versioned_docs/version-29.4/Configuration.md b/website/versioned_docs/version-29.4/Configuration.md\nindex 97f0eec0..b1ffa6a1 100644\n--- a/website/versioned_docs/version-29.4/Configuration.md\n+++ b/website/versioned_docs/version-29.4/Configuration.md\n@@ -929,6 +929,12 @@ const config: Config = {\n export default config;\n ```\n \n+:::caution\n+\n+It is discouraged to use `'.'` as one of the `moduleDirectories`, because this prevents scoped packages such as `@emotion/react` from accessing packages with the same subdirectory name (`react`). See [this issue](https://github.com/jestjs/jest/issues/10498) for more details. In most cases, it is preferable to use the [moduleNameMapper](#modulenamemapper-objectstring-string--arraystring) configuration instead.\n+\n+:::\n+\n ### `moduleFileExtensions` \\[array&lt;string&gt;]\n \n Default: `[\"js\", \"mjs\", \"cjs\", \"jsx\", \"ts\", \"tsx\", \"json\", \"node\"]`\ndiff --git a/website/versioned_docs/version-29.5/Configuration.md b/website/versioned_docs/version-29.5/Configuration.md\nindex acd25605..77e9ee87 100644\n--- a/website/versioned_docs/version-29.5/Configuration.md\n+++ b/website/versioned_docs/version-29.5/Configuration.md\n@@ -929,6 +929,12 @@ const config: Config = {\n export default config;\n ```\n \n+:::caution\n+\n+It is discouraged to use `'.'` as one of the `moduleDirectories`, because this prevents scoped packages such as `@emotion/react` from accessing packages with the same subdirectory name (`react`). See [this issue](https://github.com/jestjs/jest/issues/10498) for more details. In most cases, it is preferable to use the [moduleNameMapper](#modulenamemapper-objectstring-string--arraystring) configuration instead.\n+\n+:::\n+\n ### `moduleFileExtensions` \\[array&lt;string&gt;]\n \n Default: `[\"js\", \"mjs\", \"cjs\", \"jsx\", \"ts\", \"tsx\", \"json\", \"node\"]`\ndiff --git a/website/versioned_docs/version-29.6/Configuration.md b/website/versioned_docs/version-29.6/Configuration.md\nindex 31933409..bd0b7577 100644\n--- a/website/versioned_docs/version-29.6/Configuration.md\n+++ b/website/versioned_docs/version-29.6/Configuration.md\n@@ -929,6 +929,12 @@ const config: Config = {\n export default config;\n ```\n \n+:::caution\n+\n+It is discouraged to use `'.'` as one of the `moduleDirectories`, because this prevents scoped packages such as `@emotion/react` from accessing packages with the same subdirectory name (`react`). See [this issue](https://github.com/jestjs/jest/issues/10498) for more details. In most cases, it is preferable to use the [moduleNameMapper](#modulenamemapper-objectstring-string--arraystring) configuration instead.\n+\n+:::\n+\n ### `moduleFileExtensions` \\[array&lt;string&gt;]\n \n Default: `[\"js\", \"mjs\", \"cjs\", \"jsx\", \"ts\", \"tsx\", \"json\", \"node\"]`\ndiff --git a/website/versioned_docs/version-29.7/Configuration.md b/website/versioned_docs/version-29.7/Configuration.md\nindex 31933409..bd0b7577 100644\n--- a/website/versioned_docs/version-29.7/Configuration.md\n+++ b/website/versioned_docs/version-29.7/Configuration.md\n@@ -929,6 +929,12 @@ const config: Config = {\n export default config;\n ```\n \n+:::caution\n+\n+It is discouraged to use `'.'` as one of the `moduleDirectories`, because this prevents scoped packages such as `@emotion/react` from accessing packages with the same subdirectory name (`react`). See [this issue](https://github.com/jestjs/jest/issues/10498) for more details. In most cases, it is preferable to use the [moduleNameMapper](#modulenamemapper-objectstring-string--arraystring) configuration instead.\n+\n+:::\n+\n ### `moduleFileExtensions` \\[array&lt;string&gt;]\n \n Default: `[\"js\", \"mjs\", \"cjs\", \"jsx\", \"ts\", \"tsx\", \"json\", \"node\"]`"}, {"role": "assistant", "content": "docs: Add caution note to '.' usage in moduleDirectories (#14913)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/v3/apiWatch.ts\n\ndiff --git a/src/v3/apiWatch.ts b/src/v3/apiWatch.ts\nindex 909bd025..4d387dc1 100644\n--- a/src/v3/apiWatch.ts\n+++ b/src/v3/apiWatch.ts\n@@ -320,11 +320,12 @@ function doWatch(\n   } else {\n     // pre\n     watcher.update = () => {\n-      if (!instance || instance._isMounted) {\n-        queueWatcher(watcher)\n-      } else {\n+      if (instance && instance === currentInstance) {\n+        // pre-watcher triggered inside setup()\n         const buffer = instance._preWatchers || (instance._preWatchers = [])\n         if (buffer.indexOf(watcher) < 0) buffer.push(watcher)\n+      } else {\n+        queueWatcher(watcher)\n       }\n     }\n   }\ndiff --git a/test/unit/features/v3/apiWatch.spec.ts b/test/unit/features/v3/apiWatch.spec.ts\nindex 85ee2ef8..82aba414 100644\n--- a/test/unit/features/v3/apiWatch.spec.ts\n+++ b/test/unit/features/v3/apiWatch.spec.ts\n@@ -628,9 +628,8 @@ describe('api: watch', () => {\n     expect(calls).toMatchObject(['watch 3', 'mounted'])\n   })\n \n-  // TODO\n   // vuejs/core#1852\n-  it.skip('flush: post watcher should fire after template refs updated', async () => {\n+  it('flush: post watcher should fire after template refs updated', async () => {\n     const toggle = ref(false)\n     let dom: HTMLElement | null = null\n \n@@ -1093,4 +1092,28 @@ describe('api: watch', () => {\n     // own update effect\n     expect(instance!._scope.effects.length).toBe(1)\n   })\n+\n+  // #12578\n+  test('template ref triggered watcher should fire after component mount', async () => {\n+    const order: string[] = []\n+    const Child = { template: '<div/>' }\n+    const App = {\n+      setup() {\n+        const child = ref<any>(null)\n+        onMounted(() => {\n+          order.push('mounted')\n+        })\n+        watch(child, () => {\n+          order.push('watcher')\n+        })\n+        return { child }\n+      },\n+      components: { Child },\n+      template: `<Child ref=\"child\"/>`\n+    }\n+    new Vue(App).$mount()\n+\n+    await nextTick()\n+    expect(order).toMatchObject([`mounted`, `watcher`])\n+  })\n })"}, {"role": "assistant", "content": "fix(watch): template ref watcher should fire after owner instance mounted hook"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .codesandbox/ci.json\n\ndiff --git a/.codesandbox/ci.json b/.codesandbox/ci.json\nindex 56b16514..cdc33c0d 100644\n--- a/.codesandbox/ci.json\n+++ b/.codesandbox/ci.json\n@@ -1,4 +1,4 @@\n {\n   \"sandboxes\": [\"vanilla\", \"vanilla-ts\"],\n-  \"node\": \"18\"\n+  \"node\": \"20\"\n }\ndiff --git a/.github/workflows/publish.yaml b/.github/workflows/publish.yaml\nindex e8ccded5..2d1fbf3b 100644\n--- a/.github/workflows/publish.yaml\n+++ b/.github/workflows/publish.yaml\n@@ -14,7 +14,7 @@ jobs:\n       - uses: actions/checkout@v4\n       - uses: actions/setup-node@v4\n         with:\n-          node-version: '20.x'\n+          node-version: '22.x'\n           registry-url: 'https://registry.npmjs.org'\n           cache: 'yarn'\n       - run: yarn install --frozen-lockfile\ndiff --git a/.github/workflows/test.yaml b/.github/workflows/test.yaml\nindex e16a4f6c..62167467 100644\n--- a/.github/workflows/test.yaml\n+++ b/.github/workflows/test.yaml\n@@ -30,7 +30,7 @@ jobs:\n     runs-on: ubuntu-latest\n     strategy:\n       matrix:\n-        node: ['20.x']\n+        node: ['22.x']\n \n     steps:\n       - name: Checkout repo\n@@ -69,7 +69,7 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node: ['20.x']\n+        node: ['22.x']\n     steps:\n       - name: Checkout repo\n         uses: actions/checkout@v4\n@@ -109,7 +109,7 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node: ['20.x']\n+        node: ['22.x']\n         ts: ['5.0', '5.1', '5.2', '5.3', '5.4', '5.5', '5.6', '5.7', '5.8']\n     steps:\n       - name: Checkout repo\n@@ -153,11 +153,17 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node: ['20.x']\n+        node: ['22.x']\n     steps:\n       - name: Checkout repo\n         uses: actions/checkout@v4\n \n+      - name: Use node ${{ matrix.node }}\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version: ${{ matrix.node }}\n+          cache: 'yarn'\n+\n       - uses: actions/download-artifact@v4\n         with:\n           name: package\n@@ -175,7 +181,7 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        node: ['20.x']\n+        node: ['22.x']\n         example:\n           [\n             'cra4',"}, {"role": "assistant", "content": "chore: update CI Node.js version to 22"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 1562e987..587c38bf 100644\n--- a/package.json\n+++ b/package.json\n@@ -39,7 +39,7 @@\n     \"eslint-plugin-markdown\": \"^5.1.0\",\n     \"eslint-plugin-prettier\": \"^5.2.3\",\n     \"eslint-plugin-promise\": \"^7.2.1\",\n-    \"eslint-plugin-unicorn\": \"^57.0.0\",\n+    \"eslint-plugin-unicorn\": \"^58.0.0\",\n     \"execa\": \"^5.0.0\",\n     \"find-process\": \"^1.4.1\",\n     \"glob\": \"^10.3.10\",\ndiff --git a/yarn.lock b/yarn.lock\nindex e7c89ff1..21c7a5bc 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -3342,7 +3342,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@eslint-community/eslint-utils@npm:^4.2.0, @eslint-community/eslint-utils@npm:^4.4.0, @eslint-community/eslint-utils@npm:^4.4.1\":\n+\"@eslint-community/eslint-utils@npm:^4.2.0, @eslint-community/eslint-utils@npm:^4.4.0, @eslint-community/eslint-utils@npm:^4.5.1\":\n   version: 4.6.1\n   resolution: \"@eslint-community/eslint-utils@npm:4.6.1\"\n   dependencies:\n@@ -3864,7 +3864,7 @@ __metadata:\n     eslint-plugin-markdown: ^5.1.0\n     eslint-plugin-prettier: ^5.2.3\n     eslint-plugin-promise: ^7.2.1\n-    eslint-plugin-unicorn: ^57.0.0\n+    eslint-plugin-unicorn: ^58.0.0\n     execa: ^5.0.0\n     find-process: ^1.4.1\n     glob: ^10.3.10\n@@ -7932,10 +7932,10 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"builtin-modules@npm:^4.0.0\":\n-  version: 4.0.0\n-  resolution: \"builtin-modules@npm:4.0.0\"\n-  checksum: cea28dd8fa3060d39bee0f3e9f141987ac99d2dd7913c2fa15eb34a98372399f3be3b1bf1f849790ecad602d52e57d45a9c54bcde28c0bbf25bfe947ca8ffe55\n+\"builtin-modules@npm:^5.0.0\":\n+  version: 5.0.0\n+  resolution: \"builtin-modules@npm:5.0.0\"\n+  checksum: 85ba92a4cbd794174dae48c867d27f5529a03c9c073ccb029f106e62861eb48e09231f17a7290645e16a0a22d7401ca269ff73b760a6ddb9a3b7d1b9ceba81ac\n   languageName: node\n   linkType: hard\n \n@@ -8339,10 +8339,10 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"ci-info@npm:^4.0.0, ci-info@npm:^4.1.0\":\n-  version: 4.1.0\n-  resolution: \"ci-info@npm:4.1.0\"\n-  checksum: dcf286abdc1bb1c4218b91e4a617b49781b282282089b7188e1417397ea00c6b967848e2360fb9a6b10021bf18a627f20ef698f47c2c9c875aeffd1d2ea51d1e\n+\"ci-info@npm:^4.0.0, ci-info@npm:^4.1.0, ci-info@npm:^4.2.0\":\n+  version: 4.2.0\n+  resolution: \"ci-info@npm:4.2.0\"\n+  checksum: 0e3726721526f54c5b17cf44ab2ed69b842c756bcb4d2b26ce279e595a80a856aec9fb38a2986a2baca3de73d15895f3a01d2771c4aad93c898aae7e3ca0ceb1\n   languageName: node\n   linkType: hard\n \n@@ -8876,7 +8876,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"core-js-compat@npm:^3.40.0\":\n+\"core-js-compat@npm:^3.40.0, core-js-compat@npm:^3.41.0\":\n   version: 3.41.0\n   resolution: \"core-js-compat@npm:3.41.0\"\n   dependencies:\n@@ -10501,19 +10501,20 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"eslint-plugin-unicorn@npm:^57.0.0\":\n-  version: 57.0.0\n-  resolution: \"eslint-plugin-unicorn@npm:57.0.0\"\n+\"eslint-plugin-unicorn@npm:^58.0.0\":\n+  version: 58.0.0\n+  resolution: \"eslint-plugin-unicorn@npm:58.0.0\"\n   dependencies:\n     \"@babel/helper-validator-identifier\": ^7.25.9\n-    \"@eslint-community/eslint-utils\": ^4.4.1\n-    ci-info: ^4.1.0\n+    \"@eslint-community/eslint-utils\": ^4.5.1\n+    \"@eslint/plugin-kit\": ^0.2.7\n+    ci-info: ^4.2.0\n     clean-regexp: ^1.0.0\n-    core-js-compat: ^3.40.0\n+    core-js-compat: ^3.41.0\n     esquery: ^1.6.0\n-    globals: ^15.15.0\n+    globals: ^16.0.0\n     indent-string: ^5.0.0\n-    is-builtin-module: ^4.0.0\n+    is-builtin-module: ^5.0.0\n     jsesc: ^3.1.0\n     pluralize: ^8.0.0\n     read-package-up: ^11.0.0\n@@ -10522,8 +10523,8 @@ __metadata:\n     semver: ^7.7.1\n     strip-indent: ^4.0.0\n   peerDependencies:\n-    eslint: \">=9.20.0\"\n-  checksum: bc4a3ef348f6a7bed5bef885ef2ef4c887a4b4cd62446708e17bf0d90ef87dd8db4a3e13e3df4fffcb4640a05f0a1f8e2ff67aee85a5d8b47d09278f77b94da8\n+    eslint: \">=9.22.0\"\n+  checksum: 098e52a196d3d5a6379ec8482ea8e9cf664ebbcc822db071842bbcb967c1ad6d7e330014addaea338cc6387f07fcc805ba185766d2716e1fb63b5cdb7cefdb3d\n   languageName: node\n   linkType: hard\n \n@@ -11922,13 +11923,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"globals@npm:^15.15.0\":\n-  version: 15.15.0\n-  resolution: \"globals@npm:15.15.0\"\n-  checksum: a2a92199a112db00562a2f85eeef2a7e3943e171f7f7d9b17dfa9231e35fd612588f3c199d1509ab1757273467e413b08c80424cf6e399e96acdaf93deb3ee88\n-  languageName: node\n-  linkType: hard\n-\n \"globals@npm:^16.0.0\":\n   version: 16.0.0\n   resolution: \"globals@npm:16.0.0\"\n@@ -13018,12 +13012,12 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"is-builtin-module@npm:^4.0.0\":\n-  version: 4.0.0\n-  resolution: \"is-builtin-module@npm:4.0.0\"\n+\"is-builtin-module@npm:^5.0.0\":\n+  version: 5.0.0\n+  resolution: \"is-builtin-module@npm:5.0.0\"\n   dependencies:\n-    builtin-modules: ^4.0.0\n-  checksum: 61e31a8730cc0babfc29af52250178220f4a2cefd23c54f614e5256f0e4e37643f0eb709a92ccfd6ad84732e48e8c4d10cd9d3e29a47197598d5ad2c9c19a765\n+    builtin-modules: ^5.0.0\n+  checksum: fcb1e458fa08e6d7e8763abaa84bc539ca943b298e15448ba92b79ab8f08c382664b8b1d5e32c59358e87026fed7b1e56e457b955436d7cc860cf0653002e4c6\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "chore(deps): update dependency eslint-plugin-unicorn to v58 (#15547)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/introduction/Ecosystem.md\n\ndiff --git a/docs/introduction/Ecosystem.md b/docs/introduction/Ecosystem.md\nindex e164f509..a7bd3a24 100644\n--- a/docs/introduction/Ecosystem.md\n+++ b/docs/introduction/Ecosystem.md\n@@ -61,7 +61,7 @@ On this page we will only feature a few of them that the Redux maintainers have\n * [redux-thunk](http://github.com/gaearon/redux-thunk) — The easiest way to write async action creators\n * [redux-promise](https://github.com/acdlite/redux-promise) — [FSA](https://github.com/acdlite/flux-standard-action)-compliant promise middleware\n * [redux-axios-middleware](https://github.com/svrcekmichal/redux-axios-middleware) — Redux middleware for fetching data with axios HTTP client\n-* [redux-observable](https://github.com/blesh/redux-observable/) — RxJS middleware for Redux\n+* [redux-observable](https://github.com/redux-observable/redux-observable/) — RxJS middleware for action side effects using \"Epics\"\n * [redux-rx](https://github.com/acdlite/redux-rx) — RxJS utilities for Redux, including a middleware for Observable\n * [redux-logger](https://github.com/fcomb/redux-logger) — Log every Redux action and the next state\n * [redux-immutable-state-invariant](https://github.com/leoasis/redux-immutable-state-invariant) — Warns about state mutations in development"}, {"role": "assistant", "content": "docs(Ecosystem): update redux-observable link and description"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/03-api-reference/04-functions/generate-sitemaps.mdx\n\ndiff --git a/docs/01-app/03-api-reference/04-functions/generate-sitemaps.mdx b/docs/01-app/03-api-reference/04-functions/generate-sitemaps.mdx\nindex 023c293fb..ebbb5e92f 100644\n--- a/docs/01-app/03-api-reference/04-functions/generate-sitemaps.mdx\n+++ b/docs/01-app/03-api-reference/04-functions/generate-sitemaps.mdx\n@@ -24,6 +24,7 @@ Your generated sitemaps will be available at `/.../sitemap/[id].xml`. For exampl\n For example, to split a sitemap using `generateSitemaps`, return an array of objects with the sitemap `id`. Then, use the `id` to generate the unique sitemaps.\n \n ```ts filename=\"app/product/sitemap.ts\" switcher\n+import type { MetadataRoute } from 'next'\n import { BASE_URL } from '@/app/lib/constants'\n \n export async function generateSitemaps() {\n@@ -31,11 +32,10 @@ export async function generateSitemaps() {\n   return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n }\n \n-export default async function sitemap({\n-  id,\n-}: {\n-  id: number\n+export default async function sitemap(props: {\n+  id: Promise<number>\n }): Promise<MetadataRoute.Sitemap> {\n+  const id = await props.id\n   // Google's limit is 50,000 URLs per sitemap\n   const start = id * 50000\n   const end = start + 50000\n@@ -57,7 +57,8 @@ export async function generateSitemaps() {\n   return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n }\n \n-export default async function sitemap({ id }) {\n+export default async function sitemap(props) {\n+  const id = await props.id\n   // Google's limit is 50,000 URLs per sitemap\n   const start = id * 50000\n   const end = start + 50000\n@@ -65,7 +66,7 @@ export default async function sitemap({ id }) {\n     `SELECT id, date FROM products WHERE id BETWEEN ${start} AND ${end}`\n   )\n   return products.map((product) => ({\n-    url: `${BASE_URL}/product/${id}`,\n+    url: `${BASE_URL}/product/${product.id}`,\n     lastModified: product.date,\n   }))\n }\n@@ -75,5 +76,6 @@ export default async function sitemap({ id }) {\n \n | Version   | Changes                                                                                                                                              |\n | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |\n+| `v16.0.0` | The `id` values returned from `generateSitemaps` are now passed as a promise to the sitemap function.                                                |\n | `v15.0.0` | `generateSitemaps` now generates consistent URLs between development and production                                                                  |\n | `v13.3.2` | `generateSitemaps` introduced. In development, you can view the generated sitemap on `/.../sitemap.xml/[id]`. For example, `/product/sitemap.xml/1`. |"}, {"role": "assistant", "content": "docs: generateSitemap passes id as promise (#85767)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 100f683f..c54389fe 100644\n--- a/package.json\n+++ b/package.json\n@@ -110,7 +110,7 @@\n     \"@eslint/config-helpers\": \"^0.3.1\",\n     \"@eslint/core\": \"^0.15.2\",\n     \"@eslint/eslintrc\": \"^3.3.1\",\n-    \"@eslint/js\": \"9.35.0\",\n+    \"@eslint/js\": \"9.36.0\",\n     \"@eslint/plugin-kit\": \"^0.3.5\",\n     \"@humanfs/node\": \"^0.16.6\",\n     \"@humanwhocodes/module-importer\": \"^1.0.1\","}, {"role": "assistant", "content": "chore: upgrade @eslint/js@9.36.0 (#20139)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/stale.yml\n\ndiff --git a/.github/workflows/stale.yml b/.github/workflows/stale.yml\nindex 2e645130..28e1ba95 100644\n--- a/.github/workflows/stale.yml\n+++ b/.github/workflows/stale.yml\n@@ -27,7 +27,7 @@ jobs:\n             This issue has been automatically marked as stale. **If this issue is still affecting you, please leave any comment** (for example, \"bump\"), and we'll keep it open. If you have any new additional information—in particular, if this is still reproducible in the [latest version of Electron](https://www.electronjs.org/releases/stable) or in the [beta](https://www.electronjs.org/releases/beta)—please include it with your comment!\n           close-issue-message: >\n             This issue has been closed due to inactivity, and will not be monitored.  If this is a bug and you can reproduce this issue on a [supported version of Electron](https://www.electronjs.org/docs/latest/tutorial/electron-timelines#timeline) please open a new issue and include instructions for reproducing the issue.\n-          exempt-issue-labels: \"discussion,security \\U0001F512,enhancement :sparkles:,status/confirmed,stale-exempt,upgrade-follow-up\"\n+          exempt-issue-labels: \"discussion,security \\U0001F512,enhancement :sparkles:,status/confirmed,stale-exempt,upgrade-follow-up,tracking-upstream\"\n           only-pr-labels: not-a-real-label\n   pending-repro:\n     runs-on: ubuntu-latest"}, {"role": "assistant", "content": "chore: exempt tracking-upstream issues from stale (#48574)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .../__snapshots__/transformExpressions.spec.ts.snap          | 10 ++++++++++\n .../__tests__/transforms/transformExpressions.spec.ts        |  8 ++++++++\n packages/compiler-core/src/transforms/transformExpression.ts | 12 ++++++++----\n 3 files changed, 26 insertions(+), 4 deletions(-)\n\ndiff --git a/packages/compiler-core/__tests__/transforms/__snapshots__/transformExpressions.spec.ts.snap b/packages/compiler-core/__tests__/transforms/__snapshots__/transformExpressions.spec.ts.snap\nindex 5a94de5..8907962 100644\n--- a/packages/compiler-core/__tests__/transforms/__snapshots__/transformExpressions.spec.ts.snap\n+++ b/packages/compiler-core/__tests__/transforms/__snapshots__/transformExpressions.spec.ts.snap\n@@ -14,6 +14,16 @@ return function render(_ctx, _cache, $props, $setup, $data, $options) {\n }\"\n `;\n \n+exports[`compiler: expression transform > expression with type 1`] = `\n+\"const { openBlock: _openBlock, createElementBlock: _createElementBlock } = Vue\n+\n+return function render(_ctx, _cache) {\n+  return (_openBlock(), _createElementBlock(\"div\", {\n+    onClick: _ctx.handleClick\n+  }, null, 8 /* PROPS */, [\"onClick\"]))\n+}\"\n+`;\n+\n exports[`compiler: expression transform > should allow leak of var declarations in for loop 1`] = `\n \"const { openBlock: _openBlock, createElementBlock: _createElementBlock } = Vue\n \ndiff --git a/packages/compiler-core/__tests__/transforms/transformExpressions.spec.ts b/packages/compiler-core/__tests__/transforms/transformExpressions.spec.ts\nindex 2f1e6eb..47627ff 100644\n--- a/packages/compiler-core/__tests__/transforms/transformExpressions.spec.ts\n+++ b/packages/compiler-core/__tests__/transforms/transformExpressions.spec.ts\n@@ -754,4 +754,12 @@ describe('compiler: expression transform', () => {\n       expect(code).toMatch(`_ctx.bar`)\n     })\n   })\n+\n+  test('expression with type', () => {\n+    const { code } = compile(\n+      `<div @click=\"(<number>handleClick as any)\"></div>`,\n+    )\n+    expect(code).toMatch(`onClick: _ctx.handleClick`)\n+    expect(code).toMatchSnapshot()\n+  })\n })\ndiff --git a/packages/compiler-core/src/transforms/transformExpression.ts b/packages/compiler-core/src/transforms/transformExpression.ts\nindex 9ae8897..be4b09b 100644\n--- a/packages/compiler-core/src/transforms/transformExpression.ts\n+++ b/packages/compiler-core/src/transforms/transformExpression.ts\n@@ -18,6 +18,7 @@ import {\n   createSimpleExpression,\n } from '../ast'\n import {\n+  TS_NODE_TYPES,\n   isInDestructureAssignment,\n   isInNewExpression,\n   isStaticProperty,\n@@ -347,15 +348,18 @@ export function processExpression(\n   // an ExpressionNode has the `.children` property, it will be used instead of\n   // `.content`.\n   const children: CompoundExpressionNode['children'] = []\n+  const isTSNode = TS_NODE_TYPES.includes(ast.type)\n   ids.sort((a, b) => a.start - b.start)\n   ids.forEach((id, i) => {\n     // range is offset by -1 due to the wrapping parens when parsed\n     const start = id.start - 1\n     const end = id.end - 1\n     const last = ids[i - 1]\n-    const leadingText = rawExp.slice(last ? last.end - 1 : 0, start)\n-    if (leadingText.length || id.prefix) {\n-      children.push(leadingText + (id.prefix || ``))\n+    if (!(isTSNode && i === 0)) {\n+      const leadingText = rawExp.slice(last ? last.end - 1 : 0, start)\n+      if (leadingText.length || id.prefix) {\n+        children.push(leadingText + (id.prefix || ``))\n+      }\n     }\n     const source = rawExp.slice(start, end)\n     children.push(\n@@ -372,7 +376,7 @@ export function processExpression(\n           : ConstantTypes.NOT_CONSTANT,\n       ),\n     )\n-    if (i === ids.length - 1 && end < rawExp.length) {\n+    if (i === ids.length - 1 && end < rawExp.length && !isTSNode) {\n       children.push(rawExp.slice(end))\n     }\n   })", "output": "fix(compiler-core): handle TypeScript type expressions correctly", "metadata": {"id": "vue-e6544ac2", "repository": "vue", "commit_hash": "e6544ac292b5b473274f87cdb83ebeac3e7e61a4"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/rules/grouped-accessor-pairs.js\n\ndiff --git a/lib/rules/grouped-accessor-pairs.js b/lib/rules/grouped-accessor-pairs.js\nindex 0f20f2fa..c4ac86dc 100644\n--- a/lib/rules/grouped-accessor-pairs.js\n+++ b/lib/rules/grouped-accessor-pairs.js\n@@ -87,8 +87,6 @@ function isAccessorKind(node) {\n \treturn node.kind === \"get\" || node.kind === \"set\";\n }\n \n-const DEFAULT_ORDER = \"anyOrder\";\n-\n //------------------------------------------------------------------------------\n // Rule Definition\n //------------------------------------------------------------------------------\n@@ -98,7 +96,12 @@ module.exports = {\n \tmeta: {\n \t\ttype: \"suggestion\",\n \n-\t\tdefaultOptions: [DEFAULT_ORDER],\n+\t\tdefaultOptions: [\n+\t\t\t\"anyOrder\",\n+\t\t\t{\n+\t\t\t\tenforceForTSTypes: false,\n+\t\t\t},\n+\t\t],\n \n \t\tdocs: {\n \t\t\tdescription:\n@@ -129,10 +132,8 @@ module.exports = {\n \t},\n \n \tcreate(context) {\n-\t\tconst order = context.options[0] ?? DEFAULT_ORDER;\n-\t\tconst enforceForTSTypes =\n-\t\t\tcontext.options[1]?.enforceForTSTypes ?? false;\n-\t\tconst sourceCode = context.sourceCode;\n+\t\tconst [order, { enforceForTSTypes }] = context.options;\n+\t\tconst { sourceCode } = context;\n \n \t\t/**\n \t\t * Reports the given accessor pair."}, {"role": "assistant", "content": "refactor: prefer default options in `grouped-accessor-pairs` (#20028)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/test-nightly.yml\n\ndiff --git a/.github/workflows/test-nightly.yml b/.github/workflows/test-nightly.yml\nindex cfdf8325..5b12f08b 100644\n--- a/.github/workflows/test-nightly.yml\n+++ b/.github/workflows/test-nightly.yml\n@@ -65,4 +65,9 @@ jobs:\n         id: cpu-cores\n         uses: SimenB/github-actions-cpu-cores@v2\n       - name: run tests using jest-jasmine\n-        run: yarn jest-jasmine-ci --max-workers ${{ steps.cpu-cores.outputs.count }} --shard=${{ matrix.shard }}\n+        uses: nick-fields/retry@v2\n+        with:\n+          timeout_minutes: 10\n+          max_attempts: 3\n+          retry_on: error\n+          command: yarn jest-jasmine-ci --max-workers ${{ steps.cpu-cores.outputs.count }} --shard=${{ matrix.shard }}"}, {"role": "assistant", "content": "chore(ci): retry one more build (#14787)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/faq/Actions.md\n\ndiff --git a/docs/faq/Actions.md b/docs/faq/Actions.md\nindex 2c12eb03..89240ea9 100644\n--- a/docs/faq/Actions.md\n+++ b/docs/faq/Actions.md\n@@ -48,7 +48,7 @@ No. We suggest you write independent small reducer functions that are each respo\n \n **Documentation**\n \n-- [Basics: Reducers](/docs/basics/Reducers.md)\n+- [Basics: Reducers](../basics/Reducers.md)\n - [Recipes: Structuring Reducers](../recipes/StructuringReducers.md)\n \n **Discussions**\ndiff --git a/website/package.json b/website/package.json\nindex 8edc295b..0a4b82f0 100644\n--- a/website/package.json\n+++ b/website/package.json\n@@ -12,6 +12,6 @@\n     \"@babel/preset-react\": \"^7.0.0\"\n   },\n   \"dependencies\": {\n-    \"docusaurus\": \"^1.6.0\"\n+    \"docusaurus\": \"^1.6.2\"\n   }\n }\ndiff --git a/website/siteConfig.js b/website/siteConfig.js\nindex 1d2221a8..8e21094c 100644\n--- a/website/siteConfig.js\n+++ b/website/siteConfig.js\n@@ -69,7 +69,17 @@ const siteConfig = {\n   },\n \n   // Add custom scripts here that would be placed in <script> tags.\n-  scripts: [\"/scripts/sidebarScroll.js\"],\n+  scripts: [\n+    \"/scripts/sidebarScroll.js\",\n+    \"/scripts/codeblock.js\",\n+    \"https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js\",\n+  ],\n+\n+  // Add custom stylesheets here\n+  stylesheets: ['/css/codeblock.css'],\n+\n+  // Last update time\n+  enableUpdateTime: true,\n \n   // On page navigation for the current documentation page.\n   onPageNav: \"separate\",\n@@ -77,8 +87,8 @@ const siteConfig = {\n   cleanUrl: true,\n \n   // Open Graph and Twitter card images.\n-  ogImage: \"img/docusaurus.png\",\n-  twitterImage: \"img/docusaurus.png\",\n+  ogImage: \"img/redux.svg\",\n+  twitterImage: \"img/redux.svg\",\n \n   // You may provide arbitrary config keys to be used as needed by your\n   // template. For example, if you need your repo's URL...\ndiff --git a/website/static/css/codeblock.css b/website/static/css/codeblock.css\nnew file mode 100644\nindex 00000000..b33de536\n--- /dev/null\n+++ b/website/static/css/codeblock.css\n@@ -0,0 +1,39 @@\n+/* \"Copy\" code block button */\n+pre {\n+  position: relative;\n+}\n+\n+pre .btnIcon {\n+  position: absolute;\n+  top: 4px;\n+  z-index: 2;\n+  cursor: pointer;\n+  border: 1px solid transparent;\n+  padding: 0;\n+  color: #fff;\n+  background-color: transparent;\n+  height: 30px;\n+  transition: all .25s ease-out;\n+}\n+\n+pre .btnIcon:hover {\n+  text-decoration: none;\n+}\n+\n+.btnIcon__body {\n+  align-items: center;\n+  display: flex;\n+}\n+\n+.btnIcon svg {\n+  fill: currentColor;\n+  margin-right: .4em;\n+}\n+\n+.btnIcon__label {\n+  font-size: 11px;\n+}\n+\n+.btnClipboard {\n+  right: 10px;\n+}\n\\ No newline at end of file\ndiff --git a/website/static/scripts/codeblock.js b/website/static/scripts/codeblock.js\nnew file mode 100644\nindex 00000000..723377a4\n--- /dev/null\n+++ b/website/static/scripts/codeblock.js\n@@ -0,0 +1,45 @@\n+window.addEventListener('load', function() {\n+  function button(label, ariaLabel, icon, className) {\n+    const btn = document.createElement('button');\n+    btn.classList.add('btnIcon', className);\n+    btn.setAttribute('type', 'button');\n+    btn.setAttribute('aria-label', ariaLabel);\n+    btn.innerHTML =\n+      '<div class=\"btnIcon__body\">' +\n+      icon +\n+      '<strong class=\"btnIcon__label\">' +\n+      label +\n+      '</strong>' +\n+      '</div>';\n+    return btn;\n+  }\n+\n+  function addButtons(codeBlockSelector, btn) {\n+    document.querySelectorAll(codeBlockSelector).forEach(function(code) {\n+      code.parentNode.appendChild(btn.cloneNode(true));\n+    });\n+  }\n+\n+  const copyIcon =\n+    '<svg width=\"12\" height=\"12\" viewBox=\"340 364 14 15\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M342 375.974h4v.998h-4v-.998zm5-5.987h-5v.998h5v-.998zm2 2.994v-1.995l-3 2.993 3 2.994v-1.996h5v-1.995h-5zm-4.5-.997H342v.998h2.5v-.997zm-2.5 2.993h2.5v-.998H342v.998zm9 .998h1v1.996c-.016.28-.11.514-.297.702-.187.187-.422.28-.703.296h-10c-.547 0-1-.452-1-.998v-10.976c0-.546.453-.998 1-.998h3c0-1.107.89-1.996 2-1.996 1.11 0 2 .89 2 1.996h3c.547 0 1 .452 1 .998v4.99h-1v-2.995h-10v8.98h10v-1.996zm-9-7.983h8c0-.544-.453-.996-1-.996h-1c-.547 0-1-.453-1-.998 0-.546-.453-.998-1-.998-.547 0-1 .452-1 .998 0 .545-.453.998-1 .998h-1c-.547 0-1 .452-1 .997z\" fill-rule=\"evenodd\"/></svg>';\n+\n+  addButtons(\n+    '.hljs',\n+    button('Copy', 'Copy code to clipboard', copyIcon, 'btnClipboard'),\n+  );\n+\n+  const clipboard = new ClipboardJS('.btnClipboard', {\n+    target: function(trigger) {\n+      return trigger.parentNode.querySelector('code');\n+    },\n+  });\n+\n+  clipboard.on('success', function(event) {\n+    event.clearSelection();\n+    const textEl = event.trigger.querySelector('.btnIcon__label');\n+    textEl.textContent = 'Copied';\n+    setTimeout(function() {\n+      textEl.textContent = 'Copy';\n+    }, 2000);\n+  });\n+});\n\\ No newline at end of file"}, {"role": "assistant", "content": "chore: fix docs website (#3261)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/rules/no-else-return.md\n\ndiff --git a/docs/src/rules/no-else-return.md b/docs/src/rules/no-else-return.md\nindex c9052d3f..49a481ee 100644\n--- a/docs/src/rules/no-else-return.md\n+++ b/docs/src/rules/no-else-return.md\n@@ -21,15 +21,6 @@ function foo() {\n \n This rule is aimed at highlighting an unnecessary block of code following an `if` containing a `return` statement. As such, it will warn when it encounters an `else` following a chain of `if`s, all of them containing a `return` statement.\n \n-## Options\n-\n-This rule has an object option:\n-\n-* `allowElseIf: true` (default) allows `else if` blocks after a `return`\n-* `allowElseIf: false` disallows `else if` blocks after a `return`\n-\n-###  allowElseIf: true\n-\n Examples of **incorrect** code for this rule:\n \n ::: incorrect\n@@ -46,26 +37,14 @@ function foo1() {\n }\n \n function foo2() {\n-    if (x) {\n-        return y;\n-    } else if (z) {\n-        return w;\n-    } else {\n-        return t;\n-    }\n-}\n-\n-function foo3() {\n     if (x) {\n         return y;\n     } else {\n         const t = \"foo\";\n     }\n-\n-    return t;\n }\n \n-function foo4() {\n+function foo3() {\n     if (error) {\n         return 'It failed';\n     } else {\n@@ -76,7 +55,7 @@ function foo4() {\n }\n \n // Two warnings for nested occurrences\n-function foo5() {\n+function foo4() {\n     if (x) {\n         if (y) {\n             return y;\n@@ -109,37 +88,82 @@ function foo1() {\n function foo2() {\n     if (x) {\n         return y;\n-    } else if (z) {\n-        const t = \"foo\";\n-    } else {\n-        return w;\n     }\n+\n+    const t = \"foo\";\n }\n \n function foo3() {\n+    if (error) {\n+        return 'It failed';\n+    }\n+\n+    if (loading) {\n+        return \"It's still loading\";\n+    }   \n+}\n+\n+function foo4() {\n     if (x) {\n-        if (z) {\n+        if (y) {\n             return y;\n         }\n-    } else {\n-        return z;\n+\n+        return x;\n     }\n+\n+    return z;    \n }\n \n-function foo4() {\n+function foo5() {\n+  if (x) {\n+    const t = \"foo\";\n+  } else {\n+    return y\n+  }\n+}\n+```\n+\n+:::\n+\n+## Options\n+\n+### allowElseIf\n+\n+This rule has an object option:\n+\n+* `allowElseIf: true` (default) - If true, allows `else if` blocks after a `return`\n+\n+Examples of **correct** code for the default `{\"allowElseIf\": true}` option:\n+\n+::: correct\n+\n+```js\n+/*eslint no-else-return: [\"error\", {allowElseIf: true}]*/\n+\n+function foo() {\n     if (error) {\n         return 'It failed';\n     } else if (loading) {\n         return \"It's still loading\";\n     }\n }\n+\n+// Using multiple `if` statements instead of `else if` is also allowed\n+function foo2() {\n+    if (error) {\n+        return 'It failed';\n+    }\n+  \n+    if (loading) {\n+        return \"It's still loading\";\n+    }\n+}\n ```\n \n :::\n \n-### allowElseIf: false\n-\n-Examples of **incorrect** code for this rule:\n+Examples of **incorrect** code for the `{\"allowElseIf\": false}` option:\n \n ::: incorrect\n \n@@ -157,7 +181,7 @@ function foo() {\n \n :::\n \n-Examples of **correct** code for this rule:\n+Examples of **correct** code for the `{\"allowElseIf\": false}` option:\n \n ::: correct"}, {"role": "assistant", "content": "docs: [no-else-return] clarify sample code. (#19991)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/api/app.md\n\ndiff --git a/docs/api/app.md b/docs/api/app.md\nindex c46d62cd..5a7e482a 100644\n--- a/docs/api/app.md\n+++ b/docs/api/app.md\n@@ -1215,6 +1215,13 @@ Disables hardware acceleration for current app.\n \n This method can only be called before app is ready.\n \n+### `app.isHardwareAccelerationEnabled()`\n+\n+Returns `boolean` - whether hardware acceleration is currently disabled.\n+\n+ > [!NOTE]\n+ > This information is only usable after the `gpu-info-update` event is emitted.\n+\n ### `app.disableDomainBlockingFor3DAPIs()`\n \n By default, Chromium disables 3D APIs (e.g. WebGL) until restart on a per\ndiff --git a/shell/browser/api/electron_api_app.cc b/shell/browser/api/electron_api_app.cc\nindex dd4d07c0..a6153ff0 100644\n--- a/shell/browser/api/electron_api_app.cc\n+++ b/shell/browser/api/electron_api_app.cc\n@@ -1140,6 +1140,10 @@ void App::DisableHardwareAcceleration(gin_helper::ErrorThrower thrower) {\n         \"before app is ready\");\n     return;\n   }\n+\n+  // If the GpuDataManager is already initialized, disable hardware\n+  // acceleration immediately. Otherwise, set a flag to disable it in\n+  // OnPreCreateThreads().\n   if (content::GpuDataManager::Initialized()) {\n     content::GpuDataManager::GetInstance()->DisableHardwareAcceleration();\n   } else {\n@@ -1147,6 +1151,13 @@ void App::DisableHardwareAcceleration(gin_helper::ErrorThrower thrower) {\n   }\n }\n \n+bool App::IsHardwareAccelerationEnabled() {\n+  if (content::GpuDataManager::Initialized())\n+    return content::GpuDataManager::GetInstance()\n+        ->HardwareAccelerationEnabled();\n+  return !disable_hw_acceleration_;\n+}\n+\n void App::DisableDomainBlockingFor3DAPIs(gin_helper::ErrorThrower thrower) {\n   if (Browser::Get()->is_ready()) {\n     thrower.ThrowError(\n@@ -1926,6 +1937,8 @@ gin::ObjectTemplateBuilder App::GetObjectTemplateBuilder(v8::Isolate* isolate) {\n                  &App::SetAccessibilitySupportEnabled)\n       .SetMethod(\"disableHardwareAcceleration\",\n                  &App::DisableHardwareAcceleration)\n+      .SetMethod(\"isHardwareAccelerationEnabled\",\n+                 &App::IsHardwareAccelerationEnabled)\n       .SetMethod(\"disableDomainBlockingFor3DAPIs\",\n                  &App::DisableDomainBlockingFor3DAPIs)\n       .SetMethod(\"getFileIcon\", &App::GetFileIcon)\ndiff --git a/shell/browser/api/electron_api_app.h b/shell/browser/api/electron_api_app.h\nindex 504affb3..fd0565b5 100644\n--- a/shell/browser/api/electron_api_app.h\n+++ b/shell/browser/api/electron_api_app.h\n@@ -213,6 +213,7 @@ class App final : public gin::Wrappable<App>,\n   void ReleaseSingleInstanceLock();\n   bool Relaunch(gin::Arguments* args);\n   void DisableHardwareAcceleration(gin_helper::ErrorThrower thrower);\n+  bool IsHardwareAccelerationEnabled();\n   void DisableDomainBlockingFor3DAPIs(gin_helper::ErrorThrower thrower);\n   bool IsAccessibilitySupportEnabled();\n   v8::Local<v8::Value> GetAccessibilitySupportFeatures();\ndiff --git a/spec/api-app-spec.ts b/spec/api-app-spec.ts\nindex 30e5e96a..81ab51f1 100644\n--- a/spec/api-app-spec.ts\n+++ b/spec/api-app-spec.ts\n@@ -149,6 +149,12 @@ describe('app module', () => {\n     });\n   });\n \n+  describe('app.isHardwareAccelerationEnabled()', () => {\n+    it('should be a boolean', () => {\n+      expect(app.isHardwareAccelerationEnabled()).to.be.a('boolean');\n+    });\n+  });\n+\n   describe('app.isPackaged', () => {\n     it('should be false during tests', () => {\n       expect(app.isPackaged).to.equal(false);"}, {"role": "assistant", "content": "feat: add `app.isHardwareAccelerationEnabled()` (#47614)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/stale.yml\n\ndiff --git a/.github/workflows/stale.yml b/.github/workflows/stale.yml\nindex 7fd2e20f..2e645130 100644\n--- a/.github/workflows/stale.yml\n+++ b/.github/workflows/stale.yml\n@@ -16,7 +16,7 @@ jobs:\n         id: generate-token\n         with:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n-      - uses: actions/stale@5bef64f19d7facfb25b37b414482c7164d639639 # tag: v9.1.0\n+      - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # tag: v10.1.0\n         with:\n           repo-token: ${{ steps.generate-token.outputs.token }}\n           days-before-stale: 90\n@@ -39,7 +39,7 @@ jobs:\n         id: generate-token\n         with:\n           creds: ${{ secrets.ISSUE_TRIAGE_GH_APP_CREDS }}\n-      - uses: actions/stale@5bef64f19d7facfb25b37b414482c7164d639639 # tag: v9.1.0\n+      - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # tag: v10.1.0\n         with:\n           repo-token: ${{ steps.generate-token.outputs.token }}\n           days-before-stale: -1"}, {"role": "assistant", "content": "build(deps): bump actions/stale from 9.1.0 to 10.1.0 (#48477)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/rules/no-unsafe-finally.md\n\ndiff --git a/docs/src/rules/no-unsafe-finally.md b/docs/src/rules/no-unsafe-finally.md\nindex 661fcdf2..190f9713 100644\n--- a/docs/src/rules/no-unsafe-finally.md\n+++ b/docs/src/rules/no-unsafe-finally.md\n@@ -167,3 +167,6 @@ let foo = function(a) {\n ## When Not To Use It\n \n If you want to allow control flow operations in `finally` blocks, you can turn this rule off.\n+\n+Note that [using `return` with `try`/`finally` in generator functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator/return#using_return_with_try...finally) can be used to override the value returned.\n+If you want to use this feature of generator functions, you can disable this rule using an `eslint-disable` comment."}, {"role": "assistant", "content": "docs: no-unsafe-finally note for generator functions (#20330)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .eslintrc.cjs\n\ndiff --git a/.eslintrc.cjs b/.eslintrc.cjs\nindex bc25d233..7651d317 100644\n--- a/.eslintrc.cjs\n+++ b/.eslintrc.cjs\n@@ -32,7 +32,7 @@ module.exports = {\n     'eslint:recommended',\n     'plugin:markdown/recommended',\n     'plugin:import/errors',\n-    'plugin:eslint-comments/recommended',\n+    'plugin:@eslint-community/eslint-comments/recommended',\n     'plugin:unicorn/recommended',\n     'plugin:promise/recommended',\n     'plugin:prettier/recommended',\n@@ -348,8 +348,8 @@ module.exports = {\n       ],\n       rules: {\n         '@typescript-eslint/ban-types': 'off',\n-        'eslint-comments/disable-enable-pair': 'off',\n-        'eslint-comments/no-unlimited-disable': 'off',\n+        '@eslint-community/eslint-comments/disable-enable-pair': 'off',\n+        '@eslint-community/eslint-comments/no-unlimited-disable': 'off',\n         'prefer-rest-params': 'off',\n         'prefer-spread': 'off',\n         'sort-keys ': 'off',\n@@ -478,8 +478,11 @@ module.exports = {\n     'default-case': 'off',\n     'dot-notation': 'off',\n     eqeqeq: ['error', 'smart'],\n-    'eslint-comments/disable-enable-pair': ['error', {allowWholeFile: true}],\n-    'eslint-comments/no-unused-disable': 'error',\n+    '@eslint-community/eslint-comments/disable-enable-pair': [\n+      'error',\n+      {allowWholeFile: true},\n+    ],\n+    '@eslint-community/eslint-comments/no-unused-disable': 'error',\n     'func-names': 'off',\n     'func-style': ['off', 'declaration'],\n     'global-require': 'off',\ndiff --git a/package.json b/package.json\nindex 7474cd3f..cd2e1c8c 100644\n--- a/package.json\n+++ b/package.json\n@@ -10,6 +10,7 @@\n     \"@babel/preset-typescript\": \"^7.0.0\",\n     \"@babel/register\": \"^7.0.0\",\n     \"@crowdin/cli\": \"^4.0.0\",\n+    \"@eslint-community/eslint-plugin-eslint-comments\": \"^4.0.0\",\n     \"@jest/globals\": \"workspace:*\",\n     \"@jest/test-utils\": \"workspace:*\",\n     \"@lerna-lite/cli\": \"^3.0.0\",\n@@ -33,7 +34,6 @@\n     \"eslint\": \"^8.8.0\",\n     \"eslint-config-prettier\": \"^9.0.0\",\n     \"eslint-import-resolver-typescript\": \"^3.2.5\",\n-    \"eslint-plugin-eslint-comments\": \"^3.1.2\",\n     \"eslint-plugin-import\": \"^2.6.0\",\n     \"eslint-plugin-jest\": \"^28.0.0\",\n     \"eslint-plugin-jsdoc\": \"^50.0.0\",\ndiff --git a/yarn.lock b/yarn.lock\nindex 42d29264..625e2092 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -2837,6 +2837,18 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n+\"@eslint-community/eslint-plugin-eslint-comments@npm:^4.0.0\":\n+  version: 4.4.1\n+  resolution: \"@eslint-community/eslint-plugin-eslint-comments@npm:4.4.1\"\n+  dependencies:\n+    escape-string-regexp: ^4.0.0\n+    ignore: ^5.2.4\n+  peerDependencies:\n+    eslint: ^6.0.0 || ^7.0.0 || ^8.0.0 || ^9.0.0\n+  checksum: 32edb04a698c1b0f2d157c57d2c931811e804f9e5df4ffdcfa52334d7f170cf22a0d5531e008efcf21e22a36474e68036882c5bc25076fedc5755e3bdfe7b8e8\n+  languageName: node\n+  linkType: hard\n+\n \"@eslint-community/eslint-utils@npm:^4.2.0, @eslint-community/eslint-utils@npm:^4.4.0\":\n   version: 4.4.0\n   resolution: \"@eslint-community/eslint-utils@npm:4.4.0\"\n@@ -3254,6 +3266,7 @@ __metadata:\n     \"@babel/preset-typescript\": ^7.0.0\n     \"@babel/register\": ^7.0.0\n     \"@crowdin/cli\": ^4.0.0\n+    \"@eslint-community/eslint-plugin-eslint-comments\": ^4.0.0\n     \"@jest/globals\": \"workspace:*\"\n     \"@jest/test-utils\": \"workspace:*\"\n     \"@lerna-lite/cli\": ^3.0.0\n@@ -3277,7 +3290,6 @@ __metadata:\n     eslint: ^8.8.0\n     eslint-config-prettier: ^9.0.0\n     eslint-import-resolver-typescript: ^3.2.5\n-    eslint-plugin-eslint-comments: ^3.1.2\n     eslint-plugin-import: ^2.6.0\n     eslint-plugin-jest: ^28.0.0\n     eslint-plugin-jsdoc: ^50.0.0\n@@ -9881,18 +9893,6 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"eslint-plugin-eslint-comments@npm:^3.1.2\":\n-  version: 3.2.0\n-  resolution: \"eslint-plugin-eslint-comments@npm:3.2.0\"\n-  dependencies:\n-    escape-string-regexp: ^1.0.5\n-    ignore: ^5.0.5\n-  peerDependencies:\n-    eslint: \">=4.19.1\"\n-  checksum: c9fe273dd56699abdf7e416cfad0344eb50aa01564a5a9133e72d982defb89310bc2e9b0b148ce19c5190d7ff641223b0ba9e667a194bc48467c3dd0d471e657\n-  languageName: node\n-  linkType: hard\n-\n \"eslint-plugin-import@npm:^2.6.0\":\n   version: 2.29.1\n   resolution: \"eslint-plugin-import@npm:2.29.1\"\n@@ -12215,7 +12215,7 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"ignore@npm:^5.0.5, ignore@npm:^5.2.0, ignore@npm:^5.2.4\":\n+\"ignore@npm:^5.2.0, ignore@npm:^5.2.4\":\n   version: 5.3.2\n   resolution: \"ignore@npm:5.3.2\"\n   checksum: 2acfd32a573260ea522ea0bfeff880af426d68f6831f973129e2ba7363f422923cf53aab62f8369cbf4667c7b25b6f8a3761b34ecdb284ea18e87a5262a865be"}, {"role": "assistant", "content": "chore(deps): replace dependency eslint-plugin-eslint-comments with @eslint-community/eslint-plugin-eslint-comments ^3.2.0 (#15286)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/archaeologist-dig.yml\n\ndiff --git a/.github/workflows/archaeologist-dig.yml b/.github/workflows/archaeologist-dig.yml\nindex 9684a742..07c32d17 100644\n--- a/.github/workflows/archaeologist-dig.yml\n+++ b/.github/workflows/archaeologist-dig.yml\n@@ -13,7 +13,7 @@ jobs:\n         with:\n           fetch-depth: 0\n       - name: Setup Node.js/npm\n-        uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n+        uses: actions/setup-node@2028fbc5c25fe9cf00d9f06a71cc4710d4507903\n         with:\n           node-version: 20.19.x\n       - name: Setting Up Dig Site\ndiff --git a/.github/workflows/audit-branch-ci.yml b/.github/workflows/audit-branch-ci.yml\nindex 67e6a9f1..47af2daf 100644\n--- a/.github/workflows/audit-branch-ci.yml\n+++ b/.github/workflows/audit-branch-ci.yml\n@@ -16,7 +16,7 @@ jobs:\n       contents: read\n     steps:\n       - name: Setup Node.js\n-        uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444 # v5.0.0\n+        uses: actions/setup-node@2028fbc5c25fe9cf00d9f06a71cc4710d4507903 # v6.0.0\n         with:\n           node-version: 22.17.x\n       - run: npm install @actions/cache@4.0.3 @electron/fiddle-core@2.0.1\ndiff --git a/.github/workflows/pipeline-segment-electron-build.yml b/.github/workflows/pipeline-segment-electron-build.yml\nindex 154b3b73..620c6563 100644\n--- a/.github/workflows/pipeline-segment-electron-build.yml\n+++ b/.github/workflows/pipeline-segment-electron-build.yml\n@@ -115,7 +115,7 @@ jobs:\n       run: df -h\n     - name: Setup Node.js/npm\n       if: ${{ inputs.target-platform == 'macos' }}\n-      uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n+      uses: actions/setup-node@2028fbc5c25fe9cf00d9f06a71cc4710d4507903\n       with:\n         node-version: 20.19.x\n         cache: yarn\ndiff --git a/.github/workflows/pipeline-segment-electron-test.yml b/.github/workflows/pipeline-segment-electron-test.yml\nindex 41840941..b376f9dd 100644\n--- a/.github/workflows/pipeline-segment-electron-test.yml\n+++ b/.github/workflows/pipeline-segment-electron-test.yml\n@@ -70,7 +70,7 @@ jobs:\n         cp $(which node) /mnt/runner-externals/node20/bin/\n     - name: Setup Node.js/npm\n       if: ${{ inputs.target-platform == 'win' }}\n-      uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n+      uses: actions/setup-node@2028fbc5c25fe9cf00d9f06a71cc4710d4507903\n       with:\n         node-version: 20.19.x\n     - name: Add TCC permissions on macOS"}, {"role": "assistant", "content": "build(deps): bump actions/setup-node from 5.0.0 to 6.0.0 (#48607)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex 2c76aea16..d0814a6a3 100644\n--- a/package.json\n+++ b/package.json\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"webpack\",\n-  \"version\": \"5.101.2\",\n+  \"version\": \"5.101.3\",\n   \"description\": \"Packs ECMAScript/CommonJs/AMD modules for the browser. Allows you to split your codebase into multiple bundles, which can be loaded on demand. Supports loaders to preprocess files, i.e. json, jsx, es7, css, less, ... and your custom stuff.\",\n   \"homepage\": \"https://github.com/webpack/webpack\",\n   \"bugs\": \"https://github.com/webpack/webpack/issues\","}, {"role": "assistant", "content": "chore(release): 5.101.3"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n types/v3-component-public-instance.d.ts\n\ndiff --git a/types/v3-component-public-instance.d.ts b/types/v3-component-public-instance.d.ts\nindex a5bf6701..3586f403 100644\n--- a/types/v3-component-public-instance.d.ts\n+++ b/types/v3-component-public-instance.d.ts\n@@ -179,9 +179,7 @@ interface Vue3Instance<\n         ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n         : P & PublicProps\n     >,\n-    ComponentPublicInstance | null,\n     ComponentPublicInstance,\n-    ComponentPublicInstance[],\n     Options & MergedComponentOptionsOverride,\n     EmitFn<E>\n   > {}\ndiff --git a/types/vue.d.ts b/types/vue.d.ts\nindex aaf471dd..74bce2c8 100644\n--- a/types/vue.d.ts\n+++ b/types/vue.d.ts\n@@ -14,7 +14,6 @@ import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from './vnode'\n import { PluginFunction, PluginObject } from './plugin'\n import { DefineComponent } from './v3-define-component'\n import { nextTick } from './v3-generated'\n-import { ComponentPublicInstance } from './v3-component-public-instance'\n \n export interface CreateElement {\n   (\n@@ -41,18 +40,16 @@ type NeverFallback<T, D> = [T] extends [never] ? D : T\n export interface Vue<\n   Data = Record<string, any>,\n   Props = Record<string, any>,\n-  Parent = never,\n-  Root = never,\n-  Children = never,\n+  Instance = never,\n   Options = never,\n   Emit = (event: string, ...args: any[]) => Vue\n > {\n   // properties with different types in defineComponent()\n   readonly $data: Data\n   readonly $props: Props\n-  readonly $parent: NeverFallback<Parent, Vue>\n-  readonly $root: NeverFallback<Root, Vue>\n-  readonly $children: NeverFallback<Children, Vue[]>\n+  readonly $parent: NeverFallback<Instance, Vue> | null\n+  readonly $root: NeverFallback<Instance, Vue>\n+  readonly $children: NeverFallback<Instance, Vue>[]\n   readonly $options: NeverFallback<Options, ComponentOptions<Vue>>\n   $emit: Emit\n \n@@ -60,10 +57,10 @@ export interface Vue<\n   readonly $el: Element\n   readonly $refs: {\n     [key: string]:\n+      | NeverFallback<Instance, Vue>\n       | Vue\n       | Element\n-      | ComponentPublicInstance\n-      | (Vue | Element | ComponentPublicInstance)[]\n+      | (NeverFallback<Instance, Vue> | Vue | Element)[]\n       | undefined\n   }\n   readonly $slots: { [key: string]: VNode[] | undefined }"}, {"role": "assistant", "content": "fix(types): avoid circular type inference between v2 and v3 instance types"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex dd37c732..6a36d1af 100644\n--- a/package.json\n+++ b/package.json\n@@ -108,10 +108,10 @@\n   \"dependencies\": {\n     \"@eslint-community/eslint-utils\": \"^4.8.0\",\n     \"@eslint-community/regexpp\": \"^4.12.1\",\n-    \"@eslint/config-array\": \"^0.21.1\",\n-    \"@eslint/config-helpers\": \"^0.4.2\",\n-    \"@eslint/core\": \"^0.17.0\",\n-    \"@eslint/plugin-kit\": \"^0.4.1\",\n+    \"@eslint/config-array\": \"^0.22.0\",\n+    \"@eslint/config-helpers\": \"^0.5.0\",\n+    \"@eslint/core\": \"^1.0.0\",\n+    \"@eslint/plugin-kit\": \"^0.5.0\",\n     \"@humanfs/node\": \"^0.16.6\",\n     \"@humanwhocodes/module-importer\": \"^1.0.1\",\n     \"@humanwhocodes/retry\": \"^0.4.2\",\ndiff --git a/tests/lib/types/types.test.ts b/tests/lib/types/types.test.ts\nindex 8ac3acef..17a25ac8 100644\n--- a/tests/lib/types/types.test.ts\n+++ b/tests/lib/types/types.test.ts\n@@ -728,11 +728,7 @@ rule = {\n \t\tcontext.sourceCode;\n \t\tcontext.sourceCode.getLocFromIndex(42);\n \n-\t\tif (typeof context.parserPath === \"string\") {\n-\t\t\tcontext.parserPath;\n-\t\t} else {\n-\t\t\tcontext.languageOptions?.parser;\n-\t\t}\n+\t\tcontext.languageOptions?.parser;\n \n \t\t// @ts-expect-error wrong `node` type\n \t\tcontext.report({ message: \"foo\", node: {} });"}, {"role": "assistant", "content": "chore: update `@eslint/*` dependencies (#20321)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 41beacebe..fbedd6f2a 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -4350,11 +4350,11 @@ __metadata:\n   linkType: hard\n \n \"@eslint/plugin-kit@npm:^0.2.0\":\n-  version: 0.2.0\n-  resolution: \"@eslint/plugin-kit@npm:0.2.0\"\n+  version: 0.2.3\n+  resolution: \"@eslint/plugin-kit@npm:0.2.3\"\n   dependencies:\n     levn: \"npm:^0.4.1\"\n-  checksum: 10/ebb363174397341dea47dc35fc206e24328083e4f0fa1c539687dbb7f94bef77e43faa12867d032e6eea5ac980ea8fbb6b1d844186e422d327c04088041b99f3\n+  checksum: 10/0d0653ef840823fd5c0354ef8f1937e7763dbe830173eb6d2d55a19374bf04a06dff0e5214330c10a9425cf38655f632bb0d7d0666249b366e506ae291d82f7e\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "chore(deps): bump @eslint/plugin-kit from 0.2.0 to 0.2.3 (#16966)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/next/README.md\n\ndiff --git a/packages/next/README.md b/packages/next/README.md\nindex 6b65cdc8b..1f4095678 100644\n--- a/packages/next/README.md\n+++ b/packages/next/README.md\n@@ -42,9 +42,8 @@ Contributions to Next.js are welcome and highly appreciated. However, before you\n We have a list of **[good first issues](https://github.com/vercel/next.js/labels/%22good%20first%20issue%22)** that contain bugs that have a relatively limited scope. This is a great place for newcomers and beginners alike to get started, gain experience, and get familiar with our contribution process.\n \n ---\n-\n ## Security\n \n-If you believe you have found a security vulnerability in Next.js, we encourage you to **_responsibly disclose this and NOT open a public issue_**. We will investigate all legitimate reports.\n+If you believe you have found a security vulnerability in Next.js, we encourage you to **_responsibly disclose this and NOT open a public issue_**.\n \n-Our preference is that you make use of GitHub's private vulnerability reporting feature to disclose potential security vulnerabilities in our Open Source Software. To do this, please visit [https://github.com/vercel/next.js/security](https://github.com/vercel/next.js/security) and click the \"Report a vulnerability\" button.\n+To participate in our Open Source Software Bug Bounty program, please email [responsible.disclosure@vercel.com](mailto:responsible.disclosure@vercel.com). We will add you to the program and provide further instructions for submitting your report."}, {"role": "assistant", "content": "docs: update Security section to direct disclosures  (#84156)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n script/release/release.ts\n\ndiff --git a/script/release/release.ts b/script/release/release.ts\nindex 1438577f..6e64764e 100755\n--- a/script/release/release.ts\n+++ b/script/release/release.ts\n@@ -210,8 +210,10 @@ function assetsForVersion (version: string, validatingRelease: boolean) {\n const cloudStoreFilePaths = (version: string) => [\n   `iojs-${version}-headers.tar.gz`,\n   `iojs-${version}.tar.gz`,\n+  `node-${version}-headers.tar.gz`,\n   `node-${version}.tar.gz`,\n   'node.lib',\n+  'arm64/node.lib',\n   'x64/node.lib',\n   'win-x64/iojs.lib',\n   'win-x86/iojs.lib',\n@@ -219,7 +221,6 @@ const cloudStoreFilePaths = (version: string) => [\n   'win-x64/node.lib',\n   'win-x86/node.lib',\n   'win-arm64/node.lib',\n-  'arm64/node.lib',\n   'SHASUMS.txt',\n   'SHASUMS256.txt'\n ];"}, {"role": "assistant", "content": "build: add missing copied tarball to cloudstore paths (#48408)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/03-api-reference/03-file-conventions/route-segment-config.mdx\n\ndiff --git a/docs/01-app/03-api-reference/03-file-conventions/route-segment-config.mdx b/docs/01-app/03-api-reference/03-file-conventions/route-segment-config.mdx\nindex 5866c0a71..30f1ccf6e 100644\n--- a/docs/01-app/03-api-reference/03-file-conventions/route-segment-config.mdx\n+++ b/docs/01-app/03-api-reference/03-file-conventions/route-segment-config.mdx\n@@ -11,33 +11,18 @@ description: Learn about how to configure options for Next.js route segments.\n \n The Route Segment options allows you to configure the behavior of a [Page](/docs/app/api-reference/file-conventions/layout), [Layout](/docs/app/api-reference/file-conventions/layout), or [Route Handler](/docs/app/api-reference/file-conventions/route) by directly exporting the following variables:\n \n-| Option                                  | Type                                                                                                                      | Default                    |\n-| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | -------------------------- |\n-| [`experimental_ppr`](#experimental_ppr) | `boolean`                                                                                                                 |\n-| [`dynamic`](#dynamic)                   | `'auto' \\| 'force-dynamic' \\| 'error' \\| 'force-static'`                                                                  | `'auto'`                   |\n-| [`dynamicParams`](#dynamicparams)       | `boolean`                                                                                                                 | `true`                     |\n-| [`revalidate`](#revalidate)             | `false \\| 0 \\| number`                                                                                                    | `false`                    |\n-| [`fetchCache`](#fetchcache)             | `'auto' \\| 'default-cache' \\| 'only-cache' \\| 'force-cache' \\| 'force-no-store' \\| 'default-no-store' \\| 'only-no-store'` | `'auto'`                   |\n-| [`runtime`](#runtime)                   | `'nodejs' \\| 'edge'`                                                                                                      | `'nodejs'`                 |\n-| [`preferredRegion`](#preferredregion)   | `'auto' \\| 'global' \\| 'home' \\| string \\| string[]`                                                                      | `'auto'`                   |\n-| [`maxDuration`](#maxduration)           | `number`                                                                                                                  | Set by deployment platform |\n+| Option                                | Type                                                                                                                      | Default                    |\n+| ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | -------------------------- |\n+| [`dynamic`](#dynamic)                 | `'auto' \\| 'force-dynamic' \\| 'error' \\| 'force-static'`                                                                  | `'auto'`                   |\n+| [`dynamicParams`](#dynamicparams)     | `boolean`                                                                                                                 | `true`                     |\n+| [`revalidate`](#revalidate)           | `false \\| 0 \\| number`                                                                                                    | `false`                    |\n+| [`fetchCache`](#fetchcache)           | `'auto' \\| 'default-cache' \\| 'only-cache' \\| 'force-cache' \\| 'force-no-store' \\| 'default-no-store' \\| 'only-no-store'` | `'auto'`                   |\n+| [`runtime`](#runtime)                 | `'nodejs' \\| 'edge'`                                                                                                      | `'nodejs'`                 |\n+| [`preferredRegion`](#preferredregion) | `'auto' \\| 'global' \\| 'home' \\| string \\| string[]`                                                                      | `'auto'`                   |\n+| [`maxDuration`](#maxduration)         | `number`                                                                                                                  | Set by deployment platform |\n \n ## Options\n \n-### `experimental_ppr`\n-\n-Enable [Partial Prerendering (PPR)](/docs/app/getting-started/partial-prerendering) for a layout or page.\n-\n-```tsx filename=\"layout.tsx | page.tsx \" switcher\n-export const experimental_ppr = true\n-// true | false\n-```\n-\n-```jsx filename=\"layout.js | page.js \" switcher\n-export const experimental_ppr = true\n-// true | false\n-```\n-\n ### `dynamic`\n \n Change the dynamic behavior of a layout or page to fully static or fully dynamic.\n@@ -225,4 +210,5 @@ See the [API reference](/docs/app/api-reference/functions/generate-static-params\n \n | Version      |                                                                                                                                                                                                                |\n | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n+| `v16.0.0`    | `export const experimental_ppr = true` removed. A [codemod](/docs/app/guides/upgrading/codemods#remove-experimental_ppr-route-segment-config-from-app-router-pages-and-layouts) is available.                  |\n | `v15.0.0-RC` | `export const runtime = \"experimental-edge\"` deprecated. A [codemod](/docs/app/guides/upgrading/codemods#transform-app-router-route-segment-config-runtime-value-from-experimental-edge-to-edge) is available. |"}, {"role": "assistant", "content": "docs: remove experimental_ppr route segment config (#85188)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n package.json\n\ndiff --git a/package.json b/package.json\nindex dcd7bf46..8afffa3c 100644\n--- a/package.json\n+++ b/package.json\n@@ -109,11 +109,11 @@\n     \"@eslint-community/eslint-utils\": \"^4.8.0\",\n     \"@eslint-community/regexpp\": \"^4.12.1\",\n     \"@eslint/config-array\": \"^0.21.1\",\n-    \"@eslint/config-helpers\": \"^0.4.1\",\n+    \"@eslint/config-helpers\": \"^0.4.2\",\n     \"@eslint/core\": \"^0.17.0\",\n     \"@eslint/eslintrc\": \"^3.3.1\",\n     \"@eslint/js\": \"9.38.0\",\n-    \"@eslint/plugin-kit\": \"^0.4.0\",\n+    \"@eslint/plugin-kit\": \"^0.4.1\",\n     \"@humanfs/node\": \"^0.16.6\",\n     \"@humanwhocodes/module-importer\": \"^1.0.1\",\n     \"@humanwhocodes/retry\": \"^0.4.2\",\n@@ -146,7 +146,7 @@\n     \"@babel/core\": \"^7.4.3\",\n     \"@babel/preset-env\": \"^7.4.3\",\n     \"@cypress/webpack-preprocessor\": \"^6.0.2\",\n-    \"@eslint/json\": \"^0.13.0\",\n+    \"@eslint/json\": \"^0.13.2\",\n     \"@trunkio/launcher\": \"^1.3.4\",\n     \"@types/esquery\": \"^1.5.4\",\n     \"@types/node\": \"^22.13.14\","}, {"role": "assistant", "content": "chore: update `@eslint` dependencies (#20265)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/jest-mock/src/index.ts\n\ndiff --git a/packages/jest-mock/src/index.ts b/packages/jest-mock/src/index.ts\nindex 84ac77d9..b04cdca2 100644\n--- a/packages/jest-mock/src/index.ts\n+++ b/packages/jest-mock/src/index.ts\n@@ -628,11 +628,7 @@ export class ModuleMocker {\n     ) {\n       return metadata.value;\n     } else if (metadata.type === 'function') {\n-      const prototype =\n-        (metadata.members &&\n-          metadata.members.prototype &&\n-          metadata.members.prototype.members) ||\n-        {};\n+      const prototype = metadata.members?.prototype?.members ?? {};\n       const prototypeSlots = this._getSlots(prototype);\n       // eslint-disable-next-line @typescript-eslint/no-this-alias\n       const mocker = this;"}, {"role": "assistant", "content": "chore: simplify checks with optional chainging (#15177)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n build/args/all.gn\n\ndiff --git a/build/args/all.gn b/build/args/all.gn\nindex b62e2477..8c5de3ea 100644\n--- a/build/args/all.gn\n+++ b/build/args/all.gn\n@@ -2,7 +2,7 @@ is_electron_build = true\n root_extra_deps = [ \"//electron\" ]\n \n # Registry of NMVs --> https://github.com/nodejs/node/blob/main/doc/abi_version_registry.json\n-node_module_version = 143\n+node_module_version = 145\n \n v8_promise_internal_field_count = 1\n v8_embedder_string = \"-electron.0\""}, {"role": "assistant", "content": "build: update NMV to 145 (#49349)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/runtime/AsyncModuleRuntimeModule.js\n\ndiff --git a/lib/runtime/AsyncModuleRuntimeModule.js b/lib/runtime/AsyncModuleRuntimeModule.js\nindex fb245eeaa..5fd8b6968 100644\n--- a/lib/runtime/AsyncModuleRuntimeModule.js\n+++ b/lib/runtime/AsyncModuleRuntimeModule.js\n@@ -35,30 +35,28 @@ class AsyncModuleRuntimeModule extends HelperRuntimeModule {\n \t\t\t}hasSymbol ? Symbol(\"webpack exports\") : \"${RuntimeGlobals.exports}\";`,\n \t\t\t'var webpackError = hasSymbol ? Symbol(\"webpack error\") : \"__webpack_error__\";',\n \t\t\tdefer\n-\t\t\t\t? `var webpackDone = ${RuntimeGlobals.asyncModuleDoneSymbol} = hasSymbol ? Symbol(\"webpack done\") : \"__webpack_done__\";`\n-\t\t\t\t: \"\",\n-\t\t\tdefer\n-\t\t\t\t? `var webpackDefer = ${RuntimeGlobals.deferredModuleAsyncTransitiveDependenciesSymbol} = hasSymbol ? Symbol(\"webpack defer\") : \"__webpack_defer__\";`\n-\t\t\t\t: \"\",\n-\t\t\tdefer\n-\t\t\t\t? `${RuntimeGlobals.deferredModuleAsyncTransitiveDependencies} = ${runtimeTemplate.basicFunction(\n-\t\t\t\t\t\t\"asyncDeps\",\n-\t\t\t\t\t\t[\n-\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\"var hasUnresolvedAsyncSubgraph = asyncDeps.some((id) => {\",\n-\t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\"var cache = __webpack_module_cache__[id];\",\n-\t\t\t\t\t\t\t\t\t\"return !cache || cache[webpackDone] === false;\"\n-\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\"});\",\n-\t\t\t\t\t\t\t\t\"if (hasUnresolvedAsyncSubgraph) {\",\n+\t\t\t\t? Template.asString([\n+\t\t\t\t\t\t`var webpackDone = ${RuntimeGlobals.asyncModuleDoneSymbol} = hasSymbol ? Symbol(\"webpack done\") : \"__webpack_done__\";`,\n+\t\t\t\t\t\t`var webpackDefer = ${RuntimeGlobals.deferredModuleAsyncTransitiveDependenciesSymbol} = hasSymbol ? Symbol(\"webpack defer\") : \"__webpack_defer__\";`,\n+\t\t\t\t\t\t`${RuntimeGlobals.deferredModuleAsyncTransitiveDependencies} = ${runtimeTemplate.basicFunction(\n+\t\t\t\t\t\t\t\"asyncDeps\",\n+\t\t\t\t\t\t\t[\n \t\t\t\t\t\t\t\tTemplate.indent([\n-\t\t\t\t\t\t\t\t\t\"return ({ then(onFulfilled, onRejected) { return Promise.all(asyncDeps.map(__webpack_require__)).then(onFulfilled, onRejected) } })\"\n-\t\t\t\t\t\t\t\t]),\n-\t\t\t\t\t\t\t\t\"}\"\n-\t\t\t\t\t\t\t])\n-\t\t\t\t\t\t]\n-\t\t\t\t\t)}`\n+\t\t\t\t\t\t\t\t\t\"var hasUnresolvedAsyncSubgraph = asyncDeps.some((id) => {\",\n+\t\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\t\"var cache = __webpack_module_cache__[id];\",\n+\t\t\t\t\t\t\t\t\t\t\"return !cache || cache[webpackDone] === false;\"\n+\t\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\t\"});\",\n+\t\t\t\t\t\t\t\t\t\"if (hasUnresolvedAsyncSubgraph) {\",\n+\t\t\t\t\t\t\t\t\tTemplate.indent([\n+\t\t\t\t\t\t\t\t\t\t\"return ({ then(onFulfilled, onRejected) { return Promise.all(asyncDeps.map(__webpack_require__)).then(onFulfilled, onRejected) } })\"\n+\t\t\t\t\t\t\t\t\t]),\n+\t\t\t\t\t\t\t\t\t\"}\"\n+\t\t\t\t\t\t\t\t])\n+\t\t\t\t\t\t\t]\n+\t\t\t\t\t\t)}`\n+\t\t\t\t\t])\n \t\t\t\t: \"\",\n \t\t\t`var resolveQueue = ${runtimeTemplate.basicFunction(\"queue\", [\n \t\t\t\t\"if(queue && queue.d < 1) {\","}, {"role": "assistant", "content": "refactor: generate less extra spaces in runtime code for defer import (#20082)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commits format: type(scope): description\n\nValid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore\n\nRules:\n- Keep the subject line under 72 characters\n- Start description with lowercase\n- Do not end with a period\n- Be concise and specific", "input": " packages/compiler/src/expression_parser/ast.ts | 32 ++++++++++++++++++++++++--\n 1 file changed, 30 insertions(+), 2 deletions(-)\n\ndiff --git a/packages/compiler/src/expression_parser/ast.ts b/packages/compiler/src/expression_parser/ast.ts\nindex 2f6fcc18..099c4059 100644\n--- a/packages/compiler/src/expression_parser/ast.ts\n+++ b/packages/compiler/src/expression_parser/ast.ts\n@@ -268,11 +268,39 @@ export class Interpolation extends AST {\n   }\n }\n \n+type AssignmentOperation = '=' | '+=' | '-=' | '*=' | '/=' | '%=' | '**=' | '&&=' | '||=' | '??=';\n+type BinaryOperation =\n+  | AssignmentOperation\n+  // Logical\n+  | '&&'\n+  | '||'\n+  | '??'\n+  // Equality\n+  | '=='\n+  | '!='\n+  | '==='\n+  | '!=='\n+  // Relational\n+  | '<'\n+  | '>'\n+  | '<='\n+  | '>='\n+  | 'in'\n+  // Additive\n+  | '+'\n+  | '-'\n+  // Multiplicative\n+  | '*'\n+  | '%'\n+  | '/'\n+  // Exponentiation\n+  | '**';\n+\n export class Binary extends AST {\n   constructor(\n     span: ParseSpan,\n     sourceSpan: AbsoluteSourceSpan,\n-    public operation: string,\n+    public operation: BinaryOperation,\n     public left: AST,\n     public right: AST,\n   ) {\n@@ -349,7 +377,7 @@ export class Unary extends Binary {\n     sourceSpan: AbsoluteSourceSpan,\n     public operator: string,\n     public expr: AST,\n-    binaryOp: string,\n+    binaryOp: BinaryOperation,\n     binaryLeft: AST,\n     binaryRight: AST,\n   ) {", "output": "refactor(compiler): tighten `Binary.operation` type", "metadata": {"id": "angular-07a08ab9", "repository": "angular", "commit_hash": "07a08ab9f8a209172c2f4a59169e5fde64e032ea", "author": "fisker <lionkay@gmail.com>", "type": "refactor", "scope": "compiler", "quality_score": 90}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/contribute/pull-requests.md\n\ndiff --git a/docs/src/contribute/pull-requests.md b/docs/src/contribute/pull-requests.md\nindex 6b5f395b..9a1556cb 100644\n--- a/docs/src/contribute/pull-requests.md\n+++ b/docs/src/contribute/pull-requests.md\n@@ -11,15 +11,20 @@ If you want to contribute to an ESLint repo, please use a GitHub pull request. T\n \n ## Getting Started\n \n-If you'd like to work on a pull request and you've never submitted code before, follow these steps:\n+The ESLint project uses issues to track our work, so it's important to ensure that a proper issue is open:\n \n-1. Set up a [development environment](./development-environment).\n-1. If you want to implement a breaking change or a change to the core, ensure there's an issue that describes what you're doing and the issue has been accepted. You can create a new issue or just indicate you're [working on an existing issue](./work-on-issue). Bug fixes, documentation changes, and other pull requests do not require an issue.\n+- **If there is an existing issue,** follow the instructions on [work on issues](work-on-issue).\n+- **If there isn't an existing issue,** then open one to describe the change you want to make. Use the appropriate issue template.\n+    - **Exceptions:** Small changes, such as bug fixes, documentation updates, or package upgrades don't require an issue. Make sure the pull request description explains clearly what it is you're doing and why.\n \n After that, you're ready to start working on code.\n \n ## Working with Code\n \n+::: important\n+If you'd like to work on a pull request and you've never submitted code before, make sure to set up a [development environment](./development-environment).\n+:::\n+\n The process of submitting a pull request is fairly straightforward and generally follows the same pattern each time:\n \n 1. [Create a new branch](#step1)."}, {"role": "assistant", "content": "docs: Clarify when to open an issue for a PR (#19974)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " docs/en/docs/release-notes.md | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/docs/en/docs/release-notes.md b/docs/en/docs/release-notes.md\nindex 584137f..1380d7f 100644\n--- a/docs/en/docs/release-notes.md\n+++ b/docs/en/docs/release-notes.md\n@@ -14,6 +14,7 @@ hide:\n \n ### Internal\n \n+* 🔨 Update LLM translation script to guide reviewers to change the prompt. PR [#14614](https://github.com/fastapi/fastapi/pull/14614) by [@tiangolo](https://github.com/tiangolo).\n * 👷 Do not run translations on cron while finishing updating existing languages. PR [#14613](https://github.com/fastapi/fastapi/pull/14613) by [@tiangolo](https://github.com/tiangolo).\n * 🔥 Remove test variants for Pydantic v1 in test_request_params. PR [#14612](https://github.com/fastapi/fastapi/pull/14612) by [@tiangolo](https://github.com/tiangolo).\n * 🔥 Remove Pydantic v1  specific test variants. PR [#14611](https://github.com/fastapi/fastapi/pull/14611) by [@tiangolo](https://github.com/tiangolo).", "output": "docs: update release notes", "metadata": {"id": "fastapi-47391ea8", "repository": "fastapi", "commit_hash": "47391ea8fbdfcedf6ff3f4a56666ccf928ca10c2"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/jest-circus/src/utils.ts\n\ndiff --git a/packages/jest-circus/src/utils.ts b/packages/jest-circus/src/utils.ts\nindex c259aad3..389c8bed 100644\n--- a/packages/jest-circus/src/utils.ts\n+++ b/packages/jest-circus/src/utils.ts\n@@ -301,20 +301,13 @@ export const callAsyncCircusFn = (\n     // Otherwise this test is synchronous, and if it didn't throw it means\n     // it passed.\n     resolve();\n-  })\n-    .then(() => {\n-      completed = true;\n-      // If timeout is not cleared/unrefed the node process won't exit until\n-      // it's resolved.\n-      timeoutID.unref?.();\n-      clearTimeout(timeoutID);\n-    })\n-    .catch(error => {\n-      completed = true;\n-      timeoutID.unref?.();\n-      clearTimeout(timeoutID);\n-      throw error;\n-    });\n+  }).finally(() => {\n+    completed = true;\n+    // If timeout is not cleared/unrefed the node process won't exit until\n+    // it's resolved.\n+    timeoutID.unref?.();\n+    clearTimeout(timeoutID);\n+  });\n };\n \n export const getTestDuration = (test: Circus.TestEntry): number | null => {"}, {"role": "assistant", "content": "fix: simplify promise finally action (#15199)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/scorecards.yml\n\ndiff --git a/.github/workflows/scorecards.yml b/.github/workflows/scorecards.yml\nindex e129c5c3..1e006fb0 100644\n--- a/.github/workflows/scorecards.yml\n+++ b/.github/workflows/scorecards.yml\n@@ -28,7 +28,7 @@ jobs:\n \n       # This is a pre-submit / pre-release.\n       - name: \"Run analysis\"\n-        uses: ossf/scorecard-action@05b42c624433fc40578a4040d5cf5e36ddca8cde # v2.4.2\n+        uses: ossf/scorecard-action@4eaacf0543bb3f2c246792bd56e8cdeffafb205a # v2.4.3\n         with:\n           results_file: results.sarif\n           results_format: sarif"}, {"role": "assistant", "content": "build(deps): bump ossf/scorecard-action from 2.4.2 to 2.4.3 (#48551)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n script/lib/util.py\n\ndiff --git a/script/lib/util.py b/script/lib/util.py\nindex 38bb70cc..a65321b8 100644\n--- a/script/lib/util.py\n+++ b/script/lib/util.py\n@@ -70,17 +70,17 @@ def make_zip(zip_file_path, files, dirs):\n   safe_unlink(zip_file_path)\n   if sys.platform == 'darwin':\n     allfiles = files + dirs\n-    execute(['zip', '-r', '-y', zip_file_path] + allfiles)\n+    execute(['zip', '-r', '-y', '-9', zip_file_path] + allfiles)\n   else:\n     with zipfile.ZipFile(zip_file_path, \"w\",\n                          zipfile.ZIP_DEFLATED,\n                          allowZip64=True) as zip_file:\n       for filename in files:\n-        zip_file.write(filename, filename)\n+        zip_file.write(filename, filename, compress_type=zipfile.ZIP_DEFLATED, compresslevel=9)\n       for dirname in dirs:\n         for root, _, filenames in os.walk(dirname):\n           for f in filenames:\n-            zip_file.write(os.path.join(root, f))\n+            zip_file.write(os.path.join(root, f), compress_type=zipfile.ZIP_DEFLATED, compresslevel=9)\n       zip_file.close()"}, {"role": "assistant", "content": "build: apply additional compression on upload (#48766)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/eslint/eslint.js\n\ndiff --git a/lib/eslint/eslint.js b/lib/eslint/eslint.js\nindex 3d4031e6..67aebfac 100644\n--- a/lib/eslint/eslint.js\n+++ b/lib/eslint/eslint.js\n@@ -547,7 +547,7 @@ function validateOptionCloneability(options) {\n \t\t})\n \t\t.sort();\n \tconst error = new TypeError(\n-\t\t`The ${uncloneableOptionKeys.length === 1 ? \"option\" : \"options\"} ${new Intl.ListFormat(\"en-US\").format(uncloneableOptionKeys.map(key => `\"${key}\"`))} cannot be cloned. When concurrency is enabled, all options must be cloneable. Remove uncloneable options or use an options module.`,\n+\t\t`The ${uncloneableOptionKeys.length === 1 ? \"option\" : \"options\"} ${new Intl.ListFormat(\"en-US\").format(uncloneableOptionKeys.map(key => `\"${key}\"`))} cannot be cloned. When concurrency is enabled, all options must be cloneable values (JSON values). Remove uncloneable options or use an options module.`,\n \t);\n \terror.code = \"ESLINT_UNCLONEABLE_OPTIONS\";\n \tthrow error;\ndiff --git a/tests/lib/eslint/eslint.js b/tests/lib/eslint/eslint.js\nindex 8ce0d37b..e1617f62 100644\n--- a/tests/lib/eslint/eslint.js\n+++ b/tests/lib/eslint/eslint.js\n@@ -426,7 +426,7 @@ describe(\"ESLint\", () => {\n \t\t\t\t\t\tconstructor: TypeError,\n \t\t\t\t\t\tcode: \"ESLINT_UNCLONEABLE_OPTIONS\",\n \t\t\t\t\t\tmessage:\n-\t\t\t\t\t\t\t'The options \"baseConfig\", \"fix\", and \"plugins\" cannot be cloned. When concurrency is enabled, all options must be cloneable. Remove uncloneable options or use an options module.',\n+\t\t\t\t\t\t\t'The options \"baseConfig\", \"fix\", and \"plugins\" cannot be cloned. When concurrency is enabled, all options must be cloneable values (JSON values). Remove uncloneable options or use an options module.',\n \t\t\t\t\t},\n \t\t\t\t);\n \t\t\t});\n@@ -445,7 +445,7 @@ describe(\"ESLint\", () => {\n \t\t\t\t\t\tconstructor: TypeError,\n \t\t\t\t\t\tcode: \"ESLINT_UNCLONEABLE_OPTIONS\",\n \t\t\t\t\t\tmessage:\n-\t\t\t\t\t\t\t'The option \"ruleFilter\" cannot be cloned. When concurrency is enabled, all options must be cloneable. Remove uncloneable options or use an options module.',\n+\t\t\t\t\t\t\t'The option \"ruleFilter\" cannot be cloned. When concurrency is enabled, all options must be cloneable values (JSON values). Remove uncloneable options or use an options module.',\n \t\t\t\t\t},\n \t\t\t\t);\n \t\t\t});\n@@ -9778,13 +9778,13 @@ describe(\"ESLint\", () => {\n \t\t\t\t\tconst optionsSrc = `\n \t\t\t\t\timport assert from \"node:assert\";\n \t\t\t\t\timport { isMainThread } from \"node:worker_threads\";\n-\t\t\t\t\t\n+\n \t\t\t\t\tif (!isMainThread) {\n \t\t\t\t\t\tif (process.env.ESLINT_TEST_ENV !== \"test\") {\n \t\t\t\t\t\t\tassert.fail(\"Environment variable ESLINT_TEST_ENV is not set as expected in worker threads.\");\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\t\n+\n \t\t\t\t\texport default {\n \t\t\t\t\t\tconcurrency: 2,\n \t\t\t\t\t\tcwd: ${JSON.stringify(fixtureDir)},\n@@ -9803,11 +9803,11 @@ describe(\"ESLint\", () => {\n \t\t\t\tit(\"should propagate environment variables from worker threads to the controlling thread\", async () => {\n \t\t\t\t\tconst optionsSrc = `\n \t\t\t\t\timport { isMainThread } from \"node:worker_threads\";\n-\t\t\t\t\t\n+\n \t\t\t\t\tif (!isMainThread) {\n \t\t\t\t\t\tprocess.env.ESLINT_TEST_ENV = \"test\";\n \t\t\t\t\t}\n-\t\t\t\t\t\n+\n \t\t\t\t\texport default {\n \t\t\t\t\t\tconcurrency: 2,\n \t\t\t\t\t\tcwd: ${JSON.stringify(fixtureDir)},"}, {"role": "assistant", "content": "fix: update uncloneable options error message (#20059)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " src/cmd/compile/internal/ssa/_gen/AMD64.rules      |  7 ++\n src/cmd/compile/internal/ssa/_gen/genericOps.go    |  8 +++\n src/cmd/compile/internal/ssa/_gen/simdAMD64.rules  |  6 --\n .../compile/internal/ssa/_gen/simdgenericOps.go    |  6 --\n src/cmd/compile/internal/ssa/opGen.go              | 78 ++++++++++----------\n src/cmd/compile/internal/ssa/rewriteAMD64.go       | 84 ++++++++++------------\n src/cmd/compile/internal/ssagen/intrinsics.go      |  6 ++\n src/cmd/compile/internal/ssagen/simdintrinsics.go  |  6 --\n .../_gen/simdgen/ops/Compares/categories.yaml      |  5 --\n .../archsimd/_gen/simdgen/ops/Compares/go.yaml     |  4 +-\n src/simd/archsimd/extra_amd64.go                   | 36 ++++++++++\n src/simd/archsimd/ops_amd64.go                     | 32 ---------\n 12 files changed, 131 insertions(+), 147 deletions(-)\n\ndiff --git a/src/cmd/compile/internal/ssa/_gen/AMD64.rules b/src/cmd/compile/internal/ssa/_gen/AMD64.rules\nindex 38ca44f7..9c541868 100644\n--- a/src/cmd/compile/internal/ssa/_gen/AMD64.rules\n+++ b/src/cmd/compile/internal/ssa/_gen/AMD64.rules\n@@ -1730,6 +1730,13 @@\n // Misc\n (IsZeroVec x) => (SETEQ (VPTEST x x))\n \n+(IsNaNFloat32x4  x) => (VCMPPS128 [3] x x)\n+(IsNaNFloat32x8  x) => (VCMPPS256 [3] x x)\n+(IsNaNFloat32x16 x) => (VPMOVMToVec32x16 (VCMPPS512 [3] x x))\n+(IsNaNFloat64x2  x) => (VCMPPD128 [3] x x)\n+(IsNaNFloat64x4  x) => (VCMPPD256 [3] x x)\n+(IsNaNFloat64x8  x) => (VPMOVMToVec64x8 (VCMPPD512 [3] x x))\n+\n // SIMD vector K-masked loads and stores\n \n (LoadMasked64 <t> ptr mask mem) && t.Size() == 64 => (VPMASK64load512 ptr (VPMOVVec64x8ToM  <types.TypeMask> mask) mem)\ndiff --git a/src/cmd/compile/internal/ssa/_gen/genericOps.go b/src/cmd/compile/internal/ssa/_gen/genericOps.go\nindex 8637133e..85bde1aa 100644\n--- a/src/cmd/compile/internal/ssa/_gen/genericOps.go\n+++ b/src/cmd/compile/internal/ssa/_gen/genericOps.go\n@@ -715,6 +715,14 @@ var genericOps = []opData{\n \n \t// Returns true if arg0 is all zero.\n \t{name: \"IsZeroVec\", argLength: 1},\n+\n+\t// Returns a mask indicating whether arg0's elements are NaN.\n+\t{name: \"IsNaNFloat32x4\", argLength: 1},\n+\t{name: \"IsNaNFloat32x8\", argLength: 1},\n+\t{name: \"IsNaNFloat32x16\", argLength: 1},\n+\t{name: \"IsNaNFloat64x2\", argLength: 1},\n+\t{name: \"IsNaNFloat64x4\", argLength: 1},\n+\t{name: \"IsNaNFloat64x8\", argLength: 1},\n }\n \n //     kind          controls          successors   implicit exit\ndiff --git a/src/cmd/compile/internal/ssa/_gen/simdAMD64.rules b/src/cmd/compile/internal/ssa/_gen/simdAMD64.rules\nindex 8a5b70da..5c83f39a 100644\n--- a/src/cmd/compile/internal/ssa/_gen/simdAMD64.rules\n+++ b/src/cmd/compile/internal/ssa/_gen/simdAMD64.rules\n@@ -559,12 +559,6 @@\n (InterleaveLoGroupedUint32x16 ...) => (VPUNPCKLDQ512 ...)\n (InterleaveLoGroupedUint64x4 ...) => (VPUNPCKLQDQ256 ...)\n (InterleaveLoGroupedUint64x8 ...) => (VPUNPCKLQDQ512 ...)\n-(IsNanFloat32x4 x y) => (VCMPPS128 [3] x y)\n-(IsNanFloat32x8 x y) => (VCMPPS256 [3] x y)\n-(IsNanFloat32x16 x y) => (VPMOVMToVec32x16 (VCMPPS512 [3] x y))\n-(IsNanFloat64x2 x y) => (VCMPPD128 [3] x y)\n-(IsNanFloat64x4 x y) => (VCMPPD256 [3] x y)\n-(IsNanFloat64x8 x y) => (VPMOVMToVec64x8 (VCMPPD512 [3] x y))\n (LeadingZerosInt32x4 ...) => (VPLZCNTD128 ...)\n (LeadingZerosInt32x8 ...) => (VPLZCNTD256 ...)\n (LeadingZerosInt32x16 ...) => (VPLZCNTD512 ...)\ndiff --git a/src/cmd/compile/internal/ssa/_gen/simdgenericOps.go b/src/cmd/compile/internal/ssa/_gen/simdgenericOps.go\nindex af1007cd..889ab0d8 100644\n--- a/src/cmd/compile/internal/ssa/_gen/simdgenericOps.go\n+++ b/src/cmd/compile/internal/ssa/_gen/simdgenericOps.go\n@@ -519,12 +519,6 @@ func simdGenericOps() []opData {\n \t\t{name: \"InterleaveLoUint16x8\", argLength: 2, commutative: false},\n \t\t{name: \"InterleaveLoUint32x4\", argLength: 2, commutative: false},\n \t\t{name: \"InterleaveLoUint64x2\", argLength: 2, commutative: false},\n-\t\t{name: \"IsNanFloat32x4\", argLength: 2, commutative: true},\n-\t\t{name: \"IsNanFloat32x8\", argLength: 2, commutative: true},\n-\t\t{name: \"IsNanFloat32x16\", argLength: 2, commutative: true},\n-\t\t{name: \"IsNanFloat64x2\", argLength: 2, commutative: true},\n-\t\t{name: \"IsNanFloat64x4\", argLength: 2, commutative: true},\n-\t\t{name: \"IsNanFloat64x8\", argLength: 2, commutative: true},\n \t\t{name: \"LeadingZerosInt32x4\", argLength: 1, commutative: false},\n \t\t{name: \"LeadingZerosInt32x8\", argLength: 1, commutative: false},\n \t\t{name: \"LeadingZerosInt32x16\", argLength: 1, commutative: false},\ndiff --git a/src/cmd/compile/internal/ssa/opGen.go b/src/cmd/compile/internal/ssa/opGen.go\nindex d2ba15f7..abaf7911 100644\n--- a/src/cmd/compile/internal/ssa/opGen.go\n+++ b/src/cmd/compile/internal/ssa/opGen.go\n@@ -6158,6 +6158,12 @@ const (\n \tOpCvtMask64x4to8\n \tOpCvtMask64x8to8\n \tOpIsZeroVec\n+\tOpIsNaNFloat32x4\n+\tOpIsNaNFloat32x8\n+\tOpIsNaNFloat32x16\n+\tOpIsNaNFloat64x2\n+\tOpIsNaNFloat64x4\n+\tOpIsNaNFloat64x8\n \tOpAESDecryptLastRoundUint8x16\n \tOpAESDecryptLastRoundUint8x32\n \tOpAESDecryptLastRoundUint8x64\n@@ -6673,12 +6679,6 @@ const (\n \tOpInterleaveLoUint16x8\n \tOpInterleaveLoUint32x4\n \tOpInterleaveLoUint64x2\n-\tOpIsNanFloat32x4\n-\tOpIsNanFloat32x8\n-\tOpIsNanFloat32x16\n-\tOpIsNanFloat64x2\n-\tOpIsNanFloat64x4\n-\tOpIsNanFloat64x8\n \tOpLeadingZerosInt32x4\n \tOpLeadingZerosInt32x8\n \tOpLeadingZerosInt32x16\n@@ -88993,6 +88993,36 @@ var opcodeTable = [...]opInfo{\n \t\targLen:  1,\n \t\tgeneric: true,\n \t},\n+\t{\n+\t\tname:    \"IsNaNFloat32x4\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n+\t{\n+\t\tname:    \"IsNaNFloat32x8\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n+\t{\n+\t\tname:    \"IsNaNFloat32x16\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n+\t{\n+\t\tname:    \"IsNaNFloat64x2\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n+\t{\n+\t\tname:    \"IsNaNFloat64x4\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n+\t{\n+\t\tname:    \"IsNaNFloat64x8\",\n+\t\targLen:  1,\n+\t\tgeneric: true,\n+\t},\n \t{\n \t\tname:    \"AESDecryptLastRoundUint8x16\",\n \t\targLen:  2,\n@@ -91670,42 +91700,6 @@ var opcodeTable = [...]opInfo{\n \t\targLen:  2,\n \t\tgeneric: true,\n \t},\n-\t{\n-\t\tname:        \"IsNanFloat32x4\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n-\t{\n-\t\tname:        \"IsNanFloat32x8\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n-\t{\n-\t\tname:        \"IsNanFloat32x16\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n-\t{\n-\t\tname:        \"IsNanFloat64x2\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n-\t{\n-\t\tname:        \"IsNanFloat64x4\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n-\t{\n-\t\tname:        \"IsNanFloat64x8\",\n-\t\targLen:      2,\n-\t\tcommutative: true,\n-\t\tgeneric:     true,\n-\t},\n \t{\n \t\tname:    \"LeadingZerosInt32x4\",\n \t\targLen:  1,\ndiff --git a/src/cmd/compile/internal/ssa/rewriteAMD64.go b/src/cmd/compile/internal/ssa/rewriteAMD64.go\nindex 0c044100..0b2bb74c 100644\n--- a/src/cmd/compile/internal/ssa/rewriteAMD64.go\n+++ b/src/cmd/compile/internal/ssa/rewriteAMD64.go\n@@ -3773,18 +3773,18 @@ func rewriteValueAMD64(v *Value) bool {\n \t\treturn true\n \tcase OpIsInBounds:\n \t\treturn rewriteValueAMD64_OpIsInBounds(v)\n-\tcase OpIsNanFloat32x16:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat32x16(v)\n-\tcase OpIsNanFloat32x4:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat32x4(v)\n-\tcase OpIsNanFloat32x8:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat32x8(v)\n-\tcase OpIsNanFloat64x2:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat64x2(v)\n-\tcase OpIsNanFloat64x4:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat64x4(v)\n-\tcase OpIsNanFloat64x8:\n-\t\treturn rewriteValueAMD64_OpIsNanFloat64x8(v)\n+\tcase OpIsNaNFloat32x16:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat32x16(v)\n+\tcase OpIsNaNFloat32x4:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat32x4(v)\n+\tcase OpIsNaNFloat32x8:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat32x8(v)\n+\tcase OpIsNaNFloat64x2:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat64x2(v)\n+\tcase OpIsNaNFloat64x4:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat64x4(v)\n+\tcase OpIsNaNFloat64x8:\n+\t\treturn rewriteValueAMD64_OpIsNaNFloat64x8(v)\n \tcase OpIsNonNil:\n \t\treturn rewriteValueAMD64_OpIsNonNil(v)\n \tcase OpIsSliceInBounds:\n@@ -70957,94 +70957,82 @@ func rewriteValueAMD64_OpIsInBounds(v *Value) bool {\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat32x16(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat32x16(v *Value) bool {\n \tv_0 := v.Args[0]\n \tb := v.Block\n \ttyp := &b.Func.Config.Types\n-\t// match: (IsNanFloat32x16 x y)\n-\t// result: (VPMOVMToVec32x16 (VCMPPS512 [3] x y))\n+\t// match: (IsNaNFloat32x16 x)\n+\t// result: (VPMOVMToVec32x16 (VCMPPS512 [3] x x))\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VPMOVMToVec32x16)\n \t\tv0 := b.NewValue0(v.Pos, OpAMD64VCMPPS512, typ.Mask)\n \t\tv0.AuxInt = uint8ToAuxInt(3)\n-\t\tv0.AddArg2(x, y)\n+\t\tv0.AddArg2(x, x)\n \t\tv.AddArg(v0)\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat32x4(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat32x4(v *Value) bool {\n \tv_0 := v.Args[0]\n-\t// match: (IsNanFloat32x4 x y)\n-\t// result: (VCMPPS128 [3] x y)\n+\t// match: (IsNaNFloat32x4 x)\n+\t// result: (VCMPPS128 [3] x x)\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VCMPPS128)\n \t\tv.AuxInt = uint8ToAuxInt(3)\n-\t\tv.AddArg2(x, y)\n+\t\tv.AddArg2(x, x)\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat32x8(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat32x8(v *Value) bool {\n \tv_0 := v.Args[0]\n-\t// match: (IsNanFloat32x8 x y)\n-\t// result: (VCMPPS256 [3] x y)\n+\t// match: (IsNaNFloat32x8 x)\n+\t// result: (VCMPPS256 [3] x x)\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VCMPPS256)\n \t\tv.AuxInt = uint8ToAuxInt(3)\n-\t\tv.AddArg2(x, y)\n+\t\tv.AddArg2(x, x)\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat64x2(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat64x2(v *Value) bool {\n \tv_0 := v.Args[0]\n-\t// match: (IsNanFloat64x2 x y)\n-\t// result: (VCMPPD128 [3] x y)\n+\t// match: (IsNaNFloat64x2 x)\n+\t// result: (VCMPPD128 [3] x x)\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VCMPPD128)\n \t\tv.AuxInt = uint8ToAuxInt(3)\n-\t\tv.AddArg2(x, y)\n+\t\tv.AddArg2(x, x)\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat64x4(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat64x4(v *Value) bool {\n \tv_0 := v.Args[0]\n-\t// match: (IsNanFloat64x4 x y)\n-\t// result: (VCMPPD256 [3] x y)\n+\t// match: (IsNaNFloat64x4 x)\n+\t// result: (VCMPPD256 [3] x x)\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VCMPPD256)\n \t\tv.AuxInt = uint8ToAuxInt(3)\n-\t\tv.AddArg2(x, y)\n+\t\tv.AddArg2(x, x)\n \t\treturn true\n \t}\n }\n-func rewriteValueAMD64_OpIsNanFloat64x8(v *Value) bool {\n-\tv_1 := v.Args[1]\n+func rewriteValueAMD64_OpIsNaNFloat64x8(v *Value) bool {\n \tv_0 := v.Args[0]\n \tb := v.Block\n \ttyp := &b.Func.Config.Types\n-\t// match: (IsNanFloat64x8 x y)\n-\t// result: (VPMOVMToVec64x8 (VCMPPD512 [3] x y))\n+\t// match: (IsNaNFloat64x8 x)\n+\t// result: (VPMOVMToVec64x8 (VCMPPD512 [3] x x))\n \tfor {\n \t\tx := v_0\n-\t\ty := v_1\n \t\tv.reset(OpAMD64VPMOVMToVec64x8)\n \t\tv0 := b.NewValue0(v.Pos, OpAMD64VCMPPD512, typ.Mask)\n \t\tv0.AuxInt = uint8ToAuxInt(3)\n-\t\tv0.AddArg2(x, y)\n+\t\tv0.AddArg2(x, x)\n \t\tv.AddArg(v0)\n \t\treturn true\n \t}\ndiff --git a/src/cmd/compile/internal/ssagen/intrinsics.go b/src/cmd/compile/internal/ssagen/intrinsics.go\nindex 4425c561..e2eebd78 100644\n--- a/src/cmd/compile/internal/ssagen/intrinsics.go\n+++ b/src/cmd/compile/internal/ssagen/intrinsics.go\n@@ -1667,6 +1667,12 @@ func initIntrinsics(cfg *intrinsicBuildConfig) {\n \t\taddF(simdPackage, \"Uint16x16.IsZero\", opLen1(ssa.OpIsZeroVec, types.Types[types.TBOOL]), sys.AMD64)\n \t\taddF(simdPackage, \"Uint32x8.IsZero\", opLen1(ssa.OpIsZeroVec, types.Types[types.TBOOL]), sys.AMD64)\n \t\taddF(simdPackage, \"Uint64x4.IsZero\", opLen1(ssa.OpIsZeroVec, types.Types[types.TBOOL]), sys.AMD64)\n+\t\taddF(simdPackage, \"Float32x4.IsNaN\", opLen1(ssa.OpIsNaNFloat32x4, types.TypeVec128), sys.AMD64)\n+\t\taddF(simdPackage, \"Float32x8.IsNaN\", opLen1(ssa.OpIsNaNFloat32x8, types.TypeVec256), sys.AMD64)\n+\t\taddF(simdPackage, \"Float32x16.IsNaN\", opLen1(ssa.OpIsNaNFloat32x16, types.TypeVec512), sys.AMD64)\n+\t\taddF(simdPackage, \"Float64x2.IsNaN\", opLen1(ssa.OpIsNaNFloat64x2, types.TypeVec128), sys.AMD64)\n+\t\taddF(simdPackage, \"Float64x4.IsNaN\", opLen1(ssa.OpIsNaNFloat64x4, types.TypeVec256), sys.AMD64)\n+\t\taddF(simdPackage, \"Float64x8.IsNaN\", opLen1(ssa.OpIsNaNFloat64x8, types.TypeVec512), sys.AMD64)\n \n \t\t// sfp4 is intrinsic-if-constant, but otherwise it's complicated enough to just implement in Go.\n \t\tsfp4 := func(method string, hwop ssa.Op, vectype *types.Type) {\ndiff --git a/src/cmd/compile/internal/ssagen/simdintrinsics.go b/src/cmd/compile/internal/ssagen/simdintrinsics.go\nindex 5a957612..4ad0c603 100644\n--- a/src/cmd/compile/internal/ssagen/simdintrinsics.go\n+++ b/src/cmd/compile/internal/ssagen/simdintrinsics.go\n@@ -571,12 +571,6 @@ func simdIntrinsics(addF func(pkg, fn string, b intrinsicBuilder, archFamilies .\n \taddF(simdPackage, \"Uint32x16.InterleaveLoGrouped\", opLen2(ssa.OpInterleaveLoGroupedUint32x16, types.TypeVec512), sys.AMD64)\n \taddF(simdPackage, \"Uint64x4.InterleaveLoGrouped\", opLen2(ssa.OpInterleaveLoGroupedUint64x4, types.TypeVec256), sys.AMD64)\n \taddF(simdPackage, \"Uint64x8.InterleaveLoGrouped\", opLen2(ssa.OpInterleaveLoGroupedUint64x8, types.TypeVec512), sys.AMD64)\n-\taddF(simdPackage, \"Float32x4.IsNan\", opLen2(ssa.OpIsNanFloat32x4, types.TypeVec128), sys.AMD64)\n-\taddF(simdPackage, \"Float32x8.IsNan\", opLen2(ssa.OpIsNanFloat32x8, types.TypeVec256), sys.AMD64)\n-\taddF(simdPackage, \"Float32x16.IsNan\", opLen2(ssa.OpIsNanFloat32x16, types.TypeVec512), sys.AMD64)\n-\taddF(simdPackage, \"Float64x2.IsNan\", opLen2(ssa.OpIsNanFloat64x2, types.TypeVec128), sys.AMD64)\n-\taddF(simdPackage, \"Float64x4.IsNan\", opLen2(ssa.OpIsNanFloat64x4, types.TypeVec256), sys.AMD64)\n-\taddF(simdPackage, \"Float64x8.IsNan\", opLen2(ssa.OpIsNanFloat64x8, types.TypeVec512), sys.AMD64)\n \taddF(simdPackage, \"Int32x4.LeadingZeros\", opLen1(ssa.OpLeadingZerosInt32x4, types.TypeVec128), sys.AMD64)\n \taddF(simdPackage, \"Int32x8.LeadingZeros\", opLen1(ssa.OpLeadingZerosInt32x8, types.TypeVec256), sys.AMD64)\n \taddF(simdPackage, \"Int32x16.LeadingZeros\", opLen1(ssa.OpLeadingZerosInt32x16, types.TypeVec512), sys.AMD64)\ndiff --git a/src/simd/archsimd/_gen/simdgen/ops/Compares/categories.yaml b/src/simd/archsimd/_gen/simdgen/ops/Compares/categories.yaml\nindex eb1d8161..97ee5875 100644\n--- a/src/simd/archsimd/_gen/simdgen/ops/Compares/categories.yaml\n+++ b/src/simd/archsimd/_gen/simdgen/ops/Compares/categories.yaml\n@@ -21,11 +21,6 @@\n   commutative: false\n   documentation: !string |-\n     // NAME returns a mask whose elements indicate whether x <= y.\n-- go: IsNan # For float only.\n-  constImm: 3\n-  commutative: true\n-  documentation: !string |-\n-    // NAME checks if elements are NaN. Use as x.IsNan(x).\n - go: NotEqual\n   constImm: 4\n   commutative: true\ndiff --git a/src/simd/archsimd/_gen/simdgen/ops/Compares/go.yaml b/src/simd/archsimd/_gen/simdgen/ops/Compares/go.yaml\nindex 3f6c8a45..6dbfb573 100644\n--- a/src/simd/archsimd/_gen/simdgen/ops/Compares/go.yaml\n+++ b/src/simd/archsimd/_gen/simdgen/ops/Compares/go.yaml\n@@ -121,7 +121,7 @@\n   - class: mask\n \n # Floats\n-- go: Equal|Greater|Less|LessEqual|GreaterEqual|NotEqual|IsNan\n+- go: (Equal|Greater|Less|LessEqual|GreaterEqual|NotEqual)\n   regexpTag: \"compares\"\n   asm: \"VCMPP[SD]\"\n   in:\n@@ -135,7 +135,7 @@\n   - go: $t\n     overwriteBase: int\n     overwriteClass: mask\n-- go: (Equal|Greater|Less|LessEqual|GreaterEqual|NotEqual|IsNan)\n+- go: (Equal|Greater|Less|LessEqual|GreaterEqual|NotEqual)\n   regexpTag: \"compares\"\n   asm: \"VCMPP[SD]\"\n   in:\ndiff --git a/src/simd/archsimd/extra_amd64.go b/src/simd/archsimd/extra_amd64.go\nindex cd5a3230..b0dba6d2 100644\n--- a/src/simd/archsimd/extra_amd64.go\n+++ b/src/simd/archsimd/extra_amd64.go\n@@ -143,3 +143,39 @@ func (x Uint64x2) IsZero() bool\n //\n // Asm: VPTEST, CPU Feature: AVX\n func (x Uint64x4) IsZero() bool\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPS, CPU Feature: AVX\n+func (x Float32x4) IsNaN() Mask32x4\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPS, CPU Feature: AVX\n+func (x Float32x8) IsNaN() Mask32x8\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPS, CPU Feature: AVX512\n+func (x Float32x16) IsNaN() Mask32x16\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPD, CPU Feature: AVX\n+func (x Float64x2) IsNaN() Mask64x2\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPD, CPU Feature: AVX\n+func (x Float64x4) IsNaN() Mask64x4\n+\n+// IsNaN returns a mask whose elements indicate whether the corresponding\n+// elements of x are NaN.\n+//\n+// Asm: VCMPPD, CPU Feature: AVX512\n+func (x Float64x8) IsNaN() Mask64x8\ndiff --git a/src/simd/archsimd/ops_amd64.go b/src/simd/archsimd/ops_amd64.go\nindex 95d417b3..eba340c7 100644\n--- a/src/simd/archsimd/ops_amd64.go\n+++ b/src/simd/archsimd/ops_amd64.go\n@@ -3446,38 +3446,6 @@ func (x Uint64x4) InterleaveLoGrouped(y Uint64x4) Uint64x4\n // Asm: VPUNPCKLQDQ, CPU Feature: AVX512\n func (x Uint64x8) InterleaveLoGrouped(y Uint64x8) Uint64x8\n \n-/* IsNan */\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPS, CPU Feature: AVX\n-func (x Float32x4) IsNan(y Float32x4) Mask32x4\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPS, CPU Feature: AVX\n-func (x Float32x8) IsNan(y Float32x8) Mask32x8\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPS, CPU Feature: AVX512\n-func (x Float32x16) IsNan(y Float32x16) Mask32x16\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPD, CPU Feature: AVX\n-func (x Float64x2) IsNan(y Float64x2) Mask64x2\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPD, CPU Feature: AVX\n-func (x Float64x4) IsNan(y Float64x4) Mask64x4\n-\n-// IsNan checks if elements are NaN. Use as x.IsNan(x).\n-//\n-// Asm: VCMPPD, CPU Feature: AVX512\n-func (x Float64x8) IsNan(y Float64x8) Mask64x8\n-\n /* LeadingZeros */\n \n // LeadingZeros counts the leading zeros of each element in x.", "output": "refactor(simd): change IsNaN from binary to unary operation", "metadata": {"id": "go-13440fb5", "repository": "go", "commit_hash": "13440fb51831bfde5804430596d2045a64fd2209"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/exec.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/options.json\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/input.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/output.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/numeric/exec.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/options.json\n packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/exec.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/input.js\n packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/options.json\n packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/output.js\n\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/exec.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint-exec/exec.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/exec.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint-exec/exec.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/options.json b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint-exec/options.json\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint-exec/options.json\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint-exec/options.json\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/input.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint/input.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/input.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint/input.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/output.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint/output.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/bigint/output.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/bigint/output.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/numeric/exec.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/numeric/exec.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/numeric/exec.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/numeric/exec.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/options.json b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/options.json\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/removal/options.json\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/removal/options.json\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/exec.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/exec.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/exec.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/exec.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/input.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/input.js\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/input.js\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/input.js\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/options.json b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/options.json\nsimilarity index 100%\nrename from packages/babel-plugin-transform-numeric-separator/test/fixtures/used-with-transform-es2015-literals/options.json\nrename to packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/options.json\ndiff --git a/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/output.js b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/output.js\nnew file mode 100644\nindex 000000000..7197e0323\n--- /dev/null\n+++ b/packages/babel-plugin-transform-numeric-separator/test/fixtures/numeric-separator/used-with-transform-literals/output.js\n@@ -0,0 +1,4 @@\n+1000;\n+0xA0B0C0;\n+41349;\n+438;"}, {"role": "assistant", "content": "fix: incorrect numeric-seperator tests (#16381)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/archaeologist-dig.yml\n\ndiff --git a/.github/workflows/archaeologist-dig.yml b/.github/workflows/archaeologist-dig.yml\nindex 4be92462..9684a742 100644\n--- a/.github/workflows/archaeologist-dig.yml\n+++ b/.github/workflows/archaeologist-dig.yml\n@@ -13,7 +13,7 @@ jobs:\n         with:\n           fetch-depth: 0\n       - name: Setup Node.js/npm\n-        uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020\n+        uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n         with:\n           node-version: 20.19.x\n       - name: Setting Up Dig Site\ndiff --git a/.github/workflows/audit-branch-ci.yml b/.github/workflows/audit-branch-ci.yml\nindex 05c37bad..62d0ccbb 100644\n--- a/.github/workflows/audit-branch-ci.yml\n+++ b/.github/workflows/audit-branch-ci.yml\n@@ -16,7 +16,7 @@ jobs:\n       contents: read\n     steps:\n       - name: Setup Node.js\n-        uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020 # v4.4.0\n+        uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444 # v5.0.0\n         with:\n           node-version: 22.17.x\n       - run: npm install @actions/cache@4.0.3 @electron/fiddle-core@2.0.1\ndiff --git a/.github/workflows/pipeline-segment-electron-build.yml b/.github/workflows/pipeline-segment-electron-build.yml\nindex b634e2b6..f0f0e767 100644\n--- a/.github/workflows/pipeline-segment-electron-build.yml\n+++ b/.github/workflows/pipeline-segment-electron-build.yml\n@@ -113,7 +113,7 @@ jobs:\n       run: df -h\n     - name: Setup Node.js/npm\n       if: ${{ inputs.target-platform == 'macos' }}\n-      uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020\n+      uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n       with:\n         node-version: 20.19.x\n         cache: yarn\ndiff --git a/.github/workflows/pipeline-segment-electron-test.yml b/.github/workflows/pipeline-segment-electron-test.yml\nindex 7f4417f3..ceeaabd1 100644\n--- a/.github/workflows/pipeline-segment-electron-test.yml\n+++ b/.github/workflows/pipeline-segment-electron-test.yml\n@@ -70,7 +70,7 @@ jobs:\n         cp $(which node) /mnt/runner-externals/node20/bin/\n     - name: Setup Node.js/npm\n       if: ${{ inputs.target-platform == 'win' }}\n-      uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020\n+      uses: actions/setup-node@a0853c24544627f65ddf259abe73b1d18a591444\n       with:\n         node-version: 20.19.x\n     - name: Add TCC permissions on macOS"}, {"role": "assistant", "content": "build(deps): bump actions/setup-node from 4.4.0 to 5.0.0 (#48282)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .eslintrc.cjs\n\ndiff --git a/.eslintrc.cjs b/.eslintrc.cjs\nindex 92431eb6..fcf72c93 100644\n--- a/.eslintrc.cjs\n+++ b/.eslintrc.cjs\n@@ -230,6 +230,7 @@ module.exports = {\n         'no-undef': 'off',\n         'no-unused-vars': 'off',\n         'sort-keys': 'off',\n+        'unicorn/no-static-only-class': 'off',\n       },\n     },\n     // demonstration of matchers usage\n@@ -413,6 +414,19 @@ module.exports = {\n         'no-unused-vars': 'off',\n       },\n     },\n+    {\n+      files: 'e2e/native-esm/wasm-bindgen/index_bg.js',\n+      rules: {\n+        'unicorn/prefer-code-point': 'off',\n+        'unicorn/prefer-optional-catch-binding': 'off',\n+      },\n+    },\n+    {\n+      files: 'packages/jest-mock/src/__tests__/**/*',\n+      rules: {\n+        'unicorn/no-static-only-class': 'off',\n+      },\n+    },\n   ],\n   parser: '@typescript-eslint/parser',\n   parserOptions: {\n@@ -541,9 +555,7 @@ module.exports = {\n     'no-multi-str': 'error',\n     'no-multiple-empty-lines': 'off',\n     'no-native-reassign': ['error', {exceptions: ['Map', 'Set']}],\n-    'no-negated-condition': 'off',\n     'no-negated-in-lhs': 'error',\n-    'no-nested-ternary': 'off',\n     'no-new': 'warn',\n     'no-new-func': 'error',\n     'no-new-object': 'warn',\n@@ -626,108 +638,85 @@ module.exports = {\n     'wrap-regex': 'off',\n     yoda: 'off',\n \n-    // TODO: turn most of these rules on at some point\n+    // doesn't work without ESModuleInterop\n+    'unicorn/import-style': 'off',\n+    // we're a CJS project\n+    'unicorn/prefer-module': 'off',\n+\n+    // enforced by `@typescript-eslint/no-this-alias` already\n+    'unicorn/no-this-assignment': 'off',\n+\n+    // nah\n+    'unicorn/consistent-destructuring': 'off',\n+    'unicorn/no-nested-ternary': 'off',\n+    'unicorn/no-lonely-if': 'off',\n+    'unicorn/no-null': 'off',\n+    'unicorn/no-process-exit': 'off',\n+    'unicorn/prefer-event-target': 'off',\n+    'unicorn/prefer-switch': 'off',\n+    'unicorn/prefer-ternary': 'off',\n+    'unicorn/switch-case-braces': 'off',\n+\n+    // TODO: enable for `.mjs` files\n+    'unicorn/prefer-top-level-await': 'off',\n+\n+    // TODO: decide whether or not we want these\n+    'unicorn/filename-case': 'off',\n+    'unicorn/no-array-callback-reference': 'off',\n+    'unicorn/no-array-reduce': 'off',\n+    'unicorn/prefer-reflect-apply': 'off',\n+\n+    // TODO: turn on at some point\n     'unicorn/better-regex': 'off',\n     'unicorn/catch-error-name': 'off',\n-    'unicorn/consistent-destructuring': 'off',\n     'unicorn/consistent-function-scoping': 'off',\n-    'unicorn/custom-error-definition': 'off',\n-    'unicorn/empty-brace-spaces': 'off',\n     'unicorn/error-message': 'off',\n     'unicorn/escape-case': 'off',\n-    'unicorn/expiring-todo-comments': 'off',\n-    'unicorn/filename-case': 'off',\n-    'unicorn/import-style': 'off',\n     'unicorn/new-for-builtins': 'off',\n-    'unicorn/no-abusive-eslint-disable': 'off',\n-    'unicorn/no-array-callback-reference': 'off',\n     'unicorn/no-array-method-this-argument': 'off',\n     'unicorn/no-array-push-push': 'off',\n-    'unicorn/no-array-reduce': 'off',\n     'unicorn/no-await-expression-member': 'off',\n     'unicorn/no-console-spaces': 'off',\n-    'unicorn/no-document-cookie': 'off',\n     'unicorn/no-empty-file': 'off',\n     'unicorn/no-for-loop': 'off',\n     'unicorn/no-hex-escape': 'off',\n     'unicorn/no-instanceof-array': 'off',\n-    'unicorn/no-invalid-remove-event-listener': 'off',\n-    'unicorn/no-keyword-prefix': 'off',\n-    'unicorn/no-lonely-if': 'off',\n-    'unicorn/no-nested-ternary': 'off',\n     'unicorn/no-new-array': 'off',\n-    'unicorn/no-new-buffer': 'off',\n-    'unicorn/no-null': 'off',\n     'unicorn/no-object-as-default-parameter': 'off',\n-    'unicorn/no-process-exit': 'off',\n-    'unicorn/no-static-only-class': 'off',\n     'unicorn/no-thenable': 'off',\n-    'unicorn/no-this-assignment': 'off',\n     'unicorn/no-typeof-undefined': 'off',\n-    'unicorn/no-unnecessary-await': 'off',\n-    'unicorn/no-unnecessary-polyfills': 'off',\n-    'unicorn/no-unreadable-array-destructuring': 'off',\n-    'unicorn/no-unreadable-iife': 'off',\n-    'unicorn/no-unused-properties': 'off',\n-    'unicorn/no-useless-fallback-in-spread': 'off',\n-    'unicorn/no-useless-length-check': 'off',\n     'unicorn/no-useless-promise-resolve-reject': 'off',\n-    'unicorn/no-useless-spread': 'off',\n-    'unicorn/no-useless-switch-case': 'off',\n     'unicorn/no-useless-undefined': 'off',\n-    'unicorn/no-zero-fractions': 'off',\n     'unicorn/number-literal-case': 'off',\n     'unicorn/prefer-add-event-listener': 'off',\n-    'unicorn/prefer-array-find': 'off',\n     'unicorn/prefer-array-flat': 'off',\n     'unicorn/prefer-array-flat-map': 'off',\n     'unicorn/prefer-array-index-of': 'off',\n     'unicorn/prefer-array-some': 'off',\n     'unicorn/prefer-at': 'off',\n-    'unicorn/prefer-blob-reading-methods': 'off',\n-    'unicorn/prefer-code-point': 'off',\n     'unicorn/prefer-date-now': 'off',\n     'unicorn/prefer-dom-node-append': 'off',\n-    'unicorn/prefer-dom-node-dataset': 'off',\n     'unicorn/prefer-dom-node-remove': 'off',\n     'unicorn/prefer-dom-node-text-content': 'off',\n-    'unicorn/prefer-event-target': 'off',\n     'unicorn/prefer-export-from': 'off',\n-    'unicorn/prefer-json-parse-buffer': 'off',\n-    'unicorn/prefer-keyboard-event-key': 'off',\n     'unicorn/prefer-logical-operator-over-ternary': 'off',\n     'unicorn/prefer-math-trunc': 'off',\n-    'unicorn/prefer-modern-dom-apis': 'off',\n-    'unicorn/prefer-modern-math-apis': 'off',\n-    'unicorn/prefer-module': 'off',\n     'unicorn/prefer-native-coercion-functions': 'off',\n-    'unicorn/prefer-negative-index': 'off',\n     'unicorn/prefer-node-protocol': 'off',\n     'unicorn/prefer-number-properties': 'off',\n     'unicorn/prefer-object-from-entries': 'off',\n     'unicorn/prefer-optional-catch-binding': 'off',\n     'unicorn/prefer-prototype-methods': 'off',\n     'unicorn/prefer-query-selector': 'off',\n-    'unicorn/prefer-reflect-apply': 'off',\n     'unicorn/prefer-regexp-test': 'off',\n     'unicorn/prefer-set-has': 'off',\n-    'unicorn/prefer-set-size': 'off',\n     'unicorn/prefer-spread': 'off',\n     'unicorn/prefer-string-replace-all': 'off',\n     'unicorn/prefer-string-slice': 'off',\n     'unicorn/prefer-string-starts-ends-with': 'off',\n     'unicorn/prefer-string-trim-start-end': 'off',\n-    'unicorn/prefer-switch': 'off',\n-    'unicorn/prefer-ternary': 'off',\n-    'unicorn/prefer-top-level-await': 'off',\n     'unicorn/prefer-type-error': 'off',\n     'unicorn/prevent-abbreviations': 'off',\n-    'unicorn/relative-url-style': 'off',\n-    'unicorn/require-array-join-separator': 'off',\n-    'unicorn/require-number-to-fixed-digits-argument': 'off',\n-    'unicorn/require-post-message-target-origin': 'off',\n-    'unicorn/string-content': 'off',\n-    'unicorn/switch-case-braces': 'off',\n     'unicorn/text-encoding-identifier-case': 'off',\n     'unicorn/throw-new-error': 'off',\n   },"}, {"role": "assistant", "content": "chore: enable ESLint rules that have no violations (#14796)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n e2e/__tests__/nativeEsm.test.ts\n\ndiff --git a/e2e/__tests__/nativeEsm.test.ts b/e2e/__tests__/nativeEsm.test.ts\nindex c4913072..5b7d2397 100644\n--- a/e2e/__tests__/nativeEsm.test.ts\n+++ b/e2e/__tests__/nativeEsm.test.ts\n@@ -7,6 +7,7 @@\n \n import {createRequire} from 'module';\n import {resolve} from 'path';\n+import {isNativeError} from 'util/types';\n import {onNodeVersions} from '@jest/test-utils';\n import {extractSummary, runYarnInstall} from '../Utils';\n import runJest, {getConfig} from '../runJest';\n@@ -28,7 +29,14 @@ beforeAll(() => {\n     const ivm = require('isolated-vm');\n     isolatedVmInstalled = ivm != null;\n   } catch (error) {\n-    console.warn('`isolated-vm` is not installed, skipping tests', error);\n+    if (\n+      isNativeError(error) &&\n+      (error as NodeJS.ErrnoException).code === 'MODULE_NOT_FOUND'\n+    ) {\n+      console.warn('`isolated-vm` is not installed, skipping its test');\n+    } else {\n+      throw error;\n+    }\n   }\n });"}, {"role": "assistant", "content": "chore: do not log `isolated-vm` error in tests (#15166)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n shell/browser/native_window_views.cc\n\ndiff --git a/shell/browser/native_window_views.cc b/shell/browser/native_window_views.cc\nindex 6621158a..0aee88c7 100644\n--- a/shell/browser/native_window_views.cc\n+++ b/shell/browser/native_window_views.cc\n@@ -266,7 +266,7 @@ NativeWindowViews::NativeWindowViews(const gin_helper::Dictionary& options,\n   params.remove_standard_frame = !has_frame() || has_client_frame();\n \n   // If a client frame, we need to draw our own shadows.\n-  if (IsTranslucent() || has_client_frame())\n+  if (transparent() || has_client_frame())\n     params.opacity = InitParams::WindowOpacity::kTranslucent;\n \n   // The given window is most likely not rectangular since it is translucent and\n@@ -300,7 +300,7 @@ NativeWindowViews::NativeWindowViews(const gin_helper::Dictionary& options,\n \n   widget()->Init(std::move(params));\n   widget()->SetNativeWindowProperty(kNativeWindowKey.c_str(), this);\n-  SetCanResize(resizable_);\n+  widget()->OnSizeConstraintsChanged();\n \n   const bool fullscreen = options.ValueOrDefault(options::kFullscreen, false);\n \n@@ -354,11 +354,11 @@ NativeWindowViews::NativeWindowViews(const gin_helper::Dictionary& options,\n     // frameless.\n \n     DWORD frame_style = WS_CAPTION | WS_OVERLAPPED;\n-    if (resizable_)\n+    if (CanResize())\n       frame_style |= WS_THICKFRAME;\n     if (minimizable_)\n       frame_style |= WS_MINIMIZEBOX;\n-    if (maximizable_)\n+    if (maximizable_ && CanResize())\n       frame_style |= WS_MAXIMIZEBOX;\n \n     // We should not show a frame for transparent window.\n@@ -866,7 +866,7 @@ void NativeWindowViews::SetBounds(const gfx::Rect& bounds, bool animate) {\n #if BUILDFLAG(IS_WIN) || BUILDFLAG(IS_LINUX)\n   // On Linux and Windows the minimum and maximum size should be updated with\n   // window size when window is not resizable.\n-  if (!resizable_) {\n+  if (!CanResize()) {\n     SetMaximumSize(bounds.size());\n     SetMinimumSize(bounds.size());\n   }\n@@ -947,26 +947,21 @@ extensions::SizeConstraints NativeWindowViews::GetContentSizeConstraints()\n \n void NativeWindowViews::SetResizable(bool resizable) {\n   if (resizable != resizable_) {\n+    resizable_ = resizable;\n     // On Linux there is no \"resizable\" property of a window, we have to set\n     // both the minimum and maximum size to the window size to achieve it.\n     if (resizable) {\n       SetContentSizeConstraints(old_size_constraints_);\n-      SetMaximizable(maximizable_);\n     } else {\n       old_size_constraints_ = GetContentSizeConstraints();\n-      resizable_ = false;\n       gfx::Size content_size = GetContentSize();\n       SetContentSizeConstraints(\n           extensions::SizeConstraints(content_size, content_size));\n     }\n-  }\n-\n-  resizable_ = resizable;\n-  SetCanResize(resizable_);\n-\n #if BUILDFLAG(IS_WIN)\n-  UpdateThickFrame();\n+    UpdateThickFrame();\n #endif\n+  }\n }\n \n bool NativeWindowViews::MoveAbove(const std::string& sourceId) {\n@@ -1011,12 +1006,20 @@ void NativeWindowViews::MoveTop() {\n #endif\n }\n \n+bool NativeWindowViews::CanResize() const {\n+#if BUILDFLAG(IS_WIN)\n+  return resizable_ && thick_frame_;\n+#else\n+  return resizable_;\n+#endif\n+}\n+\n bool NativeWindowViews::IsResizable() const {\n #if BUILDFLAG(IS_WIN)\n   if (has_frame())\n     return ::GetWindowLong(GetAcceleratedWidget(), GWL_STYLE) & WS_THICKFRAME;\n #endif\n-  return resizable_;\n+  return CanResize();\n }\n \n void NativeWindowViews::SetAspectRatio(double aspect_ratio,\n@@ -1817,7 +1820,7 @@ views::View* NativeWindowViews::GetInitiallyFocusedView() {\n }\n \n bool NativeWindowViews::CanMaximize() const {\n-  return resizable_ && maximizable_;\n+  return CanResize() && maximizable_;\n }\n \n bool NativeWindowViews::CanMinimize() const {\ndiff --git a/shell/browser/native_window_views.h b/shell/browser/native_window_views.h\nindex be0cca1c..e2a6d04f 100644\n--- a/shell/browser/native_window_views.h\n+++ b/shell/browser/native_window_views.h\n@@ -89,6 +89,7 @@ class NativeWindowViews : public NativeWindow,\n   bool IsResizable() const override;\n   void SetAspectRatio(double aspect_ratio,\n                       const gfx::Size& extra_size) override;\n+  bool CanResize() const override;\n   void SetMovable(bool movable) override;\n   bool IsMovable() const override;\n   void SetMinimizable(bool minimizable) override;\ndiff --git a/spec/api-browser-window-spec.ts b/spec/api-browser-window-spec.ts\nindex 58529ac1..84784a7c 100755\n--- a/spec/api-browser-window-spec.ts\n+++ b/spec/api-browser-window-spec.ts\n@@ -5455,7 +5455,7 @@ describe('BrowserWindow module', () => {\n           thickFrame: true,\n           transparent: true\n         });\n-        expect(w.isResizable()).to.be.true('resizable');\n+        expect(w.isResizable()).to.be.false('resizable');\n         w.maximize();\n         expect(w.isMaximized()).to.be.true('maximized');\n         const bounds = w.getBounds();"}, {"role": "assistant", "content": "fix: broken transparent window styles on resizable change (#48378)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/rules/no-irregular-whitespace.md\n\ndiff --git a/docs/src/rules/no-irregular-whitespace.md b/docs/src/rules/no-irregular-whitespace.md\nindex 8b1972d1..1b318294 100644\n--- a/docs/src/rules/no-irregular-whitespace.md\n+++ b/docs/src/rules/no-irregular-whitespace.md\n@@ -38,11 +38,10 @@ This rule disallows the following characters except where the options allow:\n ```text\n \\u000B - Line Tabulation (\\v) - <VT>\n \\u000C - Form Feed (\\f) - <FF>\n-\\u00A0 - No-Break Space - <NBSP>\n \\u0085 - Next Line - <NEL>\n+\\u00A0 - No-Break Space - <NBSP>\n \\u1680 - Ogham Space Mark - <OGSP>\n \\u180E - Mongolian Vowel Separator - <MVS>\n-\\ufeff - Zero Width No-Break Space - <BOM>\n \\u2000 - En Quad - <NQSP>\n \\u2001 - Em Quad - <MQSP>\n \\u2002 - En Space - <ENSP>\n@@ -58,8 +57,9 @@ This rule disallows the following characters except where the options allow:\n \\u2028 - Line Separator - <LS> - <LSEP>\n \\u2029 - Paragraph Separator - <PS> - <PSEP>\n \\u202F - Narrow No-Break Space - <NNBSP>\n-\\u205f - Medium Mathematical Space - <MMSP>\n+\\u205F - Medium Mathematical Space - <MMSP>\n \\u3000 - Ideographic Space - <IDSP>\n+\\uFEFF - Zero Width No-Break Space - <BOM>\n ```\n \n ## Options"}, {"role": "assistant", "content": "docs: correct formatting in `no-irregular-whitespace` rule documentation (#20203)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-parser/src/tokenizer/types.ts\n\ndiff --git a/packages/babel-parser/src/tokenizer/types.ts b/packages/babel-parser/src/tokenizer/types.ts\nindex baeada8f6..26a0c05de 100644\n--- a/packages/babel-parser/src/tokenizer/types.ts\n+++ b/packages/babel-parser/src/tokenizer/types.ts\n@@ -335,7 +335,7 @@ export const tt = {\n   name: createToken(\"name\", { startsExpr }),\n \n   // placeholder plugin\n-  placeholder: createToken(\"%%\", { startsExpr: true }),\n+  placeholder: createToken(\"%%\", { startsExpr }),\n   // end: isIdentifier\n \n   string: createToken(\"string\", { startsExpr }),\n@@ -350,8 +350,8 @@ export const tt = {\n \n   // jsx plugin\n   jsxName: createToken(\"jsxName\"),\n-  jsxText: createToken(\"jsxText\", { beforeExpr: true }),\n-  jsxTagStart: createToken(\"jsxTagStart\", { startsExpr: true }),\n+  jsxText: createToken(\"jsxText\", { beforeExpr }),\n+  jsxTagStart: createToken(\"jsxTagStart\", { startsExpr }),\n   jsxTagEnd: createToken(\"jsxTagEnd\"),\n } as const;"}, {"role": "assistant", "content": "chore(token): use const for flag definitions (#17396)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/01-app/03-api-reference/04-functions/revalidateTag.mdx\n\ndiff --git a/docs/01-app/03-api-reference/04-functions/revalidateTag.mdx b/docs/01-app/03-api-reference/04-functions/revalidateTag.mdx\nindex 0fcbcc0f2..e886cc111 100644\n--- a/docs/01-app/03-api-reference/04-functions/revalidateTag.mdx\n+++ b/docs/01-app/03-api-reference/04-functions/revalidateTag.mdx\n@@ -25,12 +25,12 @@ The revalidation behavior depends on whether you provide the second argument:\n \n ## Parameters\n \n-```tsx\n-revalidateTag(tag: string, profile?: string): void;\n+```ts\n+revalidateTag(tag: string, profile?: string | { expire?: number }): void;\n ```\n \n - `tag`: A string representing the cache tag associated with the data you want to revalidate. Must not exceed 256 characters. This value is case-sensitive.\n-- `profile`: A string that specifies the revalidation behavior. The recommended value is `\"max\"` which provides stale-while-revalidate semantics. For advanced usage, this can be configured to any cache life profile that your application defines.\n+- `profile`: A string that specifies the revalidation behavior. The recommended value is `\"max\"` which provides stale-while-revalidate semantics, or any of the other default or custom profiles defined in [`cacheLife`](/docs/app/api-reference/config/next-config-js/cacheLife). Alternatively, you can pass an object with an `expire` property for custom expiration behavior.\n \n Tags must first be assigned to cached data. You can do this in two ways:\n \n@@ -64,6 +64,8 @@ async function getData() {\n \n ## Examples\n \n+The following examples demonstrate how to use `revalidateTag` in different contexts. In both cases, we're using `profile=\"max\"` to mark data as stale and use stale-while-revalidate semantics, which is the recommended approach for most use cases.\n+\n ### Server Action\n \n ```ts filename=\"app/actions.ts\" switcher\n@@ -128,3 +130,5 @@ export async function GET(request) {\n   })\n }\n ```\n+\n+> **Good to know**: For webhooks or third-party services that need immediate expiration, you can pass `{ expire: 0 }` as the second argument: `revalidateTag(tag, { expire: 0 })`. This pattern is necessary when external systems call your Route Handlers and require data to expire immediately. For all other cases, it's recommended to use [`updateTag`](/docs/app/api-reference/functions/updateTag) in Server Actions for immediate updates instead."}, {"role": "assistant", "content": "docs: revalidateTag immediate expiration in Route Handlers (#85223)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n README.md\n\ndiff --git a/README.md b/README.md\nindex 59759b93..cf8697fc 100644\n--- a/README.md\n+++ b/README.md\n@@ -343,7 +343,7 @@ to get your logo on our READMEs and [website](https://eslint.org/sponsors).\n <p><a href=\"https://automattic.com\"><img src=\"https://images.opencollective.com/automattic/d0ef3e1/logo.png\" alt=\"Automattic\" height=\"128\"></a> <a href=\"https://www.airbnb.com/\"><img src=\"https://images.opencollective.com/airbnb/d327d66/logo.png\" alt=\"Airbnb\" height=\"128\"></a></p><h3>Gold Sponsors</h3>\n <p><a href=\"https://qlty.sh/\"><img src=\"https://images.opencollective.com/qltysh/33d157d/logo.png\" alt=\"Qlty Software\" height=\"96\"></a> <a href=\"https://shopify.engineering/\"><img src=\"https://avatars.githubusercontent.com/u/8085\" alt=\"Shopify\" height=\"96\"></a></p><h3>Silver Sponsors</h3>\n <p><a href=\"https://vite.dev/\"><img src=\"https://images.opencollective.com/vite/e6d15e1/logo.png\" alt=\"Vite\" height=\"64\"></a> <a href=\"https://liftoff.io/\"><img src=\"https://images.opencollective.com/liftoff/2d6c3b6/logo.png\" alt=\"Liftoff\" height=\"64\"></a> <a href=\"https://americanexpress.io\"><img src=\"https://avatars.githubusercontent.com/u/3853301\" alt=\"American Express\" height=\"64\"></a> <a href=\"https://stackblitz.com\"><img src=\"https://avatars.githubusercontent.com/u/28635252\" alt=\"StackBlitz\" height=\"64\"></a></p><h3>Bronze Sponsors</h3>\n-<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://syntax.fm\"><img src=\"https://github.com/syntaxfm.png\" alt=\"Syntax\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n+<p><a href=\"https://cybozu.co.jp/\"><img src=\"https://images.opencollective.com/cybozu/933e46d/logo.png\" alt=\"Cybozu\" height=\"32\"></a> <a href=\"https://syntax.fm\"><img src=\"https://github.com/syntaxfm.png\" alt=\"Syntax\" height=\"32\"></a> <a href=\"https://www.n-ix.com/\"><img src=\"https://images.opencollective.com/n-ix-ltd/575a7a5/logo.png\" alt=\"N-iX Ltd\" height=\"32\"></a> <a href=\"https://icons8.com/\"><img src=\"https://images.opencollective.com/icons8/7fa1641/logo.png\" alt=\"Icons8\" height=\"32\"></a> <a href=\"https://discord.com\"><img src=\"https://images.opencollective.com/discordapp/f9645d9/logo.png\" alt=\"Discord\" height=\"32\"></a> <a href=\"https://www.gitbook.com\"><img src=\"https://avatars.githubusercontent.com/u/7111340\" alt=\"GitBook\" height=\"32\"></a> <a href=\"https://nx.dev\"><img src=\"https://avatars.githubusercontent.com/u/23692104\" alt=\"Nx\" height=\"32\"></a> <a href=\"https://opensource.mercedes-benz.com/\"><img src=\"https://avatars.githubusercontent.com/u/34240465\" alt=\"Mercedes-Benz Group\" height=\"32\"></a> <a href=\"https://herocoders.com\"><img src=\"https://avatars.githubusercontent.com/u/37549774\" alt=\"HeroCoders\" height=\"32\"></a> <a href=\"https://www.lambdatest.com\"><img src=\"https://avatars.githubusercontent.com/u/171592363\" alt=\"LambdaTest\" height=\"32\"></a></p>\n <h3>Technology Sponsors</h3>\n Technology sponsors allow us to use their products and services for free as part of a contribution to the open source ecosystem and our work.\n <p><a href=\"https://netlify.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/netlify-icon.svg\" alt=\"Netlify\" height=\"32\"></a> <a href=\"https://algolia.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/algolia-icon.svg\" alt=\"Algolia\" height=\"32\"></a> <a href=\"https://1password.com\"><img src=\"https://raw.githubusercontent.com/eslint/eslint.org/main/src/assets/images/techsponsors/1password-icon.svg\" alt=\"1Password\" height=\"32\"></a></p>"}, {"role": "assistant", "content": "docs: Update README"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/annotate_pr.yaml\n\ndiff --git a/.github/workflows/annotate_pr.yaml b/.github/workflows/annotate_pr.yaml\nindex 53d124ab..2d0ea2a1 100644\n--- a/.github/workflows/annotate_pr.yaml\n+++ b/.github/workflows/annotate_pr.yaml\n@@ -20,6 +20,6 @@ jobs:\n               uses: actions/checkout@v6\n \n             - name: Trunk Check\n-              uses: trunk-io/trunk-action@v1\n+              uses: trunk-io/trunk-action@75699af9e26881e564e9d832ef7dc3af25ec031b # v1\n               with:\n                   post-annotations: true # only for fork PRs\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex e2154508..bb9276ec 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -25,14 +25,14 @@ jobs:\n               run: npm install\n \n             - name: Lint Files (eslint)\n-              uses: trunk-io/trunk-action@v1\n+              uses: trunk-io/trunk-action@75699af9e26881e564e9d832ef7dc3af25ec031b # v1\n               with:\n                   # Run on everything except the docs folder.\n                   arguments: --ignore=docs/** --filter=eslint\n                   check-mode: all\n \n             - name: Lint Files (other)\n-              uses: trunk-io/trunk-action@v1\n+              uses: trunk-io/trunk-action@75699af9e26881e564e9d832ef7dc3af25ec031b # v1\n               with:\n                   # Run on everything except the docs folder.\n                   arguments: --ignore=docs/** --filter=-eslint\n@@ -44,14 +44,14 @@ jobs:\n               run: node Makefile checkLicenses\n \n             - name: Lint Docs Files (eslint)\n-              uses: trunk-io/trunk-action@v1\n+              uses: trunk-io/trunk-action@75699af9e26881e564e9d832ef7dc3af25ec031b # v1\n               with:\n                   # Run only on the docs folder.\n                   arguments: --ignore=** --ignore=!docs/** --filter=eslint\n                   check-mode: all\n \n             - name: Lint Docs Files (other)\n-              uses: trunk-io/trunk-action@v1\n+              uses: trunk-io/trunk-action@75699af9e26881e564e9d832ef7dc3af25ec031b # v1\n               with:\n                   # Run only on the docs folder.\n                   arguments: --ignore=** --ignore=!docs/** --filter=-eslint\n@@ -160,7 +160,7 @@ jobs:\n         steps:\n             - uses: actions/checkout@v6\n \n-            - uses: pnpm/action-setup@v4\n+            - uses: pnpm/action-setup@41ff72655975bd51cab0327fa583b6e92b6d3061 # v4\n               with:\n                   version: latest\n \ndiff --git a/.github/workflows/types-integration.yml b/.github/workflows/types-integration.yml\nindex a197dab0..d5c2b0ad 100644\n--- a/.github/workflows/types-integration.yml\n+++ b/.github/workflows/types-integration.yml\n@@ -130,7 +130,7 @@ jobs:\n               run: npm install\n \n             - name: Update package.json eslint-visitor-keys\n-              uses: restackio/update-json-file-action@2.1\n+              uses: restackio/update-json-file-action@6f50afee9a03a456a30cd574123db793319f7544 # 2.1\n               with:\n                   file: eslint-js/packages/eslint-visitor-keys/package.json\n                   fields: '{\"scripts.prepare\": \"npm run build:cjs\"}'"}, {"role": "assistant", "content": "chore: pin dependencies (#20397)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " src/os/exec/exec.go | 6 ++++--\n 1 file changed, 4 insertions(+), 2 deletions(-)\n\ndiff --git a/src/os/exec/exec.go b/src/os/exec/exec.go\nindex e0c509cb..aa7a6be7 100644\n--- a/src/os/exec/exec.go\n+++ b/src/os/exec/exec.go\n@@ -357,7 +357,9 @@ type Cmd struct {\n \tcachedLookExtensions struct{ in, out string }\n \n \t// startCalled records that Start was attempted, regardless of outcome.\n-\tstartCalled atomic.Bool\n+\t// (Until go.dev/issue/77075 is resolved, we use atomic.SwapInt32,\n+\t// not atomic.Bool.Swap, to avoid triggering the copylocks vet check.)\n+\tstartCalled int32\n }\n \n // A ctxResult reports the result of watching the Context associated with a\n@@ -640,7 +642,7 @@ func (c *Cmd) Start() error {\n \t// Check for doubled Start calls before we defer failure cleanup. If the prior\n \t// call to Start succeeded, we don't want to spuriously close its pipes.\n \t// It is an error to call Start twice even if the first call did not create a process.\n-\tif c.startCalled.Swap(true) {\n+\tif atomic.SwapInt32(&c.startCalled, 1) != 0 {\n \t\treturn errors.New(\"exec: already started\")\n \t}\n ", "output": "fix(exec): use atomic.SwapInt32 to avoid copylocks vet check", "metadata": {"id": "go-d1d0fc7a", "repository": "go", "commit_hash": "d1d0fc7a97539206e33f04bac935f6450597137c"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-plugin-transform-typescript/src/index.ts\n\ndiff --git a/packages/babel-plugin-transform-typescript/src/index.ts b/packages/babel-plugin-transform-typescript/src/index.ts\nindex 4fbf83a16..b8e0b1b3d 100644\n--- a/packages/babel-plugin-transform-typescript/src/index.ts\n+++ b/packages/babel-plugin-transform-typescript/src/index.ts\n@@ -348,7 +348,7 @@ export default declare((api, opts: Options) => {\n                 }\n               }\n \n-              if (isAllSpecifiersElided()) {\n+              if (isAllSpecifiersElided() && !onlyRemoveTypeImports) {\n                 stmt.remove();\n               } else {\n                 for (const importPath of importsToRemove) {\ndiff --git a/packages/babel-plugin-transform-typescript/test/fixtures/imports/only-remove-type-imports/output.mjs b/packages/babel-plugin-transform-typescript/test/fixtures/imports/only-remove-type-imports/output.mjs\nindex 78a426b35..169883383 100644\n--- a/packages/babel-plugin-transform-typescript/test/fixtures/imports/only-remove-type-imports/output.mjs\n+++ b/packages/babel-plugin-transform-typescript/test/fixtures/imports/only-remove-type-imports/output.mjs\n@@ -5,5 +5,6 @@ import d, { d2 } from \"d\";\n import e, { e3 as e4 } from \"e\";\n import \"f\";\n import \"g\";\n+import \"k\";\n import { L2 } from \"l\";\n ;\ndiff --git a/packages/babel-plugin-transform-typescript/test/fixtures/imports/type-only-import-specifier-4/output.mjs b/packages/babel-plugin-transform-typescript/test/fixtures/imports/type-only-import-specifier-4/output.mjs\nindex e69de29bb..856f26b34 100644\n--- a/packages/babel-plugin-transform-typescript/test/fixtures/imports/type-only-import-specifier-4/output.mjs\n+++ b/packages/babel-plugin-transform-typescript/test/fixtures/imports/type-only-import-specifier-4/output.mjs\n@@ -0,0 +1 @@\n+import \"x\";"}, {"role": "assistant", "content": "fix: Preserve `import {type T} from 'x'` when `onlyRemoveTypeImports:true` (#15349)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .../src/CompilerError.ts                           |  4 +-\n .../src/HIR/Environment.ts                         | 10 +++\n .../src/Validation/ValidateNoSetStateInEffects.ts  | 72 +++++++++++-----\n ...state-in-effect-verbose-derived-event.expect.md | 74 +++++++++++++++++\n ...id-set-state-in-effect-verbose-derived-event.js | 18 ++++\n ...-state-in-effect-verbose-force-update.expect.md | 97 ++++++++++++++++++++++\n ...lid-set-state-in-effect-verbose-force-update.js | 28 +++++++\n ...e-in-effect-verbose-non-local-derived.expect.md | 68 +++++++++++++++\n ...et-state-in-effect-verbose-non-local-derived.js | 15 ++++\n 9 files changed, 365 insertions(+), 21 deletions(-)\n\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/CompilerError.ts b/compiler/packages/babel-plugin-react-compiler/src/CompilerError.ts\nindex a8869fd..a61967e 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/CompilerError.ts\n+++ b/compiler/packages/babel-plugin-react-compiler/src/CompilerError.ts\n@@ -869,7 +869,9 @@ function getRuleForCategoryImpl(category: ErrorCategory): LintRule {\n         severity: ErrorSeverity.Error,\n         name: 'set-state-in-effect',\n         description:\n-          'Validates against calling setState synchronously in an effect, which can lead to re-renders that degrade performance',\n+          'Validates against calling setState synchronously in an effect. ' +\n+          'This can indicate non-local derived data, a derived event pattern, or ' +\n+          'improper external data synchronization.',\n         preset: LintRulePreset.Recommended,\n       };\n     }\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts b/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\nindex 87737f0..05105ae 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\n+++ b/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\n@@ -700,6 +700,16 @@ export const EnvironmentConfigSchema = z.object({\n    */\n   enableAllowSetStateFromRefsInEffects: z.boolean().default(true),\n \n+  /**\n+   * When enabled, provides verbose error messages for setState calls within effects,\n+   * presenting multiple possible fixes to the user/agent since we cannot statically\n+   * determine which specific use-case applies:\n+   * 1. Non-local derived data - requires restructuring state ownership\n+   * 2. Derived event pattern - detecting when a prop changes\n+   * 3. Force update / external sync - should use useSyncExternalStore\n+   */\n+  enableVerboseNoSetStateInEffect: z.boolean().default(false),\n+\n   /**\n    * Enables inference of event handler types for JSX props on built-in DOM elements.\n    * When enabled, functions passed to event handler props (props starting with \"on\")\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInEffects.ts b/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInEffects.ts\nindex 86070e2..91de8f2 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInEffects.ts\n+++ b/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInEffects.ts\n@@ -121,26 +121,58 @@ export function validateNoSetStateInEffects(\n             if (arg !== undefined && arg.kind === 'Identifier') {\n               const setState = setStateFunctions.get(arg.identifier.id);\n               if (setState !== undefined) {\n-                errors.pushDiagnostic(\n-                  CompilerDiagnostic.create({\n-                    category: ErrorCategory.EffectSetState,\n-                    reason:\n-                      'Calling setState synchronously within an effect can trigger cascading renders',\n-                    description:\n-                      'Effects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. ' +\n-                      'In general, the body of an effect should do one or both of the following:\\n' +\n-                      '* Update external systems with the latest state from React.\\n' +\n-                      '* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\\n\\n' +\n-                      'Calling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. ' +\n-                      '(https://react.dev/learn/you-might-not-need-an-effect)',\n-                    suggestions: null,\n-                  }).withDetails({\n-                    kind: 'error',\n-                    loc: setState.loc,\n-                    message:\n-                      'Avoid calling setState() directly within an effect',\n-                  }),\n-                );\n+                const enableVerbose =\n+                  env.config.enableVerboseNoSetStateInEffect;\n+                if (enableVerbose) {\n+                  errors.pushDiagnostic(\n+                    CompilerDiagnostic.create({\n+                      category: ErrorCategory.EffectSetState,\n+                      reason:\n+                        'Calling setState synchronously within an effect can trigger cascading renders',\n+                      description:\n+                        'Effects are intended to synchronize state between React and external systems. ' +\n+                        'Calling setState synchronously causes cascading renders that hurt performance.\\n\\n' +\n+                        'This pattern may indicate one of several issues:\\n\\n' +\n+                        '**1. Non-local derived data**: If the value being set could be computed from props/state ' +\n+                        'but requires data from a parent component, consider restructuring state ownership so the ' +\n+                        'derivation can happen during render in the component that owns the relevant state.\\n\\n' +\n+                        \"**2. Derived event pattern**: If you're detecting when a prop changes (e.g., `isPlaying` \" +\n+                        'transitioning from false to true), this often indicates the parent should provide an event ' +\n+                        'callback (like `onPlay`) instead of just the current state. Request access to the original event.\\n\\n' +\n+                        \"**3. Force update / external sync**: If you're forcing a re-render to sync with an external \" +\n+                        'data source (mutable values outside React), use `useSyncExternalStore` to properly subscribe ' +\n+                        'to external state changes.\\n\\n' +\n+                        'See: https://react.dev/learn/you-might-not-need-an-effect',\n+                      suggestions: null,\n+                    }).withDetails({\n+                      kind: 'error',\n+                      loc: setState.loc,\n+                      message:\n+                        'Avoid calling setState() directly within an effect',\n+                    }),\n+                  );\n+                } else {\n+                  errors.pushDiagnostic(\n+                    CompilerDiagnostic.create({\n+                      category: ErrorCategory.EffectSetState,\n+                      reason:\n+                        'Calling setState synchronously within an effect can trigger cascading renders',\n+                      description:\n+                        'Effects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. ' +\n+                        'In general, the body of an effect should do one or both of the following:\\n' +\n+                        '* Update external systems with the latest state from React.\\n' +\n+                        '* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\\n\\n' +\n+                        'Calling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. ' +\n+                        '(https://react.dev/learn/you-might-not-need-an-effect)',\n+                      suggestions: null,\n+                    }).withDetails({\n+                      kind: 'error',\n+                      loc: setState.loc,\n+                      message:\n+                        'Avoid calling setState() directly within an effect',\n+                    }),\n+                  );\n+                }\n               }\n             }\n           }\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.expect.md\nnew file mode 100644\nindex 0000000..60479b8\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.expect.md\n@@ -0,0 +1,74 @@\n+\n+## Input\n+\n+```javascript\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+function VideoPlayer({isPlaying}) {\n+  const [wasPlaying, setWasPlaying] = useState(isPlaying);\n+  useEffect(() => {\n+    if (isPlaying !== wasPlaying) {\n+      setWasPlaying(isPlaying);\n+      console.log('Play state changed!');\n+    }\n+  }, [isPlaying, wasPlaying]);\n+  return <video />;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: VideoPlayer,\n+  params: [{isPlaying: true}],\n+};\n+\n+```\n+\n+## Code\n+\n+```javascript\n+import { c as _c } from \"react/compiler-runtime\"; // @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import { useState, useEffect } from \"react\";\n+\n+function VideoPlayer(t0) {\n+  const $ = _c(5);\n+  const { isPlaying } = t0;\n+  const [wasPlaying, setWasPlaying] = useState(isPlaying);\n+  let t1;\n+  let t2;\n+  if ($[0] !== isPlaying || $[1] !== wasPlaying) {\n+    t1 = () => {\n+      if (isPlaying !== wasPlaying) {\n+        setWasPlaying(isPlaying);\n+        console.log(\"Play state changed!\");\n+      }\n+    };\n+\n+    t2 = [isPlaying, wasPlaying];\n+    $[0] = isPlaying;\n+    $[1] = wasPlaying;\n+    $[2] = t1;\n+    $[3] = t2;\n+  } else {\n+    t1 = $[2];\n+    t2 = $[3];\n+  }\n+  useEffect(t1, t2);\n+  let t3;\n+  if ($[4] === Symbol.for(\"react.memo_cache_sentinel\")) {\n+    t3 = <video />;\n+    $[4] = t3;\n+  } else {\n+    t3 = $[4];\n+  }\n+  return t3;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: VideoPlayer,\n+  params: [{ isPlaying: true }],\n+};\n+\n+```\n+      \n+### Eval output\n+(kind: ok) <video></video>\n\\ No newline at end of file\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.js b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.js\nnew file mode 100644\nindex 0000000..4928dbe\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-derived-event.js\n@@ -0,0 +1,18 @@\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+function VideoPlayer({isPlaying}) {\n+  const [wasPlaying, setWasPlaying] = useState(isPlaying);\n+  useEffect(() => {\n+    if (isPlaying !== wasPlaying) {\n+      setWasPlaying(isPlaying);\n+      console.log('Play state changed!');\n+    }\n+  }, [isPlaying, wasPlaying]);\n+  return <video />;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: VideoPlayer,\n+  params: [{isPlaying: true}],\n+};\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.expect.md\nnew file mode 100644\nindex 0000000..131eb99\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.expect.md\n@@ -0,0 +1,97 @@\n+\n+## Input\n+\n+```javascript\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+const externalStore = {\n+  value: 0,\n+  subscribe(callback) {\n+    return () => {};\n+  },\n+  getValue() {\n+    return this.value;\n+  },\n+};\n+\n+function ExternalDataComponent() {\n+  const [, forceUpdate] = useState({});\n+  useEffect(() => {\n+    const unsubscribe = externalStore.subscribe(() => {\n+      forceUpdate({});\n+    });\n+    return unsubscribe;\n+  }, []);\n+  return <div>{externalStore.getValue()}</div>;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: ExternalDataComponent,\n+  params: [],\n+};\n+\n+```\n+\n+## Code\n+\n+```javascript\n+import { c as _c } from \"react/compiler-runtime\"; // @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import { useState, useEffect } from \"react\";\n+\n+const externalStore = {\n+  value: 0,\n+  subscribe(callback) {\n+    return () => {};\n+  },\n+  getValue() {\n+    return this.value;\n+  },\n+};\n+\n+function ExternalDataComponent() {\n+  const $ = _c(4);\n+  let t0;\n+  if ($[0] === Symbol.for(\"react.memo_cache_sentinel\")) {\n+    t0 = {};\n+    $[0] = t0;\n+  } else {\n+    t0 = $[0];\n+  }\n+  const [, forceUpdate] = useState(t0);\n+  let t1;\n+  let t2;\n+  if ($[1] === Symbol.for(\"react.memo_cache_sentinel\")) {\n+    t1 = () => {\n+      const unsubscribe = externalStore.subscribe(() => {\n+        forceUpdate({});\n+      });\n+      return unsubscribe;\n+    };\n+    t2 = [];\n+    $[1] = t1;\n+    $[2] = t2;\n+  } else {\n+    t1 = $[1];\n+    t2 = $[2];\n+  }\n+  useEffect(t1, t2);\n+  let t3;\n+  if ($[3] === Symbol.for(\"react.memo_cache_sentinel\")) {\n+    t3 = <div>{externalStore.getValue()}</div>;\n+    $[3] = t3;\n+  } else {\n+    t3 = $[3];\n+  }\n+  return t3;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: ExternalDataComponent,\n+  params: [],\n+};\n+\n+```\n+      \n+### Eval output\n+(kind: ok) <div>0</div>\n\\ No newline at end of file\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.js b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.js\nnew file mode 100644\nindex 0000000..e7653d1\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-force-update.js\n@@ -0,0 +1,28 @@\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+const externalStore = {\n+  value: 0,\n+  subscribe(callback) {\n+    return () => {};\n+  },\n+  getValue() {\n+    return this.value;\n+  },\n+};\n+\n+function ExternalDataComponent() {\n+  const [, forceUpdate] = useState({});\n+  useEffect(() => {\n+    const unsubscribe = externalStore.subscribe(() => {\n+      forceUpdate({});\n+    });\n+    return unsubscribe;\n+  }, []);\n+  return <div>{externalStore.getValue()}</div>;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: ExternalDataComponent,\n+  params: [],\n+};\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.expect.md\nnew file mode 100644\nindex 0000000..35cdeb2\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.expect.md\n@@ -0,0 +1,68 @@\n+\n+## Input\n+\n+```javascript\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+function Child({firstName, lastName}) {\n+  const [fullName, setFullName] = useState('');\n+  useEffect(() => {\n+    setFullName(firstName + ' ' + lastName);\n+  }, [firstName, lastName]);\n+  return <div>{fullName}</div>;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: Child,\n+  params: [{firstName: 'John', lastName: 'Doe'}],\n+};\n+\n+```\n+\n+## Code\n+\n+```javascript\n+import { c as _c } from \"react/compiler-runtime\"; // @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import { useState, useEffect } from \"react\";\n+\n+function Child(t0) {\n+  const $ = _c(6);\n+  const { firstName, lastName } = t0;\n+  const [fullName, setFullName] = useState(\"\");\n+  let t1;\n+  let t2;\n+  if ($[0] !== firstName || $[1] !== lastName) {\n+    t1 = () => {\n+      setFullName(firstName + \" \" + lastName);\n+    };\n+    t2 = [firstName, lastName];\n+    $[0] = firstName;\n+    $[1] = lastName;\n+    $[2] = t1;\n+    $[3] = t2;\n+  } else {\n+    t1 = $[2];\n+    t2 = $[3];\n+  }\n+  useEffect(t1, t2);\n+  let t3;\n+  if ($[4] !== fullName) {\n+    t3 = <div>{fullName}</div>;\n+    $[4] = fullName;\n+    $[5] = t3;\n+  } else {\n+    t3 = $[5];\n+  }\n+  return t3;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: Child,\n+  params: [{ firstName: \"John\", lastName: \"Doe\" }],\n+};\n+\n+```\n+      \n+### Eval output\n+(kind: ok) <div>John Doe</div>\n\\ No newline at end of file\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.js b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.js\nnew file mode 100644\nindex 0000000..eba6b5c\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/invalid-set-state-in-effect-verbose-non-local-derived.js\n@@ -0,0 +1,15 @@\n+// @validateNoSetStateInEffects @enableVerboseNoSetStateInEffect\n+import {useState, useEffect} from 'react';\n+\n+function Child({firstName, lastName}) {\n+  const [fullName, setFullName] = useState('');\n+  useEffect(() => {\n+    setFullName(firstName + ' ' + lastName);\n+  }, [firstName, lastName]);\n+  return <div>{fullName}</div>;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: Child,\n+  params: [{firstName: 'John', lastName: 'Doe'}],\n+};", "output": "feat(compiler): add verbose mode for setState-in-effect validation", "metadata": {"id": "react-3640f38a", "repository": "react", "commit_hash": "3640f38a728f3a057649cf7aec65a6ce14c2eac0"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/src/extend/custom-rules.md\n\ndiff --git a/docs/src/extend/custom-rules.md b/docs/src/extend/custom-rules.md\nindex 06db29a3..82ecaec1 100644\n--- a/docs/src/extend/custom-rules.md\n+++ b/docs/src/extend/custom-rules.md\n@@ -50,7 +50,7 @@ The source file for a rule exports an object with the following properties. Both\n - `docs`: (`object`) Properties often used for documentation generation and tooling. Required for core rules and optional for custom rules. Custom rules can include additional properties here as needed.\n \n     - `description`: (`string`) Provides a short description of the rule. For core rules, this is used in [rules index](../rules/).\n-    - `recommended`: (`boolean`) For core rules, this specifies whether the rule is enabled by the `recommended` config from `@eslint/js`.\n+    - `recommended`: (`unknown`) For core rules, this is a boolean value specifying whether the rule is enabled by the `recommended` config from `@eslint/js`.\n     - `url`: (`string`) Specifies the URL at which the full documentation can be accessed. Code editors often use this to provide a helpful link on highlighted rule violations.\n \n - `fixable`: (`string`) Either `\"code\"` or `\"whitespace\"` if the `--fix` option on the [command line](../use/command-line-interface#--fix) automatically fixes problems reported by the rule.\ndiff --git a/package.json b/package.json\nindex 7570ff3e..ef7aeed4 100644\n--- a/package.json\n+++ b/package.json\n@@ -107,11 +107,11 @@\n     \"@eslint-community/eslint-utils\": \"^4.2.0\",\n     \"@eslint-community/regexpp\": \"^4.12.1\",\n     \"@eslint/config-array\": \"^0.21.0\",\n-    \"@eslint/config-helpers\": \"^0.3.0\",\n-    \"@eslint/core\": \"^0.15.0\",\n+    \"@eslint/config-helpers\": \"^0.3.1\",\n+    \"@eslint/core\": \"^0.15.2\",\n     \"@eslint/eslintrc\": \"^3.3.1\",\n     \"@eslint/js\": \"9.32.0\",\n-    \"@eslint/plugin-kit\": \"^0.3.4\",\n+    \"@eslint/plugin-kit\": \"^0.3.5\",\n     \"@humanfs/node\": \"^0.16.6\",\n     \"@humanwhocodes/module-importer\": \"^1.0.1\",\n     \"@humanwhocodes/retry\": \"^0.4.2\",\ndiff --git a/tests/lib/types/types.test.ts b/tests/lib/types/types.test.ts\nindex b44b695d..ed5ba53b 100644\n--- a/tests/lib/types/types.test.ts\n+++ b/tests/lib/types/types.test.ts\n@@ -897,6 +897,21 @@ type DeprecatedRuleContextKeys =\n \t},\n });\n \n+// `meta.docs.recommended` can be any type\n+(): JSRuleDefinition => ({\n+\tcreate() {\n+\t\treturn {};\n+\t},\n+\tmeta: {\n+\t\tdocs: {\n+\t\t\trecommended: {\n+\t\t\t\tseverity: \"warn\",\n+\t\t\t\toptions: [\"never\"],\n+\t\t\t},\n+\t\t},\n+\t},\n+});\n+\n // #endregion\n \n // #region Linter"}, {"role": "assistant", "content": "fix: allow any type for `meta.docs.recommended` in custom rules (#19995)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/babel-generator/src/printer.ts\n\ndiff --git a/packages/babel-generator/src/printer.ts b/packages/babel-generator/src/printer.ts\nindex df336864e..767c01efe 100644\n--- a/packages/babel-generator/src/printer.ts\n+++ b/packages/babel-generator/src/printer.ts\n@@ -1042,6 +1042,7 @@ class Printer {\n         HAS_NEWLINE.test(comment.value)\n       ) {\n         this.token(\"(\");\n+        this.indent();\n         _parenPushNewlineState.printed = true;\n       }\n       val = `/*${comment.value}*/`;\ndiff --git a/packages/babel-generator/test/index.js b/packages/babel-generator/test/index.js\nindex e47cda5fb..b68481f4d 100644\n--- a/packages/babel-generator/test/index.js\n+++ b/packages/babel-generator/test/index.js\n@@ -1465,79 +1465,116 @@ describe(\"programmatic generation\", function () {\n         line*/\"\n       `);\n     });\n+  });\n \n-    it(\"comment in arrow function with return type\", () => {\n-      const arrow = t.arrowFunctionExpression(\n-        [t.identifier(\"x\"), t.identifier(\"y\")],\n-        t.identifier(\"z\"),\n-      );\n-      arrow.returnType = t.tsTypeAnnotation(t.tsAnyKeyword());\n-      arrow.returnType.trailingComments = [\n-        { type: \"CommentBlock\", value: \"foo\" },\n-        // This comment is dropped. There is no way to safely print it\n-        // as a trailingComment of the return type.\n-        { type: \"CommentBlock\", value: \"new\\nline\" },\n-      ];\n-      expect(generate(arrow).code).toMatchInlineSnapshot(\n-        `\"(x, y): any /*foo*/ => z\"`,\n-      );\n-    });\n+  it(\"comment in arrow function with return type\", () => {\n+    const arrow = t.arrowFunctionExpression(\n+      [t.identifier(\"x\"), t.identifier(\"y\")],\n+      t.identifier(\"z\"),\n+    );\n+    arrow.returnType = t.tsTypeAnnotation(t.tsAnyKeyword());\n+    arrow.returnType.trailingComments = [\n+      { type: \"CommentBlock\", value: \"foo\" },\n+      // This comment is dropped. There is no way to safely print it\n+      // as a trailingComment of the return type.\n+      { type: \"CommentBlock\", value: \"new\\nline\" },\n+    ];\n+    expect(generate(arrow).code).toMatchInlineSnapshot(\n+      `\"(x, y): any /*foo*/ => z\"`,\n+    );\n+  });\n \n-    it(\"multi-line leading comment after return\", () => {\n-      const val = t.identifier(\"val\");\n-      val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n-      expect(generate(t.returnStatement(val)).code).toMatch(`return (\n+  it(\"multi-line leading comment after return\", () => {\n+    const val = t.identifier(\"val\");\n+    val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n+    expect(generate(t.returnStatement(val)).code).toMatch(`return (\n   /*new\n   line*/\n   val\n );`);\n-    });\n+  });\n \n-    it(\"multi-line leading comment after return 2\", () => {\n-      const ast = parse(\n-        `return (\n+  it(\"multi-line leading comment after return 2\", () => {\n+    const ast = parse(\n+      `return (\n         /*new\n         line*/ val);`,\n-        {\n-          allowReturnOutsideFunction: true,\n-        },\n-      );\n-      // Remove `parenthesized`\n-      ast.program.body[0].argument.extra = null;\n-      expect(generate(ast).code).toMatchInlineSnapshot(`\n+      {\n+        allowReturnOutsideFunction: true,\n+      },\n+    );\n+    // Remove `parenthesized`\n+    ast.program.body[0].argument.extra = null;\n+    expect(generate(ast).code).toMatchInlineSnapshot(`\n         \"return (\n           /*new\n           line*/\n           val\n         );\"\n       `);\n-    });\n+  });\n \n-    it(\"multi-line leading comment after return compact\", () => {\n-      const val = t.identifier(\"val\");\n-      val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n-      expect(\n-        generate(t.returnStatement(val), {\n-          compact: true,\n-        }).code,\n-      ).toMatchInlineSnapshot(`\n+  it(\"multi-line leading comment after return compact\", () => {\n+    const val = t.identifier(\"val\");\n+    val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n+    expect(\n+      generate(t.returnStatement(val), {\n+        compact: true,\n+      }).code,\n+    ).toMatchInlineSnapshot(`\n         \"return(/*new\n         line*/val);\"\n       `);\n-    });\n+  });\n \n-    it(\"multi-line leading comment after return concise\", () => {\n-      const val = t.identifier(\"val\");\n-      val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n-      expect(\n-        generate(t.returnStatement(val), {\n-          concise: true,\n-        }).code,\n-      ).toMatchInlineSnapshot(`\n+  it(\"multi-line leading comment after return concise\", () => {\n+    const val = t.identifier(\"val\");\n+    val.leadingComments = [{ type: \"CommentBlock\", value: \"new\\nline\" }];\n+    expect(\n+      generate(t.returnStatement(val), {\n+        concise: true,\n+      }).code,\n+    ).toMatchInlineSnapshot(`\n         \"return (/*new\n         line*/ val );\"\n       `);\n-    });\n+  });\n+\n+  it(\"correctly indenting when `retainLines`\", () => {\n+    const ast = parse(\n+      `\n+export const App = () => {\n+  return (\n+      /**\n+        * First\n+        */\n+      2\n+  );\n+};\n+\n+/**\n+  * Second\n+  */`,\n+      {\n+        sourceType: \"module\",\n+      },\n+    );\n+\n+    expect(generate(ast, { retainLines: true }).code).toMatchInlineSnapshot(`\n+      \"\n+      export const App = () => {\n+        return (\n+          /**\n+            * First\n+            */\n+          2);\n+\n+      };\n+\n+      /**\n+        * Second\n+        */\"\n+    `);\n   });\n });"}, {"role": "assistant", "content": "fix: Correctly indenting when `retainLines` is enabled (#16166)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n src/core/instance/state.ts\n\ndiff --git a/src/core/instance/state.ts b/src/core/instance/state.ts\nindex 7ac84c6b..f59dda13 100644\n--- a/src/core/instance/state.ts\n+++ b/src/core/instance/state.ts\n@@ -110,10 +110,10 @@ function initProps(vm: Component, propsOptions: Object) {\n             )\n           }\n         },\n-        true\n+        true /* shallow */\n       )\n     } else {\n-      defineReactive(props, key, value, undefined, true)\n+      defineReactive(props, key, value, undefined, true /* shallow */)\n     }\n     // static props are already proxied on the component's prototype\n     // during Vue.extend(). We only need to proxy props defined at\ndiff --git a/src/core/observer/index.ts b/src/core/observer/index.ts\nindex 9988fb86..dc6efae4 100644\n--- a/src/core/observer/index.ts\n+++ b/src/core/observer/index.ts\n@@ -131,7 +131,8 @@ export function defineReactive(\n   val?: any,\n   customSetter?: Function | null,\n   shallow?: boolean,\n-  mock?: boolean\n+  mock?: boolean,\n+  observeEvenIfShallow = false\n ) {\n   const dep = new Dep()\n \n@@ -150,7 +151,7 @@ export function defineReactive(\n     val = obj[key]\n   }\n \n-  let childOb = !shallow && observe(val, false, mock)\n+  let childOb = shallow ? val && val.__ob__ : observe(val, false, mock)\n   Object.defineProperty(obj, key, {\n     enumerable: true,\n     configurable: true,\n@@ -194,7 +195,7 @@ export function defineReactive(\n       } else {\n         val = newVal\n       }\n-      childOb = !shallow && observe(newVal, false, mock)\n+      childOb = shallow ? newVal && newVal.__ob__ : observe(newVal, false, mock)\n       if (__DEV__) {\n         dep.notify({\n           type: TriggerOpTypes.SET,"}, {"role": "assistant", "content": "fix(shallowReactive): should track value if already reactive when set in shallowReactive"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/README.md\n\ndiff --git a/docs/README.md b/docs/README.md\nindex 026430cc..17758b36 100644\n--- a/docs/README.md\n+++ b/docs/README.md\n@@ -2,8 +2,7 @@\n \n ## Install Dependencies\n \n-Install the necessary dependencies for the documentation site by running this\n-from the `docs` folder:\n+Install all required dependencies for the documentation site by running the following command inside the `docs` folder:\n \n ```shell\n npm install\n@@ -11,30 +10,30 @@ npm install\n \n ## Run Locally\n \n-Run this from the `docs` folder:\n+To start the documentation site locally, run the following command inside the `docs` folder:\n \n ```shell\n npm start\n ```\n \n-Once the script finishes building the documentation site, you can visit it at\n+After the build completes, the documentation site will be available at\n <http://localhost:2023>.\n \n ## Scripts\n \n-To update the links data file, run this from the root folder (not the `docs` folder):\n+To update the links data file, run the following command from the project root (not the `docs` folder):\n \n ```shell\n npm run build:docs:update-links\n ```\n \n-To lint JS files, run this from the root folder (not the `docs` folder):\n+To lint the documentation’s JavaScript files, run the following command from the project root (not the `docs` folder):\n \n ```shell\n npm run lint:docs:js\n ```\n \n-To autofix JS files, run this from the root folder (not the `docs` folder):\n+To auto-fix JavaScript files, run the following command from the project root (not the `docs` folder):\n \n ```shell\n npm run lint:fix:docs:js\n@@ -42,4 +41,4 @@ npm run lint:fix:docs:js\n \n ## License\n \n-© OpenJS Foundation and ESLint contributors, [www.openjsf.org](https://www.openjsf.org/). Content licensed under [MIT License](https://github.com/eslint/eslint/blob/main/LICENSE).\n+© OpenJS Foundation and ESLint contributors, [www.openjsf.org](https://www.openjsf.org/). Content licensed under the [MIT License](https://github.com/eslint/eslint/blob/main/LICENSE)."}, {"role": "assistant", "content": "docs: improve clarity, grammar, and wording in documentation site README (#20370)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " test/codegen/comparisons.go | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/test/codegen/comparisons.go b/test/codegen/comparisons.go\nindex bcce21e4..0b550adc 100644\n--- a/test/codegen/comparisons.go\n+++ b/test/codegen/comparisons.go\n@@ -660,13 +660,13 @@ func equalVarString8(a string) bool {\n \treturn a[:8] == b\n }\n \n-func equalVarStringNoSpill(a,b string) bool {\n+func equalVarStringNoSpill(a, b string) bool {\n \ts := string(\"ZZZZZZZZZ\")\n \t// arm64:\".*memequal\"\n \tmemeq1 := a[:9] == s\n \t// arm64:-\".*\"\n \tmemeq2 := s == a[:9]\n-\t// arm64:-\"MOVB\\tR0,.*SP\",\".*memequal\"\n+\t// arm64:-\"MOVB R0,.*SP\",\".*memequal\"\n \tmemeq3 := s == b[:9]\n \treturn memeq1 && memeq2 && memeq3\n }", "output": "test: fix formatting in codegen comparisons", "metadata": {"id": "go-df4e08ac", "repository": "go", "commit_hash": "df4e08ac65e94041367785783ec1482e8bed2397"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/ci.yml\n\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex db48f681..978af24c 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -149,3 +149,20 @@ jobs:\n             - name: Test types for ${{ matrix.package.name }}\n               working-directory: ${{ matrix.package.directory }}\n               run: npm run test:types\n+\n+    pnpm_test:\n+        name: Test pnpm Type Support\n+        runs-on: ubuntu-latest\n+        steps:\n+            - uses: actions/checkout@v5\n+\n+            - uses: pnpm/action-setup@v4\n+              with:\n+                  version: latest\n+\n+            - uses: actions/setup-node@v5\n+              with:\n+                  node-version: \"lts/*\"\n+\n+            - name: Run pnpm test\n+              run: npm run test:pnpm\ndiff --git a/.gitignore b/.gitignore\nindex e71935e4..e25c0a52 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -1,5 +1,6 @@\n /node_modules\n /docs/node_modules\n+/tests/pnpm/node_modules\n test.js\n coverage/\n build/\ndiff --git a/eslint.config.js b/eslint.config.js\nindex 89969dcd..3f42ab3a 100644\n--- a/eslint.config.js\n+++ b/eslint.config.js\n@@ -370,4 +370,9 @@ module.exports = defineConfig([\n \t\t\t],\n \t\t},\n \t},\n+\t{\n+\t\tname: \"eslint/pnpm-test\",\n+\t\tfiles: [\"tests/pnpm/**/*.js\"],\n+\t\tlanguageOptions: { sourceType: \"module\" },\n+\t},\n ]);\ndiff --git a/knip.jsonc b/knip.jsonc\nindex e065fb33..e7bbda05 100644\n--- a/knip.jsonc\n+++ b/knip.jsonc\n@@ -21,6 +21,8 @@\n         \"tests/performance/jshint.js\",\n         // Many are required using dynamic paths such as `fs.readFileSync(path.join())`:\n         \"tests/fixtures/**\",\n+        // pnpm test package\n+        \"tests/pnpm/**\",\n         // Run from Makefile.js\n         \"tools/generate-formatter-examples.js\",\n       ],\ndiff --git a/lib/types/config-api.d.ts b/lib/types/config-api.d.ts\nindex bcb8e61c..e795add8 100644\n--- a/lib/types/config-api.d.ts\n+++ b/lib/types/config-api.d.ts\n@@ -3,6 +3,10 @@\n  * @author Nicholas C. Zakas\n  */\n \n-import { defineConfig, globalIgnores } from \"@eslint/config-helpers\";\n+import {\n+\ttype Config,\n+\tdefineConfig,\n+\tglobalIgnores,\n+} from \"@eslint/config-helpers\";\n \n-export { defineConfig, globalIgnores };\n+export { type Config, defineConfig, globalIgnores };\ndiff --git a/package.json b/package.json\nindex 0b5064ca..6f7ef46e 100644\n--- a/package.json\n+++ b/package.json\n@@ -70,9 +70,10 @@\n     \"test\": \"node Makefile.js test\",\n     \"test:browser\": \"node Makefile.js cypress\",\n     \"test:cli\": \"mocha\",\n+    \"test:emfile\": \"node tools/check-emfile-handling.js\",\n     \"test:fuzz\": \"node Makefile.js fuzz\",\n     \"test:performance\": \"node Makefile.js perf\",\n-    \"test:emfile\": \"node tools/check-emfile-handling.js\",\n+    \"test:pnpm\": \"cd tests/pnpm && node check.js && pnpm install && pnpm exec tsc\",\n     \"test:types\": \"tsc -p tests/lib/types/tsconfig.json\"\n   },\n   \"gitHooks\": {\n@@ -106,8 +107,8 @@\n   \"dependencies\": {\n     \"@eslint-community/eslint-utils\": \"^4.8.0\",\n     \"@eslint-community/regexpp\": \"^4.12.1\",\n-    \"@eslint/config-array\": \"^0.21.0\",\n-    \"@eslint/config-helpers\": \"^0.4.0\",\n+    \"@eslint/config-array\": \"^0.21.1\",\n+    \"@eslint/config-helpers\": \"^0.4.1\",\n     \"@eslint/core\": \"^0.16.0\",\n     \"@eslint/eslintrc\": \"^3.3.1\",\n     \"@eslint/js\": \"9.37.0\",\ndiff --git a/tests/pnpm/check.js b/tests/pnpm/check.js\nnew file mode 100644\nindex 00000000..4581c1af\n--- /dev/null\n+++ b/tests/pnpm/check.js\n@@ -0,0 +1,9 @@\n+import fs from \"node:fs\";\n+\n+const nodeModulesURL = new URL(\"../../node_modules\", import.meta.url);\n+\n+if (fs.existsSync(nodeModulesURL)) {\n+\t// eslint-disable-next-line no-console -- Used for interactive output.\n+\tconsole.error(\"Delete node_modules to run the pnpm type support test.\");\n+\tprocess.exitCode = 1;\n+}\ndiff --git a/tests/pnpm/package.json b/tests/pnpm/package.json\nnew file mode 100644\nindex 00000000..896a3544\n--- /dev/null\n+++ b/tests/pnpm/package.json\n@@ -0,0 +1,7 @@\n+{\n+  \"type\": \"module\",\n+  \"dependencies\": {\n+    \"eslint\": \"file:../..\",\n+    \"typescript\": \"^5.9.3\"\n+  }\n+}\ndiff --git a/tests/pnpm/test-eslint.config.js b/tests/pnpm/test-eslint.config.js\nnew file mode 100644\nindex 00000000..03e9ea50\n--- /dev/null\n+++ b/tests/pnpm/test-eslint.config.js\n@@ -0,0 +1,5 @@\n+import { defineConfig, globalIgnores } from \"eslint/config\";\n+\n+export const ignoresConfig = globalIgnores([]);\n+\n+export default defineConfig([ignoresConfig]);\ndiff --git a/tests/pnpm/tsconfig.json b/tests/pnpm/tsconfig.json\nnew file mode 100644\nindex 00000000..731223ab\n--- /dev/null\n+++ b/tests/pnpm/tsconfig.json\n@@ -0,0 +1,9 @@\n+{\n+  \"compilerOptions\": {\n+    \"checkJs\": true,\n+    \"declaration\": true,\n+    \"module\": \"nodenext\",\n+    \"noEmit\": true\n+  },\n+  \"files\": [\"test-eslint.config.js\"]\n+}"}, {"role": "assistant", "content": "fix: improve type support for isolated dependencies in pnpm (#20201)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .github/workflows/benchmarks.yml\n\ndiff --git a/.github/workflows/benchmarks.yml b/.github/workflows/benchmarks.yml\nindex 046dbd6a8..12b0fab06 100644\n--- a/.github/workflows/benchmarks.yml\n+++ b/.github/workflows/benchmarks.yml\n@@ -7,6 +7,10 @@ on:\n     branches: [main]\n   workflow_dispatch:\n \n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n permissions:\n   contents: read\n \ndiff --git a/.github/workflows/test.yml b/.github/workflows/test.yml\nindex a1f800c70..56254bef7 100644\n--- a/.github/workflows/test.yml\n+++ b/.github/workflows/test.yml\n@@ -6,6 +6,10 @@ on:\n   pull_request:\n     branches: [main]\n \n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n permissions:\n   contents: read"}, {"role": "assistant", "content": "ci: cancel in progress (#20239)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n script/build-stats.mjs\n\ndiff --git a/script/build-stats.mjs b/script/build-stats.mjs\nindex ff09b84f..8079f345 100644\n--- a/script/build-stats.mjs\n+++ b/script/build-stats.mjs\n@@ -45,7 +45,13 @@ async function main () {\n \n     if (process.env.TARGET_ARCH) tags.push(`target-arch:${process.env.TARGET_ARCH}`);\n     if (process.env.TARGET_PLATFORM) tags.push(`target-platform:${process.env.TARGET_PLATFORM}`);\n-    if (process.env.GITHUB_HEAD_REF) tags.push(`branch:${process.env.GITHUB_HEAD_REF}`);\n+    if (process.env.GITHUB_HEAD_REF) {\n+      // Will be set in pull requests\n+      tags.push(`branch:${process.env.GITHUB_HEAD_REF}`);\n+    } else if (process.env.GITHUB_REF_NAME) {\n+      // Will be set for release branches\n+      tags.push(`branch:${process.env.GITHUB_REF_NAME}`);\n+    }\n \n     const series = [\n       {"}, {"role": "assistant", "content": "ci: fix release branch name in build stats script (#48533)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " .../src/HIR/Environment.ts                         |  6 +++\n .../src/Validation/ValidateNoSetStateInRender.ts   | 48 +++++++++++++++-------\n ...alid-setState-in-render-unbound-state.expect.md |  6 ++-\n ...tstate-unconditional-with-keyed-state.expect.md | 44 ++++++++++++++++++++\n ...alid-setstate-unconditional-with-keyed-state.js | 14 +++++++\n ...ional-set-state-hook-return-in-render.expect.md | 12 ++++--\n ...lid-unconditional-set-state-in-render.expect.md | 12 ++++--\n ...nconditional-set-state-prop-in-render.expect.md | 12 ++++--\n ...-set-state-in-render-after-loop-break.expect.md |  6 ++-\n ...tional-set-state-in-render-after-loop.expect.md |  6 ++-\n ...l-set-state-in-render-with-loop-throw.expect.md |  6 ++-\n .../error.unconditional-set-state-lambda.expect.md |  6 ++-\n ...set-state-nested-function-expressions.expect.md |  6 ++-\n 13 files changed, 146 insertions(+), 38 deletions(-)\n\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts b/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\nindex fc5ba40..17dd53a 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\n+++ b/compiler/packages/babel-plugin-react-compiler/src/HIR/Environment.ts\n@@ -318,6 +318,12 @@ export const EnvironmentConfigSchema = z.object({\n    */\n   validateNoSetStateInRender: z.boolean().default(true),\n \n+  /**\n+   * When enabled, changes the behavior of validateNoSetStateInRender to recommend\n+   * using useKeyedState instead of the manual pattern for resetting state.\n+   */\n+  enableUseKeyedState: z.boolean().default(false),\n+\n   /**\n    * Validates that setState is not called synchronously within an effect (useEffect and friends).\n    * Scheduling a setState (with an event listener, subscription, etc) is valid.\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInRender.ts b/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInRender.ts\nindex a1a05b2..e0d34d5 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInRender.ts\n+++ b/compiler/packages/babel-plugin-react-compiler/src/Validation/ValidateNoSetStateInRender.ts\n@@ -155,20 +155,40 @@ function validateNoSetStateInRenderImpl(\n                 }),\n               );\n             } else if (unconditionalBlocks.has(block.id)) {\n-              errors.pushDiagnostic(\n-                CompilerDiagnostic.create({\n-                  category: ErrorCategory.RenderSetState,\n-                  reason:\n-                    'Calling setState during render may trigger an infinite loop',\n-                  description:\n-                    'Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState)',\n-                  suggestions: null,\n-                }).withDetails({\n-                  kind: 'error',\n-                  loc: callee.loc,\n-                  message: 'Found setState() in render',\n-                }),\n-              );\n+              const enableUseKeyedState = fn.env.config.enableUseKeyedState;\n+              if (enableUseKeyedState) {\n+                errors.pushDiagnostic(\n+                  CompilerDiagnostic.create({\n+                    category: ErrorCategory.RenderSetState,\n+                    reason: 'Cannot call setState during render',\n+                    description:\n+                      'Calling setState during render may trigger an infinite loop.\\n' +\n+                      '* To reset state when other state/props change, use `const [state, setState] = useKeyedState(initialState, key)` to reset `state` when `key` changes.\\n' +\n+                      '* To derive data from other state/props, compute the derived data during render without using state',\n+                    suggestions: null,\n+                  }).withDetails({\n+                    kind: 'error',\n+                    loc: callee.loc,\n+                    message: 'Found setState() in render',\n+                  }),\n+                );\n+              } else {\n+                errors.pushDiagnostic(\n+                  CompilerDiagnostic.create({\n+                    category: ErrorCategory.RenderSetState,\n+                    reason: 'Cannot call setState during render',\n+                    description:\n+                      'Calling setState during render may trigger an infinite loop.\\n' +\n+                      '* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\\n' +\n+                      '* To derive data from other state/props, compute the derived data during render without using state',\n+                    suggestions: null,\n+                  }).withDetails({\n+                    kind: 'error',\n+                    loc: callee.loc,\n+                    message: 'Found setState() in render',\n+                  }),\n+                );\n+              }\n             }\n           }\n           break;\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setState-in-render-unbound-state.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setState-in-render-unbound-state.expect.md\nindex 423076c..43ae7d0 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setState-in-render-unbound-state.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setState-in-render-unbound-state.expect.md\n@@ -24,9 +24,11 @@ export const FIXTURE_ENTRYPOINT = {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-setState-in-render-unbound-state.ts:5:2\n   3 |   // infer the type of destructured properties after a hole in the array\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.expect.md\nnew file mode 100644\nindex 0000000..7caed10\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.expect.md\n@@ -0,0 +1,44 @@\n+\n+## Input\n+\n+```javascript\n+// @validateNoSetStateInRender @enableUseKeyedState\n+import {useState} from 'react';\n+\n+function Component() {\n+  const [total, setTotal] = useState(0);\n+  setTotal(42);\n+  return total;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: Component,\n+  params: [],\n+  isComponent: true,\n+};\n+\n+```\n+\n+\n+## Error\n+\n+```\n+Found 1 error:\n+\n+Error: Cannot call setState during render\n+\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, use `const [state, setState] = useKeyedState(initialState, key)` to reset `state` when `key` changes.\n+* To derive data from other state/props, compute the derived data during render without using state.\n+\n+error.invalid-setstate-unconditional-with-keyed-state.ts:6:2\n+  4 | function Component() {\n+  5 |   const [total, setTotal] = useState(0);\n+> 6 |   setTotal(42);\n+    |   ^^^^^^^^ Found setState() in render\n+  7 |   return total;\n+  8 | }\n+  9 |\n+```\n+          \n+      \n\\ No newline at end of file\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.js b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.js\nnew file mode 100644\nindex 0000000..46393b5\n--- /dev/null\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-setstate-unconditional-with-keyed-state.js\n@@ -0,0 +1,14 @@\n+// @validateNoSetStateInRender @enableUseKeyedState\n+import {useState} from 'react';\n+\n+function Component() {\n+  const [total, setTotal] = useState(0);\n+  setTotal(42);\n+  return total;\n+}\n+\n+export const FIXTURE_ENTRYPOINT = {\n+  fn: Component,\n+  params: [],\n+  isComponent: true,\n+};\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-hook-return-in-render.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-hook-return-in-render.expect.md\nindex fcd2f7c..cb52054 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-hook-return-in-render.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-hook-return-in-render.expect.md\n@@ -25,9 +25,11 @@ function useCustomState(init) {\n ```\n Found 2 errors:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-hook-return-in-render.ts:6:2\n   4 |   const aliased = setState;\n@@ -38,9 +40,11 @@ error.invalid-unconditional-set-state-hook-return-in-render.ts:6:2\n   8 |\n   9 |   return state;\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-hook-return-in-render.ts:7:2\n    5 |\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-in-render.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-in-render.expect.md\nindex 78deea8..9155951 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-in-render.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-in-render.expect.md\n@@ -21,9 +21,11 @@ function Component(props) {\n ```\n Found 2 errors:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-in-render.ts:6:2\n   4 |   const aliased = setX;\n@@ -34,9 +36,11 @@ error.invalid-unconditional-set-state-in-render.ts:6:2\n   8 |\n   9 |   return x;\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-in-render.ts:7:2\n    5 |\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-prop-in-render.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-prop-in-render.expect.md\nindex 1a3eb1b..8c46cba 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-prop-in-render.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-unconditional-set-state-prop-in-render.expect.md\n@@ -20,9 +20,11 @@ function Component({setX}) {\n ```\n Found 2 errors:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-prop-in-render.ts:5:2\n   3 |   const aliased = setX;\n@@ -33,9 +35,11 @@ error.invalid-unconditional-set-state-prop-in-render.ts:5:2\n   7 |\n   8 |   return x;\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.invalid-unconditional-set-state-prop-in-render.ts:6:2\n   4 |\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop-break.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop-break.expect.md\nindex 8ccb4f2..ad39cbc 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop-break.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop-break.expect.md\n@@ -24,9 +24,11 @@ function Component(props) {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.unconditional-set-state-in-render-after-loop-break.ts:11:2\n    9 |     }\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop.expect.md\nindex df805b4..066c185 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-after-loop.expect.md\n@@ -19,9 +19,11 @@ function Component(props) {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.unconditional-set-state-in-render-after-loop.ts:6:2\n   4 |   for (const _ of props) {\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-with-loop-throw.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-with-loop-throw.expect.md\nindex 313b2ed..82d7cfb 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-with-loop-throw.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-in-render-with-loop-throw.expect.md\n@@ -24,9 +24,11 @@ function Component(props) {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.unconditional-set-state-in-render-with-loop-throw.ts:11:2\n    9 |     }\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-lambda.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-lambda.expect.md\nindex 1c89b5c..1ebd422 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-lambda.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-lambda.expect.md\n@@ -22,9 +22,11 @@ function Component(props) {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.unconditional-set-state-lambda.ts:8:2\n    6 |     setX(1);\ndiff --git a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-nested-function-expressions.expect.md b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-nested-function-expressions.expect.md\nindex fceed8b..4736e66 100644\n--- a/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-nested-function-expressions.expect.md\n+++ b/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.unconditional-set-state-nested-function-expressions.expect.md\n@@ -30,9 +30,11 @@ function Component(props) {\n ```\n Found 1 error:\n \n-Error: Calling setState during render may trigger an infinite loop\n+Error: Cannot call setState during render\n \n-Calling setState during render will trigger another render, and can lead to infinite loops. (https://react.dev/reference/react/useState).\n+Calling setState during render may trigger an infinite loop.\n+* To reset state when other state/props change, store the previous value in state and update conditionally: https://react.dev/reference/react/useState#storing-information-from-previous-renders\n+* To derive data from other state/props, compute the derived data during render without using state.\n \n error.unconditional-set-state-nested-function-expressions.ts:16:2\n   14 |     bar();", "output": "fix(compiler): improve setState-in-render error messages", "metadata": {"id": "react-f99241b2", "repository": "react", "commit_hash": "f99241b2e6cec825dfbdbb878755f12e1f510ca9"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n lib/web/JsonpChunkLoadingRuntimeModule.js\n\ndiff --git a/lib/web/JsonpChunkLoadingRuntimeModule.js b/lib/web/JsonpChunkLoadingRuntimeModule.js\nindex f38691cf1..59caafe70 100644\n--- a/lib/web/JsonpChunkLoadingRuntimeModule.js\n+++ b/lib/web/JsonpChunkLoadingRuntimeModule.js\n@@ -69,7 +69,7 @@ class JsonpChunkLoadingRuntimeModule extends RuntimeModule {\n \t\tif (options && options.baseUri) {\n \t\t\treturn `${RuntimeGlobals.baseURI} = ${JSON.stringify(options.baseUri)};`;\n \t\t}\n-\t\treturn `${RuntimeGlobals.baseURI} = (document && document.baseURI) || self.location.href;`;\n+\t\treturn `${RuntimeGlobals.baseURI} = (typeof document !== 'undefined' && document.baseURI) || self.location.href;`;\n \t}\n \n \t/**"}, {"role": "assistant", "content": "fix: support web workers loading for jsonp format"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n types/options.d.ts\n\ndiff --git a/types/options.d.ts b/types/options.d.ts\nindex f1db523a..736da7ad 100644\n--- a/types/options.d.ts\n+++ b/types/options.d.ts\n@@ -20,7 +20,7 @@ export type Component<\n   | typeof Vue\n   | FunctionalComponentOptions<Props>\n   | ComponentOptions<never, Data, Methods, Computed, Props, SetupBindings>\n-  | DefineComponent<any, any, any, any, any>\n+  | DefineComponent<any, any, any, any, any, any, any, any, any, any, any>\n \n type EsModule<T> = T | { default: T }\n \n@@ -201,9 +201,9 @@ export interface ComponentOptions<\n   directives?: { [key: string]: DirectiveFunction | DirectiveOptions }\n   components?: {\n     [key: string]:\n-      | Component<any, any, any, any>\n+      | {}\n+      | Component<any, any, any, any, any>\n       | AsyncComponent<any, any, any, any>\n-      | DefineComponent<any, any, any, any, any, any, any, any, any, any>\n   }\n   transitions?: { [key: string]: object }\n   filters?: { [key: string]: Function }\ndiff --git a/types/test/v3/define-component-test.tsx b/types/test/v3/define-component-test.tsx\nindex 1b0847a3..dc71b44e 100644\n--- a/types/test/v3/define-component-test.tsx\n+++ b/types/test/v3/define-component-test.tsx\n@@ -1115,3 +1115,26 @@ describe('functional w/ object props', () => {\n   // @ts-expect-error\n   ;<Foo bar={123} />\n })\n+\n+// #12628\n+defineComponent({\n+  components: {\n+    App: defineComponent({})\n+  },\n+  data() {\n+    return {}\n+  },\n+  provide(): any {\n+    return {\n+      fetchData: this.fetchData\n+    }\n+  },\n+  created() {\n+    this.fetchData()\n+  },\n+  methods: {\n+    fetchData() {\n+      throw new Error('Not implemented.')\n+    }\n+  }\n+})"}, {"role": "assistant", "content": "fix(types): fix type inference when using components option"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n packages/jest-schemas/package.json\n\ndiff --git a/packages/jest-schemas/package.json b/packages/jest-schemas/package.json\nindex da96a20e..cd5c414a 100644\n--- a/packages/jest-schemas/package.json\n+++ b/packages/jest-schemas/package.json\n@@ -19,7 +19,7 @@\n     \"./package.json\": \"./package.json\"\n   },\n   \"dependencies\": {\n-    \"@sinclair/typebox\": \"^0.32.1\"\n+    \"@sinclair/typebox\": \"^0.33.0\"\n   },\n   \"engines\": {\n     \"node\": \"^16.10.0 || ^18.12.0 || >=20.0.0\"\ndiff --git a/yarn.lock b/yarn.lock\nindex a185638f..1c1ca317 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -3502,7 +3502,7 @@ __metadata:\n   version: 0.0.0-use.local\n   resolution: \"@jest/schemas@workspace:packages/jest-schemas\"\n   dependencies:\n-    \"@sinclair/typebox\": ^0.32.1\n+    \"@sinclair/typebox\": ^0.33.0\n   languageName: unknown\n   linkType: soft\n \n@@ -5003,10 +5003,10 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"@sinclair/typebox@npm:^0.32.1\":\n-  version: 0.32.35\n-  resolution: \"@sinclair/typebox@npm:0.32.35\"\n-  checksum: 9a5e5697ca5246837696302d9f14bb7139f3f46a039aa1ebed58a4c76c8593753282e64cfd0fb3c6149b35cd09f33ddef948afe85766d8a32da3c6d0a9d49060\n+\"@sinclair/typebox@npm:^0.33.0\":\n+  version: 0.33.0\n+  resolution: \"@sinclair/typebox@npm:0.33.0\"\n+  checksum: 57336b4fa1544ea0d3d8f2ad5a333f64536bb3b168b395cb0ec9a3bb2de0e310adee75ce59f816a9946fe4a0ed7bc93d3774db38b728f3af7250e5bbb439ba43\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "fix(deps): update dependency @sinclair/typebox to ^0.33.0 (#15248)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n build/args/all.gn\n\ndiff --git a/build/args/all.gn b/build/args/all.gn\nindex e0e2e5af..b62e2477 100644\n--- a/build/args/all.gn\n+++ b/build/args/all.gn\n@@ -2,7 +2,7 @@ is_electron_build = true\n root_extra_deps = [ \"//electron\" ]\n \n # Registry of NMVs --> https://github.com/nodejs/node/blob/main/doc/abi_version_registry.json\n-node_module_version = 140\n+node_module_version = 143\n \n v8_promise_internal_field_count = 1\n v8_embedder_string = \"-electron.0\""}, {"role": "assistant", "content": "build: bump NMV to 143 for Electron 40 (#48714)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " docs/en/docs/release-notes.md | 1 +\n 1 file changed, 1 insertion(+)\n\ndiff --git a/docs/en/docs/release-notes.md b/docs/en/docs/release-notes.md\nindex 628eff3..45bc987 100644\n--- a/docs/en/docs/release-notes.md\n+++ b/docs/en/docs/release-notes.md\n@@ -9,6 +9,7 @@ hide:\n \n ### Docs\n \n+* 📝 Add contribution instructions about LLM generated code and comments and automated tools for PRs. PR [#14706](https://github.com/fastapi/fastapi/pull/14706) by [@tiangolo](https://github.com/tiangolo).\n * 📝 Update docs for management tasks. PR [#14705](https://github.com/fastapi/fastapi/pull/14705) by [@tiangolo](https://github.com/tiangolo).\n * 📝 Update docs about managing translations. PR [#14704](https://github.com/fastapi/fastapi/pull/14704) by [@tiangolo](https://github.com/tiangolo).\n * 📝 Update docs for contributing with translations. PR [#14701](https://github.com/fastapi/fastapi/pull/14701) by [@tiangolo](https://github.com/tiangolo).", "output": "docs: add contribution instructions for LLM generated code", "metadata": {"id": "fastapi-a456e92a", "repository": "fastapi", "commit_hash": "a456e92a21d5b94a67d6d0fd070218df09444443"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 10b017094..8fea4cdda 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -12902,9 +12902,9 @@ fsevents@^1.2.7:\n   linkType: hard\n \n \"qs@npm:~6.5.2\":\n-  version: 6.5.2\n-  resolution: \"qs@npm:6.5.2\"\n-  checksum: 24af7b9928ba2141233fba2912876ff100403dba1b08b20c3b490da9ea6c636760445ea2211a079e7dfa882a5cf8f738337b3748c8bdd0f93358fa8881d2db8f\n+  version: 6.5.3\n+  resolution: \"qs@npm:6.5.3\"\n+  checksum: 6f20bf08cabd90c458e50855559539a28d00b2f2e7dddcb66082b16a43188418cb3cb77cbd09268bcef6022935650f0534357b8af9eeb29bf0f27ccb17655692\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "chore(deps): bump qs from 6.5.2 to 6.5.3 (#15492)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n .changeset/brown-apricots-work.md\n\ndiff --git a/.changeset/brown-apricots-work.md b/.changeset/brown-apricots-work.md\nnew file mode 100644\nindex 000000000..0a0dbc447\n--- /dev/null\n+++ b/.changeset/brown-apricots-work.md\n@@ -0,0 +1,5 @@\n+---\n+\"webpack\": patch\n+---\n+\n+Fixed ESM default export handling for `.mjs` files in Module Federation\ndiff --git a/lib/container/RemoteModule.js b/lib/container/RemoteModule.js\nindex 277afdf07..eb7e6e719 100644\n--- a/lib/container/RemoteModule.js\n+++ b/lib/container/RemoteModule.js\n@@ -25,6 +25,8 @@ const RemoteToExternalDependency = require(\"./RemoteToExternalDependency\");\n /** @typedef {import(\"../Module\").NeedBuildCallback} NeedBuildCallback */\n /** @typedef {import(\"../Module\").NeedBuildContext} NeedBuildContext */\n /** @typedef {import(\"../Module\").SourceTypes} SourceTypes */\n+/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n+/** @typedef {import(\"../Module\").ExportsType} ExportsType */\n /** @typedef {import(\"../RequestShortener\")} RequestShortener */\n /** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n /** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n@@ -128,6 +130,19 @@ class RemoteModule extends Module {\n \t\treturn REMOTE_AND_SHARE_INIT_TYPES;\n \t}\n \n+\t/**\n+\t * @param {ModuleGraph} moduleGraph the module graph\n+\t * @param {boolean | undefined} strict the importing module is strict\n+\t * @returns {ExportsType} export type\n+\t * \"namespace\": Exports is already a namespace object. namespace = exports.\n+\t * \"dynamic\": Check at runtime if __esModule is set. When set: namespace = { ...exports, default: exports }. When not set: namespace = { default: exports }.\n+\t * \"default-only\": Provide a namespace object with only default export. namespace = { default: exports }\n+\t * \"default-with-named\": Provide a namespace object with named and default export. namespace = { ...exports, default: exports }\n+\t */\n+\tgetExportsType(moduleGraph, strict) {\n+\t\treturn \"dynamic\";\n+\t}\n+\n \t/**\n \t * @returns {NameForCondition | null} absolute path which should be used for condition matching (usually the resource path)\n \t */\ndiff --git a/lib/sharing/ConsumeSharedModule.js b/lib/sharing/ConsumeSharedModule.js\nindex 577569209..c961c7df8 100644\n--- a/lib/sharing/ConsumeSharedModule.js\n+++ b/lib/sharing/ConsumeSharedModule.js\n@@ -28,6 +28,8 @@ const ConsumeSharedFallbackDependency = require(\"./ConsumeSharedFallbackDependen\n /** @typedef {import(\"../Module\").NeedBuildCallback} NeedBuildCallback */\n /** @typedef {import(\"../Module\").NeedBuildContext} NeedBuildContext */\n /** @typedef {import(\"../Module\").SourceTypes} SourceTypes */\n+/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n+/** @typedef {import(\"../Module\").ExportsType} ExportsType */\n /** @typedef {import(\"../RequestShortener\")} RequestShortener */\n /** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n /** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n@@ -153,6 +155,43 @@ class ConsumeSharedModule extends Module {\n \t\treturn CONSUME_SHARED_TYPES;\n \t}\n \n+\t/**\n+\t * @param {ModuleGraph} moduleGraph the module graph\n+\t * @param {boolean | undefined} strict the importing module is strict\n+\t * @returns {ExportsType} export type\n+\t * \"namespace\": Exports is already a namespace object. namespace = exports.\n+\t * \"dynamic\": Check at runtime if __esModule is set. When set: namespace = { ...exports, default: exports }. When not set: namespace = { default: exports }.\n+\t * \"default-only\": Provide a namespace object with only default export. namespace = { default: exports }\n+\t * \"default-with-named\": Provide a namespace object with named and default export. namespace = { ...exports, default: exports }\n+\t */\n+\tgetExportsType(moduleGraph, strict) {\n+\t\tif (this.options.import) {\n+\t\t\tlet fallbackModule = null;\n+\n+\t\t\tif (this.options.eager) {\n+\t\t\t\tconst dep = this.dependencies[0];\n+\t\t\t\tif (dep) {\n+\t\t\t\t\tfallbackModule = moduleGraph.getModule(dep);\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tconst block = this.blocks[0];\n+\t\t\t\tif (block && block.dependencies.length > 0) {\n+\t\t\t\t\tfallbackModule = moduleGraph.getModule(block.dependencies[0]);\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tif (\n+\t\t\t\tfallbackModule &&\n+\t\t\t\tfallbackModule.buildMeta &&\n+\t\t\t\tfallbackModule.buildMeta.exportsType === \"namespace\"\n+\t\t\t) {\n+\t\t\t\treturn \"namespace\";\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn \"dynamic\";\n+\t}\n+\n \t/**\n \t * @param {string=} type the source type for which the size should be estimated\n \t * @returns {number} the estimated size of the module (must be non-zero)\ndiff --git a/test/configCases/sharing/consume-module-mjs-default-export/index.js b/test/configCases/sharing/consume-module-mjs-default-export/index.js\nnew file mode 100644\nindex 000000000..d1ec424e1\n--- /dev/null\n+++ b/test/configCases/sharing/consume-module-mjs-default-export/index.js\n@@ -0,0 +1,10 @@\n+it(\"should correctly handle default imports in .mjs files from shared modules\", async () => {\n+\tawait __webpack_init_sharing__(\"default\");\n+\n+\tconst { testDefaultImport } = await import(\"./pure-esm-consumer.mjs\");\n+\tconst result = testDefaultImport();\n+\n+\texpect(result.defaultType).toBe(\"function\");\n+\texpect(result.defaultValue).toBe(\"shared default export\");\n+\texpect(result.namedExportValue).toBe(\"shared named export\");\n+});\ndiff --git a/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/index.js b/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/index.js\nnew file mode 100644\nindex 000000000..abb505976\n--- /dev/null\n+++ b/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/index.js\n@@ -0,0 +1,5 @@\n+export default function sharedFunction() {\n+\treturn \"shared default export\";\n+}\n+\n+export const namedExport = \"shared named export\";\ndiff --git a/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/package.json b/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/package.json\nnew file mode 100644\nindex 000000000..5fd777d4c\n--- /dev/null\n+++ b/test/configCases/sharing/consume-module-mjs-default-export/node_modules/shared-esm-pkg/package.json\n@@ -0,0 +1,5 @@\n+{\n+\t\"name\": \"shared-esm-pkg\",\n+\t\"version\": \"1.0.0\",\n+\t\"type\": \"module\"\n+}\ndiff --git a/test/configCases/sharing/consume-module-mjs-default-export/pure-esm-consumer.mjs b/test/configCases/sharing/consume-module-mjs-default-export/pure-esm-consumer.mjs\nnew file mode 100644\nindex 000000000..90916f618\n--- /dev/null\n+++ b/test/configCases/sharing/consume-module-mjs-default-export/pure-esm-consumer.mjs\n@@ -0,0 +1,10 @@\n+import something from \"shared-esm-pkg\";\n+import { namedExport } from \"shared-esm-pkg\";\n+\n+export function testDefaultImport() {\n+\treturn {\n+\t\tdefaultType: typeof something,\n+\t\tdefaultValue: typeof something === \"function\" ? something() : something,\n+\t\tnamedExportValue: namedExport\n+\t};\n+}\ndiff --git a/test/configCases/sharing/consume-module-mjs-default-export/webpack.config.js b/test/configCases/sharing/consume-module-mjs-default-export/webpack.config.js\nnew file mode 100644\nindex 000000000..a479c9ba2\n--- /dev/null\n+++ b/test/configCases/sharing/consume-module-mjs-default-export/webpack.config.js\n@@ -0,0 +1,25 @@\n+\"use strict\";\n+\n+const { ConsumeSharedPlugin, ProvideSharedPlugin } =\n+\trequire(\"../../../../\").sharing;\n+\n+/** @type {import(\"../../../../\").Configuration} */\n+module.exports = {\n+\tmode: \"development\",\n+\tplugins: [\n+\t\tnew ProvideSharedPlugin({\n+\t\t\tprovides: {\n+\t\t\t\t\"shared-esm-pkg\": {\n+\t\t\t\t\tversion: \"1.0.0\"\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}),\n+\t\tnew ConsumeSharedPlugin({\n+\t\t\tconsumes: {\n+\t\t\t\t\"shared-esm-pkg\": {\n+\t\t\t\t\trequiredVersion: \"^1.0.0\"\n+\t\t\t\t}\n+\t\t\t}\n+\t\t})\n+\t]\n+};"}, {"role": "assistant", "content": "fix: ESM default export handling for .mjs files in Module Federation (#20189)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n CHANGELOG.md\n\ndiff --git a/CHANGELOG.md b/CHANGELOG.md\nindex cd34d136..155d2285 100644\n--- a/CHANGELOG.md\n+++ b/CHANGELOG.md\n@@ -85,6 +85,7 @@\n   - [**BREAKING**] `--testPathPattern` is now `--testPathPatterns`\n   - [**BREAKING**] Specifying `testPathPatterns` when programmatically calling `watch` must be specified as `new TestPathPatterns(patterns)`, where `TestPathPatterns` can be imported from `@jest/pattern`\n - `[jest-reporters, jest-runner]` Unhandled errors without stack get correctly logged to console ([#14619](https://github.com/jestjs/jest/pull/14619))\n+- `[jest-util]` Always load `mjs` files with `import` ([#15447](https://github.com/jestjs/jest/pull/15447))\n - `[jest-worker]` Properly handle a circular reference error when worker tries to send an assertion fails where either the expected or actual value is circular ([#15191](https://github.com/jestjs/jest/pull/15191))\n - `[jest-worker]` Properly handle a BigInt when worker tries to send an assertion fails where either the expected or actual value is BigInt ([#15191](https://github.com/jestjs/jest/pull/15191))\n \ndiff --git a/e2e/esm-config/js/jest.config.js b/e2e/esm-config/js/jest.config.js\nindex 22cb6bef..e9a929ae 100644\n--- a/e2e/esm-config/js/jest.config.js\n+++ b/e2e/esm-config/js/jest.config.js\n@@ -5,7 +5,9 @@\n  * LICENSE file in the root directory of this source tree.\n  */\n \n+const displayName = await Promise.resolve('Config from js file');\n+\n export default {\n-  displayName: 'Config from js file',\n+  displayName,\n   testEnvironment: 'node',\n };\ndiff --git a/e2e/esm-config/mjs/jest.config.mjs b/e2e/esm-config/mjs/jest.config.mjs\nindex 4e255c33..a426783b 100644\n--- a/e2e/esm-config/mjs/jest.config.mjs\n+++ b/e2e/esm-config/mjs/jest.config.mjs\n@@ -5,7 +5,9 @@\n  * LICENSE file in the root directory of this source tree.\n  */\n \n+const displayName = await Promise.resolve('Config from mjs file');\n+\n export default {\n-  displayName: 'Config from mjs file',\n+  displayName,\n   testEnvironment: 'node',\n };\ndiff --git a/packages/jest-config/src/__tests__/normalize.test.ts b/packages/jest-config/src/__tests__/normalize.test.ts\nindex 9e9cb86d..0300d94e 100644\n--- a/packages/jest-config/src/__tests__/normalize.test.ts\n+++ b/packages/jest-config/src/__tests__/normalize.test.ts\n@@ -26,6 +26,23 @@ jest\n       ...realFs,\n       statSync: () => ({isDirectory: () => true}),\n     };\n+  })\n+  .mock('jest-util', () => {\n+    const realUtil =\n+      jest.requireActual<typeof import('jest-util')>('jest-util');\n+\n+    return {\n+      ...realUtil,\n+      requireOrImportModule: (filePath: string, interop = true) => {\n+        const result = require(filePath);\n+\n+        if (interop) {\n+          return realUtil.interopRequireDefault(result).default;\n+        }\n+\n+        return result;\n+      },\n+    };\n   });\n \n let root: string;\ndiff --git a/packages/jest-util/src/requireOrImportModule.ts b/packages/jest-util/src/requireOrImportModule.ts\nindex 7124c8de..84ea040a 100644\n--- a/packages/jest-util/src/requireOrImportModule.ts\n+++ b/packages/jest-util/src/requireOrImportModule.ts\n@@ -9,6 +9,39 @@ import {isAbsolute} from 'path';\n import {pathToFileURL} from 'url';\n import interopRequireDefault from './interopRequireDefault';\n \n+async function importModule(\n+  filePath: string,\n+  applyInteropRequireDefault: boolean,\n+) {\n+  try {\n+    const moduleUrl = pathToFileURL(filePath);\n+\n+    // node `import()` supports URL, but TypeScript doesn't know that\n+    const importedModule = await import(\n+      /* webpackIgnore: true */ moduleUrl.href\n+    );\n+\n+    if (!applyInteropRequireDefault) {\n+      return importedModule;\n+    }\n+\n+    if (!importedModule.default) {\n+      throw new Error(\n+        `Jest: Failed to load ESM at ${filePath} - did you use a default export?`,\n+      );\n+    }\n+\n+    return importedModule.default;\n+  } catch (error: any) {\n+    if (error.message === 'Not supported') {\n+      throw new Error(\n+        `Jest: Your version of Node does not support dynamic import - please enable it or use a .cjs file extension for file ${filePath}`,\n+      );\n+    }\n+    throw error;\n+  }\n+}\n+\n export default async function requireOrImportModule<T>(\n   filePath: string,\n   applyInteropRequireDefault = true,\n@@ -19,40 +52,21 @@ export default async function requireOrImportModule<T>(\n     );\n   }\n   try {\n+    if (filePath.endsWith('.mjs')) {\n+      return importModule(filePath, applyInteropRequireDefault);\n+    }\n+\n     const requiredModule = require(filePath);\n     if (!applyInteropRequireDefault) {\n       return requiredModule;\n     }\n     return interopRequireDefault(requiredModule).default;\n   } catch (error: any) {\n-    if (error.code === 'ERR_REQUIRE_ESM') {\n-      try {\n-        const moduleUrl = pathToFileURL(filePath);\n-\n-        // node `import()` supports URL, but TypeScript doesn't know that\n-        const importedModule = await import(\n-          /* webpackIgnore: true */ moduleUrl.href\n-        );\n-\n-        if (!applyInteropRequireDefault) {\n-          return importedModule;\n-        }\n-\n-        if (!importedModule.default) {\n-          throw new Error(\n-            `Jest: Failed to load ESM at ${filePath} - did you use a default export?`,\n-          );\n-        }\n-\n-        return importedModule.default;\n-      } catch (innerError: any) {\n-        if (innerError.message === 'Not supported') {\n-          throw new Error(\n-            `Jest: Your version of Node does not support dynamic import - please enable it or use a .cjs file extension for file ${filePath}`,\n-          );\n-        }\n-        throw innerError;\n-      }\n+    if (\n+      error.code === 'ERR_REQUIRE_ESM' ||\n+      error.code === 'ERR_REQUIRE_ASYNC_MODULE'\n+    ) {\n+      return importModule(filePath, applyInteropRequireDefault);\n     } else {\n       throw error;\n     }\ndiff --git a/yarn.lock b/yarn.lock\nindex cc8fe524..5dbf79e7 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -10555,8 +10555,8 @@ __metadata:\n   linkType: hard\n \n \"express@npm:^4.17.3\":\n-  version: 4.21.1\n-  resolution: \"express@npm:4.21.1\"\n+  version: 4.21.2\n+  resolution: \"express@npm:4.21.2\"\n   dependencies:\n     accepts: ~1.3.8\n     array-flatten: 1.1.1\n@@ -10577,7 +10577,7 @@ __metadata:\n     methods: ~1.1.2\n     on-finished: 2.4.1\n     parseurl: ~1.3.3\n-    path-to-regexp: 0.1.10\n+    path-to-regexp: 0.1.12\n     proxy-addr: ~2.0.7\n     qs: 6.13.0\n     range-parser: ~1.2.1\n@@ -10589,7 +10589,7 @@ __metadata:\n     type-is: ~1.6.18\n     utils-merge: 1.0.1\n     vary: ~1.1.2\n-  checksum: 5ac2b26d8aeddda5564fc0907227d29c100f90c0ead2ead9d474dc5108e8fb306c2de2083c4e3ba326e0906466f2b73417dbac16961f4075ff9f03785fd940fe\n+  checksum: 3aef1d355622732e20b8f3a7c112d4391d44e2131f4f449e1f273a309752a41abfad714e881f177645517cbe29b3ccdc10b35e7e25c13506114244a5b72f549d\n   languageName: node\n   linkType: hard\n \n@@ -16032,11 +16032,11 @@ __metadata:\n   linkType: hard\n \n \"nanoid@npm:^3.3.7\":\n-  version: 3.3.7\n-  resolution: \"nanoid@npm:3.3.7\"\n+  version: 3.3.8\n+  resolution: \"nanoid@npm:3.3.8\"\n   bin:\n     nanoid: bin/nanoid.cjs\n-  checksum: d36c427e530713e4ac6567d488b489a36582ef89da1d6d4e3b87eded11eb10d7042a877958c6f104929809b2ab0bafa17652b076cdf84324aa75b30b722204f2\n+  checksum: dfe0adbc0c77e9655b550c333075f51bb28cfc7568afbf3237249904f9c86c9aaaed1f113f0fddddba75673ee31c758c30c43d4414f014a52a7a626efc5958c9\n   languageName: node\n   linkType: hard\n \n@@ -17047,10 +17047,10 @@ __metadata:\n   languageName: node\n   linkType: hard\n \n-\"path-to-regexp@npm:0.1.10\":\n-  version: 0.1.10\n-  resolution: \"path-to-regexp@npm:0.1.10\"\n-  checksum: ab7a3b7a0b914476d44030340b0a65d69851af2a0f33427df1476100ccb87d409c39e2182837a96b98fb38c4ef2ba6b87bdad62bb70a2c153876b8061760583c\n+\"path-to-regexp@npm:0.1.12\":\n+  version: 0.1.12\n+  resolution: \"path-to-regexp@npm:0.1.12\"\n+  checksum: ab237858bee7b25ecd885189f175ab5b5161e7b712b360d44f5c4516b8d271da3e4bf7bf0a7b9153ecb04c7d90ce8ff5158614e1208819cf62bac2b08452722e\n   languageName: node\n   linkType: hard"}, {"role": "assistant", "content": "fix: always load `.mjs` files via `import` (#15447)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n eslint.config.mts\n\ndiff --git a/eslint.config.mts b/eslint.config.mts\nindex 599fb5f6f..a4569f057 100644\n--- a/eslint.config.mts\n+++ b/eslint.config.mts\n@@ -9,9 +9,7 @@ import pluginN from \"eslint-plugin-n\";\n import configPrettier from \"eslint-config-prettier\";\n import pluginRegexp from \"eslint-plugin-regexp\";\n import pluginUnicorn from \"eslint-plugin-unicorn\";\n-// @ts-expect-error no types\n import pluginBabelDevelopment from \"@babel/eslint-plugin-development\";\n-// @ts-expect-error no types\n import pluginBabelDevelopmentInternal from \"@babel/eslint-plugin-development-internal\";\n import typescriptEslint from \"typescript-eslint\";\n import { commonJS } from \"$repo-utils\";\n@@ -143,8 +141,7 @@ export default defineConfig([\n             \"packages/babel-helpers/src/helpers/applyDecs2305.ts\",\n             \"scripts/repo-utils/index.d.cts\",\n             \"scripts/babel-plugin-bit-decorator/types.d.ts\",\n-            \"eslint/babel-eslint-plugin/types.d.cts\",\n-            \"eslint/babel-eslint-parser/types.d.cts\",\n+            \"eslint/*/types.d.cts\",\n           ],\n         },\n       },\ndiff --git a/eslint/babel-eslint-plugin-development-internal/package.json b/eslint/babel-eslint-plugin-development-internal/package.json\nindex 80c947f16..b355ffdb0 100644\n--- a/eslint/babel-eslint-plugin-development-internal/package.json\n+++ b/eslint/babel-eslint-plugin-development-internal/package.json\n@@ -22,5 +22,12 @@\n   \"devDependencies\": {\n     \"eslint\": \"^9.21.0\"\n   },\n-  \"type\": \"module\"\n+  \"type\": \"module\",\n+  \"exports\": {\n+    \".\": {\n+      \"default\": \"./lib/index.cjs\",\n+      \"types\": \"./types.d.cts\"\n+    },\n+    \"./package.json\": \"./package.json\"\n+  }\n }\ndiff --git a/eslint/babel-eslint-plugin-development-internal/types.d.cts b/eslint/babel-eslint-plugin-development-internal/types.d.cts\nnew file mode 100644\nindex 000000000..ec54ec535\n--- /dev/null\n+++ b/eslint/babel-eslint-plugin-development-internal/types.d.cts\n@@ -0,0 +1,7 @@\n+import type { ESLint, Rule } from \"eslint\";\n+\n+type Rules = \"report-error-message-format\" | \"require-default-import-fallback\";\n+\n+export declare const meta: ESLint.ObjectMetaProperties[\"meta\"];\n+export declare const rules: Record<Rules, Rule.RuleModule>;\n+export declare const rulesConfig: Record<Rules, string>;\ndiff --git a/eslint/babel-eslint-plugin-development/package.json b/eslint/babel-eslint-plugin-development/package.json\nindex 6b354ed94..4c0a56ab8 100644\n--- a/eslint/babel-eslint-plugin-development/package.json\n+++ b/eslint/babel-eslint-plugin-development/package.json\n@@ -11,7 +11,10 @@\n   \"main\": \"./lib/index.cjs\",\n   \"type\": \"module\",\n   \"exports\": {\n-    \".\": \"./lib/index.cjs\",\n+    \".\": {\n+      \"default\": \"./lib/index.cjs\",\n+      \"types\": \"./types.d.cts\"\n+    },\n     \"./package.json\": \"./package.json\"\n   },\n   \"engines\": {\ndiff --git a/eslint/babel-eslint-plugin-development/types.d.cts b/eslint/babel-eslint-plugin-development/types.d.cts\nnew file mode 100644\nindex 000000000..c99de5e35\n--- /dev/null\n+++ b/eslint/babel-eslint-plugin-development/types.d.cts\n@@ -0,0 +1,7 @@\n+import type { ESLint, Rule } from \"eslint\";\n+\n+type Rules = \"no-deprecated-clone\" | \"no-undefined-identifier\" | \"plugin-name\";\n+\n+export declare const meta: ESLint.ObjectMetaProperties[\"meta\"];\n+export declare const rules: Record<Rules, Rule.RuleModule>;\n+export declare const rulesConfig: Record<Rules, string>;"}, {"role": "assistant", "content": "fix: add typings for eslint-plugin-development (#17587)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n docs/.eleventy.js\n\ndiff --git a/docs/.eleventy.js b/docs/.eleventy.js\nindex 355365ac..3e016279 100644\n--- a/docs/.eleventy.js\n+++ b/docs/.eleventy.js\n@@ -219,18 +219,33 @@ module.exports = function (eleventyConfig) {\n \n \t\t\tconst isRuleRemoved = !Object.hasOwn(env.rules_meta, env.title);\n \n-\t\t\t/*\n-\t\t\t * TypeScript isn't yet supported on the playground:\n-\t\t\t * https://github.com/eslint/eslint.org/issues/709\n-\t\t\t */\n-\t\t\tif (isRuleRemoved || isTypeScriptCode) {\n+\t\t\tconst tsLanguageOptions = {\n+\t\t\t\tlanguageOptions: {\n+\t\t\t\t\t...languageOptions,\n+\t\t\t\t\tparser: \"@typescript-eslint/parser\",\n+\t\t\t\t\tparserOptions: {\n+\t\t\t\t\t\tecmaFeatures: {\n+\t\t\t\t\t\t\tjsx: true,\n+\t\t\t\t\t\t},\n+\t\t\t\t\t\tsourceType: \"module\",\n+\t\t\t\t\t},\n+\t\t\t\t},\n+\t\t\t};\n+\n+\t\t\tconst languageOptionsForPlayground = languageOptions\n+\t\t\t\t? { languageOptions }\n+\t\t\t\t: void 0;\n+\n+\t\t\tif (isRuleRemoved) {\n \t\t\t\treturn `<div class=\"${type}\">`;\n \t\t\t}\n \n \t\t\t// See https://github.com/eslint/eslint.org/blob/29e1d8a000592245e4a30c1996e794643e9b263a/src/playground/App.js#L91-L105\n \t\t\tconst state = encodeToBase64(\n \t\t\t\tJSON.stringify({\n-\t\t\t\t\toptions: languageOptions ? { languageOptions } : void 0,\n+\t\t\t\t\toptions: isTypeScriptCode\n+\t\t\t\t\t\t? tsLanguageOptions\n+\t\t\t\t\t\t: languageOptionsForPlayground,\n \t\t\t\t\ttext: code,\n \t\t\t\t}),\n \t\t\t);"}, {"role": "assistant", "content": "docs: playground button for TypeScript code example (#19671)"}]}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n spec/fixtures/api/pdf-reader.mjs\n\ndiff --git a/spec/fixtures/api/pdf-reader.mjs b/spec/fixtures/api/pdf-reader.mjs\nindex 4b21b601..589e9004 100644\n--- a/spec/fixtures/api/pdf-reader.mjs\n+++ b/spec/fixtures/api/pdf-reader.mjs\n@@ -1,7 +1,8 @@\n-import * as pdfjs from 'pdfjs-dist';\n+import { app } from 'electron';\n \n async function getPDFDoc () {\n   try {\n+    const pdfjs = await import('pdfjs-dist');\n     const doc = await pdfjs.getDocument(process.argv[2]).promise;\n     const page = await doc.getPage(1);\n     const { items } = await page.getTextContent();\n@@ -20,4 +21,4 @@ async function getPDFDoc () {\n   }\n }\n \n-getPDFDoc();\n+app.whenReady().then(() => getPDFDoc());"}, {"role": "assistant", "content": "chore: delay load pdfjs-dist for pdf spec (#48888)"}]}
{"instruction": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters", "input": " compiler/rustc_resolve/src/diagnostics.rs    | 4 ++--\n compiler/rustc_resolve/src/imports.rs        | 8 ++++----\n tests/ui/hygiene/cross-crate-redefine.rs     | 2 +-\n tests/ui/hygiene/cross-crate-redefine.stderr | 7 +++----\n 4 files changed, 10 insertions(+), 11 deletions(-)\n\ndiff --git a/compiler/rustc_resolve/src/diagnostics.rs b/compiler/rustc_resolve/src/diagnostics.rs\nindex b80011e8c0c..9f13ba1201f 100644\n--- a/compiler/rustc_resolve/src/diagnostics.rs\n+++ b/compiler/rustc_resolve/src/diagnostics.rs\n@@ -212,12 +212,12 @@ pub(crate) fn report_conflict(\n         &mut self,\n         ident: Ident,\n         ns: Namespace,\n-        new_binding: Decl<'ra>,\n         old_binding: Decl<'ra>,\n+        new_binding: Decl<'ra>,\n     ) {\n         // Error on the second of two conflicting names\n         if old_binding.span.lo() > new_binding.span.lo() {\n-            return self.report_conflict(ident, ns, old_binding, new_binding);\n+            return self.report_conflict(ident, ns, new_binding, old_binding);\n         }\n \n         let container = match old_binding.parent_module.unwrap().kind {\ndiff --git a/compiler/rustc_resolve/src/imports.rs b/compiler/rustc_resolve/src/imports.rs\nindex 7c0cbcf1d52..c3ea408deb8 100644\n--- a/compiler/rustc_resolve/src/imports.rs\n+++ b/compiler/rustc_resolve/src/imports.rs\n@@ -348,8 +348,8 @@ pub(crate) fn new_import_decl(&self, decl: Decl<'ra>, import: Import<'ra>) -> De\n     /// decide which one to keep.\n     fn select_glob_decl(\n         &self,\n-        glob_decl: Decl<'ra>,\n         old_glob_decl: Decl<'ra>,\n+        glob_decl: Decl<'ra>,\n         warn_ambiguity: bool,\n     ) -> Decl<'ra> {\n         assert!(glob_decl.is_glob_import());\n@@ -369,7 +369,7 @@ fn select_glob_decl(\n         // with the re-fetched decls.\n         // This is probably incorrect in corner cases, and the outdated decls still get\n         // propagated to other places and get stuck there, but that's what we have at the moment.\n-        let (deep_decl, old_deep_decl) = remove_same_import(glob_decl, old_glob_decl);\n+        let (old_deep_decl, deep_decl) = remove_same_import(old_glob_decl, glob_decl);\n         if deep_decl != glob_decl {\n             // Some import layers have been removed, need to overwrite.\n             assert_ne!(old_deep_decl, old_glob_decl);\n@@ -436,7 +436,7 @@ pub(crate) fn try_plant_decl_into_local_module(\n                 match (old_decl.is_glob_import(), decl.is_glob_import()) {\n                     (true, true) => {\n                         resolution.glob_decl =\n-                            Some(this.select_glob_decl(decl, old_decl, warn_ambiguity));\n+                            Some(this.select_glob_decl(old_decl, decl, warn_ambiguity));\n                     }\n                     (old_glob @ true, false) | (old_glob @ false, true) => {\n                         let (glob_decl, non_glob_decl) =\n@@ -446,7 +446,7 @@ pub(crate) fn try_plant_decl_into_local_module(\n                             && old_glob_decl != glob_decl\n                         {\n                             resolution.glob_decl =\n-                                Some(this.select_glob_decl(glob_decl, old_glob_decl, false));\n+                                Some(this.select_glob_decl(old_glob_decl, glob_decl, false));\n                         } else {\n                             resolution.glob_decl = Some(glob_decl);\n                         }\ndiff --git a/tests/ui/hygiene/cross-crate-redefine.rs b/tests/ui/hygiene/cross-crate-redefine.rs\nindex e42c5e3de06..a87c933391d 100644\n--- a/tests/ui/hygiene/cross-crate-redefine.rs\n+++ b/tests/ui/hygiene/cross-crate-redefine.rs\n@@ -8,7 +8,7 @@\n use use_by_macro::*;\n \n my_struct!(define);\n-//~^ ERROR the name `MyStruct` is defined multiple times\n my_struct!(define);\n+//~^ ERROR the name `MyStruct` is defined multiple times\n \n fn main() {}\ndiff --git a/tests/ui/hygiene/cross-crate-redefine.stderr b/tests/ui/hygiene/cross-crate-redefine.stderr\nindex c0fd3f4b7eb..8ad7d6d7b08 100644\n--- a/tests/ui/hygiene/cross-crate-redefine.stderr\n+++ b/tests/ui/hygiene/cross-crate-redefine.stderr\n@@ -1,11 +1,10 @@\n error[E0428]: the name `MyStruct` is defined multiple times\n-  --> $DIR/cross-crate-redefine.rs:10:1\n+  --> $DIR/cross-crate-redefine.rs:11:1\n    |\n-LL | my_struct!(define);\n-   | ^^^^^^^^^^^^^^^^^^ `MyStruct` redefined here\n-LL |\n LL | my_struct!(define);\n    | ------------------ previous definition of the type `MyStruct` here\n+LL | my_struct!(define);\n+   | ^^^^^^^^^^^^^^^^^^ `MyStruct` redefined here\n    |\n    = note: `MyStruct` must be defined only once in the type namespace of this module\n    = note: this error originates in the macro `my_struct` (in Nightly builds, run with -Z macro-backtrace for more info)", "output": "refactor(resolve): reorder parameters for consistent old/new ordering", "metadata": {"id": "rust-81ef42d5", "repository": "rust", "commit_hash": "81ef42d5b7c4de7e8fa621fff4dc8f4627a581dc"}}
{"messages": [{"role": "user", "content": "Generate a conventional commit message for the following git diff.\n\nFollow the conventional commit format: type(scope): description\n\nTypes: feat, fix, docs, style, refactor, test, chore, ci, build, perf\n\nRules:\n- Use lowercase for description\n- Use imperative mood (add, fix, update)\n- No period at end\n- Keep under 72 characters\n\n yarn.lock\n\ndiff --git a/yarn.lock b/yarn.lock\nindex 6b0a07a20..ed40add86 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -2389,10 +2389,10 @@ base64-js@^1.3.1:\n   resolved \"https://registry.yarnpkg.com/base64-js/-/base64-js-1.5.1.tgz#1b1b440160a5bf7ad40b650f095963481903930a\"\n   integrity sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==\n \n-baseline-browser-mapping@^2.8.19:\n-  version \"2.8.19\"\n-  resolved \"https://registry.yarnpkg.com/baseline-browser-mapping/-/baseline-browser-mapping-2.8.19.tgz#8d99bb7f06bc6ea5c9c1b961e631a1713069bbe0\"\n-  integrity sha512-zoKGUdu6vb2jd3YOq0nnhEDQVbPcHhco3UImJrv5dSkvxTc2pl2WjOPsjZXDwPDSl5eghIMuY3R6J9NDKF3KcQ==\n+baseline-browser-mapping@^2.8.25:\n+  version \"2.8.25\"\n+  resolved \"https://registry.yarnpkg.com/baseline-browser-mapping/-/baseline-browser-mapping-2.8.25.tgz#947dc6f81778e0fa0424a2ab9ea09a3033e71109\"\n+  integrity sha512-2NovHVesVF5TXefsGX1yzx1xgr7+m9JQenvz6FQY3qd+YXkKkYiv+vTCc7OriP9mcDZpTC5mAOYN4ocd29+erA==\n \n before-after-hook@^2.2.0:\n   version \"2.2.3\"\n@@ -2432,14 +2432,14 @@ braces@^3.0.3:\n     fill-range \"^7.1.1\"\n \n browserslist@^4.24.0, browserslist@^4.26.3:\n-  version \"4.27.0\"\n-  resolved \"https://registry.yarnpkg.com/browserslist/-/browserslist-4.27.0.tgz#755654744feae978fbb123718b2f139bc0fa6697\"\n-  integrity sha512-AXVQwdhot1eqLihwasPElhX2tAZiBjWdJ9i/Zcj2S6QYIjkx62OKSfnobkriB81C3l4w0rVy3Nt4jaTBltYEpw==\n-  dependencies:\n-    baseline-browser-mapping \"^2.8.19\"\n-    caniuse-lite \"^1.0.30001751\"\n-    electron-to-chromium \"^1.5.238\"\n-    node-releases \"^2.0.26\"\n+  version \"4.28.0\"\n+  resolved \"https://registry.yarnpkg.com/browserslist/-/browserslist-4.28.0.tgz#9cefece0a386a17a3cd3d22ebf67b9deca1b5929\"\n+  integrity sha512-tbydkR/CxfMwelN0vwdP/pLkDwyAASZ+VfWm4EOwlB6SWhx1sYnWLqo8N5j0rAzPfzfRaxt0mM/4wPU/Su84RQ==\n+  dependencies:\n+    baseline-browser-mapping \"^2.8.25\"\n+    caniuse-lite \"^1.0.30001754\"\n+    electron-to-chromium \"^1.5.249\"\n+    node-releases \"^2.0.27\"\n     update-browserslist-db \"^1.1.4\"\n \n bser@2.1.1:\n@@ -2555,10 +2555,10 @@ camelcase@^6.3.0:\n   resolved \"https://registry.yarnpkg.com/camelcase/-/camelcase-6.3.0.tgz#5685b95eb209ac9c0c177467778c9c84df58ba9a\"\n   integrity sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==\n \n-caniuse-lite@^1.0.30001751:\n-  version \"1.0.30001751\"\n-  resolved \"https://registry.yarnpkg.com/caniuse-lite/-/caniuse-lite-1.0.30001751.tgz#dacd5d9f4baeea841641640139d2b2a4df4226ad\"\n-  integrity sha512-A0QJhug0Ly64Ii3eIqHu5X51ebln3k4yTUkY1j8drqpWHVreg/VLijN48cZ1bYPiqOQuqpkIKnzr/Ul8V+p6Cw==\n+caniuse-lite@^1.0.30001754:\n+  version \"1.0.30001754\"\n+  resolved \"https://registry.yarnpkg.com/caniuse-lite/-/caniuse-lite-1.0.30001754.tgz#7758299d9a72cce4e6b038788a15b12b44002759\"\n+  integrity sha512-x6OeBXueoAceOmotzx3PO4Zpt4rzpeIFsSr6AAePTZxSkXiYDUmpypEl7e2+8NCd9bD7bXjqyef8CJYPC1jfxg==\n \n ccount@^2.0.0:\n   version \"2.0.1\"\n@@ -3211,10 +3211,10 @@ eastasianwidth@^0.2.0:\n   resolved \"https://registry.yarnpkg.com/eastasianwidth/-/eastasianwidth-0.2.0.tgz#696ce2ec0aa0e6ea93a397ffcf24aa7840c827cb\"\n   integrity sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==\n \n-electron-to-chromium@^1.5.238:\n-  version \"1.5.239\"\n-  resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.239.tgz#46b24e9f5f22ba6bdfa015aa5d2690700aadeb1f\"\n-  integrity sha512-1y5w0Zsq39MSPmEjHjbizvhYoTaulVtivpxkp5q5kaPmQtsK6/2nvAzGRxNMS9DoYySp9PkW0MAQDwU1m764mg==\n+electron-to-chromium@^1.5.249:\n+  version \"1.5.249\"\n+  resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.249.tgz#e4fc3a3e60bb347361e4e876bb31903a9132a447\"\n+  integrity sha512-5vcfL3BBe++qZ5kuFhD/p8WOM1N9m3nwvJPULJx+4xf2usSlZFJ0qoNYO2fOX4hi3ocuDcmDobtA+5SFr4OmBg==\n \n emittery@^0.13.1:\n   version \"0.13.1\"\n@@ -3560,9 +3560,9 @@ eslint-plugin-import@^2.32.0:\n     tsconfig-paths \"^3.15.0\"\n \n eslint-plugin-jest@^29.0.1:\n-  version \"29.0.1\"\n-  resolved \"https://registry.yarnpkg.com/eslint-plugin-jest/-/eslint-plugin-jest-29.0.1.tgz#0f72a81349409d20742208260c9a6cb9efed4df5\"\n-  integrity sha512-EE44T0OSMCeXhDrrdsbKAhprobKkPtJTbQz5yEktysNpHeDZTAL1SfDTNKmcFfJkY6yrQLtTKZALrD3j/Gpmiw==\n+  version \"29.1.0\"\n+  resolved \"https://registry.yarnpkg.com/eslint-plugin-jest/-/eslint-plugin-jest-29.1.0.tgz#ba59f94bb303fe72417d54232842148f305ab6be\"\n+  integrity sha512-LabxXbASXVjguqL+kBHTPMf3gUeSqwH4fsrEyHTY/MCs42I/p9+ctg09SJpYiD8eGaIsP6GwYr5xW6xWS9XgZg==\n   dependencies:\n     \"@typescript-eslint/utils\" \"^8.0.0\"\n \n@@ -6425,10 +6425,10 @@ node-preload@^0.2.1:\n   dependencies:\n     process-on-spawn \"^1.0.0\"\n \n-node-releases@^2.0.26:\n-  version \"2.0.26\"\n-  resolved \"https://registry.yarnpkg.com/node-releases/-/node-releases-2.0.26.tgz#fdfa272f2718a1309489d18aef4ef5ba7f5dfb52\"\n-  integrity sha512-S2M9YimhSjBSvYnlr5/+umAnPHE++ODwt5e2Ij6FoX45HA/s4vHdkDx1eax2pAPeAOqu4s9b7ppahsyEFdVqQA==\n+node-releases@^2.0.27:\n+  version \"2.0.27\"\n+  resolved \"https://registry.yarnpkg.com/node-releases/-/node-releases-2.0.27.tgz#eedca519205cf20f650f61d56b070db111231e4e\"\n+  integrity sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==\n \n nopt@3.x:\n   version \"3.0.6\"\n@@ -8002,9 +8002,9 @@ thingies@^2.5.0:\n   integrity sha512-s+2Bwztg6PhWUD7XMfeYm5qliDdSiZm7M7n8KjTkIsm3l/2lgVRc2/Gx/v+ZX8lT4FMA+i8aQvhcWylldc+ZNw==\n \n three@^0.181.0:\n-  version \"0.181.0\"\n-  resolved \"https://registry.yarnpkg.com/three/-/three-0.181.0.tgz#3cdd7784803649ce9a564215591f19364fe08473\"\n-  integrity sha512-KGf6EOCOQGshXeleKxpxhbowQwAXR2dLlD93egHtZ9Qmk07Saf8sXDR+7wJb53Z1ORZiatZ4WGST9UsVxhHEbg==\n+  version \"0.181.1\"\n+  resolved \"https://registry.yarnpkg.com/three/-/three-0.181.1.tgz#7c33995f097b8d42eda209b8dd49e2fb648cc53f\"\n+  integrity sha512-bz9xZUQMw3pJbjKy7roiwXWgAp+oVUa+4k5o0oBAQ+IFJuru1xzvtk63h6k72XZanXS/SgoEhV6927Vgazyq2w==\n \n timers-ext@^0.1.7:\n   version \"0.1.8\""}, {"role": "assistant", "content": "chore(deps): bump the dependencies group across 1 directory with 3 updates (#20112)"}]}
